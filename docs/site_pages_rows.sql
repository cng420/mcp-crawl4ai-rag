INSERT INTO "public"."site_pages" ("id", "url", "chunk_number", "title", "summary", "content", "metadata", "embedding", "created_at") VALUES ('1', 'https://ai.pydantic.dev/', '0', 'PydanticAI Documentation Overview', 'This document introduces PydanticAI, a library for data validation and settings management using Python type annotations. It includes sections on installation, getting help, contributing, and troubleshooting, as well as documentation on various features like agents, models, dependencies, and tools.', 'Skip to content 

[ ![logo](img/logo-white.svg) ](. "PydanticAI")

PydanticAI 

Introduction 

Type to start searching

[ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")

[ ![logo](img/logo-white.svg) ](. "PydanticAI") PydanticAI 

[ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")

  * Introduction  [ Introduction  ](.) Table of contents 
    * Why use PydanticAI 
    * Hello World Example 
    * Tools & Dependency Injection Example 
    * Instrumentation with Pydantic Logfire 
    * Next Steps 
  * [ Installation  ](install/)
  * [ Getting Help  ](help/)
  * [ Contributing  ](contributing/)
  * [ Troubleshooting  ](troubleshooting/)
  * Documentation  Documentation 
    * [ Agents  ](agents/)
    * [ Models  ](models/)
    * [ Dependencies  ](dependencies/)
    * [ Function Tools  ](tools/)
    * [ Common Tools  ](common_tools/)
    * [ Results  ](results/)
    * [ Messages and chat history  ](message-history/)
    * [ Testing and Evals  ](testing-evals/)
    * [ Debugging and Monitoring  ](logfire/)
    * [ Multi-agent Applications  ](multi-agent-applications/)
    * [ Graphs  ](graph/)
    * [ Image, Audio & Document Input  ](input/)
    * [ MCP  ](mcp/)

MCP 
      * [ Client  ](mcp/client/)
      * [ Server  ](mcp/server/)
      * [ MCP Run Python  ](mcp/run-python/)
    * [ Command Line Interface (CLI)  ](cli/)
  * [ Examples  ](examples/)

Examples 
    * [ Pydantic Model  ](examples/pydantic-model/)
    * [ Weather agent  ](examples/weather-agent/)
    * [ Bank support  ](examples/bank-support/)
    * [ SQL Generation  ](examples/sql-gen/)
    * [ Flight booking  ](examples/flight-booking/)
    * [ RAG  ](examples/rag/)
    * [ Stream markdown  ](examples/stream-markdown/)
    * [ Stream whales  ](examples/stream-whales/)
    * [ Chat App with FastAPI  ](examples/chat-app/)
    * [ Question Graph  ](examples/question-graph/)
  * API Reference  API Reference 
    * [ pydantic_ai.agent  ](api/agent/)
    * [ pydantic_ai.tools  ](api/tools/)
    * [ pydantic_ai.common_tools  ](api/common_tools/)
    * [ pydantic_ai.result  ](api/result/)
    * [ pydantic_ai.messages  ](api/messages/)
    * [ pydantic_ai.exceptions  ](api/exceptions/)
    * [ pydantic_ai.settings  ](api/settings/)
    * [ pydantic_ai.usage  ](api/usage/)
    * [ pydantic_ai.mcp  ](api/mcp/)
    * [ pydantic_ai.format_as_xml  ](api/format_as_xml/)
    * [ pydantic_ai.models  ](api/models/base/)
    * [ pydantic_ai.models.openai  ](api/models/openai/)
    * [ pydantic_ai.models.anthropic  ](api/models/anthropic/)
    * [ pydantic_ai.models.bedrock  ](api/models/bedrock/)
    * [ pydantic_ai.models.cohere  ](api/models/cohere/)
    * [ pydantic_ai.models.gemini  ](api/models/gemini/)
    * [ pydantic_ai.models.vertexai  ](api/models/vertexai/)
    * [ pydantic_ai.models.groq  ](api/models/groq/)
    * [ pydantic_ai.models.instrumented  ](api/models/instrumented/)
    * [ pydantic_ai.models.mistral  ](api/models/mistral/)
    * [ pydantic_ai.models.test  ](api/models/test/)
    * [ pydantic_ai.models.function  ](api/models/function/)
    * [ pydantic_ai.models.fallback  ](api/models/fallback/)
    * [ pydantic_ai.models.wrapper  ](api/models/wrapper/)
    * [ pydantic_ai.providers  ](api/providers/)
    * [ pydantic_graph  ](api/pydantic_graph/graph/)
    * [ pydantic_graph.nodes  ](api/pydantic_graph/nodes/)
    * [ pydantic_graph.persistence  ](api/pydantic_graph/persistence/)
    * [ pydantic_graph.mermaid  ](api/pydantic_graph/mermaid/)
    * [ pydantic_graph.exceptions  ](api/pydantic_graph/exceptions/)

Table of contents 

  * Why use PydanticAI 
  * Hello World Example 
  * Tools & Dependency Injection Example 
  * Instrumentation with Pydantic Logfire 
  * Next Steps 

# Introduction

![PydanticAI](./img/pydantic-ai-dark.svg#only-dark)

![PydanticAI](./img/pydantic-ai-light.svg#only-light)

_Agent Framework / shim to use Pydantic with LLMs_

[ ![CI](https://github.com/pydantic/pydantic-ai/actions/workflows/ci.yml/badge.svg?event=push) ](https://github.com/pydantic/pydantic-ai/actions/workflows/ci.yml?query=branch%3Amain) [ ![Coverage](https://coverage-badge.samuelcolvin.workers.dev/pydantic/pydantic-ai.svg) ](https://coverage-badge.samuelcolvin.workers.dev/redirect/pydantic/pydantic-ai) [ ![PyPI](https://img.shields.io/pypi/v/pydantic-ai.svg) ](https://pypi.python.org/pypi/pydantic-ai) [ ![versions](https://img.shields.io/pypi/pyversions/pydantic-ai.svg) ](https://github.com/pydantic/pydantic-ai) [ ![license](https://img.shields.io/github/license/pydantic/pydantic-ai.svg) ](https://github.com/pydantic/pydantic-ai/blob/main/LICENSE)

PydanticAI is a Python agent framework designed to make it less painful to build production grade applications with Generative AI. 

FastAPI revolutionized web development by offering an innovative and ergonomic design, built on the foundation of [Pydantic](https://docs.pydantic.dev).', '{"source": "pydantic_ai_docs", "url_path": "/", "chunk_size": 4950, "crawled_at": "2025-03-25T05:14:13.907085+00:00"}', '[-0.018411102,-0.0032481838,0.021701839,-0.0007007886,0.028184023,-0.013801235,-0.037219364,0.026354259,-0.005085039,0.0104253935,0.00667367,-0.073530935,-0.024070602,-0.034666207,0.023162812,0.009014064,-0.026382627,-0.022864943,0.014879235,0.051573783,0.04141789,0.016666446,0.003812006,0.028297497,-0.007822591,-0.02679397,-0.014666472,0.05092131,-0.01304238,-0.03869452,0.035573997,-0.018042313,-0.039403733,0.022836575,0.01651042,-0.006921894,0.011992748,0.022751471,0.0008031808,0.036311574,-0.022283392,-0.04890715,0.051488675,0.013333156,-0.07960178,-0.0003701192,0.0007229514,0.036850575,0.024070602,0.0043226373,-0.081076935,0.0065070055,-0.036538523,0.01731892,-0.033105943,-0.0035779667,-0.013964353,0.023942944,-0.0056772293,-0.018652234,0.02588618,0.0048509995,0.0011223255,0.054382257,-0.049048994,-0.020453628,-0.051006414,0.027900338,-0.043318573,-0.019645128,0.043630626,0.033446364,-0.04862347,-0.068765044,-0.035290312,-0.042751204,-0.013673577,0.074325256,-0.020340156,-0.04933268,-0.023432313,0.03097831,-0.028808128,-0.0066914004,-0.03313431,-0.04153136,-0.035290312,-0.011106235,-0.024184076,-0.007978617,-0.014304774,0.026481917,-0.04036826,0.0012154094,0.053190783,0.02392876,0.014808314,0.043290205,0.011623959,0.02564505,0.03775836,-0.026879076,-0.045361098,0.011701972,0.050609257,-0.017106155,0.033247784,-0.025049312,-0.009226828,0.0016808287,-0.12640966,-0.012588485,-0.005311986,0.019318892,-0.073077045,-0.0016240919,0.0070708278,0.026481917,0.007145295,-0.07511957,-0.041673206,0.0032339995,-0.0009813699,0.0136877615,0.020212498,-0.03599952,0.012857985,-0.051914204,-0.042552624,-0.022765655,0.009723275,0.0069112554,0.021559997,-0.03489315,0.0004204288,0.013943077,-0.028254943,-0.0060176505,-0.047176678,0.026595391,0.03602789,-0.03980089,0.009482143,0.024950024,-0.030269101,0.003065562,-0.02877976,-0.029276207,-0.016907576,0.004439657,0.02814147,-0.000832879,-0.06439631,-0.05642478,-0.048339784,0.025517391,0.018950103,0.05058089,0.014482077,-0.020964261,-0.0155458925,0.06751683,-0.044112887,0.008269394,-0.034808047,-0.00043549953,-0.039488837,-0.023588339,-0.051148254,-0.028439337,-0.019772787,-0.040935624,-0.008858038,0.017758628,0.036254838,-0.022510339,-0.010503407,-0.03353147,-0.036651995,-0.052453205,-0.029219469,0.007545999,-0.063715465,-0.0132125905,-0.018141603,-0.033276152,-0.019304708,0.022269208,-0.01648205,0.060141046,0.024808181,0.047233414,0.022567077,0.028623734,0.014283498,-0.023971312,0.06797073,-0.009936038,0.03009889,0.010524683,-0.00090069725,0.01748913,0.013758683,0.010978578,0.00865946,-0.013198406,0.0064999135,0.0045885914,-0.030183995,-0.027928706,0.027375523,-0.055261675,0.052708518,-0.0061098477,-0.022609629,-0.028027996,-0.009701999,0.028864864,0.017517498,0.03923352,-0.03279389,0.045928467,0.017304735,-0.007957341,-0.016240919,0.0022996147,0.022169918,-0.059800625,0.015489155,0.03443926,0.027559917,0.0067055845,-0.036056258,0.0145955505,0.024396839,-0.028467707,0.014063642,0.0017074241,0.024141522,-0.003405983,0.01668063,-0.014709025,0.0037694534,0.008623999,-0.0053545386,0.0034804503,-0.015276393,-0.025191154,0.04070868,0.027474811,0.045956835,-0.016879208,0.0055212034,0.015659366,-0.031432208,-0.026481917,-0.0040885983,-0.020751497,-0.008702012,0.027645022,-0.0146097345,0.036254838,-0.01402109,-0.026907444,-0.0034964073,-0.035744205,-0.019262156,0.010283551,-0.02955989,-0.003929026,0.056141097,0.027446443,0.052623414,-0.0039219335,-0.03460947,0.003741085,-0.0023545786,0.017872103,0.0022801114,0.027687576,-0.007907696,-0.015971418,0.052368097,0.016623892,-0.0077658542,0.023474865,0.00049467426,-0.029871942,-0.019659312,-0.0071878475,0.0060992097,0.033474732,0.01880826,-0.00667367,0.013950169,0.011276445,0.0702402,0.016992683,0.008453788,0.0035850587,0.056963783,-0.022169918,-0.004971565,-0.016127445,0.023985496,0.01836855,-0.01577284,-0.037162628,0.006350979,-0.016779918,-0.014411156,0.01692176,-0.0039822166,-0.035630733,-0.011985656,-0.00024268295,0.034127206,-0.030496048,0.032850627,-0.02571597,-0.07960178,-0.031517312,0.02958826,-0.03293573,-0.05310568,-0.0030017332,0.06865157,-0.022723103,0.009425406,-0.006191407,0.013134577,-0.010099157,-0.037559785,-0.01692176,-0.018751524,0.0007473305,-0.002320891,0.008304854,-0.010411209,0.052368097,-0.043630626,-0.016552972,-0.07954504,-0.015205472,0.0015549439,0.024567049,0.020850787,0.01577284,0.011503393,0.0059041767,-0.003471585,0.0099714985,0.023134444,0.02625497,-0.025772708,-0.018666418,-0.013914709,-0.040651944,-0.034666207,-0.0008834102,-0.100934826,-0.00034706984,-0.012014025,0.008205565,-0.034382522,-0.002647128,-4.4706576e-06,-0.020453628,-0.008964419,0.0065637426,0.046552572,0.006450269,-0.009482143,-0.016865024,-0.033219416,0.0033031476,-0.022510339,-0.006443177,0.005772973,0.0073686964,0.01870897,0.021361418,0.029985417,0.032283258,0.038609415,0.028453521,0.0095034195,0.007148841,0.004414835,0.07398483,0.05038231,-0.02902089,-0.015574261,0.0024698253,0.0019325984,-0.010914749,0.0077800383,-0.006744591,0.08073652,0.019489102,-0.023616707,0.013921801,-0.0054538283,-0.023744365,-0.027120207,0.005585032,0.082041465,0.033191048,-0.016439497,-0.0005296915,0.045134153,-0.02015576,0.017673524,-0.023971312,-0.008467972,-0.050609257,0.0007889966,0.019148681,0.02238268,0.056765202,-0.0118225375,-0.075176306,-0.029191101,-0.007276499,-0.031035049,0.0767082,0.05789994,-0.028439337,0.007985709,-0.02851026,0.008985696,0.0042020716,0.05682194,-0.02187205,0.0008594744,-0.018340182,-0.022255024,0.040226415,0.022637997,0.02409897,0.008702012,-0.048254676,-0.04553131,0.024808181,-0.025191154,-0.021900417,-0.009198459,-0.046836257,-0.009084986,-0.038382467,0.014106195,-0.006645302,0.006457361,0.01334734,-0.009248104,-0.055318415,0.054013465,-0.018694786,0.06541757,0.011857999,0.049843308,0.0036843482,-0.062467255,0.045729887,-0.02591455,-0.016099077,0.037389573,-0.0033155587,0.014581366,-0.01584376,0.021304682,-0.042013627,-0.019815339,-0.027574101,-0.046410732,-0.008148828,0.020893339,0.029446417,-0.036878943,-0.012106222,0.003138256,0.009553065,0.0052587953,0.028283311,-0.0062126834,0.024708891,-0.030722996,-0.0057481504,-0.013368617,0.010623972,0.0012650541,0.017247997,0.06252399,-0.017645156,-0.009340301,-0.031091785,-0.03316268,0.0033900258,-0.027971258,-0.022013891,0.0011959061,0.008638183,0.006049565,0.036510155,0.0022765654,-0.024964208,0.031148521,-0.008936051,-0.008077906,0.022283392,-0.049417783,-0.0073616044,0.03353147,0.039517205,0.0072516766,0.028978338,-0.010531775,0.033276152,0.0049538347,-0.015744472,0.033247784,-0.03353147,-0.035715837,0.0071098343,0.011510485,0.0013093797,-0.04195689,0.0066204793,-0.025134418,-0.03174426,-0.006602749,0.016226735,0.013709038,0.008241025,-0.074325256,0.017872103,-0.006163039,-0.0065034595,-0.057048887,-0.022155734,-0.012382814,0.003950302,-0.008936051,0.0032836443,-0.015815392,0.01371613,-0.0028811675,-0.0040566837,0.004237532,0.016708998,0.08953072,-0.014063642,0.02385784,-0.023162812,0.03202794,0.0072977752,0.0038474665,-0.013928893,0.016808286,0.0016072481,-0.0003237989,-0.04048173,0.023446497,-0.0005992828,-0.008886406,0.012418275,0.036056258,-0.032481838,-0.020907523,-0.011638143,-0.009950222,0.0023226643,-0.034524363,-0.0039148415,0.009900577,-0.00044281327,0.027574101,-0.017843734,-0.027758496,0.014879235,-0.03046768,-0.025432287,0.007624012,0.0410491,-0.0351201,-0.0006077047,-0.019872077,0.0015709011,0.03866615,0.020396892,-0.0011533535,-0.012127498,-0.022864943,-0.014623919,-0.015645182,-0.0033457002,0.033673313,0.01119134,-0.032169785,0.015276393,0.01790047,-0.045644782,-0.011382828,0.0059502753,-0.01192892,-0.0012260475,-0.023347206,0.015318945,-0.00825521,-0.00832613,-0.001800508,-0.012248064,0.0012588485,-0.05126173,-0.019035207,0.026396813,-0.02106355,0.024552865,0.04530436,-0.049587995,-0.012829617,-0.01540405,0.009829656,-0.00626942,0.011418288,-0.0028244306,-0.00083553855,-0.0329641,-0.030070523,0.016028157,-0.016524604,0.043403678,0.028325865,0.016694814,0.018666418,-0.0018918188,0.0062906966,-0.024467759,0.014680656,-0.01584376,0.022169918,0.054183677,0.002645355,-0.017701892,0.045020677,-0.025701785,-0.01425513,0.02248197,0.023715997,-0.008673644,0.015446603,0.0057516964,0.023645075,0.00802117,0.025730154,0.014347327,-0.0040566837,-0.036339942,-0.0141345635,0.039148416,-0.04802773,0.024950024,0.0062800585,0.0074467096,-0.015758656,0.041786678,0.04138952,0.040793784,-0.0076381965,-0.016269287,0.007028275,0.018169971,-0.00043173184,0.02035434,-0.014311867,-0.022595445,0.008928959,-0.03293573,-0.011446657,0.016467866,-0.018694786,0.0022304668,-0.061559465,0.0074608936,0.043091625,-0.02453868,0.018978471,0.035034996,0.028481891,0.024382655,0.010659433,-0.011432472,-0.005389999,-0.014666472,0.009914761,-0.018184155,0.000475171,0.023276286,-0.010758722,-0.10445251,-0.026666312,0.014177117,0.003601016,0.011992748,-0.034666207,-0.008063722,-0.009333209,-0.0055566635,0.024964208,-0.006350979,-0.032538574,-0.015574261,-0.0032038582,0.01584376,-0.014233854,-0.013255143,-0.0054006376,0.026127312,-0.013935985,-0.011467933,-0.030410944,0.0131913135,-0.024212444,-0.012779972,0.02133305,-0.023091892,-0.008538893,0.03886473,-0.006241052,-0.009326117,0.00085858785,-0.0038687428,0.00035637824,-0.01038284,0.009219736,-0.02524789,-0.049502887,0.024921654,-0.044935573,-0.0052623414,-0.0136948535,0.00045611095,-0.0045141242,0.017801182,-0.03097831,-0.034127206,-0.00032734493,0.06201336,0.005024756,0.0006484843,0.015701918,0.012694866,-0.014240946,-0.0009680722,0.0308081,0.0127586955,-0.007510538,-0.0040424992,-0.026467733,0.004155973,-0.023503233,-0.010652341,-0.017616788,0.02885068,0.017148709,-0.031971205,0.03316268,-0.021687655,-0.020623839,0.0118367225,0.0054148217,-0.010304827,-0.002996414,0.0039751246,0.011418288,-0.027900338,-0.00805663,-0.027474811,0.013779959,-0.002304934,5.7457128e-05,-0.00529071,-0.020893339,-0.006553104,0.02123376,-0.0020726675,-0.01115588,-0.016198367,-0.04155973,-0.019957181,-0.036878943,0.007496354,0.021375602,-0.015574261,0.007680749,-0.003464493,0.011141696,-0.10110504,-0.004340368,-0.01685084,0.009659446,0.023744365,-0.01790047,0.031261995,0.027673392,-0.0065034595,-0.034836415,0.015985603,-0.0014937745,-0.032878995,0.011198432,0.031488944,-0.026935812,0.02426918,-0.011113327,0.03208468,0....', '2025-03-25 05:14:13.610403+00'), ('2', 'https://ai.pydantic.dev/', '1', 'Introduction to PydanticAI', 'PydanticAI aims to enhance GenAI app development by providing a framework that embodies the fast and efficient experience associated with FastAPI. Developed by the Pydantic team, it is model-agnostic and supports various LLMs, integrating smoothly with Pydantic Logfire for advanced debugging and monitoring.', 'Similarly, virtually every agent framework and LLM library in Python uses Pydantic, yet when we began to use LLMs in [Pydantic Logfire](https://pydantic.dev/logfire), we couldn't find anything that gave us the same feeling.

We built PydanticAI with one simple aim: to bring that FastAPI feeling to GenAI app development.

## Why use PydanticAI

  * **Built by the Pydantic Team** : Built by the team behind [Pydantic](https://docs.pydantic.dev/latest/) (the validation layer of the OpenAI SDK, the Anthropic SDK, LangChain, LlamaIndex, AutoGPT, Transformers, CrewAI, Instructor and many more).

  * **Model-agnostic** : Supports OpenAI, Anthropic, Gemini, Deepseek, Ollama, Groq, Cohere, and Mistral, and there is a simple interface to implement support for [other models](models/).

  * **Pydantic Logfire Integration** : Seamlessly [integrates](logfire/) with [Pydantic Logfire](https://pydantic.dev/logfire) for real-time debugging, performance monitoring, and behavior tracking of your LLM-powered applications.

  * **Type-safe** : Designed to make [type checking](agents/#static-type-checking) as powerful and informative as possible for you.

  * **Python-centric Design** : Leverages Python's familiar control flow and agent composition to build your AI-driven projects, making it easy to apply standard Python best practices you'd use in any other (non-AI) project.

  * **Structured Responses** : Harnesses the power of [Pydantic](https://docs.pydantic.dev/latest/) to [validate and structure](results/#structured-result-validation) model outputs, ensuring responses are consistent across runs.

  * **Dependency Injection System** : Offers an optional [dependency injection](dependencies/) system to provide data and services to your agent's [system prompts](agents/#system-prompts), [tools](tools/) and [result validators](results/#result-validators-functions). This is useful for testing and eval-driven iterative development.

  * **Streamed Responses** : Provides the ability to [stream](results/#streamed-results) LLM outputs continuously, with immediate validation, ensuring rapid and accurate results.

  * **Graph Support** : [Pydantic Graph](graph/) provides a powerful way to define graphs using typing hints, this is useful in complex applications where standard control flow can degrade to spaghetti code.

## Hello World Example

Here's a minimal example of PydanticAI:

hello_world.py
    
    
    from pydantic_ai import Agent
    
    agent = Agent(  # (1)!
        'google-gla:gemini-1.5-flash',
        system_prompt='Be concise, reply with one sentence.',  # (2)!
    )
    
    result = agent.run_sync('Where does "hello world" come from?')  # (3)!
    print(result.data)
    """
    The first known use of "hello, world" was in a 1974 textbook about the C programming language.
    """
    

  1. We configure the agent to use [Gemini 1.5's Flash](api/models/gemini/) model, but you can also set the model when running the agent.
  2. Register a static [system prompt](agents/#system-prompts) using a keyword argument to the agent.
  3. [Run the agent](agents/#running-agents) synchronously, conducting a conversation with the LLM.

_(This example is complete, it can be run "as is")_

The exchange should be very short: PydanticAI will send the system prompt and the user query to the LLM, the model will return a text response.

Not very interesting yet, but we can easily add "tools", dynamic system prompts, and structured responses to build more powerful agents.

## Tools & Dependency Injection Example

Here is a concise example using PydanticAI to build a support agent for a bank:', '{"source": "pydantic_ai_docs", "url_path": "/", "chunk_size": 3623, "crawled_at": "2025-03-25T05:14:13.899836+00:00"}', '[-0.025979698,0.016034553,0.010217706,-0.0018813342,0.025833445,-0.016140917,-0.025647307,0.04044536,0.023972055,0.0177231,-0.00882831,-0.074189715,-0.019664263,-0.04653477,-0.0085225105,-0.02829314,-0.012916722,0.012803709,0.013315592,0.03589825,0.0485823,0.026910393,0.0048961225,0.028798375,-0.010124636,-0.035499383,-0.011002149,0.054113287,-0.02215055,-0.03938171,0.042599257,-0.01246467,-0.03180319,0.01763003,0.0002324661,0.021645315,0.031723417,0.019345168,0.011966083,0.032122288,0.007412324,-0.043157674,0.017364116,0.026072767,-0.065467775,0.04469997,0.010556745,0.039301936,-0.0025793558,-0.0040285815,-0.060149513,0.043609727,-0.0031560545,-0.011786592,-0.026750844,-0.007964093,-0.033478443,0.024676723,-0.02254942,-0.011460849,-0.0032657436,0.0044739856,-0.009313602,0.051959395,-0.027548583,-0.032866843,-0.048236612,0.02765495,-0.03406345,0.036243938,0.04555089,0.010317423,-0.05983042,-0.0329998,-0.056214,-0.029037695,-0.024703315,0.06562732,-0.019026073,-0.034090042,-0.0030929002,0.0016204072,-0.005497751,-0.024530472,-0.0071663545,-0.020116316,-0.014106683,-0.0024729907,-0.040232632,-0.04100378,0.00763835,0.0049692485,0.0021322896,0.0070666373,0.074455634,0.026391862,-0.0011201584,0.008715298,0.03815851,0.038238283,0.04754524,-0.016393535,-0.049353447,-0.003476812,0.07530655,0.0070599895,0.0189463,-0.017244456,-0.031138409,-0.0046302094,-0.10434425,-0.008116993,0.0022070776,-0.0003859893,-0.056692645,0.019052664,0.006169181,-0.013202579,0.0017517017,-0.08413486,-0.02163202,-0.013920544,-0.006833963,0.016978543,0.024011942,-0.03379754,0.02233669,-0.037839416,-0.019305281,-0.013355479,0.003061323,0.02490275,-0.0033554893,-0.010583336,-0.0155825,0.0021106843,-0.02379921,-0.021166673,-0.037094858,0.026697662,0.026631184,-0.045471117,0.01814856,0.027442219,-0.03406345,0.0026225667,-0.02648493,-0.03159046,-0.053368732,-0.003094562,0.032680705,0.0061525614,-0.061425894,-0.050922334,-0.04041877,0.038025554,0.018015604,0.042147204,0.018321404,-0.03693531,-0.0013686208,0.066744156,-0.053873967,0.024118306,-0.047492057,0.0069070896,-0.01723116,-0.014585326,-0.021592133,-0.038690336,-0.0067508654,-0.027016757,-0.003965427,-0.0067674853,0.038397834,-0.019783925,-0.031723417,-0.053182594,-0.022576012,-0.06312774,-0.049911864,-0.022708967,-0.054246247,-0.01090908,-0.0072793677,-0.033744358,-0.012830301,0.017257752,-0.026578002,0.01763003,0.028957922,0.031962737,0.010922375,0.025314914,0.018135265,-0.0121056875,0.077433854,-0.022177141,0.02909088,0.012291827,0.023187611,0.009612754,0.013760996,0.0017733071,0.022841925,0.00026778266,0.009220532,0.00024326882,-0.036430076,-0.02728267,0.02165861,-0.058500852,0.057490382,-0.039461486,-0.057064924,-0.016167508,-0.021100193,0.011194936,0.0026740874,0.037041675,-0.018321404,0.031058636,0.0064450656,-0.025753671,-0.041588787,-0.01610103,0.005145416,-0.06706325,0.007146411,0.022881811,0.026910393,-0.004434099,-0.028053818,-0.02254942,0.029489748,-0.031324547,0.025886627,0.03571211,0.02407842,0.002084093,0.024450697,-0.012936666,0.020914055,-0.013049679,0.0019810516,-0.0019145734,-0.013069622,-0.033957087,0.061000437,0.03095227,0.043503363,-0.025620714,-0.0010146241,-0.009180645,-0.026019584,-0.015928186,-0.027056644,-0.030447034,-0.04041877,0.017550256,-0.0075452807,0.03589825,-0.019052664,0.0075851674,0.00727272,-0.029782252,-0.019052664,-0.010570041,-0.016446717,-0.0042313403,0.039434895,0.038849887,0.027043348,-0.02847928,-0.020568369,-0.035127103,-0.017297639,0.0043543247,0.022296803,0.04852912,-0.015409657,-0.0015049012,0.041934475,0.029888617,-0.03153728,0.025926515,-0.025926515,-0.030819314,-0.013827475,-0.0062256875,0.003822499,0.041322876,0.017736396,-0.014585326,0.034754824,-0.007817841,0.037174635,0.037972372,0.0054611876,0.027495401,0.038264878,-0.00867541,-0.014412483,-0.032521155,0.023187611,0.039009433,0.0022519506,-0.034542095,0.01977063,-0.028771784,0.014837944,0.051374387,0.011387723,-0.013488435,-0.027548583,-0.02471661,0.028692009,-0.036376894,0.032335017,-0.011254766,-0.08078436,-0.0044407467,0.041668564,-0.06403184,-0.05472489,-0.013009792,0.057649933,-0.012551093,-0.023546593,-0.0053149355,0.027016757,-0.016912065,-0.012817005,0.023559889,0.00010989684,0.0062190397,-0.03565893,0.00400199,0.0052418094,0.073976986,-0.047385693,0.029862026,-0.046641134,-0.0014708311,-0.008721946,0.04329063,0.036828946,0.018095378,0.012743879,0.0013146072,-0.0027023405,0.007871024,0.02972907,0.027841087,-0.0025560884,-0.023812506,-0.037866008,-0.033903904,-0.023972055,-0.015024083,-0.074508816,-0.0031527306,-0.011553919,0.021432586,-0.051161654,0.013960431,0.025501054,-0.05493762,-0.0031161676,0.032069106,0.03813192,0.022110663,-0.023559889,0.0071597067,-0.009453206,-0.003633036,-0.029436566,-0.016260577,-0.0047166315,0.0132690575,0.026471635,0.009739063,0.00055426237,0.020435411,0.039115798,0.044992473,0.018188447,-0.006730922,0.00898121,0.033265714,0.05429943,-0.055894908,-0.01836129,-0.000644008,0.009659288,0.017749691,0.0046767443,0.012138927,0.043795865,0.011799888,-0.024955932,-0.013987022,0.0030064785,-0.007192946,-0.018587317,0.0155825,0.07504064,0.035100512,0.0017683213,0.022988176,0.07738067,-0.031191591,0.012145575,-0.058288123,-0.014119979,-0.04842275,-0.002913409,0.0005970577,0.037812825,0.045019064,0.0003313525,-0.074934274,0.009905258,-0.0019328549,-0.014385892,0.067754626,0.04448724,-0.02954293,-0.012757175,-0.023746029,0.010516858,-0.0015248447,0.046268858,-0.028585644,-0.003180984,-0.0152767,-0.02695028,0.04555089,0.011307949,-0.009845427,0.028665418,-0.0449127,-0.027628358,0.05145416,-0.010709645,-0.0010287508,-0.046481587,-0.035233468,0.028532462,-0.02808041,-0.0033438555,-0.018866526,-0.0057071573,0.026578002,-0.01998336,-0.06706325,0.047252733,-0.0010353986,0.05206576,-0.02422467,0.050629828,0.0044075074,-0.036137573,0.024370924,-0.02655141,0.003480136,0.020568369,0.0134485485,0.0068605547,0.038982842,0.007990684,-0.023267385,-0.02050189,0.001283861,-0.028665418,0.006351996,0.021086898,0.02716301,-0.006385235,-0.00272727,0.03813192,0.018401178,0.023214202,0.02026257,-0.015728753,0.032467972,-0.021193264,-0.017443892,-0.006381911,0.012690697,0.008801719,0.0013794235,0.0766893,-0.014691692,0.0067242743,-0.008595637,-0.007079933,-0.027814496,-0.005098881,-0.00234502,0.004188129,-0.010470323,-0.019478125,0.04164197,0.012743879,-0.03470164,0.0164999,-0.008688706,-0.018627204,0.029144062,-0.03595143,-0.0026375242,0.010589984,0.02163202,0.009759006,0.02233669,-0.024437401,0.021964412,-0.0059597744,-0.014678396,0.03754691,0.0052418094,-0.01277047,0.011786592,0.030447034,0.014518848,-0.026604593,0.0057736356,-0.009798893,-0.0164999,0.0064550373,0.01735082,0.017563552,0.026139244,-0.042546075,0.011653636,0.013315592,0.00051603734,-0.065148674,-0.03382413,-0.019876994,0.02652482,0.000984709,-0.0138673615,0.006245631,0.013289001,-0.0026042853,-0.0032241947,0.01084925,0.007445563,0.09056996,0.0064849528,0.011168345,-0.026657775,0.031271365,0.0012605936,-0.01271064,-0.0116270445,-0.00084635115,0.0011841437,-0.012497909,-0.029409975,0.020009952,0.011833128,-0.0008089571,0.011660283,0.046375223,-0.01659297,-0.021047011,0.005444568,-0.016951952,0.011879662,-0.021273037,-0.010337367,0.023200907,-0.011999323,0.009459854,-0.008735241,-0.026192427,0.04142924,-0.016739221,-0.05334214,0.0036064447,0.042173795,-0.026657775,0.002836959,-0.006428446,0.0180289,0.021671906,0.006165857,-0.0070865806,-0.027335852,-0.041136738,0.005966422,-0.041721746,0.0025577503,0.017084908,0.0009248785,-0.03693531,0.01454544,0.018706977,-0.008914732,-0.033584807,0.019970063,0.01011134,-0.02410501,-0.010410492,0.03470164,-0.016606266,-0.009526332,-0.020741211,-0.008416145,0.004344353,-0.052783724,-0.033903904,0.0070466935,-0.027628358,0.028027227,0.053182594,-0.026165836,-0.0069070896,0.005673918,0.002833635,0.0029782252,0.008216711,0.009719119,-0.018627204,-0.016845586,-0.04204084,0.038397834,-0.042758804,0.040711276,0.03470164,0.015103857,0.0059298594,-0.012019266,0.0029765633,-0.02111349,0.008854902,-0.023347158,0.01701843,0.02572708,0.0048595597,-0.033079572,0.019012777,-0.005916564,-0.03015453,0.019597786,0.0305534,-0.04044536,0.015622387,-0.012431432,0.03858397,0.026750844,0.0075053936,0.0025610742,0.0001239196,-0.02266908,0.0069137374,0.022270212,-0.06206409,0.034090042,0.008422793,0.011799888,-0.0018364615,0.031457506,0.02829314,0.011294654,0.012876836,-6.6945664e-05,-0.044779744,-0.008841606,0.010589984,-1.5937899e-06,-0.024437401,0.0048628836,-0.0053116116,-0.024331037,-0.025886627,0.002572708,0.00711982,-0.010078101,-0.043210857,0.00019372176,0.035393015,-0.010058158,0.033957087,0.027814496,0.020036543,0.016366944,4.2198102e-05,-0.019557899,-0.022097368,0.002911747,0.026697662,-0.019903585,-0.0049027703,0.02676414,-0.022748854,-0.08163528,-0.032627523,0.004344353,0.0061027026,-0.0012946638,-0.006544783,-0.029250426,-0.01286354,0.015037378,0.028559053,-0.012930018,-0.030181123,-0.0037759643,-0.007565224,0.031909555,-0.027947454,-0.012172166,-0.0095396275,0.00066395145,-0.018294813,-0.00566727,-0.042333346,0.011932844,-0.030792722,-0.034488913,0.01659297,-0.036110982,-0.010098045,0.04305131,-0.0035299947,-0.0092404755,-0.0013860713,0.0025444548,0.024876159,-0.034861192,-0.008023924,-0.049752317,-0.06387229,0.012571036,-0.06578687,-0.0053913854,-0.010151228,0.021911228,-0.012152223,0.030447034,-0.030659765,-0.0052816966,0.019172326,0.055256717,-0.007598463,0.013947135,-0.016725926,0.011766649,0.008382906,0.024065124,0.036164165,0.023453524,-0.007192946,-0.0059963376,-0.037600093,-0.015861709,-0.028612236,-0.02007643,-0.018574022,0.033239122,-0.0036064447,-0.01814856,0.026591297,-0.02120656,0.005560905,0.00069511315,-0.008682058,-0.0014708311,-0.016233986,0.007073285,0.021472473,-0.040631503,0.0047531943,-0.012777118,0.025567532,-0.021459177,0.018959595,-0.007997332,-0.02379921,-0.007678237,0.03175001,-0.012916722,-0.0026657775,-0.0031244773,-0.040870823,-0.025660602,-0.04469997,0.001245636,-0.003102872,0.00024659274,0.013654631,0.033239122,0.022496236,-0.09833462,-0.011507384,-0.0037560207,-0.009007802,0.009200589,-0.008469328,0.017310934,0.031457506,-0.024517177,-0.024557063,0.00507229,-0.0014832958,-0.015675569,0.0078377845,0.028957922,-0.0467475,0.0031377731,-0.014532144,0.03137773,0.005145416,-0.03052681,-0.006624557,-0.0...', '2025-03-25 05:14:13.680011+00'), ('3', 'https://ai.pydantic.dev/', '2', 'Bank Support Agent Implementation', 'This code snippet defines a bank support agent using Pydantic and dataclasses. It includes a SupportDependencies class for managing dependencies like customer ID and database connection, and a SupportResult class that outlines the format of the support responses including advice, card block status, and risk level. The agent is initialized with OpenAI's GPT-4 model and is designed to provide customer support while assessing the risk of inquiries.', 'bank_support.py
    
    
    from dataclasses import dataclass
    
    from pydantic import BaseModel, Field
    from pydantic_ai import Agent, RunContext
    
    from bank_database import DatabaseConn
    
    
    @dataclass
    class SupportDependencies:  # (3)!
        customer_id: int
        db: DatabaseConn  # (12)!
    
    
    class SupportResult(BaseModel):  # (13)!
        support_advice: str = Field(description='Advice returned to the customer')
        block_card: bool = Field(description="Whether to block the customer's card")
        risk: int = Field(description='Risk level of query', ge=0, le=10)
    
    
    support_agent = Agent(  # (1)!
        'openai:gpt-4o',  # (2)!
        deps_type=SupportDependencies,
        result_type=SupportResult,  # (9)!
        system_prompt=(  # (4)!
            'You are a support agent in our bank, give the '
            'customer support and judge the risk level of their query.'
        ),
    )
    
    
    @support_agent.system_prompt  # (5)!
    async def add_customer_name(ctx: RunContext[SupportDependencies]) -> str:
        customer_name = await ctx.deps.db.customer_name(id=ctx.deps.customer_id)
        return f"The customer's name is {customer_name!r}"
    
    
    @support_agent.tool  # (6)!
    async def customer_balance(
        ctx: RunContext[SupportDependencies], include_pending: bool
    ) -> float:
        """Returns the customer's current account balance."""  # (7)!
        return await ctx.deps.db.customer_balance(
            id=ctx.deps.customer_id,
            include_pending=include_pending,
        )
    
    
    ...  # (11)!
    
    
    async def main():
        deps = SupportDependencies(customer_id=123, db=DatabaseConn())
        result = await support_agent.run('What is my balance?', deps=deps)  # (8)!
        print(result.data)  # (10)!
        """
        support_advice='Hello John, your current account balance, including pending transactions, is $123.45.' block_card=False risk=1
        """
    
        result = await support_agent.run('I just lost my card!', deps=deps)
        print(result.data)
        """
        support_advice="I'm sorry to hear that, John. We are temporarily blocking your card to prevent unauthorized transactions." block_card=True risk=8
        """', '{"source": "pydantic_ai_docs", "url_path": "/", "chunk_size": 2300, "crawled_at": "2025-03-25T05:14:13.198617+00:00"}', '[0.016449915,-0.0026220006,0.06603601,0.0119888205,0.025053032,0.008313588,0.026565667,0.049302474,0.0061509917,-0.027676508,0.014890009,-0.04233017,-0.0011499873,-0.029590938,0.021058727,0.027865589,-0.036421433,0.043275565,-0.028574636,0.0063873413,0.042897407,0.027889224,0.047742568,-0.0015074657,0.005371039,0.016438097,-0.0036279624,-0.02128326,-0.015504518,-0.051193267,0.04656082,-0.007415461,0.0003670801,0.021271441,-0.0017342133,0.01460639,-0.009879403,0.016119026,0.05152416,-0.008626752,0.002849487,-0.015469065,0.0073740995,0.0056339777,-0.056440223,0.041692026,0.019144297,0.015504518,0.035381496,0.0040386193,-0.0575747,0.03327799,0.00077847566,0.02514757,0.006741865,0.016969884,0.037957706,0.008467215,-0.015764501,-0.017489852,0.023351315,-0.009666689,-0.016757168,-0.01357827,-0.05147689,0.026991095,-0.033396162,0.022594998,-0.017371677,-0.0039204448,0.016603542,0.05043695,-0.008254501,-0.009335799,-0.0125383325,-0.04069936,0.06371979,0.024273079,-0.01940428,-0.051382348,-0.050058793,-0.03505061,-0.050058793,0.04703352,0.06466518,-0.034247022,-0.06868312,-0.0009032977,-0.0022763396,-0.037957706,-0.011238411,-0.01077753,0.024438523,-0.009069907,0.027912859,-0.0031582182,-0.0078822505,-0.041479312,-0.03027635,-0.017206233,-0.0076222667,0.027416524,0.005226275,-0.020609664,0.02277226,0.02481668,0.009767137,-0.013412826,-0.06258531,0.04788438,-0.07104661,0.010228018,0.014003699,0.00059825927,-0.041692026,0.03327799,-0.056156605,-0.0059146425,0.004390189,-0.039730325,-0.033679783,0.015291803,0.010352101,0.0024447385,0.0064641545,0.022264108,-0.013034667,-0.023954006,-0.01815163,-0.0134482775,0.02897643,0.014263683,0.018813409,0.010103934,-0.03271075,-0.005734426,-0.0055217114,0.0026352953,-0.02543119,-0.01582359,-0.0029765246,-0.0049308385,0.0018863633,-0.02547846,-0.025738444,-0.0012467428,0.00045755756,0.0065941466,-0.04535544,0.0091112675,0.036019642,0.030016366,-0.065563306,-0.009560331,0.014771834,-0.0043635997,0.032403495,0.053651303,0.024060363,-0.018447066,0.0059707756,0.0056576123,-0.056109335,-0.043748263,0.0070018494,0.012916492,-0.0693449,-0.024627602,-0.033041637,-0.056865655,0.0040652086,0.044859108,-0.015551787,-0.011551575,0.020231504,-0.009318073,0.009063997,-0.0008139281,-0.02892916,-0.03826496,-0.031056304,-0.038855832,0.013389191,-0.03271075,0.0011064104,-0.025407555,0.015799955,0.022654084,0.019983338,0.0497279,0.032781653,0.01422823,0.016898979,-0.0030429978,-0.04353555,-0.035428766,0.029992733,-0.007380008,-0.017702566,0.016579907,0.008975366,0.0043695085,0.0033679781,0.023386767,-0.022323197,-0.029803652,-0.014807287,-0.0012947513,-0.033088908,0.0042070183,0.02211048,-0.058992796,-0.026872922,-0.018399797,-0.030229082,-0.012762865,0.021330528,0.0067182304,-0.016544454,-0.022914069,0.005855555,0.039541245,0.022216838,-0.009359434,-0.03103267,0.02174414,0.08678748,0.019167932,0.03434156,-0.01782074,0.019108845,-0.0077286237,0.03583056,0.019723354,0.04017939,-0.02123599,0.020727837,0.03457791,-0.00072492776,-0.019853346,0.033987038,0.03923399,0.017371677,0.015882676,-0.005096283,0.010027121,-0.017489852,-0.018092543,0.070810266,0.034932435,0.0069604884,0.0074981833,0.00620417,-0.045946315,-0.027700143,-0.046537187,-0.031836256,0.011622479,0.017135328,-0.022382284,-0.0008907416,-0.0057048826,-0.052233204,-0.031978067,0.011982912,-0.029803652,0.026494762,-0.040675722,-0.06868312,-0.0052705905,0.039446708,0.024698507,0.014854557,-0.0309854,-0.00536513,-0.018683417,-0.017844375,0.053651303,0.03769772,0.052280474,-0.03512151,0.058661908,0.017253503,0.038524944,-0.0006314959,0.003164127,-0.020656932,-0.03195443,0.0049633365,0.02160233,-0.0098084975,0.016414462,0.0006492221,-0.03519242,0.02571481,-0.063152544,0.018860677,0.0146772945,0.024627602,0.033585243,-0.022784077,0.020786924,-0.033136178,-0.016485367,0.026447492,0.0042956495,0.04750622,0.04301558,0.042542882,-0.021897767,-0.013058301,0.029472765,0.035806928,0.0154808825,-0.043984614,0.0041981554,0.03750864,-0.009459883,0.03746137,-0.009199899,-0.05086238,0.021992307,0.048877046,-0.0021877086,0.00984395,0.032356225,0.03817042,0.015575422,-0.0066650514,-0.018789774,-0.018411614,-0.041692026,-0.0013966769,-0.032167148,0.002827329,0.01152203,0.017135328,0.021306893,0.005823057,0.03512151,-0.009554422,0.007935429,-0.010328466,-0.035806928,-0.035476036,0.0025673448,0.043842804,0.04204655,0.027440159,-0.033514336,0.011693384,0.023540394,0.055589367,0.0063577974,-0.002158165,0.04251925,-0.032923464,-0.00228668,-0.033679783,-0.0320017,-0.052280474,0.0037402285,0.0076340837,-0.0064523374,0.031127209,0.017088057,-0.00849085,-0.022689538,0.032970734,-0.019794257,0.013034667,-5.3686384e-05,-0.025502095,0.022547727,-0.009365343,-0.062348958,0.0017696657,0.006700504,0.0024757595,0.016721716,0.056156605,0.021637782,0.015421795,0.017690748,0.088205576,0.036657784,-0.0061569004,0.01754894,0.009631236,0.01273923,0.07652992,-0.088820085,0.015055453,-0.038430404,-0.037295926,0.022275927,0.018423432,0.016319923,0.026211143,0.005288317,0.0251003,-0.013211928,-0.025903888,-0.012668325,-0.005436035,0.022335013,0.034837894,-0.015327255,0.016390827,-0.03942307,0.029780017,-0.038146786,0.011102511,-0.0068895835,-0.0068482226,-0.0665087,-0.042211995,0.0127510475,0.029260049,0.006322345,-0.027652875,-0.055636637,0.019593362,-0.029094605,-0.009867585,0.045946315,-0.00025721456,-0.034956068,0.0048274356,-0.0011145349,0.018872496,0.02095237,-0.026447492,-0.038572215,-0.005356267,0.0016603542,0.012632873,0.02897643,-0.009962125,-0.048971586,0.023434037,-0.019333377,-0.007681354,0.045875408,0.03476699,0.0398485,-0.027038366,-0.04348828,0.038454037,0.0037520458,0.03625599,0.018175265,-0.019605178,-0.010807074,-0.04296831,-0.011888372,0.06693414,0.06140356,0.014866374,0.027865589,0.038454037,0.032498036,-0.021543244,0.026660206,-0.013460095,0.0009712481,-0.022145934,0.032876194,-0.010901614,-0.00089591177,0.033396162,0.005114009,0.00021751526,-0.011640205,-0.012491063,-0.03401067,-0.0075100004,0.020727837,0.013330103,0.051713236,0.00085750496,-0.03027635,-0.045946315,0.032687116,-0.016875343,0.03266348,-0.0016721716,-0.048120726,-0.0066532344,0.0037402285,0.055683907,0.023233142,0.0702903,-0.011226594,0.016343558,-0.01726532,0.029047335,-0.031812623,0.003616145,-0.02062148,0.033018004,0.0127865,-0.012337436,0.006990032,-0.015563604,-0.033088908,-0.017442582,0.008047695,0.0076045403,0.054265812,-0.042188358,0.0005166449,-0.008408128,-0.014275501,0.008366767,-0.011025697,0.009329891,-0.030370891,-0.019723354,-0.0039677145,0.033703417,-0.028007397,0.024462158,0.026518397,0.0049397014,-0.035570577,0.011002062,-0.004050437,0.026352953,-0.012467428,0.033845227,-0.012585603,0.001271855,0.056156605,-0.014748199,0.0011743609,0.02519484,-0.017655296,-0.008573572,0.00021899244,0.0034507005,0.023694022,0.0026559758,-0.008136326,0.016449915,0.01782074,0.034554273,0.03323072,-0.014500032,0.026282048,0.030867225,0.009607601,0.011445217,-0.015610875,0.017277136,-0.010759804,0.0024742822,-0.029803652,0.012361071,-0.0008301771,-0.0061214482,-0.03429429,0.0374141,0.012857405,-0.00989122,0.05440762,0.022098664,-0.010245744,-0.022252291,0.011457034,0.0060505434,0.052942254,-0.0045467704,-0.03093813,0.037910435,0.016828073,-0.020775108,-0.003657506,0.018860677,0.009294438,-0.014665477,-0.04162112,0.019699719,0.016083574,-0.032308955,-0.004895386,0.019345194,0.008171779,0.028338287,-0.018116178,-0.015847223,-0.006505516,0.0027933537,0.027062,-0.00202965,-0.022736806,-0.008313588,0.024533063,0.020727837,0.003760909,0.009773046,-0.020775108,-0.017111693,0.009767137,0.024627602,-0.0009077292,0.038501307,0.04963336,-0.01917975,0.027227445,-0.0019616997,0.0073091034,-0.019073393,-0.013211928,-0.037768625,-0.007834981,-0.025123935,0.039257627,0.0038140877,-0.0051021916,0.010334375,0.031529002,0.02528938,-0.0034831986,-0.0032734384,0.018447066,-0.015764501,0.024107633,0.018789774,0.007994517,-0.046631727,0.0043960977,0.04483547,-0.023315864,-0.0025348468,0.015279985,0.032687116,-0.010671173,0.0037402285,-0.039210357,0.025667539,0.035334226,-0.026376586,-0.013826437,0.0051110545,0.0050844653,-0.039588515,-0.004540862,0.04381917,-0.006133266,-0.038548578,-0.03840677,0.014157326,-0.020846013,0.0073740995,-0.0063341623,0.0061805355,-0.008484942,0.0077286237,0.024745777,-0.067595914,0.031174479,0.018671598,-0.0056812475,0.013460095,-0.0037136392,-0.011569301,-0.024320347,0.0723229,0.026400222,-0.080736935,-0.011327042,0.03457791,0.024509428,-0.03509788,0.025951158,-0.014157326,0.007923611,-0.008272227,0.03994304,0.020101512,-0.014180961,-0.04559179,0.046229932,0.046300836,0.025998428,-0.009359434,0.003979532,0.003760909,0.032498036,0.00051184406,0.02892916,-0.0122428965,0.02183868,-0.009016728,0.007043211,-0.005530575,0.010334375,0.008892644,-0.02398946,-0.009743501,-0.03386886,-0.022004124,-0.02057421,-0.062727116,0.009477609,0.014854557,0.010393462,0.00015501193,-0.023694022,-0.039092183,0.048286173,-0.02248864,0.029803652,-0.014878191,0.015563604,-0.021401433,0.0209051,0.01259742,-0.05700746,-0.038524944,0.020432401,-0.00923535,-0.05748016,0.023315864,-0.0393758,-0.022795895,0.029850923,0.024911221,0.017111693,-0.01133886,0.010623903,-0.022500457,-0.013011032,0.0015983125,-0.013318285,-0.072748326,-0.0060446346,-0.033490703,-0.012656508,0.008207231,-0.031269018,-0.007078663,-0.02052694,-0.0047742566,0.00223941,0.0010524932,0.03410521,-0.055447556,0.037721355,-0.0413375,0.0072204727,0.029803652,-0.006854131,0.0497279,0.0042661056,-0.006458246,-0.0070609367,-0.01348373,0.033892497,-0.021330528,0.013176477,0.004109524,0.038146786,-0.024462158,-0.011504305,-0.00970805,-0.0042070183,0.01185292,0.020645116,-0.0044079153,-0.027747413,-0.0064287023,0.025171205,0.04793165,-0.048002552,0.0071377503,0.0029189144,0.0290237,-0.032072607,0.01908521,-0.0016869435,0.0059825927,0.008939914,0.02663657,-0.034317926,0.02528938,-0.053745843,-0.046986252,-0.04521363,-0.04074663,-0.024745777,-0.024793047,0.000539172,0.032214414,0.009832133,0.0038229506,-0.026116602,0.0055748904,0.015551787,0.0143582225,0.0359251,-0.001054709,0.00984395,0.048404347,-0.029496398,-0.008041787,-0.008874918,-0.0034093393,-0.0290237,0.034128845,0.004623584,-0.014110056,0.031103574,-0.013389191,0.05166597,-0.018447066,-0.02897643,-0.0109725185,-0.068399504,0.047624394,0.011681567,-0....', '2025-03-25 05:14:13.853241+00'), ('4', 'https://ai.pydantic.dev/', '3', 'Configuring a Support Agent with PydanticAI', 'This section discusses setting up a support agent for a bank using PydanticAI, highlighting the agent's generic dependencies and result types. It details the use of OpenAI's GPT-4o model, the role of the `SupportDependencies` dataclass for data and logic injection, the benefits of type-safe dependency management, and the registration of static system prompts with the agent.', '1. This [agent](agents/) will act as first-tier support in a bank. Agents are generic in the type of dependencies they accept and the type of result they return. In this case, the support agent has type `Agent[SupportDependencies, SupportResult]`.
  2. Here we configure the agent to use [OpenAI's GPT-4o model](api/models/openai/), you can also set the model when running the agent.
  3. The `SupportDependencies` dataclass is used to pass data, connections, and logic into the model that will be needed when running [system prompt](agents/#system-prompts) and [tool](tools/) functions. PydanticAI's system of dependency injection provides a [type-safe](agents/#static-type-checking) way to customise the behavior of your agents, and can be especially useful when running [unit tests](testing-evals/) and evals.
  4. Static [system prompts](agents/#system-prompts) can be registered with the [`system_prompt` keyword argument](api/agent/#pydantic_ai.agent.Agent.__init__) to the agent.
  5. Dynamic [system prompts](agents/#system-prompts) can be registered with the [`@agent.system_prompt`](api/agent/#pydantic_ai.agent.Agent.system_prompt) decorator, and can make use of dependency injection. Dependencies are carried via the [`RunContext`](api/tools/#pydantic_ai.tools.RunContext) argument, which is parameterized with the `deps_type` from above. If the type annotation here is wrong, static type checkers will catch it.
  6. [`tool`](tools/) let you register functions which the LLM may call while responding to a user. Again, dependencies are carried via [`RunContext`](api/tools/#pydantic_ai.tools.RunContext), any other arguments become the tool schema passed to the LLM. Pydantic is used to validate these arguments, and errors are passed back to the LLM so it can retry.
  7. The docstring of a tool is also passed to the LLM as the description of the tool. Parameter descriptions are [extracted](tools/#function-tools-and-schema) from the docstring and added to the parameter schema sent to the LLM.
  8. [Run the agent](agents/#running-agents) asynchronously, conducting a conversation with the LLM until a final response is reached. Even in this fairly simple case, the agent will exchange multiple messages with the LLM as tools are called to retrieve a result.
  9. The response from the agent will, be guaranteed to be a `SupportResult`, if validation fails [reflection](agents/#reflection-and-self-correction) will mean the agent is prompted to try again.
  10. The result will be validated with Pydantic to guarantee it is a `SupportResult`, since the agent is generic, it'll also be typed as a `SupportResult` to aid with static type checking.
  11. In a real use case, you'd add more tools and a longer system prompt to the agent to extend the context it's equipped with and support it can provide.
  12. This is a simple sketch of a database connection, used to keep the example short and readable. In reality, you'd be connecting to an external database (e.g. PostgreSQL) to get information about customers.
  13. This [Pydantic](https://docs.pydantic.dev) model is used to constrain the structured data returned by the agent. From this simple definition, Pydantic builds the JSON Schema that tells the LLM how to return the data, and performs validation to guarantee the data is correct at the end of the run.

Complete `bank_support.py` example

The code included here is incomplete for the sake of brevity (the definition of `DatabaseConn` is missing); you can find the complete `bank_support.py` example [here](examples/bank-support/).

## Instrumentation with Pydantic Logfire

To understand the flow of the above runs, we can watch the agent in action using Pydantic Logfire.

To do this, we need to set up logfire, and add the following to our code:

bank_support_with_logfire.py
    
    
    ...
    from pydantic_ai import Agent, RunContext
    
    from bank_database import DatabaseConn
    
    import logfire
    
    logfire.configure()  # (1)!
    logfire.instrument_asyncpg()  # (2)!
    
    ...
    
    support_agent = Agent(
        'openai:gpt-4o',
        deps_type=SupportDependencies,
        result_type=SupportResult,
        system_prompt=(
            'You are a support agent in our bank, give the '
            'customer support and judge the risk level of their query.'
        ),
        instrument=True,
    )
    

  1. Configure logfire, this will fail if project is not set up.
  2. In our demo, `DatabaseConn` uses [`asyncpg`]() to connect to a PostgreSQL database, so [`logfire.instrument_asyncpg()`](https://magicstack.github.io/asyncpg/current/) is used to log the database queries.

That's enough to get the following view of your agent in action:

See [Monitoring and Performance](logfire/) to learn more.

## Next Steps

To try PydanticAI yourself, follow the instructions [in the examples](examples/).

Read the [docs](agents/) to learn more about building applications with PydanticAI.', '{"source": "pydantic_ai_docs", "url_path": "/", "chunk_size": 4953, "crawled_at": "2025-03-25T05:14:13.897076+00:00"}', '[-0.020373628,0.020373628,0.033575345,-0.027066592,0.006217088,0.0017515302,0.01967363,0.024315722,0.008375416,0.010199094,0.018261353,-0.060568254,-0.00076869305,-0.0559016,0.014503469,0.00772454,-0.030971844,0.048287585,0.007196471,0.036915686,0.054722656,0.025715718,0.031954296,0.037284106,-0.025249053,-0.038659543,-0.017205216,0.036670074,-0.0013408954,-0.045929696,0.020312224,-0.010585936,-0.028245537,-0.00041792647,0.008694713,0.017991178,0.037038494,-0.014601714,0.005394283,0.038291123,0.019292928,-0.023750812,-0.0035706041,-0.0019618366,-0.042736724,0.035343762,0.026329752,0.028073607,-0.018249072,-0.019808717,-0.044971805,0.060470007,-0.021835027,-0.006293842,0.00183903,0.010917514,-0.009707868,0.035147272,-0.024180634,-0.03180693,-0.008326293,0.0100271655,0.006128053,0.018973632,-0.046985835,-0.003954375,-0.07334015,0.031684123,-0.052659504,0.003939024,0.054673534,0.021466607,-0.047305133,-0.024512213,-0.015191186,-0.036645513,0.018973632,0.036571827,0.00086348446,-0.028589394,-0.013164876,-0.011881546,-0.025838524,0.006100422,0.024156073,-0.025863087,-0.05811212,0.000234484,-0.021073626,-0.033354294,0.017794687,0.014184171,0.0033956047,0.017033286,0.07520681,0.01673855,0.0042460407,-0.032249033,0.0005188582,0.037406914,0.058455978,-0.009922779,-0.060470007,-0.026870102,0.06616824,-0.005038144,0.013226279,-0.007202612,-0.054771777,0.0138525935,-0.10246989,0.007982434,0.018826263,0.01858065,-0.052757747,0.010450848,-0.0021967045,-0.028736763,0.027312204,-0.066315606,-0.04138585,-0.016652586,-0.015510484,0.018101703,0.050989334,-0.014049084,0.027140277,-0.036670074,-0.028491149,-0.01544908,-0.004924548,0.034827974,-0.008756116,-0.003288149,-0.0037670948,-2.7391645e-05,-0.026133262,-0.010604356,-0.037922703,0.019231526,0.023124497,-0.040550765,0.0120473355,0.02133152,-0.055066515,0.008676291,-0.014982414,0.0061587547,-0.043350756,-0.019243807,0.024119232,0.0071596294,-0.042712163,-0.053347223,-0.035933234,0.035515692,0.0023839846,0.06675771,0.015780658,-0.015915746,-0.005108758,0.042834967,-0.037750773,0.004930688,-0.038168315,-0.027508697,-0.019059597,-0.0019633716,-0.038880594,-0.037087616,0.00026652886,-0.022412218,-0.0019295999,0.0038561297,0.046420924,-0.018138546,-0.03438587,-0.038463052,-0.008363135,-0.077564694,-0.03585955,-0.045585837,-0.047501624,0.005222354,-0.029670093,-0.027459573,-0.0119245285,-0.004209199,0.0018973632,0.043866545,0.046445485,0.0134227695,-0.02041047,0.017782407,-0.007503488,-0.038905155,0.03787358,-0.014233294,0.032224473,-0.0076447157,0.023149058,0.03458236,0.038389366,0.006508754,0.006840332,-0.010561374,-0.0037548142,0.0017638109,-0.0075464705,-0.022105202,-0.0015396887,-0.050154246,0.05884896,-0.035171833,-0.045880575,-0.012685929,-0.006404368,0.0053482307,0.007896469,0.027115714,0.017880652,0.024512213,-0.008553485,-0.032617453,-0.0027109573,0.024659581,0.030775353,-0.06675771,0.009664886,0.0015519694,0.0046789343,-0.011795581,-0.010229796,0.008467521,0.054575287,-0.042466547,0.010536813,0.017868372,0.020361347,-0.018077143,0.031291142,0.006944718,0.015621009,-0.0038714805,0.011789441,0.0093517285,-0.011255232,-0.023087656,0.046789344,0.028171852,0.041410413,-0.026550803,-0.028024483,-0.010100849,-0.024819229,-0.049073547,-0.020987662,-0.023935022,-0.028196413,-0.0076999785,-0.009327167,0.0038837611,-0.0345578,-0.010892952,0.011887686,-0.021171872,-0.00211381,-0.0067727882,-0.026329752,-0.031880613,0.03234728,0.06690508,0.03696481,-0.024549054,-0.03183149,-0.013570138,-0.015387677,0.030775353,0.019538542,0.025494667,-0.020877136,-0.0061863866,0.030431494,0.040870063,-0.017008726,0.024610458,-0.03256833,-0.027385889,0.000984756,0.03438587,-0.0049920916,0.025494667,-0.0010760935,-0.025347298,0.015006976,-0.022547306,0.048385832,0.016480656,-0.010076288,0.003656569,0.013999961,0.015019257,-0.022891164,-0.026820978,0.039077085,0.022363096,-0.0026940715,0.006128053,0.010469269,-0.045340225,0.009578921,0.036522705,0.025789402,0.0039697257,-0.008940326,0.018163107,0.043645494,-0.008295591,0.039764803,4.2214797e-05,-0.08532608,-0.006048229,0.058652468,-0.012194703,-0.034066573,-0.0034293765,0.025371859,-0.007036823,-0.022056079,-0.00092258514,0.021835027,-0.04082094,0.0009709403,0.024905194,-0.0123236505,-0.0044271806,-0.0024177565,0.030677108,-0.0020554767,0.059880536,-0.07211208,0.030063074,-0.054182306,-0.006576298,-0.025224492,0.06950858,0.020570118,0.024892913,0.001581136,-0.017622758,-0.032764822,0.026182383,0.0078227855,0.042147253,-0.013471892,-0.006109632,-0.055754233,-0.013963119,-0.015596448,-0.008799098,-0.06837876,0.026378874,-0.0067912093,0.010064007,-0.023468357,0.015731536,0.00024695657,-0.045094613,0.009664886,0.0057657734,0.050940208,0.013189437,-0.035147272,0.010389445,-0.039396383,-0.010272779,-0.0297929,-0.030603424,-0.013619261,0.016517498,0.022056079,0.010082428,0.034533236,0.035761304,0.051480558,0.045315664,-0.00084352837,0.0015780658,0.012121019,0.043547247,0.050940208,-0.07191559,-0.0046451627,-0.034434993,-0.019698191,0.030136758,0.013582419,0.012311369,0.066266485,0.0050688456,0.0005453384,-0.025568351,-0.011058741,-0.015068379,-0.015166624,0.052806873,0.08989449,0.021343801,0.002060082,-0.0015389211,0.051627927,-0.028073607,0.0062447195,-0.041975323,-0.0064289295,-0.038020946,-0.02077889,0.007485067,0.034606922,0.038782347,-0.025420982,-0.08876467,0.0032451665,-0.016161358,-0.022792919,0.07623839,0.0136069795,-0.037603404,0.006828051,-0.006121913,0.01821223,0.017450828,0.0069078756,-0.022313973,-0.048557762,-0.020545557,0.0059868256,0.0138525935,-0.0034017449,-0.0069999807,0.033329733,-0.048631445,-0.0076201544,0.055557743,-0.012784176,0.013042069,-0.043743737,-0.042957775,0.023640286,0.008522783,0.009241203,-0.029866584,-0.030136758,0.011734178,-0.012501719,-0.07451909,0.046494607,0.008946466,0.056687564,-0.016505217,0.050547227,0.038168315,-0.050448984,0.029301673,-0.0032052542,0.007663137,0.018924508,0.0051947227,0.027312204,0.0039789365,0.021552572,-0.020275382,-0.042122692,-0.006490333,-0.028663078,-0.043989353,-0.0029934128,0.012514001,0.009222781,0.004031129,0.023259584,-0.028589394,-0.007521909,0.043350756,-0.0037271827,0.010641199,0.00717191,-0.004341216,-0.015522764,0.019808717,0.016505217,0.015277151,0.056441948,-0.012133299,0.012219264,0.0009049317,-0.021491168,-0.025249053,-0.019513981,0.017635038,0.039371822,0.009118396,-0.023971863,0.050694596,-0.017045567,-0.03438587,-0.0069262967,0.002962711,0.0031392458,0.026599927,-0.03676832,0.019096438,0.012514001,0.023640286,0.006766648,-0.00042176418,-0.008891203,-0.0006677613,-0.011992072,-0.008768396,0.017021006,-0.012477159,-0.011599091,0.047034957,0.049491093,-0.0032850786,-0.011789441,-0.010721023,-0.009885938,-0.017070128,0.010954356,0.034484114,0.0020309153,0.005388143,-0.03308412,0.016628023,0.016701708,-0.0003478883,-0.056147214,-0.027140277,-0.012071896,0.023333268,-0.01563329,-0.036006916,0.015129782,0.010678041,0.028589394,0.008792958,0.011255232,0.00040641334,0.055213884,-0.004485514,0.0010876067,-0.013938558,0.018838543,-0.0073315585,-0.031389385,-0.026870102,0.0048692846,-0.041999884,0.017315742,-0.030185882,0.0114640035,-0.0025067914,0.012299089,0.029989392,0.052266523,-0.038315684,-0.031635,0.0004098673,-0.009738569,0.037603404,-0.008854361,-0.02041047,0.035712183,0.0041416553,-0.01801574,-0.025592912,-0.027263083,0.039494626,0.003107009,-0.044357773,0.014110487,0.036915686,-0.0042460407,-0.027336767,0.00053190644,0.0142210135,0.020791171,-0.013140314,-0.021122748,-0.018961351,-0.036277093,-0.0039697257,-0.033870082,0.017168373,0.023566602,0.015412238,-0.025089404,0.00062784913,0.021503448,-0.023959583,-0.011666634,0.035368323,-0.00053919805,0.0043258653,0.016861357,0.03733323,-0.016333288,0.015326274,-0.014110487,-0.01103418,-0.006735946,-0.034631483,-0.048091095,0.012262247,-0.022952568,0.039985854,0.035712183,-0.034877095,0.002499116,0.018985912,0.017377146,0.0011942949,0.008885063,0.024892913,-0.021220993,-0.021417484,-0.033231486,0.03733323,-0.03917533,0.018691177,0.058259487,-0.0059100715,-0.001343198,-0.012078037,0.038192876,-0.017954336,0.013803471,-0.034164816,0.03750516,0.019096438,-0.0058026155,-0.027164837,0.021208713,0.0047679693,-0.019894682,0.024438528,0.033526223,-0.041999884,0.0022888095,-0.020115733,0.043940227,0.027435012,0.0072578746,0.005210073,-0.006109632,-0.030210443,-0.0021936342,0.030038513,-0.06646297,0.045659523,0.010512251,0.015866622,-0.005566213,0.035245515,0.035785865,0.0062539303,0.030726232,-0.010125411,-0.06449807,-0.017499952,0.011028039,0.0009770807,-0.026157822,0.024868352,0.007970153,-0.049589336,-0.019820997,0.034606922,0.015706973,-0.020435032,-0.041041993,0.014319259,0.031119213,-0.014564872,0.025003439,0.019096438,0.013950839,0.024082389,0.017671881,-0.012649088,-0.012956104,0.009112256,0.0074359444,0.016529778,-0.02942448,0.018617492,-0.027852554,-0.08704537,-0.030456057,-0.0029289392,-0.005685949,-0.010199094,-0.035442006,-0.019035036,-0.007245594,-0.012943824,0.028515711,-0.036129724,-0.040231466,0.010868391,-0.038831472,0.021208713,-0.01580522,-0.027435012,-0.017168373,0.004279813,-0.00040909974,-0.028908692,-0.020840293,0.009707868,-0.0074605057,-0.036252532,0.013373647,-0.025936771,-0.019121,0.046519168,-0.003696481,0.004728057,-0.0094745355,0.012292949,0.015399957,-0.012243826,0.011445582,-0.047968287,-0.063368246,0.0076938383,-0.05737528,-0.010008744,-0.0069815596,0.005354371,-0.019550823,0.0038530596,-0.013349086,-0.025642034,0.012458737,0.060666498,-0.028613957,0.013656102,-0.022633271,0.00919822,0.0045377067,-0.009756991,0.041508656,0.014798204,-0.016087675,0.0041416553,-0.019133281,-0.023787653,-0.033992887,-0.0040710415,-0.022350816,0.050350737,-0.012305229,-0.008332433,0.018617492,-0.016063113,0.019771876,0.015915746,0.0052438453,-0.008535064,-0.019084157,0.00028859568,0.036940247,-0.036375336,0.0064412104,-0.013091192,0.015154344,-0.030210443,0.013459612,-0.010555234,-0.024205197,-0.004172357,0.046273556,-0.025028002,-0.012599966,-0.007214892,-0.056540195,-0.047059517,-0.059389308,-0.03126658,0.008762256,-0.0010085498,0.030922722,0.0009103045,0.021392923,-0.078055926,-0.003051746,0.0002884038,0.0035736742,0.009364009,0.0027738959,0.034533236,0.049098108,-0.0097201485,-0.012151721,0.010303481,0.013349086,-0.023591163,-0.009462254,0.014945572,-0.028736...', '2025-03-25 05:14:13.906653+00'), ('5', 'https://ai.pydantic.dev/', '4', 'PydanticAI API Reference Overview', 'This document provides a link to the API Reference for PydanticAI, essential for understanding its interface.', 'Read the [API Reference](api/agent/) to understand PydanticAI's interface.

 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/", "chunk_size": 117, "crawled_at": "2025-03-25T05:14:13.202474+00:00"}', '[-0.031042833,0.0212299,0.011428763,-0.016476762,0.004473022,0.023046236,-0.023907227,0.030476702,0.0033112748,0.009382437,-0.0013976351,-0.06463325,-0.024485152,-0.013669697,-0.027079917,0.0100901,0.0051069707,0.01746749,0.016004985,0.0401481,0.03512369,0.02383646,0.009830623,0.038850717,-0.0012752684,-0.019873546,0.0080437735,0.01972022,-0.007448157,0.0002108247,-0.010850838,-0.024249265,-0.004145728,0.037388213,-0.02117093,-0.012207192,-0.03649184,0.040643465,-0.015403472,0.027528103,-0.016358817,-0.020298144,0.0025977143,0.03337812,-0.07303086,0.030004926,-0.012608202,0.0047855736,-0.012384108,-0.015533211,-0.056707423,0.017833116,-0.034203727,0.021501172,-0.005681947,0.01526194,0.009924978,0.029816216,0.009665502,-0.00030646982,-0.010455726,0.010113689,-0.027197862,0.056660246,-0.06803004,-0.029603917,-0.04576223,0.07534256,-0.056848954,-0.05217838,0.059585255,0.035477523,-0.024555918,-0.027976291,-0.01889461,-0.05217838,-0.012702557,0.076757886,-0.02327033,-0.027457338,-0.018977173,0.012678969,-0.026018422,-0.010060614,0.01206566,-0.024143115,0.021866798,-0.015474238,-0.02345904,-0.006215643,-0.018304892,0.041587017,-0.011363894,0.009824726,0.038685597,-0.0054136245,0.020793509,-0.030358758,-0.0068938206,0.0176562,0.026207132,-0.034274496,-0.045455575,0.063312285,0.029297262,-0.024390796,-0.002543165,-0.029792627,-0.0028291792,0.004614555,-0.109923705,-0.01940177,-0.02781117,-0.00022483054,-0.027905526,0.010898015,-0.0060741105,0.0013187601,0.02007405,-0.06359535,-0.039369673,0.0086334925,0.008875278,0.038874306,0.016736237,-0.016512144,0.04132754,-0.074304655,-0.027740404,-0.027575282,-0.0010194775,-0.024154909,0.00088384206,-0.02055762,0.0013121258,-0.057698153,0.019649452,-0.0024871419,0.003815485,0.0014337554,0.043167464,-0.023529807,-0.009441408,0.031019244,-0.049772322,-0.0018074901,-0.03283558,-0.013374837,0.008468372,0.012962034,0.013964557,0.019354593,-0.05463161,-0.066709064,-0.06552963,0.07553127,0.015627565,0.013940968,0.026773263,-0.018670518,-0.020486854,0.033802718,-0.009612427,-0.0032611487,-0.020593004,0.0070766336,-0.008798614,-0.032953523,-0.008061465,-0.034581147,-0.022715993,-0.0011816503,-0.013563547,-0.004234186,0.023211358,-0.026301488,-0.00733611,-0.0101313805,-0.054537255,-0.06293486,-0.011959511,-0.025263581,-0.040006567,-0.035619054,0.02015661,0.000102924474,-0.0028100132,0.01725519,-0.067133665,0.011322614,0.036704138,0.013186127,0.02219704,0.021984741,-0.0076781474,-0.013587137,0.019767396,-0.05132918,-0.002285163,-0.0009206995,-0.0010128432,-0.008881175,0.02665532,0.06293486,-0.0033024289,-0.038473297,0.032293037,-0.041162416,-0.028094236,-0.012289753,-0.009246801,-0.03920455,0.02299906,-0.020026872,-0.03052388,-0.031656142,-0.042412624,0.04689449,0.010396754,0.007636867,-0.0065989606,0.0028114875,0.03863842,-0.0064692223,-0.07888088,0.0010062088,0.038496885,-0.03745898,0.008020185,0.009736268,-0.0075837923,0.03375554,0.011074931,0.012101043,0.024744628,-0.018953584,0.0059561664,0.001545065,0.01566295,-0.0012575767,-0.013386631,-0.051659424,-0.0130328,0.026207132,-0.019767396,0.015592182,0.038237408,-0.01889461,0.06741673,0.024154909,0.053357817,-0.013103566,0.03533599,-0.009240904,-0.018505396,-0.0037004896,0.017514668,-0.0022261909,-0.018234126,0.018375657,0.02219704,0.03498216,0.030405935,-0.035595465,-0.0061743627,-0.032953523,-0.010149072,-0.009512175,-0.018127976,0.023718517,0.023600573,0.045880172,0.012962034,0.005446059,-0.06392559,0.027056329,0.009488586,0.010379062,0.01622908,0.030806944,-0.01149953,-0.006823054,0.05118765,0.01027881,0.015533211,0.030028515,0.00472955,-0.013410221,0.001391738,0.029202908,0.036774904,0.031656142,0.06043445,-0.025924068,0.016972126,-0.021406816,0.087938964,0.023423657,0.06982278,-0.002941226,0.027693225,-0.028330123,-0.026395842,-0.04613965,-0.025027694,0.025806123,-0.0035471625,-0.028872665,0.0449838,-0.046847314,0.024862573,0.05132918,-0.014719398,-0.04538481,-0.034699094,-0.0015937168,0.042365447,-0.02036891,-0.0056996387,0.0013386632,-0.05986832,-0.0010769751,0.004018938,-0.024768217,-0.037223093,-0.020593004,0.027339393,-0.03071259,0.027079917,-0.038709186,0.033826306,-0.008185306,-0.0057084844,-0.0050332556,-0.014353772,0.016748033,0.00922911,0.01805721,-0.018800257,0.014471715,-0.018281303,-0.03031158,-0.033448886,0.009730371,-0.03651543,0.029415207,-0.026018422,0.032340214,-0.012012585,-6.144831e-06,-0.011375688,-0.00048688712,0.013280482,0.001149953,-0.0330007,-0.010473417,0.0043314896,-0.00011481101,-0.050668694,-0.014790164,-0.06463325,-0.020828892,-0.0016718546,0.022527283,-0.054773144,-0.032363802,0.0035854944,-0.030264402,0.009936773,0.0062392317,0.015521416,-0.02085248,-0.02117093,-0.05057434,-0.0025416908,-0.028424477,-0.025876889,-0.016323434,-0.011157492,-0.019684836,0.042271093,0.024768217,-0.0039599664,0.022609845,0.03198638,0.033566833,-0.0061507737,0.0017942215,0.01486093,0.03297711,0.037317447,-0.0313259,-0.014825547,-0.010638539,-0.023046236,-0.02665532,-0.0020669666,-0.027056329,0.03764769,0.01612293,-0.04675296,-0.021678086,0.062274374,-0.021501172,-0.02566459,0.028471656,0.037624102,0.015898837,-0.010980576,-0.020710947,0.04109165,-0.04234186,0.0156157715,-0.03498216,-0.009706782,-0.041610606,-0.0069468953,0.031019244,0.021807825,0.021725265,-0.013492781,-0.0632651,-0.011464146,0.011965408,-0.022362161,0.054678787,0.028896254,-0.000308497,-0.031019244,-0.005357601,0.058594525,0.086853884,0.0029633404,-0.06798286,0.022739582,-0.00834453,0.018505396,0.032741223,0.0011978677,0.029603917,-0.0025092564,-0.056282826,-0.036067244,0.020675564,-0.011293127,-0.018552573,0.021784237,-0.023105208,0.053546526,-0.008285559,-0.010320091,0.012903062,-0.042058792,0.0149788745,-0.007701736,-0.081805885,0.010903913,-0.03882713,0.054914676,0.038095877,0.049866676,0.0060741105,-0.021701677,0.013056389,0.0022733684,0.0038715082,0.02646661,0.007554306,-0.07194577,0.008963736,0.02135964,-0.030641822,0.024838984,-0.03498216,-0.03821382,-0.03491139,-0.0012701083,-0.007878652,-0.049347725,-0.009889595,-0.010072408,-0.019873546,-0.0028365506,0.009689091,0.0023736209,0.032788403,-0.0058470685,-0.0121246325,-0.010986473,-0.014754781,0.01719622,0.005740919,0.069256656,-0.011299025,0.01959048,-0.011924127,-0.038520474,-0.02762246,-0.023777489,-0.012619996,-0.0059738583,0.010060614,-0.001614357,0.045832995,-0.010956988,-0.006728699,0.0018030673,-0.0074658482,-0.0094060255,0.036609784,-0.002512205,0.009046297,-0.015238351,0.017986443,-0.0059030917,0.0059561664,0.038166642,0.00066527724,-0.022102686,-0.013964557,0.0070176614,-0.030264402,-0.014271211,0.010644436,0.03224586,-0.008881175,-0.02665532,0.0030576955,-0.0029014198,-0.025782535,-0.0056318208,0.024791805,0.010449829,0.015096818,-0.009464997,0.016370611,0.015816275,0.011635165,-0.04748421,-0.009636016,-0.028117824,0.00834453,-0.011711828,-0.01767979,-0.0008904764,0.015592182,-0.02955674,0.019743808,0.014212239,0.0380487,0.048923127,0.04554993,0.034722682,0.0022542027,0.015462444,0.002295483,0.0010474892,-0.057792507,0.025499469,0.0020772868,-0.02762246,-0.022043712,-0.0034793448,-0.019897135,-0.005593489,-0.015521416,0.0060062925,-0.055669516,-0.032694045,-0.0002080604,-0.010780072,0.02684403,-0.046564247,0.025452292,-0.0053104237,0.0054283678,0.008096849,0.017420312,-0.0075837923,0.0069763814,0.00035843885,-0.028872665,0.024390796,0.029651094,0.0110808285,0.014094295,0.0022895858,-0.012384108,0.007813782,0.039747093,0.0011860733,-0.013976351,-0.031373076,-0.033496067,-0.032882757,0.0074953344,0.027127095,0.008238381,-0.05057434,0.04595094,0.019354593,-0.014412744,-0.028990608,0.032363802,-0.0015244248,-2.3024399e-05,-0.0006122025,0.023117002,-0.028094236,0.0029485973,-0.0011197298,-0.009653708,-0.0035294709,-0.022751376,-0.00584412,0.0035294709,-0.03590212,0.038308177,0.05614129,-0.021961153,-0.0044907136,-0.017691584,-0.0012715826,-0.004139831,0.0015642309,0.0113520995,-0.012702557,-0.03451038,-0.023046236,0.013245099,-0.03474627,0.0260656,0.0042253397,0.023966199,0.016429584,-0.012726146,-0.0023868894,-0.035241634,-0.008173511,-0.027929114,-0.0011764903,0.029273674,0.0020935042,0.004511354,0.033213,-0.044960212,-0.022373956,-0.010921604,0.013009211,-0.009836521,-0.0018472963,-0.001545065,0.024225675,-0.00065127143,0.0037034382,-0.008845792,-0.00979524,0.004473022,0.019531509,0.0003217657,-0.022220628,0.015462444,0.02117093,-0.036940027,0.0078019886,0.016700855,0.05831146,0.017101863,0.0031078216,0.018151565,-0.008668876,0.015356295,-0.024178497,0.04557352,-0.028212178,-0.008845792,0.03401502,-0.0051659425,-0.045078155,0.0330007,-0.0057586106,0.002734824,-0.041256774,-0.008733745,0.016677266,-0.04882877,0.005782199,0.041634195,0.029580329,0.01593422,0.0044405875,-0.010821352,-0.016865976,-0.005328115,0.032552514,-0.036232363,0.007283035,0.019142294,0.02993416,-0.027646048,-0.042506978,0.0026124571,0.0044464846,0.0027215553,-0.012572818,-0.016453173,-0.013634314,-0.0073538017,0.0021745905,0.00960653,-0.021536555,0.032410983,0.01236052,0.018871022,5.0402585e-05,0.017833116,-0.023234947,0.017856706,-0.012832295,-0.00035438454,-0.03163255,0.014235828,-0.011753108,-0.026820442,0.050763052,-0.017667996,-0.0043904614,0.0026979665,-0.0036267748,-0.0027230296,-0.03222227,-0.022397544,-0.009541661,0.0045437883,0.022362161,-0.04578582,-0.01668906,0.05463161,-0.06906794,-0.008297353,-0.032033563,0.00051747885,0.0039216345,0.0019962003,0.0017662097,-0.010208044,0.010774175,0.033213,0.005168891,-0.0087691285,0.017750556,0.0067699794,-0.0022645227,-0.01477837,0.036562607,0.002240934,-0.00011481101,-0.016559323,-0.007855063,-0.022244219,-0.0019563944,-0.022090891,-0.0019799832,0.01872949,0.012903062,-0.014613248,0.03222227,-0.0012317766,0.0041545737,-0.010567773,-0.03434526,-0.014731192,-0.009883698,0.0066756243,0.009529866,-0.03127872,0.007029456,-0.038544063,0.0074422597,0.018812051,-0.009069885,-0.007813782,0.010302399,-0.010072408,0.008987324,0.023612367,0.014530688,-0.006203849,0.009535763,-0.02490975,-0.05831146,0.03160896,0.0012627367,-0.02623072,0.010314194,0.0027038637,0.027056329,-0.058594525,0.027952703,-0.006457428,-0.014731192,0.05661307,-0.05000821,0.018800257,0.026348665,-0.03649184,-0.01574551,0.0430967,0.03844971,-0.00916424,-0.03224586,0.012036175,-0.016052164,0.017738761,-0.0143891545,0.040855765,0.014990669,-0.0...', '2025-03-25 05:14:14.004884+00'), ('6', 'https://ai.pydantic.dev/help/', '0', 'Getting Help with PydanticAI', 'This section provides guidance on how to get help with PydanticAI, including resources like Slack for community support and GitHub Issues for reporting problems. It also outlines related topics such as installation, troubleshooting, and contributing to the project.', '](../api/common_tools/)Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Getting Help  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * Getting Help  [ Getting Help  ](./) Table of contents 
                * Slack 
                * GitHub Issues 
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Slack 
              * GitHub Issues 
Getting Help If you need help getting started with PydanticAI or with advanced usage, the following sources may be useful. Slack Join the `#pydantic-ai` channel in the [Pydantic Slack](https://logfire.pydantic.dev/docs/join-slack/) to ask questions, get help, and chat about PydanticAI. There's also channels for Pydantic, Logfire, and FastUI.', '{"source": "pydantic_ai_docs", "url_path": "/help/", "chunk_size": 4908, "crawled_at": "2025-03-25T05:14:13.431742+00:00"}', '[-0.019143242,0.0071418476,0.044522434,-0.011657293,0.009487351,-0.008005611,-0.043258388,0.039634798,-0.01665729,0.006267551,-0.0020751387,-0.063876346,-0.028511211,-0.023426946,0.02360953,0.00811797,-0.02657301,-0.00763342,-0.012099708,0.058651634,0.043820187,0.031516828,0.019438185,0.04115165,-0.005807579,-0.003391851,-0.0027352504,0.044719063,0.0034269632,-0.018061781,0.022345485,-0.018848298,-0.049494337,0.005642551,0.026558965,-0.011882012,-0.008764037,0.02862357,0.005519658,0.013047742,-0.005754911,-0.027556155,0.027120763,0.0047612316,-0.060505565,-0.011804765,0.0019961358,0.021853913,0.010077238,-0.018258411,-0.08640442,0.005263338,-0.033258397,0.024859529,-0.028426941,0.004051963,-0.021025263,-0.003286514,-0.0074087013,-0.010933979,0.010372182,-0.010084261,-0.01745785,0.03452244,-0.026207842,-0.014550549,-0.043848276,0.012640438,-0.04921344,-0.009705048,0.02258425,0.044213444,-0.03528087,-0.06556174,-0.023089867,-0.031011209,0.018764028,0.09741565,-0.021151667,-0.0662359,-0.023117958,0.031910084,-0.017612344,0.00096822245,-0.027317392,-0.036685362,-0.03058986,0.015898863,-0.015983133,-0.034719072,-0.024929753,-0.0030723289,-0.035337046,0.012464876,0.085337006,-0.0028124976,0.024648855,0.024859529,0.020646049,0.042359512,0.01820223,-0.022176947,-0.04699434,-0.00028945727,0.026193798,-0.019016838,0.02693818,-0.034129184,-0.0055407253,-0.012162911,-0.13764033,-0.012858135,-0.005424855,0.012654483,-0.080617905,0.015098302,-0.0051896023,-0.0085112285,0.0036622158,-0.06820219,-0.04730333,0.012247181,0.025028069,0.017837062,0.012310383,-0.018960657,-0.0071242913,-0.038061764,-0.053174112,-0.0010279134,0.026235932,-0.0387921,0.046348274,-0.037359517,-0.01426965,-0.00871488,-0.02676964,0.011411507,-0.036376372,0.026966268,0.028721886,-0.031179748,-0.011608136,0.010772462,-0.039410077,-0.015983133,-0.036601093,-0.03682581,-0.048005577,0.002924857,0.027837055,0.00081767834,-0.030561771,-0.050646022,-0.04884827,0.02233144,0.03536514,0.02463481,0.0017880953,-0.05539321,-0.022261217,0.064831406,-0.02787919,-0.002984548,-0.04542131,-0.015533694,-0.02887638,-0.019058973,-0.03306177,-0.0278511,-0.033539295,-0.034803342,-0.03525278,0.014157291,0.02865166,-0.031067388,-0.015224705,-0.032134805,-0.029606715,-0.04337075,-0.028089862,0.021601105,-0.03646064,-0.029494356,-0.01742976,-0.017471895,-0.009410104,0.009269655,-0.016390435,0.058146015,0.003377806,0.023974698,0.039999966,0.021081442,0.016938187,-0.026221886,0.06741567,-0.021418521,0.013433977,-0.00073253096,-2.8528768e-05,0.016390435,0.035842665,0.0033075814,0.006906595,-0.031432558,0.013335663,0.022064587,-0.020828633,-0.023567395,0.03044941,-0.061123542,0.03511233,0.00023152192,-0.0371348,-0.010639035,-0.048174117,0.00030372164,-0.011882012,0.025421325,-0.032022443,0.0326966,0.018384816,-0.005077243,0.014220493,0.024620766,0.050421305,-0.06915724,0.040280864,0.037696596,0.040168505,0.018511219,-0.019115152,0.0014554061,0.042022437,-0.04499996,0.022963462,-0.0023876384,0.0062148822,-0.008981734,0.029297726,-0.011039316,0.012914315,0.028258402,0.010660103,-0.00026400082,-0.015674144,-0.036853902,0.036264013,0.031123567,0.052471865,-0.0062921294,0.02033706,-0.0004489989,0.0022998576,-0.050112315,-0.007082157,-0.012738753,-0.013693809,-0.0023507704,-0.009585666,0.03264042,-0.026713459,-0.005804068,-0.01432583,-0.02266852,-0.047865126,0.033483118,-0.07297746,-0.02571627,0.040955022,0.031460647,0.073202185,0.003053017,-0.029129189,0.0046839844,-0.018974703,0.0285393,0.019171331,0.005972607,0.0014668176,0.0008536685,0.039410077,0.02674155,-0.008974711,0.021910094,-0.00615168,-0.016643243,-0.0040800525,-0.00043978193,0.00507022,0.024480315,0.017654479,-0.006734545,0.012380607,-0.007219095,0.07741566,0.0043328614,0.022893239,-0.014676954,0.03469098,-0.014550549,0.008160105,-0.0130828535,0.019297736,0.0042134793,0.0023455035,-0.0057233097,0.050365124,-0.04918535,-0.015828637,0.01426965,-0.013167123,-0.029578626,-0.014606729,-0.012577236,0.05567411,-0.005080754,0.046376362,-0.026924133,-0.05943815,-0.03449435,0.04952243,-0.010933979,-0.04491569,0.0030775957,0.04485951,-0.022823013,-0.008363756,-0.028272446,0.034241542,-0.048117936,-0.017851109,0.023089867,-0.014999987,-0.019087061,0.014234538,0.029887615,-0.02554773,0.03314604,-0.04674153,-0.03648873,-0.074550495,-0.011425552,-0.014676954,0.026980313,0.015674144,0.03679772,0.008658701,0.01922751,-0.024227507,0.007331454,0.01717695,0.007731735,-0.010196621,0.0050105294,-0.021755598,-0.05741568,-0.018679759,0.01931178,-0.06646062,-0.0070154434,-0.0036516823,-0.015561784,-0.0017916065,0.0055231694,-0.012296338,-0.028216267,0.0007066356,-0.0052106697,0.034185365,-0.0054494333,-0.0012350761,-0.02759829,-0.041460637,-0.0026580032,-0.016418524,-0.013623583,-0.0008501573,0.02549155,0.04286513,5.6454042e-05,0.01384128,0.011018249,0.05115164,0.023539305,-0.0033988734,-0.0023419922,0.0012341983,0.052499954,0.07359544,-0.016137626,-0.00024381123,-0.0019662904,0.023075823,0.00015712767,0.018117962,0.006267551,0.07511229,-0.0034006292,-0.002284057,0.019101107,-0.031825814,0.024171326,-0.011460664,0.034803342,0.05117973,0.017008413,-0.0041713445,-0.03853929,0.028075818,-0.04901681,0.0014106377,-0.01273173,-0.020786498,-0.06764039,0.018146051,0.028525256,0.024283687,0.031601097,-0.016460659,-0.0742696,-0.018469084,0.0017090926,-0.066797696,0.06106736,0.0557022,-0.046123557,0.016081447,-0.048033666,-0.02130616,-0.0037324405,0.058426917,-0.015997177,-0.0021646752,-0.024325822,-0.00820224,0.009789317,0.021994364,0.023286497,0.02771065,-0.060168486,-0.041039288,0.036179744,-0.026671326,-0.0073946565,-0.002457863,-0.055814557,-0.017036501,-0.02887638,0.005129911,-0.029943794,0.012780888,0.019929757,-0.021867959,-0.04280895,0.05558984,-0.0033602498,0.041713446,0.013040719,0.03721907,0.009262633,-0.023918519,0.028960649,-0.029522447,-0.0092556095,0.008244375,0.0061200787,-0.0050912877,0.013005607,0.031629186,-0.012738753,-0.007780892,-0.048174117,-0.038089853,-0.036853902,0.029662896,0.013806168,-0.018918524,0.0015668877,0.0045751366,-0.012528079,0.009908699,0.024873573,0.027865143,0.08775273,-0.008595498,-0.026615145,-0.009480328,0.011622181,-0.03126402,0.010056171,0.0393539,-0.017050548,-0.0071839825,-0.0018240855,-0.038370755,-0.0021295627,0.018061781,-0.012106731,-0.0045119342,0.0037324405,-0.015477515,0.03280896,0.009220498,-0.0014773512,0.023974698,-0.029803345,-0.008054769,0.031207837,-0.04469097,0.008363756,0.0028756997,0.04126401,0.0043328614,0.027499976,-0.017219085,0.0111235855,0.004747187,-0.013440999,0.029859524,-0.026727505,-0.008518251,-0.006650275,0.006102523,-0.005544237,-0.033089858,-0.0048911474,-0.03511233,-0.015098302,0.013096899,-0.0059445174,0.022261217,-0.014578639,-0.055561747,0.02682582,0.007429769,-0.0018451529,-0.05311793,-0.027233122,0.0032900253,0.012752797,-0.023103911,0.007949431,-0.00070049096,0.010632013,0.0069241514,-0.0079985885,0.014396055,0.031516828,0.069101065,-0.017710658,0.028089862,-0.014606729,0.035646036,0.008827239,-0.0009524219,-0.046039287,0.042584233,0.006527382,0.0037359518,-0.0128511125,0.019859534,0.008033701,-0.0023542817,0.036264013,0.033483118,-0.03303368,-0.039578617,-0.020983128,0.007043533,0.0013781589,-0.029775254,-0.0048946585,0.008237353,-0.0009945567,-0.017331446,-0.016207851,-0.028103909,-0.0035112328,-0.01170645,-0.030505592,0.018103916,0.03275278,-0.03707862,-0.009810384,-0.01964886,0.011320215,0.026306156,-0.0026422027,0.014747178,0.0015396756,-0.012141843,-0.01922751,-0.014339875,0.0035445895,0.036039293,-0.0066572977,-0.03457862,0.015421335,0.006558983,-0.026924133,-0.0048946585,0.0037851091,0.0009726115,0.0036832832,-0.018820208,-0.0004700663,-0.021067398,-0.0050105294,-0.018160097,-0.019705039,-0.006390444,-0.037696596,-0.010491564,0.032078624,-0.017247176,0.038567383,0.04353929,-0.030084243,-0.008251397,0.007928364,0.019115152,0.0071383365,0.006358843,-0.00011082329,0.00029165178,-0.04143255,-0.02028088,0.0005754033,-0.022696609,0.051938158,0.04946625,0.006102523,-0.017879197,0.0096278,0.019073017,-0.017148862,0.0039571594,-0.025154471,0.0385112,0.039634798,0.002087428,-0.009887632,0.045926925,-0.023483125,-0.013117966,0.012345495,0.019943804,0.0025842674,-0.0031249973,0.013827235,0.014873583,0.0042556142,0.023637619,0.00087341917,-0.00014055904,-0.028230313,-0.014150268,0.020393241,-0.058426917,0.039690975,0.022991553,-0.004308283,-0.02455054,0.033005588,0.011608136,0.052134786,0.0050877766,-0.007956454,0.0026773151,0.035533678,0.0057970453,0.011088474,-0.0010542477,-0.014985942,0.0079072965,-0.050702203,-0.008012634,0.0071804714,-0.016558975,-0.006604629,-0.06702241,0.021601105,0.062584214,-0.008588475,0.031769633,0.029381996,0.010112351,0.029803345,0.01726122,-0.033398848,0.019803353,0.0008308455,0.00063816656,0.0023823716,-0.019115152,0.029887615,-0.013707853,-0.11151676,-0.018075828,0.0026562477,0.004494378,-0.00461376,-0.008195218,-0.023398856,0.004571625,2.619709e-06,0.05696624,-0.0236938,-0.039662886,-0.0020066695,-0.015856728,0.017008413,-0.02657301,0.00019739712,-0.0019978916,0.009150273,-0.014150268,-0.006049854,-0.008103926,0.0017011923,-0.010856732,0.0013263682,-0.0027212056,-0.033342667,0.006653786,0.024016833,-0.0107513955,0.017935377,-0.009094093,0.005544237,0.016081447,-0.016081447,0.014845492,-0.01030898,-0.042752773,0.05926961,-0.044213444,-0.010779485,0.00080495013,0.003477876,-0.0043293503,-0.0018627091,-0.01068117,-0.047837038,-0.003813199,0.035898846,-0.010498586,-0.01837077,0.02172751,0.013139034,-0.023469081,-0.008441004,0.026292112,-0.013665718,-0.015224705,0.0349157,-0.012029484,0.0028915002,-0.02241571,0.019143242,-0.026755594,0.02662919,-0.0016494016,-0.01540729,0.011594091,-0.017106727,-0.014592684,-0.013939595,-0.0059480285,-0.022935374,0.009845497,0.0058426913,0.0310393,-0.04758423,-0.019325826,-0.026249977,0.01742976,-0.015070211,-0.011081451,-0.011257012,-0.012212068,-0.021769645,0.00047621096,-0.008862352,-0.001959268,-0.014817403,-0.038904462,-0.020561779,-0.058146015,0.012478922,-0.012324427,-0.024129191,0.00027760686,-0.023806158,-0.001693292,-0.10533699,-0.019550545,-0.016446615,0.017120771,0.029578626,-0.017668523,0.014536504,0.050617933,-0.015646053,-0.020800544,0.008026678,0.0061271014,-0.037808955,0.015940998,0.023244362,0.0006008597,0.042499963,0.003950137,0.01403088...', '2025-03-25 05:14:16.105086+00'), ('7', 'https://ai.pydantic.dev/help/', '1', 'PydanticAI Support and Collaboration Options', 'Users on the Logfire Pro plan can access a private Slack collaboration channel. Additionally, PydanticAI encourages feedback and questions through their GitHub Issues page.', 'If you're on a [Logfire](https://pydantic.dev/logfire) Pro plan, you can also get a dedicated private slack collab channel with us. GitHub Issues The [PydanticAI GitHub Issues](https://github.com/pydantic/pydantic-ai/issues) are a great place to ask questions and give us feedback.  Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/help/", "chunk_size": 323, "crawled_at": "2025-03-25T05:14:16.442280+00:00"}', '[0.010255481,-0.012359708,0.04141341,0.001950429,0.048963457,-0.0077318083,-0.009046076,0.027627582,-0.003837941,0.020888465,0.008836352,-0.03190594,-0.0031441054,0.01282809,-0.011360026,0.014414999,0.021503655,-0.015463617,-0.007948522,0.025362568,0.015072132,0.017211312,0.032521132,0.05209533,-0.010528122,-0.010772799,-0.016903717,0.020538926,-0.007815697,0.03182205,0.05299015,-0.014946299,-0.022132825,0.031178901,-0.0079205595,-0.013226565,-0.0014768033,0.01852558,-0.0015703051,-0.0058373054,-0.0094864955,0.014044487,0.00890626,0.03677153,-0.01862345,-0.022845885,-0.022020973,0.026467111,0.011534795,0.008864315,-0.06946044,-0.02333524,-0.016777884,0.00854973,-0.0023751191,-0.026089609,-0.008172228,0.045579918,-0.021643471,0.0028435017,0.00095424213,-0.030759454,0.0025219256,0.0004828011,-0.019853828,-0.023405148,-0.039819513,0.0059351763,-0.008116301,0.038617097,0.0069418494,0.02662091,-0.03207372,-0.06677598,-0.014988243,-0.012310772,0.007871624,0.083162375,-0.0027351447,-0.03934414,-0.020413091,0.04026692,-0.023209406,0.010570067,-0.05122847,-0.018945027,-0.06163076,0.03492596,-0.03403114,-0.01673594,0.010528122,-0.0047607245,-0.06582523,0.0031441054,0.050753098,0.029277407,0.05726851,0.017686686,0.0024310455,0.021391802,-0.0018088656,-0.037862092,-0.08014236,-0.041665077,0.0032559582,-0.0010870671,0.038225614,0.010919606,0.0043622497,-0.023447093,-0.09020909,-0.008004448,0.01842771,-0.008109311,-0.07661901,-0.021168096,0.009717191,-0.0035705434,-0.0014165078,-0.03509374,-0.04711789,0.018917063,-0.0011753257,0.041748967,0.020105498,-0.04711789,0.012080076,-0.09580172,-0.053046077,0.007417223,-0.02146171,-0.040015254,0.082491264,0.0049739433,-0.040238958,0.004264379,-0.020455036,0.014184303,-0.011024468,-0.03526152,0.014652685,0.00072398316,-0.03134668,-0.006896409,-0.038980618,-0.033611692,-0.03347188,-0.015197966,-0.026956467,0.0022597713,-0.02938926,0.016763903,-0.023740705,0.0030584685,-0.02930537,0.054807752,0.044405468,0.048655864,-0.004295837,-0.036631715,-0.017448999,0.04068637,-0.032381315,0.009626311,0.0011307595,-0.0043203053,-0.0015143788,-0.014596759,-0.038057834,-0.011562758,-0.0589463,-0.018287893,-0.0240483,0.043203052,0.038057834,-0.021154115,0.02645313,-0.012394662,-0.04267175,-0.02199301,-0.037918016,0.01229679,-0.03696727,-0.006885923,-0.024383858,0.003014776,-0.03207372,-0.01595297,-0.021713378,0.027641563,-0.014904354,0.014275183,0.04250397,0.008780426,0.020986337,-0.05592628,0.038141724,0.011017477,-0.05833111,0.0038309502,-0.032521132,0.04186082,0.027935177,-0.013422307,0.025054973,0.020483,0.0020168414,0.0076199556,-0.0077178264,-0.014638703,0.027389895,-0.016190657,0.04784493,0.028885923,0.021475691,-0.044209722,-0.04952272,0.025068955,0.005033365,-0.026886558,-0.043147124,-0.0050158883,0.013555132,-0.013212584,0.013023833,0.06498633,0.06548967,-0.06274929,0.040015254,0.037694313,0.009304735,0.028969813,-0.022230696,-0.023824595,0.046810295,-0.0013308707,-0.028718144,-0.00044741025,0.05514331,-0.006899905,0.015631394,-0.036240228,0.009689228,0.013618049,0.034842074,-0.023726724,-0.025264697,-0.0027316492,0.045384176,0.05718462,0.036352083,-0.01754687,0.02752971,-0.033723548,0.0110803945,-0.056877024,-0.0048585953,-0.033164285,-0.00445313,-0.013226565,0.0026547506,-0.008878297,-0.023936447,0.0011228948,-0.0024887195,-0.018637432,-0.012548459,0.00017957579,-0.052263107,0.043762315,0.033611692,0.036463935,0.028158883,0.016008897,-0.00051862886,0.005655545,0.010388306,-0.0028469972,-0.012569431,-0.008305052,0.0047712107,-0.013037814,-0.010926597,0.017379092,-0.024803305,0.024789324,-0.018371783,-0.02066476,-0.004708294,0.0049389894,-0.037442643,-0.0020115983,-0.022831904,0.033779472,0.026942486,0.020343184,0.05466794,0.018637432,-8.34525e-05,0.026131554,-0.012877026,-0.033024468,-0.028424531,-0.057324436,0.020972354,0.0065398794,0.0010267715,0.025530346,0.02066476,-0.03151446,0.013757865,0.032828726,-0.017197331,0.013897681,-0.01166762,0.0025691134,0.025963776,0.0036491898,0.020958373,-0.020720687,-0.023726724,-0.025460439,0.02636924,-0.057324436,0.0051976484,0.016596124,0.048683826,-0.044768985,0.021853194,-0.0016332221,0.038197648,-0.05136829,-0.017588815,0.012129012,-0.0017573086,-0.029976485,0.07756975,-0.0015869081,-0.014932317,-0.0068614553,-0.056233875,-0.008913251,-0.061518908,-0.0034377186,0.012681284,0.031122975,0.032940578,0.027991103,0.028550366,0.0026599937,-0.06207817,-0.000379687,-0.050641246,-0.013666985,0.015659358,0.0012758182,-0.008682555,-0.053633302,-0.028690182,0.007605974,-0.042448048,0.0040301876,-0.006148395,0.016386399,-0.003820464,0.008752462,-0.01789641,-0.056429617,0.05654147,-0.0065049254,0.066216715,-0.012807118,0.03333206,-0.018204004,-0.04007118,-0.0026617413,0.027669527,0.032968543,0.026313314,0.014401017,0.025236733,0.021671433,-0.018148078,0.007053702,0.006005084,0.032660946,0.0046209088,-0.008668574,-0.02930537,0.018217986,0.071473785,-0.046642516,-0.03020019,-0.008528758,-0.0046453765,-0.016847791,0.008340007,0.007487131,0.04247601,-0.022706069,-0.04141341,-0.0065119164,-0.02885796,0.010632984,4.6969337e-05,0.063476324,0.012611376,0.045663808,0.0128211,-0.027445821,0.030256117,-0.029668892,0.022636162,-0.038169686,0.021657452,-0.044573244,0.012842072,0.03081538,0.023754688,0.052123293,0.0028068002,-0.057548143,0.009297744,-5.88209e-05,0.0048690815,0.055003498,0.010912615,-0.010227518,0.029529076,-0.05332571,-0.035960596,0.0023401652,0.0100457575,-0.0199517,0.0018647918,-0.010528122,-0.043426756,0.008535748,0.019853828,0.028802034,-0.0029151572,-0.005753416,-0.0061414046,0.015211948,-0.017574834,0.008116301,0.018735304,-0.030507786,-0.01122021,0.012366698,0.0039393073,-0.04194471,0.029780744,-0.018665396,-0.008717509,-0.019014936,-0.005155704,0.01184239,0.038421355,0.01496028,0.027865268,-0.007228472,-0.036240228,0.031178901,0.0035320942,-0.022202734,-0.027292024,0.004334287,-0.028564347,0.029053703,-0.0005444074,-0.004561487,-0.0060680015,0.0194204,-0.05648554,-0.018204004,-0.004292342,0.017616779,-0.035485223,-0.004708294,-0.033527806,0.036380045,0.03154242,0.049382906,0.02590785,0.029808708,-0.010625993,-0.014862409,-0.025208771,0.038225614,-0.033695582,0.014051477,0.05324182,-0.016847791,-0.018036226,-0.0030077852,-0.051340323,0.0033223706,0.04409787,-0.02806101,-0.022692088,0.014387036,-0.018637432,0.008074356,0.024523674,0.037778202,-0.02938926,-0.052123293,-0.011856372,0.039735623,-0.0007301001,-0.004107086,0.034897998,-0.0017660471,0.008235144,-0.0028452494,-0.022202734,0.019727996,-0.027865268,-0.02725008,-0.008521766,-0.045384176,-0.024789324,-0.023810614,-0.034170955,0.0074381954,-0.036128376,-0.012695265,-0.014946299,0.0014331109,-0.001870035,-0.007155068,-0.00018361733,-0.01968605,-0.050920878,0.008843343,0.00037094852,-0.0031493485,-0.04594344,0.00044457024,-0.017253257,0.0031231332,-0.01870734,0.026159517,-0.009178901,-0.017784556,-0.048599936,0.007228472,0.018889101,0.013778837,0.050249763,-0.021042263,-0.0017101208,-0.035736892,0.045440104,-0.007113124,0.008619638,-0.057380363,-0.008570703,0.041273594,-0.017323164,-0.0014602002,-0.025502384,0.01496028,0.0011403718,0.042168416,0.01665205,-0.04177693,-0.010381316,-0.0058827456,0.0026774707,0.009738163,-0.030955195,-0.025264697,0.0354293,0.009535431,-0.015281856,-0.015393709,-0.007710836,0.008717509,0.014624722,-0.05066921,0.036715604,0.046083253,-0.0240483,-0.011506832,0.021965045,0.017560853,-0.0022457896,0.0001722573,-0.0014934065,-0.0022982205,-0.013121704,-0.0005103273,0.010695901,-0.0025918335,0.02725008,0.018735304,-0.009164919,0.0071271053,0.016274547,-0.012751192,-0.03534541,-0.029752782,-0.032381315,-0.012205911,0.0006667461,-0.0024537656,0.00881538,0.0079345405,-0.0074731493,-0.045915477,0.013387353,-0.044293612,-0.0015170004,-0.006340642,-0.0016035113,0.0322415,0.020343184,-0.030927233,0.013750874,-0.028033048,-0.0039462983,-0.012408643,0.0016533206,0.036044486,-0.009752145,-0.058219258,-0.066552274,-0.012576422,-0.0017634255,0.052514777,0.021601526,0.012891008,0.012527486,-0.036380045,-0.0017048777,0.021321895,0.010807754,-0.038533207,0.025236733,0.009926914,0.012387671,-0.021042263,0.040210996,-0.036435973,0.032017794,0.03036797,0.03363966,0.014946299,0.010073721,0.02227264,0.026145536,0.0037959963,-0.007018748,-1.6357344e-05,-0.02618748,-0.033108357,0.027194154,0.016777884,-0.045076583,0.03917636,0.0251109,0.025837941,-0.004449635,0.047789007,-0.021503655,0.046726406,-0.01104544,-0.016344456,-0.0069034,0.04071433,-0.0155614875,0.029277407,-0.022202734,-0.019727996,-0.015435653,-0.035401333,0.015156021,0.013009851,-0.01201716,0.0026477599,-0.043314904,-0.023992375,0.024118207,-0.050641246,0.008137274,0.034422625,0.009598347,0.002324436,0.020608835,-0.026914522,0.031290755,-0.027152209,0.004194471,0.00730537,0.0005168812,0.015617413,0.0011167779,-0.058554813,-0.0037925008,-0.0037890053,0.024076262,0.011912297,0.0063965684,-0.01844169,0.015799174,-0.022286622,0.050081983,0.0009323959,-0.041245632,0.0006073244,-0.015994916,0.02031522,-0.0028242772,0.0047152843,-0.021084208,-0.025180807,0.0043622497,-0.01602288,0.01781252,-0.019028917,-0.026495075,-0.030256117,0.0010092945,-0.010612012,-0.016693994,0.030759454,-0.01709946,0.008032412,-0.015016206,0.009640292,0.0158551,-0.02947315,-0.01772863,-0.020329203,-0.020413091,0.05698888,-0.07376676,-0.0063581187,-0.0066132825,0.022580236,0.011052431,0.047229744,0.020692723,-0.04272768,0.015659358,0.023433112,0.0066307597,0.0048306324,0.019853828,0.012184938,-0.014135367,-0.025082937,0.018637432,-0.0036421989,-0.0568211,0.019546235,0.005680013,-0.02093041,-0.02217477,0.010430251,-0.026872577,0.028368605,-0.00242755,-0.017043533,0.010255481,-0.05654147,0.032213535,-0.020678742,-0.024244042,-0.03000445,-0.0059491578,0.010479187,0.021783287,-0.043538608,-0.0393721,0.000661503,0.026425168,-0.027501749,0.01862345,-0.025977757,-0.01577121,-0.012849063,-0.013967589,-0.016987607,-0.018357802,-0.03998729,-0.04941087,-0.01033238,-0.018329838,-0.0062847156,0.0017048777,-0.014764538,-0.013701938,-0.04035081,0.009255799,-0.07331935,-0.00067941693,-0.03126279,0.01763076,0.00209374,-0.0022125833,0.052514777,0.04194471,-0.013506196,-0.00056494283,0.03134668,-0.00663775,-0.04132952,0.014030505,0.010059739,0.011520813,0.0028050526,0.03363966,0.015100095,0.032269463,-0.02023133,-0.020510...', '2025-03-25 05:14:16.171722+00'), ('8', 'https://ai.pydantic.dev/dependencies/', '0', 'PydanticAI Dependencies Documentation', 'This section outlines the documentation for managing dependencies in PydanticAI, including defining and accessing dependencies, handling asynchronous versus synchronous dependencies, providing a full example, and methods for overriding dependencies.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Dependencies  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
          * [ Introduction  ](..)
          * [ Installation  ](../install/)
          * [ Getting Help  ](../help/)
          * [ Contributing  ](../contributing/)
          * [ Troubleshooting  ](../troubleshooting/)
          * Documentation  Documentation 
            * [ Agents  ](../agents/)
            * [ Models  ](../models/)
            * Dependencies  [ Dependencies  ](./) Table of contents 
              * Defining Dependencies 
              * Accessing Dependencies 
                * Asynchronous vs. Synchronous dependencies 
              * Full Example 
              * Overriding Dependencies 
              * Examples 
            * [ Function Tools  ](../tools/)
            * [ Common Tools  ](../common_tools/)
            * [ Results  ](../results/)
            * [ Messages and chat history  ](../message-history/)
            * [ Testing and Evals  ](../testing-evals/)
            * [ Debugging and Monitoring  ](../logfire/)
            * [ Multi-agent Applications  ](../multi-agent-applications/)
            * [ Graphs  ](../graph/)
            * [ Image, Audio & Document Input  ](../input/)
            * [ MCP  ](../mcp/) MCP 
              * [ Client  ](../mcp/client/)
              * [ Server  ](../mcp/server/)
              * [ MCP Run Python  ](../mcp/run-python/)
            * [ Command Line Interface (CLI)  ](../cli/)
          * [ Examples  ](../examples/) Examples 
            * [ Pydantic Model  ](../examples/pydantic-model/)
            * [ Weather agent  ](../examples/weather-agent/)
            * [ Bank support  ](../examples/bank-support/)
            * [ SQL Generation  ](../examples/sql-gen/)
            * [ Flight booking  ](../examples/flight-booking/)
            * [ RAG  ](../examples/rag/)
            * [ Stream markdown  ](../examples/stream-markdown/)
            * [ Stream whales  ](../examples/stream-whales/)
            * [ Chat App with FastAPI  ](../examples/chat-app/)
            * [ Question Graph  ](../examples/question-graph/)
          * API Reference  API Reference 
            * [ pydantic_ai.agent  ](../api/agent/)
            * [ pydantic_ai.tools  ](../api/tools/)
            * [ pydantic_ai.common_tools  ](../api/common_tools/)
            * [ pydantic_ai.result  ](../api/result/)
            * [ pydantic_ai.messages  ](../api/messages/)
            * [ pydantic_ai.exceptions  ](../api/exceptions/)
            * [ pydantic_ai.settings  ](../api/settings/)
            * [ pydantic_ai.usage  ](../api/usage/)
            * [ pydantic_ai.mcp  ](../api/mcp/)
            * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
            * [ pydantic_ai.models  ](../api/models/base/)
            * [ pydantic_ai.models.openai  ](../api/models/openai/)
            * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
            * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
            * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
            * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
            * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
            * [ pydantic_ai.models.groq  ](../api/models/groq/)
            * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
            * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
            * [ pydantic_ai.models.test  ](../api/models/test/)
            * [ pydantic_ai.models.function  ](../api/models/function/)
            * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
            * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
            * [ pydantic_ai.providers  ](../api/providers/)
            * [ pydantic_graph  ](../api/pydantic_graph/graph/)
            * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
            * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
            * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
            * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
          * Defining Dependencies 
          * Accessing Dependencies 
            * Asynchronous vs. Synchronous dependencies 
          * Full Example 
          * Overriding Dependencies 
          * Examples 
Dependencies PydanticAI uses a dependency injection system to provide data and services to your agent's [system prompts](../agents/#system-prompts), [tools](../tools/) and [result validators](../results/#result-validators-functions).', '{"source": "pydantic_ai_docs", "url_path": "/dependencies/", "chunk_size": 4845, "crawled_at": "2025-03-25T05:14:13.453277+00:00"}', '[-0.031167084,0.019244483,0.06990853,-0.010639168,0.017505184,0.019244483,0.0005685152,0.040003836,-0.01526093,0.0020321023,0.0046042283,-0.058070082,-0.0036574334,-0.03731073,0.012890437,-0.018599259,-0.009601201,0.0048532,0.008780645,0.09021903,0.058350615,0.027001185,0.028235527,0.0343932,-0.0070904414,-0.0052564647,0.004527082,0.055545297,0.0077777444,-0.03430904,0.040873483,-0.020450769,-0.04179924,0.028684378,0.040031888,0.010947754,0.00734292,0.032345317,-0.022021746,0.030213276,0.010281491,-0.02505149,0.026047379,0.012511718,-0.08056873,0.0137881385,-0.013851258,0.011859482,0.0029718839,-0.007153561,-0.09229496,0.0026334922,-0.02328414,0.012988622,-0.025065517,-0.0062733926,-0.02813734,-0.00084378704,-0.034954265,-0.027253665,0.012651985,-0.005421277,-0.019833598,0.07557527,-0.043594643,-0.027197558,-0.052403342,-0.004011605,-0.06138036,-0.009566135,0.035010368,0.06031434,-0.042191982,-0.04614748,-0.04129428,-0.021713162,0.044408184,0.0952686,-0.0033926815,-0.045053408,-0.016565403,0.023634804,-0.014769999,-0.010470849,-0.041743133,-0.043538537,-0.01781377,0.0040747244,-0.010456823,-0.021797322,-0.029511945,-0.005200358,-0.060258232,0.016256819,0.06412957,0.0011817402,0.012315346,0.0051933452,-0.011382578,0.030886551,0.022849316,-0.036917984,-0.07254553,-0.006848483,0.03562754,-0.01275017,0.0057649286,-0.026019325,-0.017659478,0.008142436,-0.122199655,-0.0036679534,-0.0047094277,0.025514368,-0.068113126,-0.0066240574,-0.018697444,0.015359117,4.876432e-05,-0.052739978,-0.029792478,0.021095991,0.024658745,0.021194179,0.04199561,-0.0057263556,-0.0030034436,-0.011831429,-0.047409873,-0.022344358,0.019609174,-0.011789349,0.027211586,-0.028039154,-0.012883423,-0.0109968465,-0.03369187,-0.012147027,-0.029960796,0.033551604,0.03139151,-0.029147254,0.004032645,0.036020283,-0.021797322,0.03826454,-0.0152469035,-0.012111961,-0.049345545,0.002307374,0.018248593,0.0057193423,-0.061716996,-0.04165897,-0.034084614,0.020464795,0.011726229,0.014531547,0.041883398,-0.03228921,-0.021713162,0.05919221,-0.009019097,-0.025991272,-0.04073322,-0.015639648,-0.033860188,0.021881482,-0.03422488,-0.035936125,-0.018487046,-0.050523777,-0.04207977,0.0052354247,0.04825147,-0.036356922,-0.029231414,-0.028375791,-0.013661899,-0.052235022,-0.0049619065,0.0015928947,-0.039526932,-4.892869e-05,-0.013416434,-0.01932864,-0.027997075,0.043061633,-0.013633845,0.05557335,0.03756321,0.039863568,0.029568052,0.031503722,0.030942658,-0.00496892,0.041855346,-0.009594188,0.020380635,-0.0058596083,-0.0025756327,0.0148822125,0.044548452,0.015485356,-0.0051477584,-0.035375062,-0.00047252077,0.002854411,-0.0069186157,-0.01662151,0.019090189,-0.072657734,0.014994425,0.012651985,-0.036216658,-0.019160323,-0.024770958,-0.00021072761,-0.0064417114,0.01219612,-0.008549207,0.0169862,0.047353767,-0.030970711,-0.0052494514,0.0038117259,0.0020566487,-0.06384904,0.02032453,0.030185223,0.02781473,0.006157673,-0.019805545,0.013486567,0.0021583415,-0.037984006,0.016803855,0.0059928605,0.0065819775,-0.000111500434,0.0058035017,-0.00428863,-0.024406267,0.018262621,0.0035347007,0.0020408689,-0.017575318,-0.026650522,0.04339827,0.01460168,0.03262585,0.0014657787,0.035178687,0.013893338,-0.020128157,-0.054198746,-0.009313656,-0.018318728,-0.03694604,0.012609905,-0.021334443,0.056471054,-0.0053756908,-0.0098116,0.0008806069,-0.012644971,-0.0027229118,0.02081546,-0.04297747,-0.017392972,0.04912112,0.024223922,0.067720376,-0.012995636,-0.043033578,0.012813291,-0.02324206,0.026355963,-0.009117284,0.013514619,-0.01596226,-0.014741946,0.054198746,0.024504453,-0.0024704332,0.04199561,-0.0037100331,0.00543881,-0.011116073,0.023803124,0.015513409,0.031531774,0.043454375,-0.03509453,0.02632791,-0.022849316,0.047129344,-0.011803376,0.033832137,0.0035241807,0.024251975,0.021446656,-0.0024879666,1.7423656e-05,0.01221716,0.01464376,-0.000679413,-0.009846666,0.034196828,-0.022680996,-0.015022478,0.0062453393,-0.013858271,-0.021502763,-0.035936125,-0.01157895,0.0626147,-0.03228921,0.06328797,-0.02098378,-0.07821227,-0.03141956,0.028109286,-0.012581851,-0.058238402,-0.016761776,0.027407957,-0.014699867,-0.023999495,0.010204344,0.006687177,-0.021867454,-0.00051460054,0.021811347,0.00083239045,-0.04668049,-0.024770958,0.03015717,0.0024406267,0.03363576,-0.0379279,-0.036356922,-0.037984006,-0.035375062,0.0023740004,0.024237948,-0.019440854,0.029568052,0.009580161,0.0038958855,0.0011791103,-0.018851737,0.015429249,0.017533237,-0.026790787,-0.019272534,-0.014699867,-0.029119201,-0.017252706,0.0096573075,-0.077819526,0.009510028,-0.011964682,0.007581372,-0.01987568,0.013907365,-0.011607003,-0.019454882,-0.013107848,0.009629254,0.05400237,0.001026571,-0.03122319,-0.021095991,-0.028950883,0.0039028986,-0.025696713,-0.00872454,0.01100386,0.015779914,0.045979165,0.0031349428,0.033467446,0.03209284,0.05262777,0.020787407,-0.009005071,0.0022915942,-0.0022810742,0.04783067,0.06923525,-0.03697409,-0.003562754,-0.00618222,-0.008352835,-0.0033961881,0.0040431647,-0.007136028,0.074397035,-0.0041168043,0.0023354273,0.028333712,-0.041602865,0.0007394643,-0.01728076,0.01521885,0.07450925,0.0036258735,0.013325261,-0.017182574,0.04575474,-0.03509453,0.0127782235,-0.025780873,-0.025963219,-0.049008906,-0.004506042,0.011263352,0.054282904,0.034084614,-0.00798113,-0.05717238,-0.040901538,-0.025626581,-0.048447844,0.054254852,0.05372184,-0.027295744,-8.399517e-05,-0.048616163,-0.015681729,0.023676883,0.056078307,0.004579682,0.010085118,-0.027716542,0.0074761724,0.006147153,0.003790686,0.01468584,0.038965866,-0.05969717,-0.024195869,0.05546114,-0.023915336,-0.0030174702,-0.02492525,-0.056050256,0.019510986,-0.020703247,-0.007202654,-0.0010388443,-0.009923813,0.01670567,-0.020829486,-0.021769268,0.051253162,-0.017982088,0.046596333,0.0042535635,0.053469364,0.014229976,-0.036497187,0.044492345,-0.010021999,-0.012266253,0.023256086,-0.008338808,-0.011628043,0.0070097884,0.039134186,-0.020520901,-0.010204344,-0.037086304,-0.011712203,-0.032766115,0.016523324,0.010337597,-0.029483892,0.008787659,0.02134847,-0.01596226,0.0038958855,0.027674463,0.019819573,0.09268771,-0.009608215,-0.021685109,-0.017084386,0.025416182,-0.0059577944,0.0046918946,0.06777649,-0.016859962,0.029511945,-0.002914024,-0.023101794,-0.0027860315,-0.034337092,-0.009503015,0.031475667,0.011838442,-0.021853428,0.045810845,-0.002181135,-0.032794166,0.025472287,-0.01641111,-0.0032559223,0.029483892,-0.046399962,0.0023196475,0.0015201317,0.04797094,-0.0030963698,0.024420293,0.0025247862,-0.0024827064,0.010393703,-0.0075463057,0.014405308,-0.03545922,-0.0068134163,0.0122101465,0.021053912,-0.025991272,-0.034112666,-0.0075953985,-0.026187643,-0.0028684377,0.012357426,-0.009397816,0.01998789,-0.010604102,-0.053497415,0.030409647,0.010604102,-0.012062867,-0.03812427,-0.008878832,-0.009257549,0.007602412,-0.03548727,-0.0028316178,-0.012329373,0.019973865,0.011382578,-0.0055264765,0.005053079,0.026426096,0.0678887,-0.01104594,0.017014254,-0.007335907,0.037198517,0.015092611,-0.00015659373,-0.027548224,0.030830445,-0.0021039885,-0.006368072,-0.020478822,0.024167815,0.0060174074,-0.01396347,0.031447615,0.037507102,-0.033495497,-0.030662127,-0.0089700045,-0.011242312,-0.001646371,-0.030886551,-0.0028456445,-0.00056150195,0.01723868,-0.0057999953,-0.009411842,-0.012427559,-0.013682939,-0.017982088,-0.022849316,0.012644971,0.016228765,-0.022526704,-0.008331794,-0.026187643,0.0017585837,0.013725018,0.017126467,0.0020478822,-0.0069116023,-0.021376524,-0.001545555,-0.027660435,0.0049583996,0.0282215,0.00545985,-0.037984006,0.025640607,-0.007434093,-0.032513637,0.013977497,0.010555009,0.004397336,0.015737833,-0.011908575,0.004586695,-0.02134847,0.012020788,-0.01657943,-0.0008227472,-0.00365042,-0.036553293,-0.04207977,0.026215697,-0.033495497,0.02492525,0.045446154,-0.030016903,0.0070694014,0.015541462,-0.005610636,0.00555453,-0.0025651127,-0.015807968,0.01228028,-0.03472984,-0.024181841,0.011747269,-0.026790787,0.043089684,0.03472984,0.00730084,-0.015513409,0.008941951,0.0049303463,-0.0110249,-0.006981735,-0.03447736,0.01613058,0.032569744,-0.007023815,-0.028347738,0.024770958,-0.002544073,-0.02241449,0.024294054,0.02892283,-0.026201671,0.0026895986,-0.0011817402,0.017463105,0.0025282928,0.02937168,0.004239537,-0.008163475,-0.022176038,-0.011059967,0.020689221,-0.05672353,0.018641338,0.027211586,-0.0070378417,-0.01106698,0.029147254,0.050327405,0.043033578,0.03122319,-0.0034628145,-0.029680265,0.0339724,0.01645319,0.029736372,-0.012497692,-0.021011833,0.009054164,-0.027884861,-0.01649527,0.03343939,-0.029652212,0.0069887484,-0.058182295,0.020464795,0.07361154,-0.037507102,0.015555489,0.027211586,0.021895507,0.03015717,0.014363228,-0.016060445,0.019819573,-0.0021162617,0.015373143,-0.01707036,-0.00917339,0.019202402,-0.009369763,-0.08432786,-0.03226116,0.004148364,0.012883423,0.012385479,-0.03739489,-0.023747018,-0.0053511444,0.006753803,0.0357117,-0.03122319,-0.029539999,0.010863594,0.0033435884,0.027183533,-0.015625622,-0.028978936,-0.0018602766,0.023003608,0.0022828276,-0.037703473,-0.0280111,0.022344358,-0.011494791,0.009404829,-0.012651985,-0.029035041,-0.017042307,0.028810617,-0.0109126875,0.018080276,0.0038117259,-0.003113903,-0.015892128,0.013879311,0.023536619,-0.019959837,-0.053048566,0.044239867,-0.03172815,0.010169278,-0.009727441,-0.009299629,-0.00123171,-0.0074411063,-0.005126719,-0.017266732,0.01641111,0.05167396,-0.010681248,-0.0046918946,-0.010414743,0.013135902,-0.002181135,-0.0003421173,0.021993693,0.007574359,-0.003611847,0.0053756908,-0.030774338,-0.001638481,-0.002572126,0.009517041,-0.032485582,0.022975555,0.0045516286,-0.018332753,0.016691642,-0.03060602,-0.009944852,0.013163955,0.0011291405,-0.016607482,0.013753071,0.014910266,0.024490427,-0.026131537,-0.020086078,-0.043089684,0.00063908653,-0.014629734,-0.0005163539,0.0036434068,-0.017140493,0.0062839123,0.009264563,-0.0063926186,-0.0001282118,-0.016607482,-0.04092959,-0.03254169,-0.06906693,0.009453922,-0.0067993896,-0.023396352,0.00983264,-0.009432882,0.0010046546,-0.10301128,-0.018122355,-0.0022442543,0.0008113506,0.03997578,-0.00548089,0.026790787,0.045390047,0.0011387838,-0.020296477,-0.001708614,0.010779435,-0.033523552,0.009432882,0.03299054,0.0023371805,0.02760433,-0.014265043,0.044772875,0.0034084613,-0.023634804,-0.0...', '2025-03-25 05:14:18.272236+00'), ('9', 'https://ai.pydantic.dev/dependencies/', '1', 'Defining Dependencies in PydanticAI', 'PydanticAI's dependency system emphasizes established Python practices to ensure type safety, clarity, testability, and production readiness. Dependencies can be any Python type, with dataclasses serving as useful containers for multiple dependencies. An example demonstrates how to define an agent with dependencies.', 'Matching PydanticAI's design philosophy, our dependency system tries to use existing best practice in Python development rather than inventing esoteric "magic", this should make dependencies type-safe, understandable easier to test and ultimately easier to deploy in production. Defining Dependencies Dependencies can be any python type. While in simple cases you might be able to pass a single object as a dependency (e.g. an HTTP connection), [dataclasses](https://docs.python.org/3/library/dataclasses.html#module-dataclasses) are generally a convenient container when your dependencies included multiple objects. Here's an example of defining an agent that requires dependencies. (**Note:** dependencies aren't actually used in this example, see Accessing Dependencies below) unused_dependencies.py
                
                                from dataclasses import dataclass
                
                import httpx
                
                from pydantic_ai import Agent
                
                
                @dataclass
                class MyDeps:  # (1)!
                    api_key: str
                    http_client: httpx.AsyncClient
                
                
                agent = Agent(
                    'openai:gpt-4o',
                    deps_type=MyDeps,  # (2)!
                )
                
                
                async def main():
                    async with httpx.AsyncClient() as client:
                        deps = MyDeps('foobar', client)
                        result = await agent.run(
                            'Tell me a joke.',
                            deps=deps,  # (3)!
                        )
                        print(result.data)
                        #> Did you hear about the toothpaste scandal? They called it Colgate.
                

          1. Define a dataclass to hold dependencies.
          2. Pass the dataclass type to the `deps_type` argument of the [`Agent` constructor](../api/agent/#pydantic_ai.agent.Agent.__init__). **Note** : we're passing the type here, NOT an instance, this parameter is not actually used at runtime, it's here so we can get full type checking of the agent.
          3. When running the agent, pass an instance of the dataclass to the `deps` parameter.
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ Accessing Dependencies Dependencies are accessed through the [`RunContext`](../api/tools/#pydantic_ai.tools.RunContext) type, this should be the first parameter of system prompt functions etc. system_prompt_dependencies.py
                
                                from dataclasses import dataclass
                
                import httpx
                
                from pydantic_ai import Agent, RunContext
                
                
                @dataclass
                class MyDeps:
                    api_key: str
                    http_client: httpx.AsyncClient
                
                
                agent = Agent(
                    'openai:gpt-4o',
                    deps_type=MyDeps,
                )
                
                
                @agent.system_prompt  # (1)!
                async def get_system_prompt(ctx: RunContext[MyDeps]) -> str:  # (2)!
                    response = await ctx.deps.http_client.get(  # (3)!
                        'https://example.com',
                        headers={'Authorization': f'Bearer {ctx.deps.api_key}'},  # (4)!
                    )
                    response.raise_for_status()
                    return f'Prompt: {response.text}'
                
                
                async def main():
                    async with httpx.AsyncClient() as client:
                        deps = MyDeps('foobar', client)
                        result = await agent.run('Tell me a joke.', deps=deps)
                        print(result.data)
                        #> Did you hear about the toothpaste scandal? They called it Colgate.', '{"source": "pydantic_ai_docs", "url_path": "/dependencies/", "chunk_size": 4076, "crawled_at": "2025-03-25T05:14:16.448892+00:00"}', '[-0.038865946,0.03971248,0.06508365,-0.020877063,0.04167943,0.03104794,0.0190844,0.011913745,-0.011098332,0.006479732,-0.00060455716,-0.04548884,0.0027714707,-0.02987773,-0.022470541,-0.05631952,-0.019632157,0.020366652,0.0028928488,0.058958717,0.044517815,0.0671253,0.025346274,0.028334046,-0.002975324,-0.013743755,0.01592234,0.032691214,0.03590307,-0.006747387,0.047704775,-0.006498406,-0.03274101,0.044517815,0.037820224,0.011272619,-0.0010791774,0.022707075,0.0034079284,0.002374657,0.041629635,-0.021648904,0.024748718,0.00019685065,-0.07409677,0.03381163,-0.021362577,-0.0018409038,0.005810596,0.0038623188,-0.06617917,0.025620153,0.012355686,0.016457649,-0.008253722,0.017665207,-0.0062556495,0.03448388,-0.032516927,-0.041903514,0.016482547,0.0025240455,-0.013382733,0.045040675,-0.025819337,-0.013370284,-0.028931601,-0.014490698,-0.060950566,0.012237419,0.033761833,0.052535005,-0.04551374,-0.013781102,-0.032516927,-0.021897886,0.03064957,0.07399718,0.021648904,-0.03353775,-0.028358944,0.019793995,-0.047306404,-0.0029379767,-0.047132116,-0.06065179,-0.04431863,-0.013208446,-0.004677732,-0.03590307,-0.02723853,0.003000222,-0.067424074,0.0394386,0.017789697,0.039114926,0.022943607,0.0030873653,-0.024611779,0.030525079,0.021375025,0.010058835,-0.078927,0.030624673,0.021997478,0.009672915,-0.0008457576,0.0009142274,-0.043198217,0.029753238,-0.060502402,0.013631714,0.039015334,0.046061497,-0.040036157,-0.015063355,-0.016507445,0.019557463,0.003641348,-0.039214518,-0.0053468687,0.013693959,0.02381504,0.027437715,0.02684016,0.021101147,-0.0067162644,-0.037820224,-0.043198217,-0.029628748,0.029354868,0.0061653936,0.029927526,-0.020740123,-0.02315524,-0.027811186,0.006890551,-0.05567217,-0.019781547,0.018262763,0.043248013,-0.012473952,-0.0041766576,0.04157984,-0.015038457,0.088886246,-0.031496108,0.009206075,-0.03645083,0.0073760645,0.0053717666,0.039015334,-0.040708404,-0.022595033,0.005035642,0.00078234525,0.01084935,0.031471208,0.088189095,-0.031272024,-0.019258685,0.043621484,-0.006734938,-0.011384659,-0.0183997,0.011546497,0.0046123746,-0.006236976,-0.038392883,-0.020590736,-0.004783549,-0.03627654,-0.011944867,0.015150499,0.06508365,-0.028881805,-0.0113348635,-0.022420745,-0.053182356,-0.08266172,0.0033519077,-0.0026407556,-0.022806667,-0.0035510925,-0.041903514,-0.017839493,-0.011957316,0.0367994,-0.0021816967,0.055871353,0.03104794,0.03590307,0.006510855,0.008471581,0.024014225,0.009504853,0.033612445,-0.010874248,0.019943384,-0.024661575,0.0044131894,0.027188733,0.021686252,0.011253945,0.00947373,-0.04720681,-0.016370505,-0.032317743,-0.031147532,-0.013880695,0.0017350869,-0.0723539,-0.0012806964,0.046783544,-0.03142141,-0.03239244,-0.013507224,0.032143455,-0.027437715,0.022184214,0.0015460169,0.019183991,0.05592115,-0.029379766,-0.045289658,-0.012393033,-0.035305515,-0.044169243,0.002008966,0.027263427,0.011179251,-0.0043976284,0.015548868,0.0121316025,0.0013927378,-0.03483245,0.02604342,-0.01170211,-0.0034203776,0.00827862,-0.010426083,-0.018374803,-0.045837417,0.010152203,-0.01790174,0.0055896253,-0.015312336,-0.025308926,0.05198725,0.00093990355,0.03064957,-0.010525675,0.01593479,-0.015623562,-0.028035268,-0.070411846,-0.001937384,-0.01229344,-0.0128723215,0.034658164,-0.030973246,0.072652675,-0.0033736934,-0.007973619,-0.01737888,-0.0012215634,0.022458093,-0.023217484,0.0011709891,0.0009912559,0.041629635,0.027910778,0.054626446,-0.022956055,-0.04892478,-0.004322934,-0.008428009,0.0121440515,-0.056767683,0.0052130413,-0.010388736,-0.0014020747,0.05910811,0.04167943,-0.008901074,0.031072838,-0.029155685,0.015611113,-0.018984808,0.019918486,0.008185253,0.04357169,0.016532343,-0.043347605,0.013258242,-0.019781547,0.003790737,0.012393033,0.005281511,-0.006305446,0.0019280472,-0.0016821784,0.006258762,-0.0030329006,-0.006734938,-0.010444756,0.0074507585,0.0075316774,0.023615856,-0.013544571,0.00562386,0.01790174,-0.010967616,-0.002894405,-0.02736302,-0.029429562,0.048601106,-0.028458538,0.0736984,-0.016930712,-0.079026595,0.023030749,0.046683952,-0.035305515,-0.042924337,-0.031521004,0.0035261945,-0.009399036,-0.027686695,0.012492625,-0.006803408,-0.012480176,0.018374803,0.03276591,0.015997034,-0.024350349,-0.016507445,0.04566313,0.017441124,0.027263427,-0.049771316,0.008757909,-0.019096848,-0.020839715,0.0042700255,0.03448388,-0.022420745,0.03871656,-0.014092329,0.0060440158,0.01762786,-0.01867358,0.007936272,0.03620185,-0.024126265,-0.029105887,-0.026391994,-0.008091885,-0.040285137,-0.012032011,-0.06612937,0.01920889,-0.039911665,0.0064174873,-0.061249346,0.00059327524,0.0062680985,-0.018387252,-0.029080989,0.013793551,0.040857796,0.05091663,-0.037795328,-0.014839272,0.0050854385,0.00096635777,-0.03383653,0.010089958,0.016221117,0.011583844,0.017789697,0.0077121886,0.021922784,0.014615189,0.044891287,0.032716114,-0.011583844,-0.0045127817,-0.0394386,0.02117584,0.06722489,-0.0670755,-0.018300109,0.013208446,-0.016669283,-0.011166801,-0.006946572,-0.015162948,0.019171543,0.005082326,-0.016880916,0.011141903,-0.02498525,-0.012536197,-0.023080546,0.03184468,0.05343134,-0.026466688,0.016395403,0.027213631,0.08525112,-0.01984379,0.0052752867,-0.0046870685,-0.026143013,-0.043895364,-0.01538703,-0.004357169,0.04618599,0.027338121,-0.012187623,-0.05602074,-0.02286891,-0.007593923,-0.0024477951,0.0539293,0.016084177,-0.021387475,-0.0121253785,-0.042999033,-0.014926415,0.04511537,0.020765021,-0.015698256,-0.010357613,0.01709255,0.0006072804,0.003330122,-0.0015740272,0.016544793,0.021026451,-0.034384288,-0.021275433,0.072702475,-0.035430007,-0.00914383,-0.060601994,-0.05168847,0.026367096,0.0032336416,-0.025744643,0.003118488,-0.012623341,0.027612,0.0052348273,-0.008652092,-0.0010426083,-0.0001394683,0.018337457,-0.007407187,0.051090915,0.0037160425,-0.03132182,0.03894064,-0.001878251,0.0038125226,0.02987773,-0.008054538,-0.011515374,0.013482325,0.019233787,-0.014366208,0.0007364393,-0.05119051,-0.007158206,-0.026416892,0.001560022,0.014191921,-0.027163835,0.033487953,0.0074507585,-0.0073760645,-0.007351166,0.0067162644,0.0072391247,0.031720188,0.009529751,-0.02341667,-0.015324785,0.014142125,-0.021785844,0.0049702846,0.102580205,-0.013071506,0.025794439,0.010413634,-0.003778288,-0.021126045,-0.046659052,-0.038766354,0.05542319,0.0077121886,-0.022047274,0.071009405,0.0062680985,-0.021275433,0.042077802,-0.017179694,-0.021910334,0.041654535,-0.026093217,0.008428009,-0.011621192,0.04053412,0.0009733604,-0.0056705438,0.0022501664,-0.022445643,-0.014191921,-0.00578881,0.005966209,-0.04023534,-0.006766061,-0.013308038,-0.013071506,-0.025769541,-0.006236976,0.0038343086,0.0045003328,0.03167039,-0.010033937,0.009081584,0.0073698396,0.017976433,-0.04673375,0.029404664,-0.008751685,-0.0030157831,-0.005069877,0.019022154,-0.021325229,-0.001040274,-0.022582583,-0.01407988,-0.018735826,0.027786288,0.0061249346,0.005082326,0.005847943,0.0008006298,0.07394738,0.015175397,-0.021474618,-0.004562578,0.033985917,0.015088253,0.0053001847,-0.009504853,0.010563022,-0.0012425712,-0.005048091,-0.02552056,0.007556576,0.020503592,-0.00049679505,0.039812073,0.024910556,-0.0315957,-0.012305889,-0.0067598363,-0.0028850683,-0.01750337,-0.03236754,-0.034508776,0.023167688,0.015835196,0.011888847,-0.008751685,-0.01999318,0.0064548342,0.005377991,-0.0058292695,0.0040677283,0.028483436,-0.023304628,-0.02117584,0.007288921,-0.009623119,-0.02065298,0.0105692465,0.015026008,-0.003744053,-0.01948277,0.005598962,-0.021511964,-0.007407187,0.004347832,0.035728782,-0.045837417,0.03525572,0.01486417,-0.01670663,0.0047679874,-0.0113099655,-0.03211856,0.0036662463,0.022221562,0.013967838,-0.034434084,0.026018523,-0.005057428,0.0029908852,0.026217707,-0.044169243,-0.027985472,-0.009206075,-0.038318187,0.031994067,0.034907147,-0.022657277,0.037670836,0.012206297,-0.0022672839,0.010027713,0.018735826,-0.0051196734,0.014913966,0.0064299363,-0.014801925,0.011222822,-0.029678544,0.018437048,0.021947682,-0.006654019,-0.007120859,0.010743533,-0.015349683,0.007432085,-0.001559244,-0.03383653,-0.002975324,0.014702332,0.0057856976,-0.014938865,0.008888625,0.023777694,-0.0081790285,0.023080546,0.04185372,-0.03709818,0.008608521,-0.0026267504,0.005586513,0.01197599,0.02671567,0.014702332,-0.013457427,-0.020453796,-0.022221562,0.013171099,-0.043895364,0.010507002,0.037322264,-0.024698922,0.011621192,0.012181399,0.03617695,0.015349683,0.027462613,0.004599925,-0.04088269,0.02196013,0.00058043713,0.035205923,-0.015959688,-0.033463057,0.0043758424,-0.0005248054,-0.02484831,0.018723376,-0.021947682,-0.014814374,-0.036525525,0.0030391251,0.05856035,-0.04944764,0.0021879212,0.023030749,0.0059848824,0.030300997,-0.0090068905,-0.0036257869,-0.004571915,0.00023536492,0.046061497,-0.021150943,-0.02589403,-0.0074009625,-0.014279065,-0.023254832,-0.025794439,0.009878324,0.022022376,0.029155685,-0.015685808,-0.03699859,-0.02512219,0.02286891,0.04130596,-0.006815857,-0.018437048,0.027338121,-0.006012893,-0.005502482,-0.012561095,-0.026939752,0.011496701,0.00809811,0.03879125,-0.023877285,-0.037123077,0.007326268,-0.025470763,-0.007550351,-0.014191921,-0.062046085,-0.036625117,0.01922134,-0.008315968,0.023765244,-0.0082163755,-0.006853204,-0.024549535,0.00055242673,0.0095422,-0.024773616,-0.06418732,0.03383653,-0.040932488,0.005377991,0.0067722853,-0.0030858093,-0.009324341,-0.016594589,-0.0010410522,-0.00042443493,0.030574877,0.04118147,-0.003532419,0.01434131,-0.05602074,0.008938421,-0.008527602,0.0005621526,0.02381504,0.004515894,0.0028928488,0.0128847705,-0.054427262,-0.0048457943,0.0045221187,-0.002069655,-0.033736937,0.02157421,-0.0029566502,-0.025159538,0.011204149,-0.05542319,4.1140232e-05,0.016644385,0.0012301222,-0.024661575,0.0036226746,0.0128847705,0.029753238,-0.012137827,-0.02340422,-0.033985917,0.0037845124,-0.016084177,0.0052254903,0.017864391,-0.022047274,0.023702998,0.011253945,-0.00926832,-0.014229269,-0.010538124,-0.021897886,-0.038193695,-0.05288358,0.0036818075,-0.003899666,-0.0020151907,0.007456983,0.025769541,0.024138715,-0.110547595,-0.04367128,0.012511299,0.012200072,0.034608368,0.009230973,0.03961289,0.027562205,-0.0121191535,-0.013034159,-0.014951314,0.007656168,-0.023105444,-0.013382733,0.033164278,0.0010363837,0.024163613,-0.024537085,0.057066463,-0.012411706,-0.029778136,0.011683437,-0.028035268,...', '2025-03-25 05:14:18.569508+00'), ('10', 'https://ai.pydantic.dev/dependencies/', '2', 'Using RunContext for Dependencies in Pydantic', 'This section discusses the `RunContext` class, which can be passed to the `system_prompt` function and is parameterized with dependency types to ensure type safety. Dependencies can be accessed via the `.deps` attribute. Additionally, it highlights the use of asynchronous and synchronous dependencies in the context of agent runs.', '1. [`RunContext`](../api/tools/#pydantic_ai.tools.RunContext) may optionally be passed to a [`system_prompt`](../api/agent/#pydantic_ai.agent.Agent.system_prompt) function as the only argument.
          2. [`RunContext`](../api/tools/#pydantic_ai.tools.RunContext) is parameterized with the type of the dependencies, if this type is incorrect, static type checkers will raise an error.
          3. Access dependencies through the [`.deps`](../api/tools/#pydantic_ai.tools.RunContext.deps) attribute.
          4. Access dependencies through the [`.deps`](../api/tools/#pydantic_ai.tools.RunContext.deps) attribute.
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ Asynchronous vs. Synchronous dependencies [System prompt functions](../agents/#system-prompts), [function tools](../tools/) and [result validators](../results/#result-validators-functions) are all run in the async context of an agent run. If these functions are not coroutines (e.g. `async def`) they are called with [`run_in_executor`](https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.run_in_executor) in a thread pool, it's therefore marginally preferable to use `async` methods where dependencies perform IO, although synchronous dependencies should work fine too. `run` vs. `run_sync` and Asynchronous vs. Synchronous dependencies Whether you use synchronous or asynchronous dependencies, is completely independent of whether you use `run` or `run_sync`  `run_sync` is just a wrapper around `run` and agents are always run in an async context. Here's the same example as above, but with a synchronous dependency: sync_dependencies.py
                
                                from dataclasses import dataclass
                
                import httpx
                
                from pydantic_ai import Agent, RunContext
                
                
                @dataclass
                class MyDeps:
                    api_key: str
                    http_client: httpx.Client  # (1)!
                
                
                agent = Agent(
                    'openai:gpt-4o',
                    deps_type=MyDeps,
                )
                
                
                @agent.system_prompt
                def get_system_prompt(ctx: RunContext[MyDeps]) -> str:  # (2)!
                    response = ctx.deps.http_client.get(
                        'https://example.com', headers={'Authorization': f'Bearer {ctx.deps.api_key}'}
                    )
                    response.raise_for_status()
                    return f'Prompt: {response.text}'
                
                
                async def main():
                    deps = MyDeps('foobar', httpx.Client())
                    result = await agent.run(
                        'Tell me a joke.',
                        deps=deps,
                    )
                    print(result.data)
                    #> Did you hear about the toothpaste scandal? They called it Colgate.', '{"source": "pydantic_ai_docs", "url_path": "/dependencies/", "chunk_size": 3065, "crawled_at": "2025-03-25T05:14:13.698153+00:00"}', '[-0.04995296,0.057013623,0.04082694,-0.0049562706,0.018252045,0.04851201,0.03237336,0.02915524,0.009636358,0.0113234725,-0.0074449126,-0.004088698,0.025264671,-0.037200548,-0.017843775,-0.024412109,-0.037248578,0.02776232,-0.0022950144,0.060279775,0.03736866,0.026393417,0.01648688,0.054035656,-0.011029278,0.009690395,-0.013232732,0.03972221,0.038329292,0.015310103,0.021037882,-0.0138931675,-0.050481312,-0.00067019224,0.024616243,0.015994554,-0.0008165388,0.0099905925,-0.00030151146,0.028194604,0.031004459,-0.031820998,0.000357611,-0.012632336,-0.047095075,0.009306141,-0.01648688,-0.016907157,0.03950607,-0.0019272717,-0.075121574,0.010254767,0.021758357,0.021818398,-0.015394159,0.008165388,0.012776431,0.015574277,-0.04176356,-0.058838826,0.039434023,-0.019452836,-0.03568755,0.03700842,-0.035759598,0.00377349,-0.0066884137,0.012073968,-0.06474672,0.009666379,0.026321368,0.04008245,-0.03580763,-0.006190085,-0.017411489,0.001730642,0.07891607,0.04337262,0.026945781,-0.016691014,-0.011785777,-0.009276121,-0.038425356,0.007126703,-0.05754197,-0.035183217,-0.05610102,0.0019858105,0.012332138,-0.013316788,-0.016558927,0.00018002505,-0.040682845,0.053939592,0.028026493,0.05979946,0.002017331,-0.01238017,-0.029395398,0.03494306,0.015502229,-0.01747153,-0.08900273,-0.0070246356,0.020041225,0.023283364,0.0027017829,-0.016354792,-0.028770985,0.00974443,-0.06215301,0.027738303,-0.00045029714,0.041019067,-0.03302179,-0.013701041,-0.016931172,-0.0331899,0.0021764361,-0.025000498,-0.018720353,0.022694975,0.00809334,0.026513496,0.017447513,0.024424117,-0.03676826,-0.022923127,-0.02504853,-0.008399542,0.04414113,-0.005709768,0.021326073,0.0065443185,-0.031100523,-0.0037194544,-0.03494306,-0.02776232,-0.027498145,0.040034417,0.011779773,0.0050193123,-0.002224468,0.031100523,-0.01232013,0.0713751,-0.035471406,0.003308183,-0.054660067,0.0375848,0.005997958,0.007048651,-0.040058434,0.0070426473,-0.0032451414,-0.0071507185,0.011851821,0.021362096,0.058838826,-0.012524265,-0.020485519,0.029419413,-0.013785097,-0.03897772,-0.036119834,-0.04558208,-0.00055048824,-0.002674765,-0.03684031,-0.02468829,-0.018312084,-0.020401463,-0.04887225,0.0134488745,0.08314286,-0.052066356,-0.030620206,-0.021710327,-0.031460762,-0.0375848,0.0017876796,0.022502849,-0.005022314,-0.0074449126,-0.05922308,-0.02468829,-0.011401524,0.016967196,-0.0035573475,0.043924984,0.021482175,0.04937658,0.022803048,-0.004283827,0.0024466144,-0.014913841,0.029251302,0.0028804007,0.0043768883,-0.034078486,0.011467567,0.04099505,0.0307643,0.0013103647,0.023967816,-0.049712803,-0.004875217,-0.033574156,-0.027330033,0.008057317,0.022755016,-0.060808126,-0.0045419973,0.038593467,-0.05211439,-0.049712803,-0.0119719,0.047071062,-0.0020953827,0.037632834,0.033646204,0.008543638,0.03297376,-0.027498145,-0.014325453,0.024736322,-0.042075764,-0.031508792,0.019584924,0.043516714,0.022911118,-0.020929812,-0.0021479174,0.012055956,0.01188184,-0.033502106,0.03239738,-0.01648688,-0.004842195,-0.02215462,-0.014445532,-0.02330738,-0.0434927,0.0068024886,0.039698195,0.029467445,-0.0054666074,-0.02937138,0.049664773,0.001183531,0.020041225,-0.0030770304,0.0100626405,-0.022730999,-0.03251746,-0.08381531,-0.015274079,-0.026633576,-0.023355411,0.017615624,0.0066403816,0.034390695,0.014109311,0.016330777,-0.004103708,0.002512658,0.0046530706,-0.013677025,-0.011755757,-0.030932412,0.047575396,0.012968558,0.016414832,-0.03343006,-0.042652145,-0.011293452,-0.008825824,0.011815797,-0.04896831,-0.011293452,-0.026993813,0.02261092,0.007859186,0.047383267,-0.011893849,0.020929812,-0.02139812,0.014937857,0.017939838,0.02886705,-0.007745111,0.019308742,0.017819759,-0.008429563,0.034871012,-0.04320451,0.015694356,-0.000942622,-0.019176655,-0.010633016,-0.01718334,0.016606959,0.015766405,-0.01700322,-0.0028143572,-0.0055836844,-0.0074809366,-0.0077751307,0.009240097,-0.021145953,-0.0062381164,0.07247983,0.002838373,0.007937238,-0.008657713,-0.0024721313,0.04017851,-0.035831645,0.05888686,-0.00922809,-0.03292573,-0.0035153197,0.04238797,0.013148677,-0.008141372,-0.023823721,-0.0028773986,0.004088698,-0.022827063,0.032493442,-0.026393417,-0.035639517,0.0056046983,0.072960146,0.035759598,-0.021626271,-0.013148677,0.034726914,0.04094702,0.028698938,-0.04649468,-0.008753777,0.0026027174,-0.042868286,0.029539492,0.041619465,0.00029025404,0.020869771,-0.01139552,0.04747933,0.021386113,-0.007715091,-0.016967196,0.029683588,-0.03537534,-0.014409509,-0.043924984,-0.02255088,-0.049760837,0.018948503,-0.02932335,-0.0025591888,-0.015298095,0.009414212,-0.026609559,0.01124542,-0.007691075,-0.010999258,-0.003935597,0.03520723,0.07435306,0.039289925,-0.030812332,-0.019717012,0.014973881,0.00236406,-0.046638776,0.022070564,0.031124538,0.013809112,0.036528103,0.01416935,-0.00091110123,0.014121318,0.030283984,0.03479896,-0.013136668,-0.017435506,-0.0059349164,0.025264671,0.08626492,-0.09419015,-0.032853678,-0.005352532,-0.032805648,0.007084675,-0.029995793,0.00035104415,0.02764224,-0.005040326,0.0231873,0.015069944,-0.0488002,0.0070006195,-0.021590248,0.029419413,0.037080467,-0.033934392,0.022022532,0.0005215942,0.08093341,0.01936878,0.0127284,-0.015946522,-0.02180639,-0.05499629,-0.006772469,-0.027113892,0.06008765,0.08242239,-0.008633697,-0.07848379,-0.008399542,-0.025913099,-0.007733103,0.05158604,0.026057195,-0.03892969,-0.00097189134,-0.016342783,-0.0076550515,0.02961154,0.050529342,0.02127804,-0.009924549,0.00017983741,0.0254568,0.016630974,0.008753777,-0.0015565271,0.039169848,-0.008993935,0.0052954946,0.072431795,-0.020737683,-0.001269838,-0.039410006,-0.050049026,0.03203714,0.012992574,-0.001260832,-0.009029958,-0.03532731,0.020041225,-0.022370761,0.01188184,0.043468684,0.007096683,0.06489082,0.041739542,0.02504853,-0.0013096142,-0.016342783,0.024243997,-0.011833808,0.059943557,0.014265413,0.015190024,-0.012109991,0.047119092,0.011539615,0.008417554,-0.0038065119,-0.0156223085,-0.016763061,-0.017363457,-0.005037324,0.041379306,0.010783115,0.0086817285,0.033862345,0.009378188,0.033646204,0.029971778,0.00948626,0.025720973,-0.0028849037,-0.010981246,-0.05499629,0.0327336,0.015081952,0.005496627,0.049808867,-0.011443552,0.04214781,0.026225306,-0.0034342662,0.014673683,-0.031100523,-0.027810352,0.008045309,0.017939838,-0.025744988,0.04498168,0.035231248,-0.027378066,0.04354073,-0.013665017,0.023919784,0.0018372124,-0.029755635,0.00994256,0.013508914,0.038641497,-0.017099284,0.028146572,-0.020893788,-0.020077249,-0.00037637335,-0.037512753,-0.00062216056,-0.02977965,-0.017855782,0.011539615,0.012500249,-0.016630974,0.018288068,-0.01891248,0.012464225,0.005547661,-0.016126642,0.014073286,0.0126083195,0.013292772,-0.0127284,0.028650906,0.02058158,-0.006139051,-0.019116614,0.013833128,-0.009089998,0.014085295,-0.034558803,0.0038155178,-0.03592771,0.021290049,0.020665636,0.0052834866,0.02464026,-0.013556946,0.05581283,0.011887845,-0.016666997,0.002215462,0.053219117,0.008381531,-0.012043947,-0.011797785,0.031412728,-0.021842413,0.008573658,-0.01839614,0.01457762,0.01248824,0.0041577434,0.050433278,0.015166008,0.002382072,-0.032229267,-0.007060659,-0.0059199063,-0.0036834306,-0.02944343,-0.010146695,0.028819017,-0.0042147813,0.0013876656,0.006658394,-0.032949742,-0.006964596,0.021854421,-0.026249321,0.021266032,0.021218002,0.006136049,0.017747711,-0.0018582261,-0.0076970793,-0.006352192,0.004740128,0.008585665,-0.0029389393,0.012812454,0.009816478,-0.030428078,0.021650286,0.0072948136,0.010849159,-0.028146572,0.03972221,0.027402082,-0.015346127,0.014097302,-0.004097704,-0.0016240717,0.0022709987,0.021938477,0.0019963174,-0.029059175,0.010272779,-0.016691014,0.0053345202,0.011815797,-0.03153281,-0.037392676,0.00904797,-0.022995174,0.029059175,0.06503492,-0.03691236,0.03117257,0.0080513125,0.010609001,0.0078651905,0.028770985,-0.02041347,0.00219745,-0.01579042,-0.011281445,0.040466703,-0.02168631,0.009900533,0.006712429,-0.00035611,-0.043636795,0.021470167,-0.012932533,-0.022166627,0.0026732641,-0.04361278,0.0331899,0.011227408,-0.007919226,-0.018768385,-0.00020563569,0.02977965,-0.00025104065,0.011251424,0.055716768,-0.022682969,0.006928572,-0.04995296,0.007246782,-0.008423558,0.0027918422,0.008933895,-0.033117853,-0.012158023,-0.023235332,-0.0034132523,-0.023787698,-0.01885244,0.021770366,-0.009726418,-0.015910499,0.018732361,0.052210454,0.02932335,0.02949146,0.0057367855,-0.05831048,0.012128003,0.00948626,0.034270614,0.022454817,-0.02186643,0.00783517,-0.013797104,-0.026873734,0.01747153,-0.024256006,-0.017423498,-0.019152638,0.04990493,0.07598614,-0.028891064,0.0018537232,0.023967816,0.014817778,0.04250805,-0.004725118,-0.015742388,0.014553604,0.0046981,0.015214039,-0.029995793,0.003779494,0.0033442068,-0.0015565271,0.0052174428,-0.021818398,-0.0027633235,0.015766405,0.02776232,-0.01238017,-0.034822978,0.0055446588,0.011437547,0.034102503,-0.033213917,-0.005511637,0.025408767,-0.018035902,-0.0050103064,-0.014601635,-0.03777693,0.01983709,-0.024484156,0.027209954,-0.014865809,-0.02805051,0.008231432,-0.022538872,0.002688274,-0.012025936,-0.05634118,-0.0072287703,0.03494306,-0.0071627265,0.041475367,-0.007078671,-0.028386733,-0.03609582,-0.012452217,0.0018972519,-0.023691634,-0.049808867,0.034846995,-0.0163668,-0.003764484,0.008447574,-0.018732361,-0.029587524,0.006820501,0.016474871,-0.025288688,0.01451758,0.003785498,-0.00043528725,0.020533549,-0.048896264,0.008297475,0.010651029,0.008783796,0.028074525,-0.0039896327,-0.010302799,0.018624289,-0.03210919,0.0071987505,-0.0022409789,0.017567592,-0.020737683,0.02608121,0.011647686,0.009096002,-0.010026616,-0.0254568,-0.0071327067,0.010825143,0.0033742266,-0.01618668,-0.005481617,0.0027212957,0.03355014,-0.0307643,0.0032121197,-0.017999878,0.009996597,-0.028602874,-0.0152500635,0.03609582,-0.040514734,0.008045309,0.013508914,-0.018228028,-0.016666997,-0.027978463,-0.020017209,-0.034510773,-0.057397876,-0.025216639,-0.013352811,0.007967257,0.02047351,0.029947761,0.011389515,-0.097264186,-0.041379306,0.019032558,-0.0022379768,-0.0037884999,-0.0014904835,0.023571555,0.032877695,-0.015934514,0.01977705,0.010825143,0.011383512,-0.024027856,-0.021842413,0.0030665235,-0.006121039,0.026585544,-0.015718373,0.05951127,-0.022935133,-0.01763964,-0.00018884336,-0.048776187,0.025024513,0.0062201046,-0.015262071,-0.01589849,0.06...', '2025-03-25 05:14:18.742785+00'), ('11', 'https://ai.pydantic.dev/dependencies/', '3', 'Using Synchronous HTTP Client with Pydantic', 'This section discusses the use of a synchronous `httpx.Client` in place of an asynchronous `httpx.AsyncClient` for dependency management. It illustrates how the system prompt function is implemented as a plain function rather than a coroutine. Additional context mentions the application of dependencies in tools and result validators, suggesting that the provided example can be executed directly with a minor addition.', '1. Here we use a synchronous `httpx.Client` instead of an asynchronous `httpx.AsyncClient`.
          2. To match the synchronous dependency, the system prompt function is now a plain function, not a coroutine.
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ Full Example As well as system prompts, dependencies can be used in [tools](../tools/) and [result validators](../results/#result-validators-functions). full_example.py
                
                                from dataclasses import dataclass
                
                import httpx
                
                from pydantic_ai import Agent, ModelRetry, RunContext
                
                
                @dataclass
                class MyDeps:
                    api_key: str
                    http_client: httpx.AsyncClient
                
                
                agent = Agent(
                    'openai:gpt-4o',
                    deps_type=MyDeps,
                )
                
                
                @agent.system_prompt
                async def get_system_prompt(ctx: RunContext[MyDeps]) -> str:
                    response = await ctx.deps.http_client.get('https://example.com')
                    response.raise_for_status()
                    return f'Prompt: {response.text}'
                
                
                @agent.tool  # (1)!
                async def get_joke_material(ctx: RunContext[MyDeps], subject: str) -> str:
                    response = await ctx.deps.http_client.get(
                        'https://example.com#jokes',
                        params={'subject': subject},
                        headers={'Authorization': f'Bearer {ctx.deps.api_key}'},
                    )
                    response.raise_for_status()
                    return response.text
                
                
                @agent.result_validator  # (2)!
                async def validate_result(ctx: RunContext[MyDeps], final_response: str) -> str:
                    response = await ctx.deps.http_client.post(
                        'https://example.com#validate',
                        headers={'Authorization': f'Bearer {ctx.deps.api_key}'},
                        params={'query': final_response},
                    )
                    if response.status_code == 400:
                        raise ModelRetry(f'invalid response: {response.text}')
                    response.raise_for_status()
                    return final_response
                
                
                async def main():
                    async with httpx.AsyncClient() as client:
                        deps = MyDeps('foobar', client)
                        result = await agent.run('Tell me a joke.', deps=deps)
                        print(result.data)
                        #> Did you hear about the toothpaste scandal? They called it Colgate.', '{"source": "pydantic_ai_docs", "url_path": "/dependencies/", "chunk_size": 2977, "crawled_at": "2025-03-25T05:14:13.773090+00:00"}', '[-0.018328791,0.017806204,0.0062678605,0.0060033803,0.014211824,0.028831521,0.016901236,0.05070371,0.0068828566,-0.02591268,0.021030951,-0.048536886,-0.004381448,-0.0414246,-0.027403966,-0.013128412,-0.04104222,0.011458682,-0.010872364,0.042393297,0.029417839,0.025734236,0.029570792,0.03181409,0.013676491,-0.0006114112,-0.030692441,0.042520758,0.042087395,-0.004626809,0.004709658,-0.022420269,-0.023337983,0.020368157,-0.0047224043,0.015333475,-0.004244428,0.012969086,-0.008928594,0.010936094,0.014606951,-0.03240041,0.02768438,-0.019450443,-0.07244844,0.050372314,-0.018022887,-0.020011269,0.047899585,0.001970855,-0.07708799,0.0048498646,0.016926728,0.040965743,-0.0064877295,-0.0110763,-0.0145687135,0.020024015,-0.0382126,-0.04027746,0.05070371,-0.017640507,-0.034567237,0.03280828,-0.0079280315,-0.0024249323,-0.006200944,-0.0040978487,-0.04094025,0.052972503,0.019182777,0.035153553,-0.047797617,0.003521091,-0.029035458,-0.013829444,0.022802649,0.041883457,0.053431362,-0.034822155,-0.029876696,-0.019552412,-0.052870534,-0.010808634,-0.037498824,-0.05465498,-0.07560945,0.018774902,0.0014490644,-0.02620584,-0.010458118,0.019131793,-0.03523003,0.047976058,0.050652727,0.047670156,-0.017092427,0.0138166975,-0.004129714,0.018277809,0.07316221,-0.021757474,-0.08137066,0.033522062,0.04116968,0.011044435,0.010827753,-0.016901236,-0.043107077,0.0071568964,-0.071683675,-0.0027881942,-0.0060288724,0.019412205,-0.01602176,-0.0059842616,0.022458507,-0.05552171,0.0007404647,-0.057051234,-0.023898808,0.029570792,0.0005357316,-0.015779587,0.027225522,0.02379684,-0.0301826,-0.034184854,-0.05567466,0.01310292,0.058478788,-0.014785396,0.0144157605,-0.017130665,-0.030717934,-0.017959157,-0.036020283,-0.019004332,-0.025543045,0.038289078,0.023439951,-0.040761806,-0.010209571,0.0023149978,-0.005222686,0.04575825,-0.049735013,0.028831521,-0.051009614,0.025619522,0.005241805,0.032604348,-0.03548495,0.0030287756,-0.025224395,0.023873316,0.022496745,0.052972503,0.031610157,-0.015945284,0.0031657955,0.032196473,-0.022955602,-0.003245458,-0.05735714,-0.027964791,0.010324285,-0.014211824,-0.035816345,-0.018099364,-0.021209395,-0.008444245,-0.021209395,0.019322982,0.059804376,-0.030845394,-0.011439563,-0.0346692,-0.03956368,-0.04254625,0.0034924124,0.008578079,0.0069465865,-0.008406008,-0.044101268,-0.044917013,-0.0207123,0.024039013,0.010050246,0.029188411,0.01811211,0.038671456,0.0114013245,0.01403338,0.02324876,-0.030870887,0.044585615,-0.0016075931,0.052462664,0.00057635957,-0.014696173,0.04290314,0.022496745,-0.021043697,0.05623549,-0.05898863,-0.016518855,-0.007889793,-0.03956368,0.013612761,0.025211649,-0.026562728,0.023019332,0.044611108,-0.059906345,-0.0013311636,-0.030845394,0.02867857,-0.0039002853,0.0488173,0.012223444,0.020763284,0.050040916,-0.04167952,-0.015550158,0.04071082,-0.011216507,-0.031610157,-0.016939474,0.015550158,0.036912505,-0.017513046,-0.0003724231,-0.0010650902,0.011732722,-0.045222916,0.060518153,-0.007023063,-0.0048912894,-0.00621369,0.009910039,-0.024357665,-0.018711174,0.012841626,0.049607553,0.02867857,-0.03795768,-0.028092252,0.02806676,0.013268618,0.020623079,-0.03291025,0.046472028,-0.020011269,-0.0221526,-0.060008314,-0.0015828977,-0.045477837,-0.057051234,0.009451182,-0.011216507,0.041118696,-0.0071441503,0.017092427,0.011407698,-0.031227775,-0.0012331784,-0.016455125,-0.021260379,-0.015486428,0.010305166,0.005423436,0.04897025,-0.03349657,-0.038543995,-0.025300872,-0.025683252,0.02347819,-0.060977012,0.009795325,-0.019667126,0.0066980394,-0.0014418947,0.04476406,-0.0130519355,0.026562728,-0.01515503,0.011579769,-0.010413507,0.0343633,0.008259428,0.05317644,-0.008883984,-0.031890567,0.024230205,-0.034643713,0.01061107,0.019119047,0.014670681,-0.0021413332,0.03387895,0.03204352,-0.024319427,-0.014708919,-0.015817825,0.009833563,0.027607903,0.011911166,0.022968348,-0.0020138728,-0.002246488,0.052360695,-0.0034732933,0.032247458,-0.0033904442,-0.025568537,0.040149998,-0.030768918,0.034414284,-0.023465443,-0.06984825,0.0022640137,0.020062253,-0.005461674,0.006634309,-0.024587093,0.006659801,0.0175003,-0.02013873,0.032859266,-0.0091389045,-0.04027746,0.025950918,0.06235358,0.046701457,-0.0014737598,-0.024485124,0.022178093,0.009846309,0.029443331,-0.041883457,-0.010438999,-0.009852682,-0.037473332,0.027990283,0.046013173,0.0388499,0.038340062,-0.001289739,0.047797617,0.00067633623,0.025237141,-0.0017334602,0.02707257,-0.051927328,-0.017895427,-0.04004803,-0.021426078,-0.031967044,0.0073544597,-0.053482346,0.017092427,-0.018188586,-0.0053565195,-0.006557833,0.027174538,-0.008858492,-0.023070315,-0.012210698,0.04489152,0.054553013,0.058427803,-0.0443052,-0.011503293,0.035688885,-0.004575825,-0.042750187,0.023019332,0.01570311,0.0022958787,0.04996444,-0.029213902,-0.027505934,0.0011949404,0.021872189,0.011082673,0.005605067,-0.01302007,-0.020941729,0.006420813,0.06510673,-0.09146552,-0.028245205,-0.004805254,-0.0073544597,0.022981094,-0.0108022615,0.021145664,0.04178149,0.03545946,0.031227775,0.016824761,-0.029443331,0.021273125,-0.02077603,0.007959896,0.011943031,-0.008928594,0.01409711,-0.0028423648,0.070307106,-0.030819902,0.011834689,-0.005490353,-0.008195697,-0.05083117,0.015550158,-0.0040213726,0.053992186,0.065769516,-0.015894301,-0.08035098,-0.010923348,-0.008469737,-0.015792333,0.03698898,0.002354829,-0.035204537,0.021209395,-0.0064176265,-0.0077240947,0.015805079,0.010470864,0.03031006,-0.010031126,-0.010458118,0.0055349637,0.004285853,0.0045694523,-0.015805079,0.030259077,-0.014645189,-0.009514912,0.07091892,-0.015715856,-0.014046126,-0.040149998,-0.005079293,0.01168811,0.008807507,-0.0005918938,-0.0175003,-0.0039034719,0.028831521,-0.015307983,-0.011509666,0.024625331,0.011082673,0.047568187,0.011178269,0.007475547,-0.0012722132,-0.04155206,0.024166474,0.004161579,0.075864375,-0.0031785413,0.03905384,0.0024265256,0.023223268,0.010400761,-0.004375075,-0.0058153765,-0.01656984,-0.035612408,-0.017576776,0.017665999,0.067299046,0.014186332,0.017258126,0.036198728,-0.002906095,0.004703285,0.026001902,-0.00674265,0.054247107,-0.025645014,-0.026307808,-0.05095863,0.011917539,0.03324165,0.0076348726,0.043463964,-0.0139569035,0.020329919,0.012044999,0.03041203,0.008259428,-0.022942856,-0.032221965,-0.0024902557,0.012981832,-0.04871533,0.027964791,0.040532377,-0.016646316,0.04772114,-0.0048785433,0.011120912,0.0065004756,-0.030564982,-0.0024392717,-0.010649309,0.015817825,-0.015728602,0.019794585,6.612003e-05,0.007743214,-0.01409711,0.0015303203,0.00394171,-0.021336855,-0.030437522,-0.011343967,-0.021540793,-0.022050634,0.0016219324,-0.011114539,-0.0043145316,0.017678745,-0.009776206,-0.016353158,0.028296188,0.0050569875,-0.018354284,0.028755045,-0.0023468628,0.0008707132,-0.02819422,-0.010789515,-0.012707792,0.015256999,-0.031431712,-0.024778284,-0.02449787,0.020100491,0.040379424,0.0076348726,-0.01724538,-0.0019469562,0.06673822,-0.005942837,-0.022292808,0.0019119047,0.030208092,0.007048555,-0.030437522,-0.011146404,0.0034605474,-0.02257322,0.027786346,-0.0011383799,0.0126058245,0.023643887,-0.018201333,0.024026267,0.0011383799,0.036683075,-0.03930876,-0.008737404,0.020546602,-0.005531777,-0.048893776,-6.791244e-05,0.02783733,-0.012631317,-0.023886062,-0.0069465865,-0.026766665,-0.0026591406,0.026486252,-0.022241823,0.030743426,0.043056093,-0.008711912,0.0032343054,-0.002530087,0.0068318723,-0.016646316,0.017105173,-0.0068892296,-0.011605261,-0.0056018806,0.01001838,-0.029647268,-0.014148094,0.0066789202,-0.0027945673,-0.020610332,0.030717934,0.017423823,-0.03387895,0.019565158,0.0007392698,-0.014798142,-0.008826626,0.011458682,0.013765713,-0.02434492,-0.0076794834,0.008909475,0.019246506,0.021132918,-0.031125806,-0.018405268,0.01640414,-0.012784269,0.04389733,0.05057625,-0.02745495,0.018647444,-0.0068701105,-0.0007432529,0.018443506,0.025453823,-0.02263695,-0.019871062,-0.031686634,-0.012370023,0.044789553,-0.01061107,0.013498046,0.019386712,-0.0014570307,-0.02855111,0.0078069437,0.0026368352,-0.012146967,-0.013778459,-0.0850925,0.0003714273,0.009897293,0.008335904,0.004929527,0.020240696,0.032961234,-0.01029242,-0.0038142498,0.059753392,-0.01881314,0.030029649,-0.020533856,0.04094025,-0.00968061,0.018991586,-0.013007324,-0.016098237,-0.0034669205,-0.037881203,0.0150913,-0.03301222,-0.012542094,-0.0068382453,0.007399071,-0.00929823,0.021986904,0.019565158,0.026091125,0.03930876,0.013345094,-0.025632268,0.0016904423,0.043209046,0.02138784,0.010674801,-0.02498222,0.011611634,-0.021285871,-0.020087745,0.010515476,-0.009234499,-0.0009256805,-0.026256824,0.0263333,0.08142164,-0.025288126,0.016901236,0.033343617,-0.00063491164,0.05327841,0.002987351,-0.022955602,0.013281364,0.007953523,0.023580156,-0.039028347,-0.014352031,0.018902363,0.020278934,-0.016722793,-0.013128412,-0.00080618646,0.033343617,0.024638077,-0.02208887,-0.05208028,-0.022675188,0.019539665,0.033088695,-0.015193269,-0.020087745,0.007851555,-0.024943981,-0.0040882896,-0.025759729,-0.0020122796,0.01640414,-0.006063924,0.021094682,-0.04427971,-0.03324165,0.01637865,-0.014173586,-0.020508364,-0.027047077,-0.042597234,0.011292983,0.017538538,-0.021132918,0.02967276,0.0015948471,-0.019934792,-0.01217246,-0.02318503,-0.0054584877,-0.022840887,-0.05440006,0.0032167796,-0.0061244676,-0.017869934,-0.014428507,-0.016824761,0.007985388,0.014543221,0.03548495,-0.0023532358,0.018354284,0.034694694,-0.016646316,0.022267316,-0.060773075,0.0098718,-0.00394171,0.02440865,0.015256999,-0.005385198,0.0066980394,-0.008017253,-0.026715681,0.02132411,-0.010732158,-0.00049231545,-0.041016728,0.029086443,-0.0017780713,-0.025415584,0.0015876775,-0.037065458,0.009183515,0.0005564439,0.03459273,-0.029953172,0.004435619,-0.0059460234,0.057917964,-0.02341446,-0.012000388,-0.012433753,-0.010005634,-0.027149046,-0.0063029123,0.042112887,-0.030284569,-0.017143412,0.030513998,-0.0223183,-0.019858316,-0.0076284995,-0.013689237,-0.045834728,-0.06663625,-0.017538538,-0.034286823,-0.016276682,0.029213902,0.0015414731,0.023873316,-0.090955675,-0.03166114,0.054553013,-0.019284744,0.0009766646,0.00641444,0.027556919,0.04216387,-0.0132048875,-0.008131968,0.025810713,-0.0008635436,-0.024102744,-0.0068764836,0.031712126,-0.017857188,0.033471078,-0.0013733848,0.05822387,-0.03031006,-0.012497483,0.004155206,-0.030692441,0.04...', '2025-03-25 05:14:18.938439+00'), ('12', 'https://ai.pydantic.dev/dependencies/', '4', 'Customizing Dependencies in Pydantic Agents', 'This section explains how to pass `RunContext` to a tool using the `tool` decorator and optionally to a `result_validator` function. It also discusses overriding dependencies for testing agents, using the `override` method on the agent, allowing for customization when calling application code.', '1. To pass `RunContext` to a tool, use the [`tool`](../api/agent/#pydantic_ai.agent.Agent.tool) decorator.
          2. `RunContext` may optionally be passed to a [`result_validator`](../api/agent/#pydantic_ai.agent.Agent.result_validator) function as the first argument.
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ Overriding Dependencies When testing agents, it's useful to be able to customise dependencies. While this can sometimes be done by calling the agent directly within unit tests, we can also override dependencies while calling application code which in turn calls the agent. This is done via the [`override`](../api/agent/#pydantic_ai.agent.Agent.override) method on the agent. joke_app.py
                
                                from dataclasses import dataclass
                
                import httpx
                
                from pydantic_ai import Agent, RunContext
                
                
                @dataclass
                class MyDeps:
                    api_key: str
                    http_client: httpx.AsyncClient
                
                    async def system_prompt_factory(self) -> str:  # (1)!
                        response = await self.http_client.get('https://example.com')
                        response.raise_for_status()
                        return f'Prompt: {response.text}'
                
                
                joke_agent = Agent('openai:gpt-4o', deps_type=MyDeps)
                
                
                @joke_agent.system_prompt
                async def get_system_prompt(ctx: RunContext[MyDeps]) -> str:
                    return await ctx.deps.system_prompt_factory()  # (2)!
                
                
                async def application_code(prompt: str) -> str:  # (3)!
                    ...
                    ...
                    # now deep within application code we call our agent
                    async with httpx.AsyncClient() as client:
                        app_deps = MyDeps('foobar', client)
                        result = await joke_agent.run(prompt, deps=app_deps)  # (4)!
                    return result.data', '{"source": "pydantic_ai_docs", "url_path": "/dependencies/", "chunk_size": 2238, "crawled_at": "2025-03-25T05:14:13.684049+00:00"}', '[-0.031176554,0.04406024,0.046691068,-0.013633596,-0.019841861,0.020788467,0.030316003,0.015108827,-0.01433433,0.0038755555,0.0118141435,-0.01289598,0.018083876,-0.015662039,-0.012115337,-0.043912716,-0.012920567,0.025251042,-0.016448827,0.07641698,0.032922246,0.03270096,0.04526501,0.045412537,-0.019718925,-0.009257076,-0.024697829,0.04081473,0.037544634,-0.011777263,0.027193429,-0.008623956,-0.050846305,0.014653964,0.009109553,-0.0054583554,0.010898271,-0.0049635386,-0.008292029,0.056157134,0.00947836,-0.016067727,0.01696516,0.0512397,-0.028201504,0.053698417,-0.024427371,0.019804979,0.0006884413,-0.028816184,-0.036929954,0.014506441,0.013793412,0.013522953,-0.027758935,0.008414965,0.012090749,-0.0041367942,-0.03793803,-0.04501914,0.016645527,-0.008249002,-0.018686263,0.046346847,-0.042511247,0.0083166165,-0.005160236,0.027463889,-0.05473108,0.016534884,0.0024710123,0.022669386,-0.04361767,-0.024980582,-0.026947558,-0.0016027773,0.06594284,0.053305022,0.051878966,-0.024894528,-0.014469559,-0.020370485,-0.003764913,0.03555307,-0.04492079,-0.029553799,-0.07243385,-0.02596407,0.012146071,-0.04519125,0.001747227,0.043666843,-0.024107737,0.04027381,0.04408483,0.06874578,0.008414965,-0.030316003,-0.0010341986,0.04570758,0.03567601,-0.016534884,-0.06368081,0.019657455,0.047428686,0.014408092,-0.0065278984,-0.0050465204,-0.06968009,0.018280573,-0.07445,-0.011125702,-0.010492582,0.027488476,-0.044207763,-0.0061375764,0.009687352,-0.031151967,0.026382051,-0.056157134,-0.027168842,-0.014617083,0.013645889,-0.012195245,0.022300579,0.022325166,-0.028963707,-0.038011793,-0.021796541,-0.021833422,0.009220195,0.016153783,0.016030846,-0.0064234026,-0.03520885,-0.025718197,-0.018796904,-0.03164371,-0.03058646,0.024710122,-0.009662765,-0.0025247969,-0.019423878,0.0015205638,-0.00580565,0.07926909,-0.035995644,0.01850186,-0.005655053,0.06609036,0.017469198,0.004945098,-0.041773632,-0.013313962,-0.017161857,1.9809013e-05,0.015895616,0.016067727,0.040224638,-0.021599844,-0.021218743,0.031127378,-0.013166439,-0.029160405,-0.033635274,-0.039388675,0.025914896,-0.01182029,-0.045953453,0.004456428,-0.00076335535,-0.041994914,-0.027168842,0.017727362,0.075187616,-0.04573217,-0.045043726,-0.030561874,-0.009330838,-0.03235674,-0.014051578,0.014494147,-0.021231037,0.00410606,-0.05733732,-0.024451958,0.015588277,-0.003034981,-0.027242603,0.04617474,0.031619124,0.03486463,0.029184991,-0.011174876,0.013609008,-0.01878461,0.038773995,-0.021169567,0.019522227,-0.026652511,0.015391579,0.033413988,0.027267192,0.022804616,0.021599844,-0.05596044,0.01844039,-0.019620575,-0.0067368895,-0.00346372,0.023517644,-0.06594284,0.014506441,0.035036743,-0.052764103,-0.04450281,0.0055843648,0.03992959,-0.009324691,0.048313823,0.02603783,0.01508424,0.03906904,-0.04878098,0.0074806516,0.022239111,-0.03407784,-0.034422062,0.023062782,0.04167528,0.0076896427,-0.009619737,-0.021968652,-0.013313962,0.04747786,-0.0569931,0.022927552,-0.03498757,0.005061887,-0.01905507,-0.02032131,-0.011863318,-0.015207175,-0.0014252885,0.023529937,0.025914896,-0.007474505,-0.018120756,0.05969769,0.009896343,0.049887404,-0.022448102,0.020554889,-0.02603783,-0.018969014,-0.047035288,0.031422425,-0.026627924,-0.03619234,0.020985164,0.012736163,0.021476908,0.015219469,0.013449191,0.029971782,-0.018932134,0.016301306,-0.0141745135,0.0113224,-0.015981672,0.04371602,0.0046316115,-0.0013776509,-0.0381839,-0.03611858,-0.009201755,0.015662039,0.027513063,-0.016190663,0.006865972,-0.014408092,0.055173647,0.021870304,0.01703892,-0.012496438,-0.009822581,-0.02278003,-0.00393395,0.015649745,-0.010265151,-0.013264787,0.04206868,0.03636445,-0.01871085,0.014555615,-0.010885977,-0.024415078,-0.0035221146,-0.013166439,-0.039806657,0.00042797072,0.019005897,0.0007022715,0.0031133527,0.012133777,-0.017813418,0.034299128,-0.00017864129,0.022460395,-0.01932553,0.0028336733,0.06854908,-0.00251865,-0.0031963345,0.006767623,-0.019731218,0.030537287,-0.043396387,0.049076024,-0.0040906933,-0.04172446,-0.008144506,0.011881758,0.015182588,-0.01730938,-0.0011264005,0.018526446,-0.005965466,-0.015649745,0.022374341,-0.024181498,-0.03137325,0.017690482,0.027291778,0.02849655,-0.00010276676,-0.028963707,0.041036017,0.027291778,0.029676735,-0.076023586,-0.0046715657,-0.00930625,-0.057189796,0.029553799,0.06348412,0.011316253,0.008691571,-0.030488113,0.04056886,0.042363726,-0.019854154,-0.019682044,0.027586823,-0.006595513,-0.029062055,-0.027734347,0.016153783,-0.031791233,0.0031287195,-0.039634544,-0.0010196,0.0069089998,-0.0067245956,-0.04179822,0.011617446,-0.003479087,-0.012625521,-0.020013971,0.0412573,0.039806657,0.030979857,-0.051633094,-0.009644324,-0.015194882,-0.007449918,-0.04973988,0.007904781,0.0040630326,-0.00036074014,0.050993826,-0.002252801,0.0060668886,0.047035288,0.045142077,0.040322986,0.0027675952,-0.0048559695,-0.010068453,0.020776173,0.083153866,-0.086497724,0.0007330055,-0.006749183,-0.027783522,-0.0015904837,-0.010898271,-0.0015290157,0.051682267,0.008894415,0.0002731483,-0.0041460143,-0.045609232,-0.018563326,0.0021682826,0.039019868,0.030955268,-0.026775448,0.0038448214,0.0071610184,0.063336596,0.023308653,0.031324077,-0.0027445448,-0.01840351,-0.025767373,-0.004834456,-0.03297142,0.04248666,0.057681542,-0.0024033976,-0.056157134,0.02062865,0.0056427596,0.00013657415,0.056058787,0.041773632,-0.049543183,0.014813781,-0.01778883,0.018219106,0.016264424,0.040863905,0.030488113,-0.053895116,0.012809925,0.020235255,0.026455814,0.0025632144,0.0036143165,0.004560923,-0.04074097,0.027783522,0.06692632,-0.04020005,0.0016550251,-0.04570758,-0.057288148,0.018378923,-0.0048006484,-0.01696516,-0.036831606,-0.0343483,0.034028668,0.003371518,-0.01525635,0.041380238,0.027955633,0.042609595,0.029160405,0.027218016,-0.007535973,-0.022484982,0.04403565,-0.02412003,0.051534746,0.02381269,0.010646252,-0.012650108,0.029947193,0.03567601,0.023407003,0.0024049343,-0.029430863,-0.03068481,-0.03356151,0.020616356,0.029480038,0.0074068904,-0.010191389,0.041232713,0.0020622504,0.030906094,0.04371602,-0.0065217516,0.03697913,-0.013695063,-0.027906457,-0.04152776,0.010486435,0.006540192,0.010830656,0.04256042,-0.012650108,0.023984801,0.03791344,0.05733732,0.011709648,-0.040027943,-0.028373614,0.003571289,0.003937023,-0.009244783,0.03348775,0.014481854,-0.018944427,0.036389038,0.0017241765,0.020247549,0.035602245,-0.05207566,0.005513677,0.005123355,0.030881507,-0.02972591,-0.0038079408,-0.015071946,-0.011248638,-0.0007307005,-0.017874885,0.006743036,-0.0058578975,-0.03277472,0.022620212,0.02268168,-0.009804141,-0.0018440391,-0.012600933,-0.006743036,0.0008582465,-0.008089185,-0.00024567978,0.005006566,-0.0042074826,-0.019780392,0.022620212,0.03235674,0.020505715,-0.02041966,0.0030872286,-0.0122813005,0.014764606,-0.024980582,0.012859099,-0.025496913,0.02295214,0.005568998,0.004616244,0.021501495,-0.027340952,0.06181219,0.00784946,0.018698556,0.012496438,0.03670867,0.0034299127,-0.0063680816,-0.011654327,0.0099885445,-0.030143892,0.011433043,-0.021636724,0.01847727,-0.014838368,0.010431115,0.02911123,0.015957085,-0.011764969,-0.01180185,-0.017899472,-0.001087983,0.015280937,-0.024685536,0.0066385404,0.03188958,0.005436842,0.043912716,-0.011076528,-0.0108122155,0.01084295,0.005261658,-0.030488113,-0.00031828883,-0.004456428,0.02045654,0.0034145457,-0.010234416,0.002870554,-0.017542958,0.005332346,-0.014494147,0.006343494,-0.008064598,-0.0058117965,-0.038159315,0.02377581,0.02189489,0.023308653,-0.025939483,0.011359281,0.034495823,-0.028201504,0.007013495,0.008666984,-0.018342042,0.006835238,0.008832947,0.029160405,-0.04142941,0.010916711,0.0024325948,-0.0065463386,-0.012133777,-0.027513063,-0.011316253,0.009300103,-0.022153055,0.0015036602,0.054829426,-0.024611775,-0.0015620547,0.0067922105,0.0020053925,0.00928781,0.006116063,-0.016498003,-0.004219776,-0.018895254,-0.0025002097,0.04248666,-0.03188958,0.013510659,-0.016879104,-0.0013945545,-0.016534884,0.00036227683,-0.0019961724,-0.020874523,0.0003887849,-0.063336596,0.024156911,0.0236037,-0.001966975,0.01508424,0.012533319,0.029504625,0.00925093,0.009736526,0.054239336,-0.034692522,0.00042604987,-0.032602612,0.0033622978,0.0022927553,0.012096896,0.02203012,-0.013473779,-0.009539829,-0.010086894,0.022054708,-0.025890308,0.0004345017,-0.0027829623,-0.011230198,-0.012041575,0.034053255,0.032946832,0.0033161968,0.0067061554,0.012275153,-0.06171384,0.0028167698,0.0022036266,0.026800035,0.023923334,0.01871085,0.007923221,-0.012453411,-0.01608002,0.03188958,-0.0043918863,-0.03547931,-0.011580565,0.048141714,0.063582465,-0.015219469,-0.0059808334,0.033635274,0.0050711073,0.04248666,-0.012287447,-0.009017351,-0.008703864,0.024611775,0.03882317,-0.01840351,-0.011254785,-0.0096320305,-0.01778883,-0.016510297,-0.0037526195,-0.013547541,0.008162946,0.011162583,-0.028299853,-0.05271493,-0.00456707,0.013387724,0.038675647,-0.028029393,0.0005205569,0.03188958,-0.031594537,0.0015382359,-0.019841861,-0.0051325755,0.015514515,-0.019706631,0.026898382,-0.011826437,-0.034299128,-0.008617809,-0.018108463,-0.0018440391,-0.0059439526,-0.04172446,0.011377721,0.038429774,0.008617809,0.027021319,-0.016743874,-0.013424604,-0.010302031,-0.029012881,-0.01905507,-0.021636724,-0.06579531,0.02675086,-0.023136543,-0.006896706,-0.01289598,-0.009681205,-0.03171747,0.0062082647,-0.004275097,-0.01642424,0.01936241,0.028570311,-0.005532117,0.017764242,-0.060533654,0.008648544,0.004616244,0.0043304185,0.008162946,0.0037311057,-0.015379285,-0.009127993,-0.035184264,-0.012072309,0.0111011155,-0.0009081892,-0.015760386,0.023751223,-0.016620938,0.0011010449,-0.00077680143,-0.0191903,-0.0030995223,0.028201504,0.015551396,-0.014076165,-0.019165713,-0.004287391,-0.0030826186,-0.01891984,-0.010713867,-0.019903328,0.016325893,-0.025128106,-0.0012570199,0.022312872,-0.053796764,0.008943589,0.011408455,-0.008587075,-0.0035221146,-0.0099885445,-0.021440027,-0.02333324,-0.052911628,-0.03225839,-0.013510659,0.028717835,0.037667572,0.018415803,0.03410243,-0.07617111,-0.031619124,0.019300941,-0.009619737,-0.01673158,0.0034575732,0.017026627,0.03619234,-0.037397113,0.016805343,0.0011202537,0.014481854,-0.038601883,-0.027906457,0.028447377,-0.015391579,0.022964433,0.009312397,0.047527034,-0.009601297,-0.014125339,-0.015662039,-0.0470107,0.024009388,-0.011537538,-...', '2025-03-25 05:14:19.145072+00'), ('13', 'https://ai.pydantic.dev/dependencies/', '5', 'Customizing System Prompts in PydanticAI Dependencies', 'This section outlines the steps to customize the system prompt in PydanticAI. It includes defining a method on the dependency, calling the system prompt factory, and providing an example of application code that interacts with the agent. It also notes that overridden dependencies will not utilize `app_deps`.', '1. Define a method on the dependency to make the system prompt easier to customise.
          2. Call the system prompt factory from within the system prompt function.
          3. Application code that calls the agent, in a real application this might be an API endpoint.
          4. Call the agent from within the application code, in a real application this call might be deep within a call stack. Note `app_deps` here will NOT be used when deps are overridden.
_Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Dependencies  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
          * [ Introduction  ](..)
          * [ Installation  ](../install/)
          * [ Getting Help  ](../help/)
          * [ Contributing  ](../contributing/)
          * [ Troubleshooting  ](../troubleshooting/)
          * Documentation  Documentation 
            * [ Agents  ](../agents/)
            * [ Models  ](../models/)
            * Dependencies  [ Dependencies  ](./) Table of contents 
              * Defining Dependencies 
              * Accessing Dependencies 
                * Asynchronous vs. Synchronous dependencies 
              * Full Example 
              * Overriding Dependencies 
              * Examples 
            * [ Function Tools  ](../tools/)
            * [ Common Tools  ](../common_tools/)
            * [ Results  ](../results/)
            * [ Messages and chat history  ](../message-history/)
            * [ Testing and Evals  ](../testing-evals/)
            * [ Debugging and Monitoring  ](../logfire/)
            * [ Multi-agent Applications  ](../multi-agent-applications/)
            * [ Graphs  ](../graph/)
            * [ Image, Audio & Document Input  ](../input/)
            * [ MCP  ](../mcp/) MCP 
              * [ Client  ](../mcp/client/)
              * [ Server  ](../mcp/server/)
              * [ MCP Run Python  ](../mcp/run-python/)
            * [ Command Line Interface (CLI)  ](../cli/)
          * [ Examples  ](../examples/) Examples 
            * [ Pydantic Model  ](../examples/pydantic-model/)
            * [ Weather agent  ](../examples/weather-agent/)
            * [ Bank support  ](../examples/bank-support/)
            * [ SQL Generation  ](../examples/sql-gen/)
            * [ Flight booking  ](../examples/flight-booking/)
            * [ RAG  ](../examples/rag/)
            * [ Stream markdown  ](../examples/stream-markdown/)
            * [ Stream whales  ](../examples/stream-whales/)
            * [ Chat App with FastAPI  ](../examples/chat-app/)
            * [ Question Graph  ](../examples/question-graph/)
          * API Reference  API Reference 
            * [ pydantic_ai.agent  ](../api/agent/)
            * [ pydantic_ai.tools  ](../api/tools/)
            * [ pydantic_ai.common_tools  (This example is complete, it can be run "as is")_ test_joke_app.py
                        
                                                from joke_app import MyDeps, application_code, joke_agent
                        
                        
                        class TestMyDeps(MyDeps):  # (1)!
                            async def system_prompt_factory(self) -> str:
                                return 'test prompt'
                        
                        
                        async def test_application_code():
                            test_deps = TestMyDeps('test_key', None)  # (2)!
                            with joke_agent.override(deps=test_deps):  # (3)!
                                joke = await application_code('Tell me a joke.')  # (4)!
                            assert joke.startswith('Did you hear about the toothpaste scandal?')
                        

              1. Define a subclass of `MyDeps` in tests to customise the system prompt factory.
              2. Create an instance of the test dependency, we don't need to pass an `http_client` here as it's not used.
              3. Override the dependencies of the agent for the duration of the `with` block, `test_deps` will be used when the agent is run.
              4. Now we can safely call our application code, the agent will use the overridden dependencies.
Examples The following examples demonstrate how to use dependencies in PydanticAI:
              * [Weather Agent](../examples/weather-agent/)
              * [SQL Generation](../examples/sql-gen/)
              * [RAG](../examples/rag/)
 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/dependencies/", "chunk_size": 4681, "crawled_at": "2025-03-25T05:14:16.434567+00:00"}', '[-0.03477845,0.008346828,0.042915296,-0.007428152,-0.0006693211,0.0341485,0.011319402,0.032363646,-0.004452298,0.009888891,0.03267862,-0.047744907,-0.03241614,-0.040421747,-0.02379371,-0.051235877,-0.02502736,0.030290062,-0.017402349,0.053230714,0.040552985,0.048532344,0.028977668,0.013648901,-0.0036353325,-0.041261677,-0.023714965,0.048663583,0.02563106,-0.032704867,0.041707892,-0.013150192,-0.029975086,0.05391316,0.032363646,0.0073625324,-0.008228713,-0.0032366926,-0.0052955113,0.0126383575,0.021575764,-0.032809857,0.031366225,-0.0011540868,-0.05937272,0.06425483,-0.014633197,0.003704233,0.012631795,-0.010669766,-0.06640715,0.015564997,0.018845983,0.013491414,-0.01484318,-0.010000445,-0.014318222,0.019515304,-0.0141607355,-0.055960495,0.030920012,-0.0044982317,-0.025985409,0.041314173,-0.044516418,-0.015932467,-0.0006295392,0.00023110444,-0.03018507,-0.018229157,0.032127414,0.048899814,-0.03960806,-0.03677329,-0.031759944,0.0017717323,0.042416584,0.045120116,0.045120116,-0.027612777,-0.01876724,0.004212786,-0.02805899,-0.005659701,-0.055330545,-0.03367604,-0.055488035,-0.010892873,-0.009619851,-0.037560727,-0.020460228,0.020827698,-0.03777071,0.0403955,0.06976689,0.052994482,0.0053217593,0.0037862577,0.008287771,0.03328232,0.04561883,-0.0051380238,-0.113495864,0.0054562795,0.07155174,0.002468942,-0.012106838,0.02262568,-0.042206604,0.024266172,-0.07029184,0.010604146,0.022376323,0.021116424,-0.03393852,0.005364412,0.01620807,-0.07065931,0.011562195,-0.084675685,-0.036458313,-0.01943656,0.020657087,0.0049411645,0.045881305,0.003458159,-0.0062601212,-0.028977668,-0.03963431,0.0049542887,0.014370718,-0.00015820503,0.004216067,-0.016194947,-0.017271109,-0.00289547,-0.024134932,-0.021457648,-0.034069758,0.03763947,0.03118249,0.0026887679,-0.0005327501,0.023885578,-0.007664383,0.033256073,-0.038111933,0.0018947694,-0.034594715,0.024213675,0.017271109,0.030972507,-0.063204914,-0.017087374,-0.012959894,-0.014869428,0.011969036,0.037455734,0.04546134,-0.018084794,-0.042784058,0.012454622,-0.020053385,-0.0032530974,-0.039319336,-0.033807278,-0.008674927,0.0058565596,-0.03763947,0.0050592804,0.0006902374,-0.030578788,-0.003044755,-0.011831235,0.063204914,-0.016614912,-0.008589621,-0.026602233,-0.0385319,-0.048926063,-0.006525881,-0.01696926,-0.027429042,0.0049969414,-0.04530385,-0.026129771,-0.011470326,0.03574962,0.0177042,0.04556633,0.04239034,0.009226132,0.014462586,-0.0020407732,0.033151083,-0.01454133,0.05690542,-0.00064676435,0.034463476,-0.013235497,0.010361354,0.03763947,0.03651081,0.012566176,0.010905997,-0.028793933,0.00054792466,-0.028321471,-0.021654507,-0.026142895,0.035985854,-0.06026515,0.020617716,0.04706246,-0.048611086,-0.007027872,-0.012553052,0.034568466,-0.027770264,0.037665717,-0.01597184,0.007231293,0.03643207,-0.042967793,-0.017244862,0.019239701,-0.04239034,-0.06073761,0.0039043732,0.033334818,-0.0022425537,-0.024318667,-0.0056957914,-0.017979803,0.0078021847,-0.05165584,0.009764214,-0.014554453,-0.006758831,0.0037961006,0.016588666,0.03328232,-0.014738189,-0.010696014,0.029765105,0.014016372,-0.036747042,-0.026037904,0.03651081,-0.016811771,0.048558593,-0.02895142,0.031418722,-0.017362976,-0.017809192,-0.068297,0.01410824,-0.0037272,-0.029607616,0.024331791,-0.031602457,0.059320226,-0.022914406,0.016404929,0.005813907,-0.007815308,0.018885355,-0.020053385,0.02206135,0.014803808,0.009632975,-0.0024148056,0.024922369,0.011096294,-0.03761322,-0.018649124,-0.016221194,0.012533366,-0.016378682,-0.004888669,-0.04548759,0.014462586,0.023255628,0.02099831,-0.020342112,0.030368805,-0.0030628003,-0.0012254482,-0.0036287704,0.04223285,-0.014252603,0.05126212,0.018426016,-0.031234985,0.03863689,-0.025644185,-0.0106435185,0.0036386133,0.021077054,-0.01930532,0.011595004,0.00090145087,0.011660624,0.015197527,-0.020840822,0.0033531676,0.023924949,-0.0041373232,-0.0011729525,-0.03816443,0.005065842,0.018426016,0.01720549,-0.0048361733,-0.004235753,-0.045146365,0.04246908,-0.039109353,0.028321471,-0.011385021,-0.08551562,0.0033794155,0.03517217,-0.012533366,-0.034935936,-0.03926684,0.03257363,-0.0020620995,-0.01967279,0.042915296,-0.03467346,-0.020630838,0.014751312,0.02136578,0.006565253,0.005180677,-0.027009076,0.022546936,0.013753893,0.045120116,-0.033151083,0.02489612,-0.0021359217,-0.041209184,0.02123454,0.031339977,0.015525625,0.0068047647,0.011562195,0.049949728,-0.0025575284,-0.005787659,0.0107157,0.017481092,0.0013107539,-0.05057968,-0.037298247,0.015053163,-0.048007384,-0.012743349,-0.050317198,-0.005177396,-0.022087596,-0.0005938584,-0.036852032,-0.0018406331,-0.012927084,-0.0298176,-0.022350077,0.03364979,0.025368582,0.041917875,-0.029555121,-0.0096067265,-0.009980759,0.002173653,-0.029633865,0.007703755,0.017586084,0.013819513,0.052968238,-0.03989679,0.0066341534,0.018714743,0.04895231,0.023045644,0.012539928,0.0059877993,0.0024344914,0.027429042,0.06745707,-0.09480737,-0.010177618,-0.0018225877,-0.011949351,0.026300384,-0.021339532,0.009875768,0.06792953,0.021077054,0.015105659,-0.004875545,-0.021116424,-0.00077923416,0.007703755,0.026562862,0.059162736,-0.008648679,0.025079856,0.004429331,0.053230714,-0.030290062,0.02366247,-0.017743573,-0.021326408,-0.037324496,0.02030274,-0.01620807,0.053256962,0.044805143,-0.015210651,-0.081000976,-0.0045310417,-0.030001335,-0.017179241,0.046012547,0.021995729,-0.0024443346,0.026549738,-0.02756028,-0.0030463955,0.009797024,0.034122255,0.020105882,0.011824673,-0.0052266107,-0.0011073328,0.00024668913,0.017021755,0.003510655,-0.0026871273,-0.032993592,-0.0090030255,0.06100009,-0.0316812,0.009810148,-0.043335263,-0.06257496,0.02559169,-0.011155352,-0.020919565,-0.026195392,-0.0049838177,0.007664383,-0.015420633,-0.017349854,0.034725953,0.0049674124,0.04832236,-0.011325963,0.040579233,0.01943656,-0.029765105,0.06446481,0.013320803,0.059215233,0.05010722,0.009075207,-0.024922369,0.015788104,0.034725953,-0.021890737,-0.015709361,-0.041786637,-0.021497019,-0.026497241,0.024449907,0.0497135,0.0069294423,-0.00070131075,0.017231738,-0.006519319,0.037481982,0.017126746,-0.022126969,0.020184625,-0.031628706,-0.012828655,-0.039319336,0.0070475577,0.0005327501,0.0014821853,0.05764036,-0.014449462,0.009403305,-0.005348007,0.019659668,0.0012475948,-0.015945591,-0.008038416,0.029345138,0.031025002,-0.01131284,0.056642942,0.008668365,-0.04000178,0.025434203,-0.0066013434,-0.007611887,0.010262924,-0.053335708,-0.009134265,0.003956869,0.03577587,-0.020827698,0.025919788,-0.023806833,0.007159111,0.0025542476,-0.00901615,0.011818111,-0.03317733,-0.029502625,0.024699261,0.0052528586,-0.032494884,-0.017087374,-0.021943234,0.0038420344,0.023006273,-0.0018471951,-0.0037698527,0.008937405,-0.006358551,-0.02842646,0.03501468,0.0057482873,0.0075593917,0.0017750134,-0.0013837558,-0.021273913,0.020079633,-0.018281654,-0.023833081,-0.027114067,0.017218614,0.0031021722,0.008865224,0.0076578213,-0.01926595,0.06509476,-0.009213008,0.020184625,0.010696014,0.04236409,0.016365558,-0.013163315,-0.014357594,0.017271109,-0.01378014,0.010860063,-0.031864934,0.010722262,-0.0024574585,-0.005416908,0.030998755,0.026484119,-0.008996463,-0.038689386,0.016549293,0.019187205,0.011240657,-0.044332683,-0.007395342,0.0074675237,0.0040421747,0.023504984,-0.0063946415,-0.019554676,-0.010413849,0.0065915007,-0.030421302,0.01341267,0.027140316,-0.021903861,-0.02053897,-0.011896855,-0.009304876,-0.029843848,-0.0026362722,-0.01783544,-0.0010113639,-0.02372809,0.016523045,-0.0201715,0.01217902,0.0034187874,0.019423436,-0.032232404,0.039030608,0.012749911,-0.03611709,-0.009521421,-0.0047935206,-0.018688496,-0.0030644408,0.005528461,0.02452865,-0.005370974,0.0014772639,-0.0047377436,-0.011037236,-0.002911875,-0.04320402,-0.045120116,-0.00078005437,0.002252397,0.0100923125,0.033623543,-0.019961517,-0.0036025224,0.00057089154,-0.0076840688,0.014331346,0.02452865,-0.017244862,0.017048003,-0.0131239435,0.00044457358,0.009108017,-0.018636,0.026418498,0.0012426734,-0.008117159,-0.0022737233,-0.0011975599,-0.0113062775,-0.0012024813,0.023872454,-0.05401815,0.0068703843,0.0075265816,0.019462809,-0.007966233,0.016352434,0.01664116,-0.020420857,0.0005245476,0.057955336,-0.03154996,0.008911158,-0.0087011745,0.017599208,0.019108461,0.024541775,0.03567088,-0.002400041,-0.018793488,-0.031418722,0.04060548,-0.03816443,0.0002415626,0.017179241,-0.03165495,0.00921957,0.021969482,0.01647055,0.009239256,0.021877615,0.0064471373,-0.02229758,-0.00632246,0.031471215,0.019620296,-0.015709361,-0.01078132,0.005840155,-0.03430599,-0.028872676,0.028531453,-0.00456057,-0.021208292,-0.03404351,0.017887935,0.05685292,-0.05790284,0.010269485,0.031891182,-0.011424392,0.037481982,-0.0073034745,-0.007979358,0.0040913895,-0.01720549,0.024423659,-0.0055153375,-0.026247887,0.002416446,-0.0061912206,-0.06037014,-0.016221194,-0.0056957914,0.020643963,0.020657087,-0.043912716,-0.044516418,-0.01597184,0.032599878,0.04139292,0.0023901982,-0.0047541484,0.006069824,-0.01217902,0.0093639335,-0.030867515,-0.0043604304,-0.0017192366,-0.01384576,0.040421747,-0.021772623,-0.03330857,0.025066731,-0.0032334116,-0.003924059,0.0010523762,-0.03837441,-0.01750734,0.051760834,0.0006184658,0.01893785,-0.019489055,0.009842957,-0.0007152549,-0.015827475,-0.020014014,-0.018727867,-0.073336594,0.0037862577,-0.006220749,-0.0035992416,0.003700952,0.0028774247,-0.008615869,0.008707737,-0.013051762,-0.006745707,0.030762523,0.044988878,-0.021680756,0.031523712,-0.032442387,0.010958493,-0.0062601212,-0.004101232,-0.004606504,0.01783544,-0.00013226474,-0.0007017209,-0.045277607,0.019830279,-0.0007849759,-0.0066111865,-0.046117537,0.028688941,-0.029003914,-0.02559169,0.0048197685,-0.04147166,0.006758831,0.030946258,0.02808524,-0.034515973,-0.000362754,0.002778995,0.020985186,-0.034463476,-0.020210873,0.005279106,0.01244806,-0.020040262,0.007441276,0.03527716,-0.019620296,-0.0012631796,0.023399992,-0.022205712,-0.0051872386,-0.0038978113,-0.030788772,-0.058322806,-0.02931889,-0.023964321,-0.026077276,0.0050264704,0.021956358,0.019252826,0.026313506,-0.109611176,-0.044358928,0.004937884,-0.022087596,0.019974642,0.010144808,0.03517217,0.003510655,-0.019449685,0.019830279,0.011509699,-0.008891472,-0.0058631217,-0.017559836,0.029975086,-0.0052397344,0.029607616,-0.008937405,0.05084216,0.0087602325,-0.030237567,-0.023911824,-0...', '2025-03-25 05:14:19.198155+00'), ('14', 'https://ai.pydantic.dev/agents/', '0', 'PydanticAI Agents Documentation', 'This documentation provides an overview of the PydanticAI Agents feature, including sections on introduction, installation, usage, troubleshooting, and contributing. It highlights key aspects such as running agents, iterating over an agent's graph, streaming, and configuration options.', 'MCP Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Agents  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
          * [ Introduction  ](..)
          * [ Installation  ](../install/)
          * [ Getting Help  ](../help/)
          * [ Contributing  ](../contributing/)
          * [ Troubleshooting  ](../troubleshooting/)
          * Documentation  Documentation 
            * Agents  [ Agents  ](./) Table of contents 
              * Introduction 
              * Running Agents 
                * Iterating Over an Agent's Graph 
                  * async for iteration 
                  * Using .next(...) manually 
                  * Accessing usage and the final result 
                * Streaming 
                * Additional Configuration 
                  * Usage Limits 
                  * Model (Run) Settings 
                * Model specific settings 
              * Runs vs. Conversations 
              * Type safe by design 
              * System Prompts 
              * Reflection and self-correction 
              * Model errors 
            * [ Models  ](../models/)
            * [ Dependencies  ](../dependencies/)
            * [ Function Tools  ](../tools/)
            * [ Common Tools  ](../common_tools/)
            * [ Results  ](../results/)
            * [ Messages and chat history  ](../message-history/)
            * [ Testing and Evals  ](../testing-evals/)
            * [ Debugging and Monitoring  ](../logfire/)
            * [ Multi-agent Applications  ](../multi-agent-applications/)
            * [ Graphs  ](../graph/)
            * [ Image, Audio & Document Input  ](../input/)
            * [ MCP  ](../mcp/) MCP 
              * [ Client  ](../mcp/client/)
              * [ Server  ](../mcp/server/)
              * [ MCP Run Python  ](../mcp/run-python/)
            * [ Command Line Interface (CLI)  ](../cli/)
          * [ Examples  ](../examples/) Examples 
            * [ Pydantic Model  ](../examples/pydantic-model/)
            * [ Weather agent  ](../examples/weather-agent/)
            * [ Bank support  ](../examples/bank-support/)
            * [ SQL Generation  ](../examples/sql-gen/)
            * [ Flight booking  ](../examples/flight-booking/)
            * [ RAG  ](../examples/rag/)
            * [ Stream markdown  ](../examples/stream-markdown/)
            * [ Stream whales  ](../examples/stream-whales/)
            * [ Chat App with FastAPI  ](../examples/chat-app/)
            * [ Question Graph  ](../examples/question-graph/)
          * API Reference  API Reference 
            * [ pydantic_ai.agent  ](../api/agent/)
            * [ pydantic_ai.tools  ](../api/tools/)
            * [ pydantic_ai.common_tools  ](../api/common_tools/)
            * [ pydantic_ai.result  ](../api/result/)
            * [ pydantic_ai.messages  ](../api/messages/)
            * [ pydantic_ai.exceptions  ](../api/exceptions/)
            * [ pydantic_ai.settings  ](../api/settings/)
            * [ pydantic_ai.usage  ](../api/usage/)
            * [ pydantic_ai.mcp  ](../api/mcp/)
            * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
            * [ pydantic_ai.models  ](../api/models/base/)
            * [ pydantic_ai.models.openai  ](../api/models/openai/)
            * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
            * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
            * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
            * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
            * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
            * [ pydantic_ai.models.groq  ](../api/models/groq/)
            * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
            * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
            * [ pydantic_ai.models.test  ](../api/models/test/)
            * [ pydantic_ai.models.function  ](../api/models/function/)
            * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
            * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
            * [ pydantic_ai.providers  ](../api/providers/)
            * [ pydantic_graph  ](../api/pydantic_graph/graph/)
            * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
            * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
            * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
            * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
          * Introduction 
          * Running Agents 
            * Iterating Over an Agent's Graph 
              * async for iteration 
              * Using .next(...) manually 
              * Acces', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 5000, "crawled_at": "2025-03-25T05:14:16.432862+00:00"}', '[-0.008815084,0.011208041,0.039841723,-0.011746627,-0.012073869,0.03493309,-0.0010976244,0.03174248,0.0074106692,0.016798425,0.028797302,-0.08093787,-0.023056932,-0.006367585,0.022388812,-0.005651743,-0.03171521,-0.003759875,0.008828718,0.06463031,0.03809643,0.035260335,0.012196585,0.028115548,-0.005055208,0.021734327,-0.025156735,0.06463031,0.009360487,-0.026397526,0.046959236,-0.0117261745,-0.0632668,0.010062694,0.026874755,0.01651209,-0.0074856626,0.0274747,-0.012796529,0.015434918,0.0034036585,-0.0350149,0.03594209,0.005310866,-0.029533597,0.0062448694,-0.008181051,0.016280293,0.021093478,0.010608098,-0.07941074,0.020384453,-0.024052292,0.030651674,-0.021011667,-0.019866321,-0.034005906,-0.026779309,-0.0018833464,-0.040414397,0.008801448,-0.01340329,-0.009742269,0.05857633,-0.03348777,-0.024952209,-0.051267926,0.00016074488,-0.05044982,-0.01234657,0.010601279,0.046713807,-0.03613298,-0.06157605,-0.043386843,-0.019866321,0.02267515,0.07722913,-0.0056074294,-0.033869553,-0.00413484,0.020316279,-0.0071856906,-0.009714999,-0.02664296,-0.034005906,-0.03504217,-0.0056926487,-0.013451013,-0.043959517,-0.018380096,0.017302925,-0.031333428,0.011119413,0.09882711,-0.004281417,0.004820003,0.032778747,0.022020664,0.002478177,0.019716335,-0.054867588,-0.04608659,0.0036814732,0.03678746,-0.00868555,0.017671071,0.005324501,-0.035260335,-0.0028787076,-0.14889514,-0.013362384,-0.011889795,0.03460585,-0.062394153,-0.0035144435,0.013962328,0.00010183705,0.0062107816,-0.054785777,-0.034169525,0.035887547,0.021870678,-0.010130869,0.025129464,-0.006582338,-0.0042916434,-0.022797864,-0.032669667,-0.011521648,0.04087799,-0.017166574,0.021202559,-0.039214507,-0.0046768347,0.010055876,-0.029697219,-0.0030201715,-0.027133822,0.03935086,0.030351702,-0.029533597,0.00021176993,0.018693704,-0.007731094,0.014316841,-0.04908631,0.011467108,-0.038750917,-0.0028872294,0.02986084,0.010083146,-0.052849595,-0.017630167,-0.04289598,0.020329913,0.013546458,0.03438769,0.019484539,-0.047968235,-0.025184004,0.057594605,-0.013519188,-0.007451575,-0.033324152,0.004755236,-0.03168794,-0.0014478758,-0.04308687,-0.032315154,-0.025838489,-0.050886143,-0.03779646,-0.019034581,0.016184848,-0.051186115,-0.03204245,-0.020657156,-0.033924095,-0.029779028,-0.027065646,0.012476104,-0.030569864,-0.0043223226,-0.014466827,-0.013771437,-0.0036030717,0.032424234,-0.025688503,0.048022773,0.02830644,0.045377567,0.0487318,0.032478776,0.017848328,-0.018748244,0.063539505,-0.011133048,0.0037803277,0.013437377,0.0053688153,0.009149143,0.071720555,0.0135737285,0.01978451,-0.017589262,0.014889514,0.016184848,-0.0031292522,-0.025647597,0.039950803,-0.037414677,0.026465703,-0.0058562695,-0.038396403,-0.0150395,-0.054294914,0.00713115,-0.01761653,0.0396781,-0.032369696,0.045159407,0.016798425,-0.014712258,0.012851069,-0.0023742095,0.02819736,-0.068884455,0.034169525,0.039623562,0.034169525,0.010117234,-0.020411724,-0.009844532,0.02664296,-0.052740514,0.034960363,0.0032690119,-0.017671071,-0.0039950805,-0.0026792944,-0.004755236,-0.011371662,-6.7962384e-05,0.0131578585,0.010942156,-0.0069129886,-0.052522354,0.036651112,0.027297443,0.02849733,0.018611893,0.00079552206,0.009824079,-0.0040768906,-0.016062131,-0.005985803,0.0011479039,-0.03905089,0.011480743,-0.011426202,0.051186115,-0.037278324,-0.008133329,-0.011692086,-0.008999157,-0.024379535,0.009517291,-0.04415041,-0.04248693,0.0274747,0.029479057,0.071502395,-0.0048847697,-0.049140852,0.0148758795,-0.012851069,0.034551308,0.01026722,0.010280855,-0.008637827,0.0055017574,0.058194548,0.0173711,0.003451381,0.027501969,0.015666714,-0.015380377,-0.0027099734,0.003113913,0.005331319,0.01895277,0.038532753,-0.03613298,0.014971325,-0.012980602,0.04401406,0.0016251318,0.026588418,-0.00030316762,0.05219511,0.028279169,-0.026520243,-0.011528466,0.008146964,0.044777624,-0.0028105322,-0.022456987,0.035696656,-0.04109615,-0.048159126,0.0020912813,-0.011610276,-0.023929577,0.013212399,-0.021966124,0.08688277,-0.014739528,0.044913974,-0.021925218,-0.07292044,-0.060976107,0.009442297,0.0013021508,-0.062066913,-0.013914606,0.027351983,0.0056551523,-0.0031156172,-0.0015509911,0.021202559,-0.04783188,0.0019634524,0.026847485,-0.0047790976,-0.02986084,-0.020902587,0.03493309,-0.011364845,0.027147457,-0.03457858,-0.0422415,-0.06550296,-0.029288165,-0.013519188,0.005143836,0.012701083,0.03438769,0.014194125,0.0032945778,0.0131578585,0.005116566,0.01820284,0.030569864,-0.013880518,0.010192227,-0.026492972,-0.019811781,-0.0042780084,0.04300506,-0.09004611,0.00335764,-0.0067391414,0.002478177,-0.02206157,0.027447429,-0.029233625,-0.016021226,-0.016689345,-0.0059483065,0.062230535,0.00693685,-0.0139895985,-0.024952209,-0.032669667,-0.004421177,-0.035423953,-0.010144504,0.01332148,0.023220552,0.021038938,0.0266975,0.025020383,0.016757522,0.041396122,0.0024884033,-0.0069198064,0.0030338068,-0.022988755,0.06479393,0.057540063,-0.022388812,-0.0009945091,-0.009844532,0.02691566,0.003079825,0.019402727,0.0039507663,0.06337588,0.0070357043,-0.0088355355,0.035287604,-0.043332305,0.032506045,-0.0282519,0.004179154,0.07182963,0.020698061,-0.013662357,-0.017439276,0.032396965,-0.03157886,0.01728929,-0.014644083,-0.025020383,-0.0365693,-0.0069129886,0.011133048,0.035614844,0.035342142,-0.011235311,-0.07466573,-0.037414677,0.0091218725,-0.067575485,0.059776217,0.063539505,-0.049904417,0.0072606835,-0.047068316,0.01345783,0.040278044,0.031360697,0.0081605995,0.008051518,-0.01906185,0.013887336,0.01371008,0.010308125,0.0021986577,0.042841442,-0.053095028,-0.027651954,0.042296037,-0.030651674,-0.025906663,-6.977329e-05,-0.05361316,0.016757522,-0.03460585,-0.0051131574,-0.024611332,-0.018557353,0.013621451,-0.028797302,-0.044586733,0.08077425,-0.023016026,0.048595447,-0.01381916,0.048022773,0.016839331,-0.037223786,0.03583301,-0.014357746,-0.005239282,0.025320355,-0.013635086,0.004547301,0.018816419,0.06310318,-0.026356623,-0.011085325,-0.028688222,-0.02380686,-0.041723363,0.021475261,0.013594181,-0.022497892,0.004997259,0.036978353,-0.03149705,0.0022685374,0.02522491,0.0005151506,0.078810796,-0.014398651,-0.0068516308,-0.010246768,0.025074923,-0.012701083,0.009735452,0.027311077,-0.016348468,0.02841552,-0.030488053,-0.027365617,-0.010574009,-0.022211555,-0.035642117,-0.035451226,-0.0031974278,-0.014698623,0.030624405,0.007969708,-0.010383118,0.021352544,-0.012285213,-0.00749248,0.029260896,-0.03635114,0.00746521,-0.001395892,0.030815296,0.001652402,0.031006187,-0.012919244,0.009510472,0.01839373,0.0045575276,0.025483977,-0.021884313,-0.015121311,0.007846992,0.015639445,-0.0021185516,-0.021025304,-0.017357465,-0.037360135,-0.026479337,0.018720973,0.014453191,0.025293086,-0.005791503,-0.053367727,0.035096712,-0.012517009,-0.016702982,-0.04775007,-0.026479337,-0.005583568,0.0024935163,-0.020275373,-0.0029076822,-0.021488896,-0.003865547,0.019307282,-0.027488334,-0.005941489,0.03127889,0.05993984,-0.010362665,0.016403008,-0.018816419,0.03160613,0.024965843,0.0026775901,-0.0269702,0.05546753,-0.02300239,-0.009265041,-0.0189255,0.0298063,0.00345479,-0.0012211924,0.030079,0.027283808,-0.025743043,-0.03512398,-0.011262582,0.010948975,-0.0010004744,-0.0064255344,-0.0049529453,-0.010342213,-0.008201504,-0.011807985,-0.010219498,-0.029669948,-0.008726455,-0.0165939,-0.01104442,0.017248385,0.01745291,-0.023793226,0.009053697,-0.020248104,0.0060096644,0.025483977,0.013205581,0.005730145,-0.007731094,-0.024065927,-0.024079563,-0.029097274,0.014862244,0.032069724,-0.007697006,-0.03926905,0.011842072,0.009476385,-0.016607536,-0.008815084,0.019811781,0.015380377,0.02300239,-0.024761317,0.0066368785,-0.030897105,-0.028988194,-0.017234748,0.0039780363,-0.0012851069,-0.034142256,-0.027706495,0.038260054,-0.03185156,0.018461907,0.054104023,-0.020957127,-0.00041054393,0.013212399,0.01967543,0.0062755486,-0.002977562,-0.012769259,0.0006510754,-0.03637841,-0.006861857,0.015584904,-0.024243183,0.033705935,0.024243183,0.024652235,-0.020657156,0.005477896,-0.0008257749,-0.024065927,-0.006428943,-0.025429435,0.0474501,0.040332586,-0.03749649,-0.015993956,0.03359685,-0.023493255,-0.008508294,0.008399213,0.012898792,-0.01803922,0.00474501,-0.011228493,0.01653936,0.003124139,0.023220552,-0.010662638,-0.008951434,-0.017821059,-0.020861682,0.026356623,-0.058958113,0.032096993,0.0013941876,-0.009892255,-0.039105427,0.03490582,0.032778747,0.042023335,-0.007785634,0.013832795,-0.017071128,0.0282519,0.02200703,0.02552488,-0.008010613,-0.011003515,0.0067391414,-0.028279169,-0.020425359,0.030760754,-0.02986084,-0.014248665,-0.06741187,0.03798735,0.06942986,-0.019429998,0.016389374,0.015966685,0.008903711,0.029642677,-0.002536126,-0.020125387,0.026342986,0.007342494,0.006428943,-0.023056932,-0.0181483,0.030488053,-0.007697006,-0.12053417,-0.0118557075,0.0015688871,0.0015884875,0.022047935,-0.029533597,-0.018257381,-0.01107169,0.007315224,0.013253304,-0.035178524,-0.016852967,0.012619273,-0.0064562135,0.021025304,-0.009319581,-0.004281417,-0.0061085187,0.01570762,0.0015970095,-0.013505553,-0.006459622,0.040114425,0.0063982643,0.011235311,-0.006820952,-0.04145066,-0.00821514,0.03951448,-0.0076015606,0.0037837364,0.0013967442,0.014671353,0.00059525674,-0.017384736,0.005385859,-0.0069163977,-0.036105707,0.03457858,-0.025347626,0.002491812,-0.007840174,-0.006248278,-0.016893871,-0.028715491,-0.013491918,-0.027870117,0.01418049,0.047804613,-0.017575625,0.0042609647,0.0033866146,0.012114774,-0.012639725,0.0013098205,0.009190048,-0.011392115,0.010751265,0.0037530574,-0.02350689,-0.009558195,-0.0030065365,0.022320636,-0.03204245,0.023997752,-0.011917066,-0.012612455,0.02996992,-0.022484258,-0.025129464,-0.000591848,-0.016293928,-0.0014683284,0.023097835,0.011807985,0.024379535,-0.023629604,0.0041961977,-0.040550746,0.008985522,0.005583568,-0.0003370423,0.0021458217,-0.021802504,-0.009578648,-0.0028940472,-0.014425921,0.01578943,-0.013526006,-0.037169244,-0.041559745,-0.068448134,0.007478845,0.0064255344,-0.032015182,0.0054676696,-0.030733485,0.01179435,-0.10542649,-0.0010746153,0.004877952,0.0054131295,0.03607844,-0.022852404,0.014071409,0.035887547,0.004254147,-0.037332866,0.011814802,0.0022242235,-0.031960644,-0.012367023,0.031442508,-0.0154212825,0.023111472,-0.00081980956,0.00629941,0.012619273,-0.020289008,0.0013984485,-0.011201223,0.048022773...', '2025-03-25 05:14:21.483792+00'), ('15', 'https://ai.pydantic.dev/agents/', '1', 'Introduction to Agents in PydanticAI', 'Agents serve as the main interface for interacting with LLMs in PydanticAI, capable of controlling applications or working together for complex workflows. Each agent contains a system prompt, which provides instructions for the LLM, and may also include function tools for information retrieval during response generation.', 'sing usage and the final result 
            * Streaming 
            * Additional Configuration 
              * Usage Limits 
              * Model (Run) Settings 
            * Model specific settings 
          * Runs vs. Conversations 
          * Type safe by design 
          * System Prompts 
          * Reflection and self-correction 
          * Model errors 
Agents Introduction Agents are PydanticAI's primary interface for interacting with LLMs. In some use cases a single Agent will control an entire application or component, but multiple agents can also interact to embody more complex workflows. The [`Agent`](../api/agent/#pydantic_ai.agent.Agent) class has full API documentation, but conceptually you can think of an agent as a container for: **Component** | **Description**  
---|---  
System prompt(s) | A set of instructions for the LLM written by the developer.  
[Function tool(s)](../tools/) | Functions that the LLM may call to get information while generating a response.  
[Structured result type](../results/) | The structured datatype the LLM must return at the end of a run, if specified.  
[Dependency type constraint](../dependencies/) | System prompt functions, tools, and result validators may all use dependencies when they're run.  
[LLM model](../api/models/base/) | Optional default LLM model associated with the agent. Can also be specified when running the agent.  
Model Settings | Optional default model settings to help fine tune requests. Can also be specified when running the agent.  
In typing terms, agents are generic in their dependency and result types, e.g., an agent which required dependencies of type `Foobar` and returned results of type `list[str]` would have type `Agent[Foobar, list[str]]`. In practice, you shouldn't need to care about this, it should just mean your IDE can tell you when you have the right type, and if you choose to use static type checking it should work well with PydanticAI. Here's a toy example of an agent that simulates a roulette wheel: roulette_wheel.py
                
                                from pydantic_ai import Agent, RunContext
                
                roulette_agent = Agent(  # (1)!
                    'openai:gpt-4o',
                    deps_type=int,
                    result_type=bool,
                    system_prompt=(
                        'Use the `roulette_wheel` function to see if the '
                        'customer has won based on the number they provide.'
                    ),
                )
                
                
                @roulette_agent.tool
                async def roulette_wheel(ctx: RunContext[int], square: int) -> str:  # (2)!
                    """check if the square is a winner"""
                    return 'winner' if square == ctx.deps else 'loser'
                
                
                # Run the agent
                success_number = 18  # (3)!
                result = roulette_agent.run_sync('Put my money on square eighteen', deps=success_number)
                print(result.data)  # (4)!
                #> True
                
                result = roulette_agent.run_sync('I bet five is the winner', deps=success_number)
                print(result.data)
                #> False', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 3288, "crawled_at": "2025-03-25T05:14:13.438202+00:00"}', '[-0.048172016,0.013944167,0.02452846,-0.017794887,0.008945837,0.027943641,0.010121101,0.00086935004,0.035119668,0.004210212,-0.0019236314,-0.0741661,-0.00085206673,-0.0014059965,0.009312242,-0.02271717,-0.041922376,0.026325924,0.0028258197,0.03346047,0.02633975,0.0065883943,0.027998947,0.023159623,-0.0045178547,-0.0011000821,-0.0037470197,0.036447026,0.0008365117,0.005841756,0.041590534,-0.0123748435,-0.03849337,-0.007625392,-0.024417847,-0.022247065,0.042779624,0.03951654,0.00092811324,0.013964907,-0.021846091,-0.030501569,0.032133114,0.022274718,-0.026284443,0.03448364,0.012354103,0.013557021,-0.02473586,0.009948268,-0.056689225,0.04720415,0.0091463225,0.0076945256,0.000795896,-0.008669304,0.0040546623,0.025261272,0.023076663,-0.06133498,-0.0153613975,0.009070276,-0.0014206873,0.04474301,-0.037055396,-0.020325162,-0.07117955,0.04358157,-0.04601506,-0.0013636524,0.035119668,0.006277295,-0.014863638,0.009733955,-0.022952223,-0.03362639,0.044134635,0.07366834,0.003482585,0.01555497,-0.0028310046,-0.019315816,0.01909459,0.0014725372,-0.011406979,-0.03852102,-0.034262415,-0.00901497,-0.029174212,-0.05284542,-0.021334507,0.03301802,-0.0047045145,0.020739961,0.063104786,0.030999327,0.009305329,0.009111756,0.03708305,0.03000381,0.035783347,-0.02629827,-0.038880512,0.00074966316,0.030142076,0.0019910363,0.0057691657,-0.006896037,-0.0707924,-0.0107778665,-0.07444263,-0.0055997893,-0.031635355,0.038880512,-0.054394003,0.0051607937,0.050467238,0.023975395,0.016605794,-0.033349857,-0.026657762,-0.0051020305,-0.0019184464,0.0018665965,0.013716027,0.004272432,-0.023892434,-0.050688464,0.013944167,-0.011462285,0.02461142,0.006553828,0.0022969507,-0.004116882,-0.02967197,-0.02663011,0.015029558,-0.033571083,-0.039903685,0.016661102,0.014490319,-0.008365118,-0.027708588,-0.006692094,-0.018831884,0.01888719,-0.06835891,0.012748162,-0.0455173,-0.011220319,0.022191757,-0.023615902,-0.038797554,-0.0041514486,-0.04703823,0.0009937898,-0.030280342,0.04145227,0.021804612,-0.027335268,-0.013474061,0.08943071,-0.016619623,0.00047399453,-0.01407552,-0.009962094,-0.03185658,-0.006692094,-0.029340131,0.010563553,0.011517592,-0.0017101826,-0.008254505,-0.02230237,0.041479923,-0.05674453,-0.018652137,-0.06050538,-0.025344232,-0.060062926,-0.042198908,-0.005264493,-0.019454082,-0.04053971,0.0013074817,-0.002969271,0.016757889,-0.020062456,-0.024376366,0.0045489646,0.024915606,0.061058443,0.030114423,0.026533322,-0.0043588486,-0.011047486,0.06498521,-0.018154379,0.023712689,-0.020560214,0.023698863,0.026865162,0.020394295,0.0058728657,0.0024697836,-0.049997132,0.0044521783,0.0026322466,-0.035202626,-0.017974632,0.017642794,-0.048503853,0.031663008,-0.042115945,-0.07112424,-0.0056067025,-0.011061313,0.034677215,-0.024915606,0.059399247,-0.009229283,0.027874507,0.0067059207,-0.011441545,-0.04330504,0.011552158,0.031552393,-0.026077043,0.022827784,0.030501569,-0.016329262,0.002231274,-0.0088352235,-0.032686178,0.032216072,-0.047425378,0.020850575,0.0018216599,-0.025579285,-0.00891127,-0.005668923,-0.019066937,0.01232645,-0.022412984,0.0028517446,0.040263176,0.0009505815,-0.01276199,0.042613707,0.01617717,0.029616663,-0.008254505,-0.014027127,-0.013017782,-0.026726896,-0.011489938,0.0042931717,-0.025468672,-0.01230571,-0.0061805085,0.01946791,0.0008015131,-0.051130917,-0.002958901,-0.0006131251,-0.019799748,0.014089347,-0.013135308,-0.0070654135,-0.03758081,-0.017628966,0.015942117,-0.015707064,-0.005046724,-0.0387699,-0.016370742,0.019440256,0.017062074,-0.005347453,0.013308141,-0.003926766,0.023422329,0.055776667,0.049084574,0.0073972526,-0.0035638167,-0.016647276,-0.022371504,0.016661102,-0.009270762,0.021804612,0.039571844,0.020864401,-0.0105704665,0.008586343,-0.021182414,0.0345666,-0.0070031933,-0.03843806,-0.0053197998,0.021403639,0.01663345,-0.021555733,-0.02704491,-0.012734336,0.017642794,-0.0092154555,-0.018901018,0.033875268,-0.021057973,0.0073281196,0.0876609,-0.009727041,-0.023339368,-0.029782584,-0.040899202,0.0598417,-0.0029554444,0.056855146,-0.011178839,-0.04087155,0.0036847997,0.054836456,-0.007791312,-0.038714595,-0.0155687975,0.024639074,0.008607084,-0.023159623,-0.0010093447,0.032630872,-0.024943259,-0.018610658,0.04966529,-0.006719747,-0.027819201,-0.048835695,0.031884234,-0.01230571,0.0471765,-0.067750536,0.026961949,-0.027722415,-0.008607084,-0.025496325,0.04139696,0.009941354,0.02090588,0.02271717,0.006816534,-0.010446027,-0.011268712,0.004911914,0.038576327,-0.0123402765,0.007687612,-0.029340131,0.011559071,-0.041728802,0.016882328,-0.090592146,-0.0087660905,-0.012609896,0.024970913,-0.044300556,0.009187803,0.010591207,-0.04720415,-0.012713596,0.033847615,0.043083813,0.024846474,-0.0459321,0.001188227,0.010563553,0.0025095353,-0.026754549,-0.001272915,-0.010881566,0.011925478,0.022191757,0.03683417,0.027418228,-0.004137622,0.038880512,0.037995607,-3.7186102e-05,0.0016108037,-0.027183175,0.015015732,0.041839413,-0.04902927,-0.045904446,-0.0025527435,0.020186896,0.017919326,-0.018928671,0.020311335,0.050356627,-0.021693999,-0.026726896,-0.041839413,-0.007818965,0.015347571,-0.00884905,0.02625679,0.042779624,0.0072382465,-0.006885667,0.045296073,0.07411079,0.007535519,0.028870026,-0.050467238,-0.013308141,-0.050605506,-0.0039025692,-0.009395203,0.04966529,0.073336504,-0.004096142,-0.06282826,0.028054254,-0.0052852333,-0.022952223,0.044549435,0.023947742,-0.019799748,-0.012229663,-0.023201102,0.036668252,0.04720415,0.02692047,-0.008074758,0.010190234,-0.010563553,0.020007148,0.0066851806,-0.0076530455,-0.008434251,0.016854675,-0.011711164,0.00050596864,0.065261744,-0.03777438,0.008019451,-0.04822732,-0.035589773,0.062330496,-0.03758081,-0.046817005,-0.007431819,-0.018320298,0.014766852,-0.044549435,-0.07034995,0.08871172,-2.916557e-06,0.054670535,0.009374462,0.02242681,0.01757366,-0.043222077,0.004728711,-0.014766852,0.03608753,-0.016356915,0.0014889564,-0.015126345,0.02815104,-0.002958901,-0.024210447,0.009139409,0.0031611156,-0.0071967663,-0.018403258,0.013709114,0.0062911212,-0.007341946,-0.023740342,0.036612943,0.0064674113,0.013128395,0.024542287,-0.01563793,0.022164105,-0.0048842607,-0.028621146,-0.045655567,0.026063217,-0.004393415,-0.0031472892,0.05679984,-0.016923808,0.06000762,-0.0034583884,0.03766377,-0.0014431556,-0.041507576,-0.02136216,0.009533469,-0.018306471,-0.020919707,0.07516162,0.008095498,-0.0140409535,0.033737004,0.00010423991,-0.007383426,0.054145124,-0.017864019,-0.0037746727,-0.010936873,0.005776079,0.0011856344,-0.0033909837,0.0024473153,-0.020463428,-0.013750594,-0.0026426166,0.032243725,-0.005727686,-0.0025959518,-0.003660603,0.029035944,-0.003524065,0.006740487,-0.023712689,-0.0014777222,-0.018804232,-0.00017369718,0.0067819674,0.011676598,0.0012426693,-0.033156283,0.027114041,0.023339368,0.01650901,-0.04103747,-0.029284824,-0.021002667,-0.0071552866,-0.0012219293,0.0041860156,-0.012886429,0.021251546,0.0034704867,-0.01765662,0.01382664,0.005264493,0.064763986,0.021140933,-0.0025890383,-0.012734336,0.038963474,-0.026436538,-0.0145318,-0.007272813,-0.005378563,-0.0023591705,-0.036308758,-0.01576237,-0.00055738643,-0.010487507,0.011199579,0.026146177,0.017642794,0.005827929,-0.0053128866,0.001932273,-0.022952223,0.014545626,-0.009644082,-0.0064604976,0.016108036,-0.036115184,0.017103555,0.0006273838,-0.03346047,0.045047194,0.00036899847,-0.03893582,0.0026149633,-0.004147992,0.0001859035,-0.0143520525,-0.021818439,0.004956851,0.010121101,0.012333363,0.024182795,-0.020892054,-0.021293025,0.0009989748,-0.04687231,0.030944021,-0.00012660018,0.030833408,-0.024874127,0.006059525,0.035949264,-0.009554208,-0.015084865,0.01905311,0.006142485,-0.00911867,-0.013729854,0.028261654,-0.030280342,0.002414477,-0.013854294,-0.0073903394,0.0056896624,-0.032796793,-0.02552398,0.008461904,-0.04114808,0.0015209304,0.075714685,-0.025164485,-0.03406884,0.032547913,0.00520573,0.0058313855,0.00090132415,0.005696576,-0.00040810194,-0.0051538805,-0.011324018,0.03791265,-0.053453792,0.013840467,0.036806516,0.023339368,-0.01576237,0.0010534172,-0.02456994,-0.029810237,0.015071038,-0.01066034,0.02304901,0.010978352,0.012437063,-0.019136071,-0.004237865,-0.011137359,-0.014974251,0.004576618,0.038272142,-0.025164485,-0.011379325,-0.03370935,0.02069848,0.0024784254,0.0125822425,-0.009471249,0.0018389432,-0.021970531,0.013875034,0.0014863638,-0.052209396,0.013017782,-0.007639219,-0.030059116,-0.0016557402,0.040401444,0.021210067,-0.0028344614,0.014490319,0.005644726,-0.07278343,0.0039613326,-0.0014094532,0.015001905,0.006111375,0.005713859,0.0012003252,-0.022136452,-0.060118232,0.02958901,-0.009810002,-0.022606557,-0.037387237,0.03025269,0.04316677,-0.00889053,0.0062185316,0.00841351,0.026201483,0.042530745,-0.012865689,0.0023211474,-0.008966576,0.01905311,0.023574421,-0.0012089668,-0.008717697,0.00019875796,0.010141841,-0.057186984,-0.02275865,0.004873891,0.004085772,-0.016495181,-0.026035564,-0.025745204,0.0077843987,0.013639981,0.010017401,0.001194276,-0.0020515278,0.017269474,-0.024196621,0.014822159,-0.031220553,0.013391102,-0.0030314908,-0.03110994,0.013750594,-0.0054684365,-0.04189472,0.010563553,-0.046899963,-0.022495944,0.0007090474,-0.03741489,-0.023021357,0.042945545,-0.027086388,0.009533469,0.0011614378,-0.04584914,0.026146177,-0.026201483,0.011213405,-0.008710784,-0.052817766,0.023933915,-0.055168297,-0.011593638,-0.013778247,-0.0008175001,-0.014545626,0.0049879607,0.011849431,0.018569179,0.023491463,0.026270617,-0.0059938487,0.008524124,-0.008441164,0.011980784,0.0023418872,0.01592829,0.01072256,0.0036778864,-0.0057622525,-0.024666727,-0.008800657,0.009201629,0.0065054344,0.007556259,-0.021555733,0.03177362,0.017794887,-0.0092500225,0.026035564,-0.019855056,-0.027390575,0.000607508,-0.023463808,0.007514779,0.0125131095,-0.0006744808,0.04275197,-0.04197768,0.014628585,-0.016965289,0.03995899,-0.0012055102,-0.00851721,0.011794125,-0.005952369,-0.0009860123,0.02519214,-0.015084865,-0.009512729,-0.015831504,-0.010563553,-0.012858775,-0.053979203,-0.0015788295,-0.006080265,-0.0005807189,0.011780297,0.01876275,0.04836559,-0.08920948,-0.03473252,0.014559452,-0.0140409535,0.04045675,-0.032077804,0.04239248,0.033156283,-0.013439494,-0.011469198,0.010266281,0.021500425,-0.045379035,-0.021016493,0.039322965,-0.0501354,0.015389051,-0.016135689,0.05580432,0.005983...', '2025-03-25 05:14:21.549506+00'), ('16', 'https://ai.pydantic.dev/agents/', '2', 'Creating and Using Agents with Pydantic', 'This section outlines the creation of a Pydantic agent that accepts an integer and returns a boolean. It details the definition of a tool for checking if a square is a winner, emphasizing the importance of correct dependency type and the possibility of using random integers. The agent's result will be validated to ensure it is a boolean, and it highlights the reuse of agents across applications similar to FastAPI applications.', '1. Create an agent, which expects an integer dependency and returns a boolean result. This agent will have type `Agent[int, bool]`.
          2. Define a tool that checks if the square is a winner. Here [`RunContext`](../api/tools/#pydantic_ai.tools.RunContext) is parameterized with the dependency type `int`; if you got the dependency type wrong you'd get a typing error.
          3. In reality, you might want to use a random number here e.g. `random.randint(0, 36)`.
          4. `result.data` will be a boolean indicating if the square is a winner. Pydantic performs the result validation, it'll be typed as a `bool` since its type is derived from the `result_type` generic parameter of the agent.
Agents are designed for reuse, like FastAPI Apps Agents are intended to be instantiated once (frequently as module globals) and reused throughout your application, similar to a small [FastAPI](https://fastapi.tiangolo.com/reference/fastapi/#fastapi.FastAPI) app or an [APIRouter](https://fastapi.tiangolo.com/reference/apirouter/#fastapi.APIRouter). Running Agents There are four ways to run an agent:
          1. [`agent.run()`](../api/agent/#pydantic_ai.agent.Agent.run)  a coroutine which returns a [`RunResult`](../api/agent/#pydantic_ai.agent.AgentRunResult) containing a completed response.
          2. [`agent.run_sync()`](../api/agent/#pydantic_ai.agent.Agent.run_sync)  a plain, synchronous function which returns a [`RunResult`](../api/agent/#pydantic_ai.agent.AgentRunResult) containing a completed response (internally, this just calls `loop.run_until_complete(self.run())`).
          3. [`agent.run_stream()`](../api/agent/#pydantic_ai.agent.Agent.run_stream)  a coroutine which returns a [`StreamedRunResult`](../api/result/#pydantic_ai.result.StreamedRunResult), which contains methods to stream a response as an async iterable.
          4. [`agent.iter()`](../api/agent/#pydantic_ai.agent.Agent.iter)  a context manager which returns an [`AgentRun`](../api/agent/#pydantic_ai.agent.AgentRun), an async-iterable over the nodes of the agent's underlying [`Graph`](../api/pydantic_graph/graph/#pydantic_graph.graph.Graph).
Here's a simple example demonstrating the first three: run_agent.py
                
                                from pydantic_ai import Agent
                
                agent = Agent('openai:gpt-4o')
                
                result_sync = agent.run_sync('What is the capital of Italy?')
                print(result_sync.data)
                #> Rome
                
                
                async def main():
                    result = await agent.run('What is the capital of France?')
                    print(result.data)
                    #> Paris
                
                    async with agent.run_stream('What is the capital of the UK?') as response:
                        print(await response.get_data())
                        #> London', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 2943, "crawled_at": "2025-03-25T05:14:21.837581+00:00"}', '[-0.050389174,0.050586585,0.028698632,-0.017742319,0.002291819,0.009586775,0.02694661,-0.0015283935,0.03042598,0.013226541,0.015953282,-0.027588196,0.0006832273,-0.01186934,0.0012654357,-0.021739893,-0.018741712,0.013485643,0.033263765,0.048192974,0.01998787,-0.0072610257,0.014238273,0.020530751,-0.0014844387,0.01724879,-0.010067964,0.044442166,0.006699638,0.003676781,0.011628745,0.0029148976,-0.045256484,0.0023565947,0.04693448,-0.02080219,0.0064281975,0.035163846,0.005219055,0.035287227,0.018655345,-0.016965013,0.03069742,0.0053794514,-0.03950689,0.017989082,-0.027711578,0.0033744953,-0.0052807457,-0.010549153,-0.039186094,0.02756352,-0.005434973,-0.0028532068,-0.030105187,0.011456011,0.0058082035,0.016965013,-0.0214191,-0.037261337,-0.00082126085,-0.010111148,0.010351743,0.05246199,-0.049994353,-0.0024182855,-0.050981406,0.030475333,-0.031955916,0.004250507,0.02667517,0.038026307,0.016348103,0.0062616323,-0.032227356,-0.010980991,0.07373303,0.052412637,-0.009919906,-0.017088395,-0.012270331,-0.010721888,-0.016755264,0.022899684,-0.02354127,-0.05157364,-0.048192974,-0.05033982,-0.02687258,-0.020765176,-0.013744745,0.04658901,-0.0057619354,0.02462703,0.04742801,0.045478575,0.039531566,-0.016841631,-0.014336978,0.04074071,0.038914654,0.010111148,-0.046070807,0.020395031,0.01800142,0.0043121977,-0.019407975,0.011949538,-0.020086575,-0.019185888,-0.07921119,-0.011412827,-0.02407181,0.032572825,-0.06159225,-0.022208745,0.00756948,0.015620151,0.03560802,-0.016878646,-0.036619753,0.019543694,-0.008075346,0.032153327,0.02544135,0.009352349,-0.014398669,-0.041234236,0.018778726,-0.00811853,0.008044501,0.038791273,0.012177795,0.023084756,-0.015953282,-0.019333946,-0.0067243143,-0.033806644,-0.019198226,0.046342246,-0.017569585,-0.004019166,0.0052807457,0.023714004,-0.0029889268,0.03738472,-0.041431647,0.00050085346,-0.034423552,0.01596562,0.044170726,0.014546728,-0.02961166,-0.008112361,-0.027711578,0.0149909025,-0.0013055349,0.024923146,0.050117735,-0.02420753,-0.040419914,0.047329303,-0.01691566,-0.0141395675,-0.031215625,-0.012967439,-0.011246261,-0.011406658,-0.023849724,-0.004043842,-0.009167276,-0.029759718,-0.024121163,0.042418703,0.06381313,-0.033041675,-0.04841506,-0.011567054,-0.0074337604,-0.07156151,-0.02783496,-0.002253262,-0.037409395,-0.025836173,0.00049506995,-0.004565131,0.0070266,-0.0020897812,-0.04851377,0.029981805,-0.0014065538,0.057051796,0.017014366,0.01917355,0.01364604,-0.022073025,0.071709566,-0.008772454,-0.011604069,-0.00474095,0.007847089,0.0031832533,0.026601141,0.00756948,0.009531253,-0.050981406,0.026527112,-0.021653526,-0.009987766,-0.041036826,0.017026704,-0.0705251,0.0044972706,-0.02489847,-0.054682866,-0.018445596,-0.011141387,0.077582546,-0.018248186,0.03881595,-0.008488676,0.0032696207,0.006385014,-0.033880673,-0.0428382,0.020395031,-0.019124197,-0.05335034,0.036126226,0.049303412,-0.017409189,0.014707124,0.01180148,0.004966122,0.025206925,-0.035928812,0.045626633,-0.0046700053,-0.019741107,-0.0028254457,-0.0118940165,-0.01884042,-0.0010973279,-0.02354127,0.0022702273,0.037261337,-0.0058606407,-0.022023672,0.0713641,0.03930948,0.013942156,-0.030401304,-0.011758297,-0.019494342,-0.018026097,-0.06499759,0.029142808,-0.040642,-0.008994541,0.014472699,0.030746773,0.038840625,-0.003012061,-0.026995962,-0.013115497,-0.014855183,0.023306843,-0.007544804,-0.006718145,-0.028747985,0.0231958,0.041308265,0.0078100753,-0.037754867,-0.007550973,-0.0077668913,-0.0045281164,-0.008575043,-0.025811497,-0.0014520509,-0.014818168,0.019839812,0.013103159,0.06835358,0.020074237,-0.028328488,-0.02114766,-0.01576821,0.013806436,0.033115707,0.017902715,0.020061899,0.023936091,-0.008661411,0.018581316,-0.033411823,0.0084825065,-0.009062402,-0.013312909,0.0033930026,-0.0009993935,-0.009679311,-0.003090717,-0.0060549676,-0.0016456062,0.005302338,-0.027736254,0.026502434,0.026650494,-0.022566551,0.0057064136,0.07486814,-0.031980593,-0.019778121,-0.03765616,-0.012671323,0.07225245,-0.057002444,0.036397666,-0.023590622,-0.0687484,0.009025387,0.05655827,0.007359731,-0.04244338,-0.040345885,0.008753947,-0.021789245,-0.034843054,0.010111148,0.008889667,-0.017446203,-8.31864e-05,0.03279491,-0.024676383,-0.022282774,-0.023109432,0.03765616,0.008655242,0.04592275,-0.062332544,-0.0020358015,-0.014879859,-0.0070389383,0.014509713,0.048809886,-0.00060495693,0.041530352,-0.022208745,-0.0041733934,0.016520837,-0.027045315,-0.005974769,0.05779209,-0.0052005476,-0.0052992534,-0.033017,-0.020024884,-0.04520713,-0.0019509766,-0.096336596,-7.09928e-05,-0.0006832273,0.048044916,-0.0615429,-0.011721281,-0.0037014575,-0.043899287,-0.004895177,0.040197827,0.0463916,0.05041385,-0.048760533,0.0035564837,0.01875405,0.0076188333,-0.033855997,0.016927999,0.01098716,0.009525084,0.035385933,0.02980907,0.009531253,-0.0024028628,0.028402517,0.06351701,-0.014842845,0.012245655,0.012054413,0.054682866,0.059470084,-0.05492963,-0.017063718,0.009037726,-0.0138311125,-0.012387544,-0.01677994,-0.0011073527,0.025762144,-0.017544908,-0.011912524,-0.015842238,-0.027908988,0.0062924777,0.0008428527,0.05354775,0.09228967,-0.039334156,0.033855997,0.026527112,0.06953805,0.012578786,0.019198226,-0.030475333,-0.01766829,-0.0544361,-0.019704092,-0.01965474,0.04044459,0.024059473,-0.011159894,-0.08542964,0.028131077,0.0013510319,-0.019148873,0.010974822,-0.0005274577,-0.0091426,-0.007884105,-0.00586681,0.020691147,0.05853238,0.03874192,-0.02236914,-0.019124197,0.0066132704,0.009734833,-0.012615801,-0.015447415,0.02401012,-0.005296169,-0.023109432,0.022739287,0.059470084,-0.01629875,0.0098767225,-0.056262154,-0.053399693,0.060062315,-0.02414584,-0.053251635,-0.009222798,-0.04449152,0.02264058,-0.039531566,-0.04984629,0.044047344,-0.0009431005,0.047526713,0.017976744,0.026453082,-0.0050247284,-0.023183461,0.024084149,0.006283224,0.041110855,0.03711328,-0.009716325,-0.020863881,0.016730588,0.0015869999,-0.020370355,0.010246868,0.0015777462,-0.013497981,-0.013596687,0.029019427,0.03143771,0.0108082555,-0.0018754051,0.02748949,-0.013066145,0.016940337,0.021480791,-0.0007356647,0.0534984,-0.0010633979,-0.012245655,-0.015101946,0.017372174,0.008858821,0.027514167,0.09678077,-0.012473911,0.0713641,0.0084825065,0.012085258,0.0025601748,-0.05710115,-0.0189638,0.0057125827,-0.007674355,-0.024244547,0.041777115,0.018013759,-0.04232,0.050438527,-0.0047933874,-0.018260524,0.04081474,0.0021823177,-0.015866915,0.002657338,0.012171626,-0.016089002,0.011875509,0.010518308,-0.0052159703,-0.03185721,-0.013929818,-0.010080302,-0.026527112,-0.00716232,0.004284437,0.032103974,-0.011998891,0.0116595905,0.0013664546,0.0019787375,-0.015015579,-0.0064652124,0.028155753,0.02257889,0.041505676,-0.014546728,0.018371567,0.025934879,0.0051203496,-0.009241305,0.0004946844,-0.0357314,-0.008032163,-0.01616303,-0.01629875,-0.024886131,0.014275287,0.006147504,-0.012325853,0.010271545,-0.007970472,0.053054225,0.026847905,0.023491917,0.005845218,0.03765616,0.013769422,0.0024583847,-0.022665257,-0.009247474,-0.011721281,-0.014682448,-0.0061505884,0.018050773,-0.0101913465,-0.00024194422,0.057841443,0.02203601,-0.029290866,-0.009272151,0.008383801,-0.016459147,0.006024122,-0.0038865302,-0.017692966,0.00020685748,0.036052193,0.01057383,-0.0032449444,-0.033535205,0.03780422,0.0059130783,-0.036397666,0.013152512,0.007890274,0.030746773,-0.02571279,-0.016816955,0.001277774,0.02333152,0.013066145,-5.1858962e-05,-0.02845187,-0.0141395675,-0.008760116,-0.033313118,0.016397456,-0.01623706,0.035287227,-0.039951064,0.027908988,0.05300487,-0.011616407,0.019296931,0.003012061,0.008649073,0.006221533,-0.0032973816,0.004565131,-0.04557728,-0.0019710262,-0.0013379226,-0.016594868,-0.033189736,-0.024713397,-0.0033744953,0.019617725,-0.04767477,0.019765783,0.06455342,-0.034201466,-0.012288839,0.02516991,-0.020715823,0.0056508915,-0.011980384,0.014744138,-0.0005332412,0.0056508915,-0.014225935,0.037063926,-0.04017315,0.013275894,0.0030058918,0.011412827,-0.027736254,-0.010876115,-0.032622177,-0.0055151717,0.012085258,-0.02114766,0.03644702,0.008100023,0.0046360753,-0.001975653,-0.018322214,0.008063008,-0.011437504,0.0051141805,0.046737067,-0.04836571,-0.0009862842,-0.022381479,-3.1881693e-05,-0.011425165,0.004043842,0.002651169,-0.0026635071,-0.020135928,-0.01643447,-0.0019617723,-0.037286013,0.01289341,0.018494949,-0.029241513,-0.014411007,0.035311904,0.059173964,0.032992322,0.043603167,0.0023164954,-0.044318784,-0.0041672243,-0.0012993658,0.022837993,0.008760116,0.010839101,0.0052622384,-0.005980938,-0.036027517,0.027267402,0.0012022025,-0.0073659,-0.042739496,0.04310964,0.063566364,-0.03136368,-0.023171123,0.01207292,0.0071314746,0.041258913,-0.013720069,-0.0014026981,-0.0040808567,0.02926619,0.032375414,-0.019111859,-0.0005667857,0.022591228,-0.008846483,-0.031240301,-0.053103577,0.007736046,0.015558459,0.0052344776,-0.010993329,-0.030993536,-0.005956262,0.0071438127,0.029315542,-0.029216837,0.0094942385,0.002871714,0.0053393524,-0.0053732824,-0.05636086,-0.018803403,0.0047872183,-0.013004454,0.0044386643,-0.004426326,-0.02182626,-0.00019124197,-0.037902925,-0.0043893117,-8.477687e-05,-0.02968569,-0.036027517,0.0033652417,-0.015089608,0.02373868,-0.01677994,-0.024454296,-0.003608921,-0.01992618,0.011147556,-0.028131077,-0.055077687,0.015928606,-0.0526594,0.0014890655,0.0002043513,-0.0017535655,-0.03444823,-0.0055892006,-0.017581923,-0.0028763409,0.02605826,0.0049568685,0.0021314225,0.0014543643,-0.022615904,0.008679918,0.0021329648,0.023639975,0.03923545,0.014201258,-0.011079696,-0.017409189,-0.03355988,0.004558962,-0.013868127,-0.019667078,0.002466096,0.01971643,0.025614085,0.0056570605,0.0077668913,-0.022912022,-0.0176066,0.016360441,-0.007291871,-0.008211066,-0.008038332,0.0063665067,0.04387461,-0.05157364,-0.010956314,-0.052708752,0.015114284,-0.023788033,-0.022393817,0.0065515796,-0.023516594,0.030648068,0.018457934,-0.005579947,0.028081724,-0.0055028335,-0.029735042,-0.01956837,-0.05428804,0.0014767273,-0.023245152,0.0009361603,0.011789142,0.037137955,0.01289341,-0.08429452,-0.020419708,-0.0032788743,-0.0043214513,0.015620151,-0.050364498,0.046737067,0.01590393,-0.022122378,0.009321503,0.012301177,0.0012045159,-0.0171871,-0.019395636,0.0176066,0.0017427695,0.016249398,-0.015879253,0.02236914,0.002364306,-0.046761744,-0.001328669,-0.064701...', '2025-03-25 05:14:21.600716+00'), ('17', 'https://ai.pydantic.dev/agents/', '3', 'Overview of PydanticAI Agents', 'This section describes how to run PydanticAI agents and utilize `asyncio.run(main())`. It outlines the integration of `pydantic-graph` for managing execution flow, highlighting its capability as a standalone library for workflows. Users can traverse the agent's graph with ease, but deeper control is available for those needing insight into tool invocations.', '_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ You can also pass messages from previous runs to continue a conversation or provide context, as described in [Messages and Chat History](../message-history/). Iterating Over an Agent's Graph Under the hood, each `Agent` in PydanticAI uses **pydantic-graph** to manage its execution flow. **pydantic-graph** is a generic, type-centric library for building and running finite state machines in Python. It doesn't actually depend on PydanticAI  you can use it standalone for workflows that have nothing to do with GenAI  but PydanticAI makes use of it to orchestrate the handling of model requests and model responses in an agent's run. In many scenarios, you don't need to worry about pydantic-graph at all; calling `agent.run(...)` simply traverses the underlying graph from start to finish. However, if you need deeper insight or control  for example to capture each tool invocation, or to inject your own logic at specific stages  PydanticAI exposes the lower-level iteration process via [`Agent.iter`](../api/agent/#pydantic_ai.agent.Agent.iter). This method returns an [`AgentRun`](../api/agent/#pydantic_ai.agent.AgentRun), which you can async-iterate over, or manually drive node-by-node via the [`next`](../api/agent/#pydantic_ai.agent.AgentRun.next) method. Once the agent's graph returns an [`End`](../api/pydantic_graph/nodes/#pydantic_graph.nodes.End), you have the final result along with a detailed history of all steps. `async for` iteration Here's an example of using `async for` with `iter` to record each node the agent executes: agent_iter_async_for.py
                
                                from pydantic_ai import Agent
                
                agent = Agent('openai:gpt-4o')
                
                
                async def main():
                    nodes = []
                    # Begin an AgentRun, which is an async-iterable over the nodes of the agent's graph
                    async with agent.iter('What is the capital of France?') as agent_run:
                        async for node in agent_run:
                            # Each node represents a step in the agent's execution
                            nodes.append(node)
                    print(nodes)
                    """
                    [
                        ModelRequestNode(
                            request=ModelRequest(
                                parts=[
                                    UserPromptPart(
                                        content='What is the capital of France?',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    )
                                ],
                                kind='request',
                            )
                        ),
                        CallToolsNode(
                            model_response=ModelResponse(
                                parts=[TextPart(content='Paris', part_kind='text')],
                                model_name='gpt-4o',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            )
                        ),
                        End(data=FinalResult(data='Paris', tool_name=None, tool_call_id=None)),
                    ]
                    """
                    print(agent_run.result.data)
                    #> Paris', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 3599, "crawled_at": "2025-03-25T05:14:16.441132+00:00"}', '[-0.018553903,0.030441456,0.023553668,-0.051932283,-0.0055795736,0.023087488,0.0038517998,0.014404915,0.031280577,0.019323098,-0.0032166315,-0.039485317,-0.029835423,-0.046874247,-0.022691237,-0.020127255,-0.013798883,-0.015943304,0.013192851,0.01849563,0.037224352,-0.008915664,0.016094811,0.046011817,-0.021164503,0.009148752,-0.015919995,0.039462008,-0.019206554,0.010046146,0.012726672,-0.0023818808,-0.059810698,0.0068819597,-0.0114913,-0.026129304,-0.00062569894,0.001984172,-0.010867786,0.04116356,0.04249217,-0.0303016,0.015710214,0.039951496,-0.018215925,-0.0018049848,-0.002537759,0.016747462,0.017842982,0.02295929,-0.037667222,0.04009135,0.0017831327,-0.0026645013,-0.04244555,-0.005766045,0.013822192,0.021269392,-3.3074088e-05,-0.02382172,0.011508781,-0.0025275615,0.026175922,0.034403972,-0.04654792,0.010232617,-0.050580364,0.0457088,-0.036245376,0.0007138358,0.00829215,0.015139146,-0.04396063,-0.026875189,-0.038646195,-0.017516656,0.047923148,0.0326558,-0.002880109,-0.02382172,0.005736909,-0.0031467048,0.0018880229,0.004469486,0.0053027803,-0.05370376,-0.045545638,-0.027201515,-0.019159935,-0.0835858,-0.0060428386,0.0279474,-0.012074023,0.039298847,0.05976408,0.068201914,0.009673203,-0.0068819597,0.0103608165,0.036082216,0.04307489,-0.02624585,-0.03594236,0.048482563,0.0011625326,0.011969132,0.00030957165,0.03927554,-0.045988508,-0.015244036,-0.08647611,-0.01374061,-0.011607844,0.0067246244,-0.05976408,-0.015686905,0.019544533,0.007418065,0.04652461,-0.03356485,-0.02771431,0.02750453,-0.045988508,0.01626963,0.0148128215,0.0061593833,-0.00671297,-0.033075362,0.010005356,0.0019040477,0.012248839,-0.023751793,-0.011229075,-0.015861724,-0.01567525,-0.019602805,-0.00082091114,-0.020523507,-0.01386881,0.028087253,0.0020570126,-0.03640854,-0.06661691,0.020127255,-0.017842982,0.07407576,-0.054263175,0.047923148,-0.02251642,0.015453816,0.05738657,0.028763212,-0.023728484,-0.002166273,-0.008886527,0.018973464,-0.013833846,0.011823452,0.019136626,-0.030558,-0.033494923,0.0449163,-0.03459044,-0.018658794,-0.044753134,-0.014125207,-0.03249264,-0.011042602,-0.028087253,-0.03897252,-0.0016636745,-0.061442323,0.0023119538,0.012155604,0.04174628,-0.03230617,-0.081581235,-0.01830916,-0.017726436,-0.022155132,-0.02384503,-0.023542013,-0.037573986,-0.0060952837,-0.027900781,0.014136862,0.01778471,-0.010040319,-0.04696748,0.017749745,0.053190965,0.019427989,0.025686434,0.010634696,-0.014300025,0.0035167339,0.05528877,-0.015745178,0.004081975,0.022131823,0.006806206,0.035802506,0.032352787,0.01180597,0.012237185,-0.044286955,0.0126567455,-0.024287898,0.0018705411,-0.0012674227,0.028669976,-0.03883267,0.021082921,-0.034986693,-0.023413815,-0.0326558,-0.04743366,0.03379794,0.007068431,0.033028744,0.016945587,0.015080874,-0.0112873465,-0.0048016384,0.0032253724,0.014626349,0.0094750775,-0.031070795,0.015640289,0.050114185,-0.0027256873,0.0054222383,-0.007336484,-0.043447834,0.045732107,-0.07015986,0.035592727,-0.0011384953,0.014381606,-0.02382172,-0.028972993,0.00079468865,0.04121018,-0.019882511,0.00013857883,0.02157241,0.00898559,-0.016223012,0.05221199,0.03661832,0.02489393,-0.014055281,-0.0076278453,-0.017609892,-0.0024590914,-0.0034875977,-0.0064623994,-0.019066699,-0.03696795,-0.015162455,0.042865112,0.02295929,-0.019999057,0.011508781,-0.0018428618,-0.0075812275,0.008659265,-0.023542013,-0.020546816,-0.063446894,0.0058680214,0.025499962,0.021432556,-0.016805734,-0.015337272,0.021537445,0.022528075,0.035592727,0.008764155,-0.034753606,0.02123443,0.050953306,0.034100957,0.041280106,0.003910072,0.0070800856,-0.01588503,0.0148128215,0.031047486,0.0111067025,0.0151741095,0.018460669,0.02964895,-0.008047406,0.027108278,-0.032562565,0.048202854,0.029812114,0.0050900863,-0.019859204,-0.015022601,-0.025872905,0.020372,-0.019835895,0.0061943466,0.026175922,-0.023810066,-0.018402396,0.0459652,-0.0064274357,-0.019427989,0.08176771,-0.00784928,-0.0099995285,-0.0026994648,-0.021467518,0.06106938,-0.038646195,0.059857316,-0.016502718,-0.032632492,-0.036641628,0.022761164,0.01029089,-0.058318928,-0.014474842,0.03988157,-0.0053756204,-0.01300638,0.026968425,-0.004288842,-0.026036069,0.0025392158,0.016024886,0.003478857,0.010174345,-0.053563908,0.008198914,0.037807073,0.057573043,-0.052072138,0.0010430743,-0.029998586,-0.010413262,-0.015640289,0.05006757,0.013460903,0.017435076,-0.03643185,-0.025290182,0.04121018,-0.010605561,0.024217973,0.058458783,-0.00020559199,-0.02100134,-0.02601276,0.011462163,-0.028250415,0.0015515003,-0.0663372,-0.022120168,0.0003740354,0.012260494,-0.06545146,0.002485314,-0.03685141,0.0062584463,-0.008635956,0.051932283,0.06302733,-0.009976219,-0.02068667,-0.012948107,-0.01799449,-0.028133871,-0.029182773,-0.016887315,0.0077560446,0.043307982,0.01841405,0.05636098,0.01431168,-0.022178441,0.022353258,0.03445059,-0.022924326,-0.00012036874,-0.02601276,0.052957874,0.060743056,-0.052957874,-0.0126684,0.011275692,-0.033308454,-0.0076861177,0.01311127,-0.006905269,0.034823533,0.029695569,-0.029765496,0.002023506,-0.024777386,0.012400348,0.009271124,0.008216396,0.046920862,-0.011194111,0.014754549,0.04181621,0.046874247,-0.01353083,0.013495867,-0.026618792,-0.01938137,-0.016829044,-0.024614224,-0.022901017,0.039089065,0.056873776,-0.015733523,-0.09332893,0.009614931,0.02405481,-0.030930942,0.05962423,0.036198758,-0.02601276,-0.017481692,0.010389953,0.029835423,0.058458783,0.01407859,-0.019264825,-0.0118117975,-0.017225295,0.03703788,-0.0035313019,-0.02750453,-0.014964329,0.03706119,-0.050953306,0.021828808,0.05482259,-0.043867394,-0.006940232,-0.040627453,-0.017120404,0.02601276,-0.014568077,-0.021455865,-0.017132059,-0.036082216,-0.00805906,-0.036105525,-0.038925905,0.07570738,0.026105994,0.04307489,0.006048666,0.022026934,0.023891646,-0.030021895,0.026525555,-0.023448778,0.040837236,0.013717302,-0.015290654,-0.012307112,0.046035126,0.007825972,-0.027877472,-0.009894638,-0.010512325,-0.018903537,-0.013554139,0.015185764,0.030185057,-0.03598898,-0.011706907,-0.017073786,-0.012353729,0.024637533,0.03876274,-0.023134107,0.036082216,-0.02554658,-0.0524917,0.006287582,0.032422714,0.009964565,0.0076045366,0.035779197,-0.010797859,0.05393685,-0.011339791,-0.02622254,-0.022388222,-0.036501776,-0.021630682,-0.031047486,0.007895898,0.00029081525,0.043261364,-0.008391213,-0.03076778,-0.0021327666,0.029136155,0.031909917,0.055195533,-0.022667928,0.0025479568,0.017749745,0.008210569,-0.010518152,0.011316483,-0.015721869,0.017015515,-0.008362076,-0.024171354,-0.0022595087,-0.014090245,-0.009026381,-0.018111033,0.03181668,-0.003507993,0.029345935,-0.022819437,-0.008799119,-0.009539177,0.030441456,0.022679582,0.005279471,0.026828572,-0.033844557,0.020476889,-0.0062584463,0.02447437,-0.06046335,-0.018017799,-0.01755162,0.04155981,-0.031117413,0.0025800066,-0.02005733,-0.019661078,0.024101427,-0.029415863,0.008968108,-0.008618475,0.03181668,0.013775574,0.01300638,-0.017073786,0.012749981,0.0113281375,-0.020080637,-0.007610364,0.021187812,-0.0114913,-0.003569179,0.01927648,0.02371683,-0.019323098,0.010675487,0.030627927,0.024264589,-0.033914484,-0.028343651,-0.000984802,0.008560202,0.00096294994,0.0025450431,-0.014241752,0.033331763,-0.011537917,0.0072840387,0.028017327,-0.052072138,0.040021423,-0.006456572,-0.030581309,0.026945116,0.0041023707,0.0041926927,0.0016534767,-0.021747226,0.010698796,0.0016957242,0.007068431,-0.007039295,-0.018682102,-0.005227026,-0.024451062,-0.03636192,-0.004903615,0.010838649,0.013379322,-0.048902124,0.01765651,0.0637266,-0.0077385628,-0.03487015,0.039555244,-0.005244508,-0.010599733,0.017423421,0.0063400273,-0.04032444,-0.014346642,0.0031204822,-0.024637533,-0.002531932,-0.014579732,-0.02220175,0.02880983,-0.04202599,0.027411295,0.08712876,-0.0046763527,0.0054222383,0.04876227,0.014906057,0.000496043,-0.011485472,-0.00829215,-0.030721162,-0.0017583669,-0.041419957,0.013390977,-0.04174628,0.045405783,0.011776834,0.022761164,-0.024730768,-0.019602805,-0.02577967,-0.034310736,-0.015919995,-0.025709743,0.029742187,-0.008088197,-0.03076778,-0.0012229901,-0.014777858,0.0043471144,0.0010343335,-0.002075951,0.021012995,-0.046198286,-0.034077648,-0.022260021,0.00784928,0.01159619,-0.0033011264,-0.007557919,0.0046559577,0.00165202,-0.022901017,0.0048832195,-0.029345935,0.002121112,-0.0011406805,0.005098827,-0.04181621,0.014334988,0.03398441,0.029695569,0.032609183,0.011380582,-0.038203325,0.0011100875,0.025313491,0.0303016,-0.014894403,-0.0072257663,0.006852824,-0.022493111,-0.019124972,0.03011513,-0.013297741,-0.021432556,-0.047037408,0.07584724,0.06442586,-0.0073831016,-0.007668636,-0.010867786,0.024544297,0.004743366,-0.018565558,0.0026062292,-0.037620604,0.051046543,0.018635485,0.011945823,-0.007394756,0.03601229,-0.013507522,-0.027644385,-0.024800695,-0.020267108,0.020441927,0.015978267,-0.011706907,-0.029718878,-0.012388693,0.012610128,0.0030738644,-0.014230098,-0.023763448,0.015209073,-0.026455628,0.0061419015,-0.0215491,-0.0052124583,-0.009131271,0.007015986,-0.01626963,-0.03507993,-0.014638004,0.017714782,-0.0032603357,0.0086301295,-0.0008762699,-0.058505397,-0.0074996464,0.04769006,-0.010896922,0.002939838,-0.014358297,-0.016292937,0.010168518,-0.036315303,-0.0011916687,-0.03274904,-0.05500906,0.023775103,-0.04165305,0.0035225612,-0.022318294,-0.012610128,-0.024078118,-0.016689189,-0.015034256,-0.018041108,0.013997009,0.039531935,-0.010821168,0.009224507,-0.030861015,0.0066721793,0.0010510868,0.012784945,0.035173167,0.030861015,0.026129304,-0.008152296,-0.020010712,-0.01870541,-0.009591622,0.011345618,-0.009935428,0.032166313,0.0079250345,0.0125168925,0.046431378,0.00543972,-0.01723695,0.0020103946,-0.033075362,0.014265061,0.0025042526,0.0144282235,0.046687774,-0.026525555,0.032003153,-0.011438854,0.044286955,-0.01407859,-0.0018370346,-0.0030476418,-0.0139737,0.009008899,0.013041343,-0.025266873,0.019474605,-0.008536893,-0.028273724,-0.016409483,-0.057573043,-0.022598002,0.02319238,0.0010416176,0.012470274,-0.011677771,0.022236714,-0.062514536,0.0012266322,0.008624302,-0.02125774,0.020022366,-0.01656099,0.008321286,0.019055046,-0.0058563673,-0.002827664,0.010949367,0.0018909364,-0.029812114,-0.034380663,0.01773809,-5.3901887e-05,0.00560871,-0.007890071,0.03424081,-0.021887079,-0.028926374,0.0039799986,-0.05025404,0.015861724,-0.024404444,-0.0...', '2025-03-25 05:14:21.648901+00'), ('18', 'https://ai.pydantic.dev/agents/', '4', 'Using the AgentRun Async Iterator', 'The `AgentRun` async iterator facilitates yielding nodes in a flow, ending with an `End` node. Users can manually control iteration using `AgentRun.next(...)`, allowing for node inspection, modification, and error handling.', '* The `AgentRun` is an async iterator that yields each node (`BaseNode` or `End`) in the flow.
          * The run ends when an `End` node is returned.
Using `.next(...)` manually You can also drive the iteration manually by passing the node you want to run next to the `AgentRun.next(...)` method. This allows you to inspect or modify the node before it executes or skip nodes based on your own logic, and to catch errors in `next()` more easily: agent_iter_next.py
                
                                from pydantic_ai import Agent
                from pydantic_graph import End
                
                agent = Agent('openai:gpt-4o')
                
                
                async def main():
                    async with agent.iter('What is the capital of France?') as agent_run:
                        node = agent_run.next_node  # (1)!
                
                        all_nodes = [node]
                
                        # Drive the iteration manually:
                        while not isinstance(node, End):  # (2)!
                            node = await agent_run.next(node)  # (3)!
                            all_nodes.append(node)  # (4)!
                
                        print(all_nodes)
                        """
                        [
                            UserPromptNode(
                                user_prompt='What is the capital of France?',
                                system_prompts=(),
                                system_prompt_functions=[],
                                system_prompt_dynamic_functions={},
                            ),
                            ModelRequestNode(
                                request=ModelRequest(
                                    parts=[
                                        UserPromptPart(
                                            content='What is the capital of France?',
                                            timestamp=datetime.datetime(...),
                                            part_kind='user-prompt',
                                        )
                                    ],
                                    kind='request',
                                )
                            ),
                            CallToolsNode(
                                model_response=ModelResponse(
                                    parts=[TextPart(content='Paris', part_kind='text')],
                                    model_name='gpt-4o',
                                    timestamp=datetime.datetime(...),
                                    kind='response',
                                )
                            ),
                            End(data=FinalResult(data='Paris', tool_name=None, tool_call_id=None)),
                        ]
                        """
                

          1. We start by grabbing the first node that will be run in the agent's graph.
          2. The agent run is finished once an `End` node has been produced; instances of `End` cannot be passed to `next`.
          3. When you call `await agent_run.next(node)`, it executes that node in the agent's graph, updates the run's history, and returns the _next_ node to run.
          4. You could also inspect or mutate the new `node` here as needed.
Accessing usage and the final result You can retrieve usage statistics (tokens, requests, etc.) at any time from the [`AgentRun`](../api/agent/#pydantic_ai.agent.AgentRun) object via `agent_run.usage()`. This method returns a [`Usage`](../api/usage/#pydantic_ai.usage.Usage) object containing the usage data. Once the run finishes, `agent_run.final_result` becomes a [`AgentRunResult`](../api/agent/#pydantic_ai.agent.AgentRunResult) object containing the final output (and related metadata).

* * *', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 3839, "crawled_at": "2025-03-25T05:14:13.724443+00:00"}', '[0.0013453142,0.061633773,0.025959272,-0.05062615,-0.0049049654,0.007464683,0.005982888,0.030059276,0.03928429,0.0016558785,0.009804361,-0.020589156,-0.05401311,-0.056419637,-0.013759528,-0.009286289,-0.047863103,-0.0039273147,0.010255584,0.02687286,0.040955488,-0.015731541,-0.0006956361,0.037501678,-0.041623965,0.0020583586,-0.016678553,0.059628338,-0.02054459,0.0036292844,0.01579839,-0.011731808,-0.038638093,-0.00067021995,0.03870494,-0.0013662041,0.010996481,0.013358441,-0.012857081,0.031463083,0.009871208,-0.015909802,-0.026783729,0.0010786189,0.0021154578,-0.015497574,0.008422837,0.018561436,0.030816887,0.022093235,-0.026471773,0.03210928,-0.00034781804,0.039106026,-0.03727885,0.0013237279,0.0119992,0.008211152,-0.0037741216,-0.054815285,0.024911989,0.020377472,0.031708192,0.06840769,-0.01867285,0.03658809,-0.044119623,0.04732832,-0.027452208,-0.00020959605,0.02155845,0.037390266,-0.046882667,-0.025067966,-0.03306743,-0.009247295,0.034582652,0.017191054,-0.02222693,-0.009659523,0.016700836,-0.01885111,0.0022407977,0.015620128,0.02587014,-0.038237005,-0.026650034,-0.055216376,-0.047105495,-0.069833785,-0.032733195,0.006027453,0.020098938,0.071482696,0.03877179,0.069209866,-0.0309283,0.0042754808,-0.008183299,0.038838636,0.038860917,-0.020310624,-0.046347886,0.009408844,0.023485899,-0.0071694385,-0.02324079,0.030660909,-0.035295695,-0.033178847,-0.08146532,-0.024444053,-0.0048882533,0.012567407,-0.07099248,-0.029769603,-0.0050247344,0.021992963,0.06778378,-0.03119569,-0.007442401,0.024221227,-0.0319533,0.0068574813,-0.0014358374,0.0067404974,-0.0074981074,-0.0037657656,0.022951117,0.0112917265,0.018026654,-0.0065956605,-0.021391332,0.0005678591,-0.014227464,-0.024644597,-0.03398102,-0.01705736,-0.041378856,0.032332107,-0.009837784,-0.047773972,-0.019307904,0.0065510953,0.006785063,0.06118812,-0.06043051,0.058425073,-0.034894608,0.028655471,0.04995767,0.028009275,-0.026092967,-0.004665427,0.0027268378,0.008255717,-0.00074437936,0.023352204,-0.01047841,-0.04630332,-0.031240257,0.043072335,-0.014684258,-0.02466688,-0.034047868,-0.024042966,-0.027831014,-0.026003838,-0.03676635,-0.011286155,0.029279385,-0.030393517,-0.010205448,-0.00051563414,0.036833197,-0.031240257,-0.07112618,-0.0040359427,-0.012767951,-0.011152459,-0.02136905,-0.022371767,-0.02696199,0.012099472,-0.03868266,0.0026070685,0.02094568,-0.012054906,-0.04394136,-0.00498574,0.04545658,0.04893267,0.00431169,-0.014071485,-0.004292193,0.001990118,0.04445386,0.008244576,0.030126125,0.0155198565,0.009408844,0.008417266,0.040175594,0.009692947,0.023886986,-0.048531584,-0.010768084,-0.012066048,0.011731808,-0.018572578,-0.0030694332,-0.022271495,0.032087,-0.04454299,-0.023797857,-0.012712244,-0.055483766,0.067471825,0.023352204,0.053968545,0.04741745,0.026404925,0.0012687176,-0.01724676,-0.008038461,0.0007346307,0.02832123,-0.036654938,0.01885111,0.03767994,-0.004047084,-0.010461698,0.0028312874,-0.05517181,0.015909802,-0.0576229,0.043161467,0.014505996,0.01723562,-0.06212399,-0.027140252,-0.0018773122,0.032042433,-0.009865638,0.019887254,0.005754491,0.022550028,-0.0277196,0.06729356,0.052007675,0.050581586,0.0015068633,-0.0011148282,-0.0036320698,0.015352737,-0.008573244,0.007074737,-0.0022310491,-0.027207099,-0.008979903,0.04200277,0.0143723,-0.027407642,0.011386427,-0.022349484,0.005189069,0.046169624,-0.017514152,-0.011119036,-0.04715006,-0.0119992,-0.00498574,0.018628284,-0.048442453,-0.038905483,0.05494898,0.03340167,0.039596245,-0.008991044,-0.034448955,0.010751372,0.03411472,0.04848702,0.055127244,0.012366863,-0.015285889,-0.010857215,0.003178061,0.029591342,0.011041046,0.027697317,0.0016642344,0.037546244,-0.020722853,0.035429392,-0.029591342,0.055751156,0.0047099926,0.0040164455,-0.016322032,-0.014416866,-0.023463616,0.0021614158,-0.014171757,0.016299749,-0.009347566,0.0041891355,-0.011564689,0.025803294,-0.0034872326,-0.014851377,0.09572621,0.0033396103,-0.00862338,0.008673516,0.004233701,0.060876165,-0.0336245,0.013982355,-0.0041835653,-0.03326798,-0.020589156,0.028878298,0.029881015,-0.010495122,-0.01225545,0.018227197,0.0153081715,-0.008651233,0.02509025,0.0030555066,-0.04284951,0.01183208,0.00064724096,-0.0074089766,-0.030638626,-0.029301668,0.009681806,0.016466869,0.045857668,-0.0266946,-0.021235352,-0.036610372,-0.011676102,-0.0015361093,0.068585955,0.014327736,0.013091049,-0.015352737,-0.007241857,0.024533182,0.0013292986,0.02054459,0.04024244,0.0023800642,-0.0073309876,-0.008205581,-0.0054063248,-0.023463616,0.016177194,-0.07754358,-0.023753291,0.00078546297,0.013336158,-0.045857668,-0.042715814,-0.029903298,0.01284594,0.012277733,0.041022334,0.067471825,0.017993229,-0.005695999,-0.012923929,-0.0003232723,0.011843221,-0.036610372,-0.026494056,0.024265792,0.05771203,0.028856015,0.047729407,0.011687243,-0.0108126495,0.026315793,0.0146953985,-0.01705736,0.001558392,0.013001919,0.04790767,0.035050586,-0.060876165,-0.019564155,-0.0069856066,-0.020466601,0.013558985,0.005966176,0.0064173993,0.029725038,0.020154646,0.01445029,-0.0153081715,-0.029034276,0.008812783,0.0064341114,-0.009787648,0.080663145,-0.010823791,0.027786449,0.03337939,0.041022334,0.022550028,0.0066569378,-0.050715283,-0.000754128,-0.0131801795,0.003194773,-0.01891796,-0.0041167173,0.05080441,-0.0011009015,-0.07745445,-0.018695133,0.030482648,-0.036810916,0.046615276,0.047952235,-0.017280186,-0.015397302,-0.014116051,0.027028838,0.06769465,0.008344848,-0.019954102,-0.017892957,0.0015012927,0.05062615,0.005147289,-0.032153845,0.004386894,0.042693533,-0.06092073,0.026382642,0.052631587,-0.026070684,-0.005888187,-0.04276038,-0.03126254,0.022951117,-0.018739698,-0.04512234,0.0018411028,-0.043540273,-0.009598246,-0.07825662,-0.030482648,0.097330555,0.024822857,0.045523427,-0.008801642,-0.001719941,0.0038688227,-0.0068574813,0.026828295,-0.034538087,0.039195158,0.00553445,-0.021836985,-0.00625585,0.03895005,0.024956552,-0.04503321,0.0056737163,-0.025491336,-0.012032624,0.0033786048,-0.012043765,0.021992963,-0.00029071877,-0.016945945,0.002829895,-0.0069187586,0.01876198,0.0009595461,-0.0189291,0.01301306,0.019541873,-0.009665093,-0.01969785,0.015597845,0.032733195,-0.00097068737,0.027652752,-0.009013327,0.041869074,0.014817953,-0.008835065,-0.01326931,-0.020511167,-0.01951959,-0.010673383,0.0020750705,0.018216055,0.038504396,-0.031552214,-0.05494898,0.032666344,0.02087883,0.018438881,0.06626856,-0.035741348,0.026939709,0.0050860117,-0.009108027,-0.03589733,0.009135881,-0.015085345,0.019285623,-0.020923397,-0.0040526544,0.026248947,0.0013606335,-0.02551362,-0.00060824637,0.029791886,-0.004537302,0.040955488,-0.02171443,-0.014717681,-0.008211152,0.036209285,0.011475558,-0.0016517005,0.046035927,0.004030372,0.038994614,0.033357106,0.0074312594,-0.06613486,-0.039484832,-0.0018550295,0.027786449,-0.02299568,0.009197159,-0.017792685,0.0125117,-0.013926648,-0.023107095,0.020912254,-0.006445253,-0.00030743075,0.020377472,0.0062057143,-0.029034276,0.016689695,0.0026892358,-0.031440802,-0.023129378,0.024399487,-0.018906817,-0.016065782,0.012188602,0.019252198,-0.010974199,0.01478453,0.03736798,0.012077189,-0.02983645,-0.033111997,-0.0061722905,0.03168591,0.017959805,0.0064619645,-0.01986497,0.010963057,-0.024109812,0.0067572095,0.03607559,-0.0358082,0.05187398,-0.020310624,-0.046258755,0.0073644114,0.024889706,0.008974332,0.014795671,-0.028766884,0.012611972,-0.0055511617,-0.010032757,0.010088464,-0.028365796,0.010099605,-0.009536969,-0.025959272,0.020020949,0.028410362,-0.0026808798,-0.026092967,0.018661708,0.042537555,0.023931552,-0.009225012,0.026783729,0.018828828,-0.009453408,0.020488884,0.015230183,-0.031396236,0.0054815286,0.008996614,-0.030906018,-0.03692233,-0.016589424,-0.00021168505,0.039262004,-0.059940293,0.025223944,0.05535007,-0.015475291,0.03137395,0.02171443,-0.004150141,-0.00036731534,-0.0153081715,-0.013024202,-0.04013103,-0.0027532983,0.0036682792,0.00022282636,-0.042225596,0.002754691,0.008272429,0.0018550295,-0.05789029,-0.03531798,-0.023842422,-0.027385361,-0.017113065,-0.02644949,0.03331254,0.018951382,-0.03961853,0.0050470172,-0.02281742,-0.018149208,-0.01741388,-0.0031641345,-0.00040143562,-0.029725038,-0.04808593,-0.010589823,0.025424488,-0.023218507,0.0064508235,-0.009687376,-0.01546415,0.009653952,0.0061722905,0.0032059143,-0.029301668,0.02509025,-0.006946612,-0.00027644396,-0.04131201,0.0008975725,0.046526145,0.033490803,0.045768537,-0.0020569658,-0.041601684,-0.007732075,0.022973398,0.012077189,-0.019151926,0.00027557355,0.016333172,-0.02341905,-0.01842774,0.04648158,-0.011687243,-0.0036905617,-0.018294046,0.07010117,0.047818538,-0.016188337,-0.01183208,-0.016411163,0.039239723,0.044743534,-0.006751639,-0.0021948398,-0.025981555,0.036632653,0.011029906,-0.0043701823,0.016957087,0.020266058,-0.0055260938,-0.04512234,-0.02932395,0.00070921454,-0.017213337,0.01927448,-0.029725038,-0.008846207,-0.0011009015,-0.014038061,-0.001487366,-0.024065249,-0.0025095819,0.03304515,-0.03482776,-0.00075064634,-0.0277196,-0.0032476943,-0.0036627084,0.00043207424,-0.0060051708,-0.02238291,-0.024577748,0.019252198,-0.0010284829,0.0221378,0.0077376454,-0.030103842,0.0037546244,0.012979636,-0.002896743,-0.0046097203,-0.004927248,-0.032599498,-0.014093768,-0.023976117,-0.020722853,-0.007386694,-0.049289193,0.025402205,-0.033111997,0.0031056425,-0.011386427,0.00059780135,-0.014060344,-0.0108126495,-0.030638626,-0.01579839,0.021647582,0.03946255,-0.026092967,-0.0038326136,-0.043384295,0.0056180097,-0.0051361476,0.009057892,0.043295164,0.023708725,0.022928834,-0.004590223,-0.024622314,0.001906558,-0.042938642,-0.007882482,0.007882482,0.025758728,0.008071885,0.01807122,0.027385361,0.010383708,-0.012868223,0.006144437,-0.010862785,0.008316995,-0.008723652,0.025290793,0.024956552,-0.0149627905,0.028454928,-0.023107095,-0.0010229123,-0.017257903,0.014996215,-0.008935337,-0.0047545577,0.0017798257,0.029279385,-0.0410669,0.02408753,-0.0024998332,-0.049734846,-0.022204647,-0.053032674,-0.034047868,0.010751372,-0.0016294178,0.00794376,-8.395158e-05,-0.009152593,-0.059004422,0.022316061,8.377749e-05,-0.033579934,0.012366863,-0.02872232,0.010405991,0.002850785,-0.0060385945,0.016522575,0.026806012,0.01622176,-0.016867956,-0.065109864,0.0013752565,-0.023641877,-0.0014288741,0.004612506,0.036877763,-0.012790234,-0.038348418,-0.0128...', '2025-03-25 05:14:21.751744+00'), ('19', 'https://ai.pydantic.dev/agents/', '5', 'Streaming Agent Example in Pydantic AI', 'This section provides an example of streaming an agent run using `async for` iteration in Pydantic AI, specifically demonstrating an asynchronous WeatherService class that fetches weather forecasts.', 'Streaming Here is an example of streaming an agent run in combination with `async for` iteration: streaming.py
                
                                import asyncio
                from dataclasses import dataclass
                from datetime import date
                
                from pydantic_ai import Agent
                from pydantic_ai.messages import (
                    FinalResultEvent,
                    FunctionToolCallEvent,
                    FunctionToolResultEvent,
                    PartDeltaEvent,
                    PartStartEvent,
                    TextPartDelta,
                    ToolCallPartDelta,
                )
                from pydantic_ai.tools import RunContext
                
                
                @dataclass
                class WeatherService:
                    async def get_forecast(self, location: str, forecast_date: date) -> str:
                        # In real code: call weather API, DB queries, etc.
                        return f'The forecast in {location} on {forecast_date} is 24C and sunny.'
                
                    async def get_historic_weather(self, location: str, forecast_date: date) -> str:
                        # In real code: call a historical weather API or DB
                        return (
                            f'The weather in {location} on {forecast_date} was 18C and partly cloudy.'
                        )
                
                
                weather_agent = Agent[WeatherService, str](
                    'openai:gpt-4o',
                    deps_type=WeatherService,
                    result_type=str,  # We'll produce a final answer as plain text
                    system_prompt='Providing a weather forecast at the locations the user provides.',
                )
                
                
                @weather_agent.tool
                async def weather_forecast(
                    ctx: RunContext[WeatherService],
                    location: str,
                    forecast_date: date,
                ) -> str:
                    if forecast_date >= date.today():
                        return await ctx.deps.get_forecast(location, forecast_date)
                    else:
                        return await ctx.deps.get_historic_weather(location, forecast_date)
                
                
                output_messages: list[str] = []
                
                
                async def main():
                    user_prompt = 'What will the weather be like in Paris on Tuesday?'
                
                    # Begin a node-by-node, streaming iteration
                    async with weather_agent.iter(user_prompt, deps=WeatherService()) as run:
                        async for node in run:
                            if Agent.is_user_prompt_node(node):
                                # A user prompt node => The user has provided input
                                output_messages.append(f'=== UserPromptNode: {node.user_prompt} ===')
                            elif Agent.is_model_request_node(node):
                                # A model request node => We can stream tokens from the model's request
                                output_messages.append(
                                    '=== ModelRequestNode: streaming partial request tokens ==='
                                )
                                async with node.stream(run.ctx) as request_stream:
                                    async for event in request_stream:
                                        if isinstance(event, PartStartEvent):
                                            output_messages.append(
                                                f'[Request] Starting part {event.index}: {event.part!r}'
                                            )
                                        elif isinstance(event, PartDeltaEvent):
                                            if isinstance(event.delta, TextPartDelta):
                                                output_messages.append(
                                                    f'[Request] Part {event.index} text delta: {event.delta.content_delta!r}'
                                                )
                                            elif isinstance(event.delta, ToolCallPartDelta):
                                                output_messages.append(
                                                    f'[Request] Part {event.index} args_delta={event.delta.args_delta}'
                                                )
                                        elif isinstance(event, FinalResultEvent):
                                            output_messages.append(
                                                f'[Result] The model produced a final result (tool_name={event.tool_name})'
                                            )
                            elif Agent.is_call_tool', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 4998, "crawled_at": "2025-03-25T05:14:13.440868+00:00"}', '[7.0302453e-06,0.01245757,0.0014568594,-0.047630772,-0.0013407215,0.012286919,0.044318866,0.009215189,0.0148656545,0.019846154,0.021299854,-0.0035268008,-0.02990828,-0.055720925,-0.03400392,-0.0030085254,-0.009891476,-0.00047640252,-0.03400392,0.03296737,0.028593631,-0.028644195,0.021489467,-0.002812592,-0.01333611,0.009019256,-0.03999569,0.087929845,-0.0129695255,-0.002871056,0.03782146,-0.004089319,0.0066870167,-0.028037434,0.013690054,0.00527756,0.0030543485,0.024030281,0.01831661,0.018518863,0.02606546,-0.053496134,0.002077842,0.025066832,-0.017798334,0.024738168,-0.017987948,0.0065985303,0.042422734,0.024497991,-0.046670064,0.04833866,-0.037164137,-0.051195495,0.010270701,0.010327585,-0.027203137,0.019214112,-0.0015500858,-0.046265557,0.013197061,-0.011490544,-0.024801373,0.04715042,-0.009012936,0.006769182,-0.023954434,0.019833514,-0.005476654,0.0048698923,-0.006326752,0.007249535,0.0034035523,-0.03587477,-0.036886036,0.008387213,0.022665067,0.00096070557,0.010131652,-0.044495836,0.016458403,0.0017902622,-0.04361098,0.02899814,-0.003738535,-0.045608234,-0.07372151,-0.0046391967,-0.039793435,-0.03238589,-0.025269086,0.05084155,-0.012805195,0.026899757,0.07225517,0.055164725,0.016344635,-0.029377365,0.028770603,0.01229956,0.054760218,-0.040071536,-0.06770446,0.0025013108,0.040374916,0.006241426,0.012792553,0.015194317,-0.056175996,-0.034534838,-0.08297463,0.0010665728,-0.026596375,0.009284714,-0.012773592,0.033296034,0.017469672,-0.019972563,0.018038511,0.005407129,-0.042296328,0.019454287,-0.0390097,0.043004215,0.00076951255,-0.00092673325,-0.020895347,-0.0545074,-0.015194317,-0.04118393,0.039894562,-0.014246252,-0.008962371,-0.007369623,-0.0015959089,-0.029073985,-0.022639785,-0.017937385,-0.015712593,0.049147677,-0.010883783,-0.019327879,0.003545762,-0.0016749144,-0.019681824,0.03372582,-0.074884474,0.027632926,-0.028770603,-0.009474327,0.037037726,0.0056441454,-0.039414212,0.021502107,0.008899167,0.0027478077,-0.012590299,0.0041177613,-0.010384469,-0.03342244,-0.060069382,0.0069587952,-0.009291034,-0.027683489,-0.03574836,-0.028340815,0.0006691757,-9.2584446e-07,-0.055872615,-0.03981872,0.0043326556,-0.049476337,0.022955807,0.031096524,0.07088996,-0.019959923,-0.05182754,-0.062445864,0.010725772,-0.06300206,-0.013386674,0.0044148215,0.0051227096,-0.045633513,-0.028366096,0.036734346,0.026014896,-0.0007884738,-0.00615294,0.028062716,-0.0048319697,0.062445864,0.016875552,0.014536993,-0.030515043,-0.018708477,0.05961431,-0.011560069,0.03134934,0.018506223,0.04391436,0.025256444,0.021148164,-0.012994807,0.02975659,-0.045759924,-0.004070358,0.02300637,-0.033877514,0.022172073,0.04467281,-0.0059696473,0.020339148,-0.050437044,-0.0390097,-0.023372956,-0.057692897,0.02564831,-0.035091035,0.0041240817,-0.009537531,0.02826497,0.014562274,0.0095059285,-0.011022832,-0.008741157,0.022007743,-0.03415561,0.02051612,0.0051069087,0.010352867,0.008854925,0.0024238855,-0.020819502,0.048111126,-0.050512888,0.013563646,-0.006914552,-0.032992654,-0.011522147,-0.053395007,-0.0070978445,0.038453504,-0.01860735,0.023208624,0.014600197,-0.0002662482,-0.040931113,0.04439471,0.027986871,0.038074277,-0.04424302,-0.027658207,-0.017836258,0.008444096,-0.015029986,-0.0075971587,0.008444096,-0.02446007,0.014524352,0.038453504,-0.0057831947,-0.05258599,0.0019372122,0.0477319,-0.0172927,0.028391378,-0.010485596,0.0010989651,-0.037543364,0.042473298,0.021034395,0.012267957,-0.011654875,-0.040804707,0.044748656,0.03370054,0.047630772,0.013879667,-0.0018171241,-0.021413622,0.026849193,0.030742578,0.024687605,0.006389956,0.007868937,-0.010005243,-0.02563567,0.0056915483,0.0043863794,-0.0003387356,0.01860735,0.022879962,-0.021717003,0.023663696,-0.009215189,0.04527957,0.03488878,0.004895174,-0.03574836,-0.017115729,-0.03488878,-0.01654689,0.029200394,0.009442724,0.020541402,-0.0061023766,-0.024851937,0.029048704,-0.025016267,0.0029453211,0.0881321,-0.036203433,-0.018645274,0.022601863,-0.022943167,0.06532798,-0.019176189,0.054406274,-0.038428225,-0.034484275,-0.026495248,0.031526312,0.0053407648,-0.017747771,-0.015396571,0.050361197,0.013260265,-0.024042921,0.0063804756,-0.058046844,-0.037922587,0.0074644294,0.037164137,-0.0033213866,-0.02167908,-0.03370054,-0.04631612,0.012425968,0.049122393,-0.07286193,-0.00014912269,-0.044293582,-0.03809956,0.0025550344,0.014081921,0.0392878,-0.006838707,-0.0372147,-0.007660363,0.0163952,0.015611466,-0.00045625615,0.014625479,-0.010517198,-0.023183342,0.029352084,0.033675257,-0.03253758,-0.0026751226,-0.03031279,0.028745322,0.020414993,-0.010738413,-0.019264676,0.00022022754,-0.032335326,-0.005359726,-0.028694758,0.0015319146,0.0765025,0.010643607,-0.015396571,0.035343852,-0.02065517,-0.0062856693,-0.020920629,0.011970897,0.01655953,0.046847038,0.010371828,0.032562863,0.0051953946,-0.006611171,-0.0019293117,0.06810897,-0.019922,0.025382852,0.0024554876,0.006503724,0.05799628,-0.088536605,-0.028745322,0.034939345,0.008216561,0.020920629,0.004335816,0.019391084,0.034661245,0.022475455,-0.0021141844,0.0052807205,-0.019719746,-0.0044464236,0.009309996,0.03630456,0.021426262,0.0021015434,0.022462813,-0.021084959,0.02239961,-0.053647824,0.052838806,-0.01816492,-0.01085218,0.012286919,-0.017267419,0.013727977,0.025825283,0.106486626,-0.002665642,-0.07341813,0.033220187,0.040096816,-0.03281568,0.04497619,0.04907183,-0.04479922,0.0095059285,-0.016180305,-0.0064215586,-0.023651054,0.03557139,0.040526606,0.00069919776,0.010428712,0.0024949904,-0.0013502021,0.011812886,0.013879667,0.019959923,-0.012944244,-0.030439198,0.028391378,-0.023764823,-0.021173446,-0.027683489,0.011263009,0.01669858,-0.0155735435,-0.024232535,-0.016534248,-0.027531799,0.0015722073,-0.00044164015,-0.024864577,0.07356982,0.031981383,0.028770603,0.031071242,0.0015255942,0.022450173,-0.037720334,-0.0016938756,-0.02975659,0.0016306713,0.05511416,0.012217394,-0.018796964,0.02562303,0.027203137,-0.004468545,-0.032487016,0.015750514,-0.04335816,-0.0343073,0.045456544,0.019163549,-0.019100344,0.0015840582,0.02740539,-0.026925039,-0.011515826,0.027177855,-0.06325488,0.049248803,-0.0025518741,-0.02856835,-0.0020920627,-0.0033403481,0.0064120777,0.008722195,0.022728272,-0.0141577665,0.01230588,-0.01420833,-0.059159238,0.048894856,0.02007369,0.016471045,-0.0015169035,-0.041563157,-0.0345854,0.0066490937,0.03091955,-0.01142734,-0.006870309,-0.008273445,0.04558295,0.023992358,-0.0072748167,-0.012982166,0.015826361,0.025180599,-0.01787418,-0.010049486,0.011686478,-0.0008327168,-0.021274572,0.014827732,-0.010719452,-0.00050523947,-0.0055999025,-0.0075023524,-0.00556514,0.0073000984,0.0073885843,-0.054557964,0.004209407,-0.024927782,0.030388635,-0.0052712397,-0.0007015679,0.036102306,-0.02740539,0.012527095,-0.0022674548,0.0022516537,-0.016736502,-0.019289957,-0.023828026,0.0072874576,-0.060524452,0.00922783,-0.007540275,-0.000996258,0.014840373,-0.026773348,-0.019112986,-0.0131338565,0.027228419,-0.02652053,-0.0007951893,-0.011806566,0.017368546,0.011901372,0.010567761,-0.0038207008,-0.046088587,-0.02343616,-0.015042627,0.016913475,0.031728566,0.0095059285,0.0052491184,0.023107497,0.04879373,-0.0272537,-0.01669858,0.033169623,-0.004206247,-0.017950024,-0.0032123593,-0.028012153,0.01436002,-0.024927782,0.01918883,-0.015295444,-0.054557964,0.009923077,0.010188536,-0.027531799,0.015156395,0.021603234,0.018771682,0.0020146375,-0.009859873,0.016458403,0.0047782464,-0.015434493,0.04879373,-0.027000884,0.0044495836,-0.0037195738,-0.026874475,0.0149415,0.027026165,-0.0011281971,-0.03797315,-0.022184715,0.060372762,-0.01906242,-0.021148164,0.055063598,0.0128936805,0.013664773,-0.0054956153,0.0029469011,-0.05288937,-0.020933269,-0.024384225,-0.041563157,-0.00014882641,-0.017950024,-0.011895052,0.03557139,-0.058046844,0.026166586,0.07013151,0.0046644784,-0.030944832,0.031728566,0.014372661,0.012097306,0.004879373,-0.017204214,-0.02285468,0.022311123,-0.011939295,0.019631261,-0.02695032,0.029099267,0.022146791,0.0027478077,-0.032411173,-0.01875904,0.0029627022,-0.014536993,-0.034711808,-0.04222048,0.035824206,0.037315827,0.02621715,-0.0117244,0.023524646,-0.005214356,-0.012925282,0.012495493,0.020933269,-0.01686291,-0.013791181,-0.042018227,0.014006076,0.036860757,0.010453993,-0.036886036,0.02314542,-0.0017681407,-0.020250663,0.00410196,-0.04292837,0.021186085,-0.019479569,0.021502107,-0.014145126,0.018278688,0.03354885,0.034332585,0.013323469,-0.008677952,-0.03385223,-0.0030733098,0.028618913,0.019833514,0.0035109997,-0.014815091,-0.004996301,-0.029680746,-0.034509555,0.05551867,-0.032613426,0.029630182,-0.042422734,0.01801323,0.030413916,-0.009461686,-0.011022832,-0.018443018,-0.0076224403,0.040248506,-0.031045958,-0.012242676,0.0015492957,0.04204351,0.0039155073,0.04697345,-0.024270456,0.007818374,-0.01127565,-0.070991084,-0.0051637925,-0.0019277316,-0.0052744,0.0026245592,-0.0073885843,-0.016180305,-0.007091524,-0.008817002,0.011073396,-0.021350417,0.008835963,-0.0036089662,-0.025471339,0.010820579,-0.063659385,-0.013487801,-0.005625184,0.000703148,0.00877908,-0.02021274,-0.015447134,0.022766193,-0.02576208,0.01128197,-0.030843705,-0.059563745,-0.014183048,0.022475455,-0.019125625,-0.0054545323,-0.01610446,0.0072242534,0.035925332,-0.043535132,0.00045941636,-0.016142381,-0.07513729,0.022311123,-0.021211367,0.007445468,0.010504557,-0.028897014,-0.0069587952,0.013892308,0.01055512,-0.0073633026,0.0148656545,0.03794787,-0.04295365,-0.0022010903,-0.038276535,0.008753798,3.5898076e-05,0.005947526,0.023246547,-0.008564184,0.032588143,-0.01010005,-0.045962177,-0.016167663,-0.020136895,-0.004190446,0.019075062,0.026141305,-0.0078499755,-0.015725233,0.0121036265,0.0032739835,-0.0063962764,-0.0068071047,-0.048591476,-0.0065100444,-0.00048825334,0.02035179,0.04598746,-0.032613426,0.010416071,0.008260804,0.027531799,-0.0050879475,0.020414993,-0.0072242534,-0.020983832,0.03660794,0.008545224,-0.007995346,-0.010605684,0.014170407,-0.036582656,-0.050133664,-0.039414212,-0.006535326,0.015598825,-0.005318643,0.024207253,-0.036355123,0.004560191,-0.080345325,-0.022740912,0.0030843706,-0.022804117,-0.008829643,-0.032638706,-0.0056346646,-0.0055904216,-0.009120382,-0.0036342482,0.008115434,0.016205586,-0.053799514,-0.056024306,0.024068203,0.0059001227,0.024497991,0.0036216073,0.014069281,-0.026823912,-0.021527389,-0.0019...', '2025-03-25 05:14:21.805859+00'), ('20', 'https://ai.pydantic.dev/agents/', '6', 'Handling Responses with CallToolsNode', 'This section discusses how to manage responses using the CallToolsNode, including streaming partial responses and utilizing tools during processing. It outlines the handling of different event types related to tool calls and results.', 's_node(node):
                                # A handle-response node => The model returned some data, potentially calls a tool
                                output_messages.append(
                                    '=== CallToolsNode: streaming partial response & tool usage ==='
                                )
                                async with node.stream(run.ctx) as handle_stream:
                                    async for event in handle_stream:
                                        if isinstance(event, FunctionToolCallEvent):
                                            output_messages.append(
                                                f'[Tools] The LLM calls tool={event.part.tool_name!r} with args={event.part.args} (tool_call_id={event.part.tool_call_id!r})'
                                            )
                                        elif isinstance(event, FunctionToolResultEvent):
                                            output_messages.append(
                                                f'[Tools] Tool call {event.tool_call_id!r} returned => {event.result.content}'
                                            )
                            elif Agent.is_end_node(node):
                                assert run.result.data == node.data.data
                                # Once an End node is reached, the agent run is complete
                                output_messages.append(f'=== Final Agent Output: {run.result.data} ===')
                
                
                if __name__ == '__main__':
                    asyncio.run(main())
                
                    print(output_messages)
                    """
                    [
                        '=== ModelRequestNode: streaming partial request tokens ===',
                        '[Request] Starting part 0: ToolCallPart(tool_name=\'weather_forecast\', args=\'{"location":"Pa\', tool_call_id=\'0001\', part_kind=\'tool-call\')',
                        '[Request] Part 0 args_delta=ris","forecast_',
                        '[Request] Part 0 args_delta=date":"2030-01-',
                        '[Request] Part 0 args_delta=01"}',
                        '=== CallToolsNode: streaming partial response & tool usage ===',
                        '[Tools] The LLM calls tool=\'weather_forecast\' with args={"location":"Paris","forecast_date":"2030-01-01"} (tool_call_id=\'0001\')',
                        "[Tools] Tool call '0001' returned => The forecast in Paris on 2030-01-01 is 24C and sunny.",
                        '=== ModelRequestNode: streaming partial request tokens ===',
                        "[Request] Starting part 0: TextPart(content='It will be ', part_kind='text')",
                        '[Result] The model produced a final result (tool_name=None)',
                        "[Request] Part 0 text delta: 'warm and sunny '",
                        "[Request] Part 0 text delta: 'in Paris on '",
                        "[Request] Part 0 text delta: 'Tuesday.'",
                        '=== CallToolsNode: streaming partial response & tool usage ===',
                        '=== Final Agent Output: It will be warm and sunny in Paris on Tuesday. ===',
                    ]
                    """
                

* * *

Additional Configuration Usage Limits PydanticAI offers a [`UsageLimits`](../api/usage/#pydantic_ai.usage.UsageLimits) structure to help you limit your usage (tokens and/or requests) on model runs. You can apply these settings by passing the `usage_limits` argument to the `run{_sync,_stream}` functions. Consider the following example, where we limit the number of response tokens:
                
                                from pydantic_ai import Agent
                from pydantic_ai.exceptions import UsageLimitExceeded
                from pydantic_ai.usage import UsageLimits
                
                agent = Agent('anthropic:claude-3-5-sonnet-latest')
                
                result_sync = agent.run_sync(
                    'What is the capital of Italy? Answer with just the city.',
                    usage_limits=UsageLimits(response_tokens_limit=10),
                )
                print(result_sync.data)
                #> Rome
                print(result_sync.usage())
                """
                Usage(requests=1, request_tokens=62, response_tokens=1, total_tokens=63, details=None)
                """
                
                try:
                    result_sync = agent.run_sync(
                        'What is the capital of Italy? Answer with a paragraph.',
                        usage_limits=UsageLimits(response_tokens_limit=10),
                    )
                except UsageLimitExceeded as e:
                    print(e)
                    #> Exceeded the response_tokens_limit of 10 (response_tokens=32)', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 4892, "crawled_at": "2025-03-25T05:14:13.326230+00:00"}', '[0.007189407,0.024031375,0.058465507,-0.061816394,-0.02680711,-0.0067205327,-0.032033496,0.024894103,0.010871634,0.007514493,-0.016916987,-0.028232489,-0.05003827,-0.031308305,-0.016354337,-0.012284508,-0.010221461,0.05761528,-0.00078536454,0.04908802,0.04293639,0.039485473,0.008008374,0.0036353392,-0.012378283,0.017367106,0.02785739,0.044461794,0.010015156,-0.03418407,0.006726784,-0.009214944,-0.016992006,-0.040010612,-0.024081387,-0.009696322,0.031833444,0.020367902,0.010921647,0.02918274,0.007664533,-0.034059033,-0.009577541,0.056464978,-0.039760545,0.0054389425,0.0090211425,0.015191529,-0.030208012,0.004276134,-0.016804457,0.045887172,-0.039160386,-0.033533894,0.004951313,-0.016967,-0.0015480669,0.054164365,0.017179556,-0.04113591,0.012372032,-0.011971925,0.02046793,0.04098587,-0.036484677,0.02216838,-0.026206952,-0.0019223848,-0.057565268,0.014303794,0.00723942,0.0155041125,-0.06466715,-0.003016425,-0.009677567,-0.014303794,0.033758953,0.055214643,-0.0038478957,0.013941198,0.008852348,-0.008664798,0.004760638,0.009408746,0.009164931,-0.0057358965,-0.046762403,-0.008921117,-0.027432276,-0.045362033,-0.03110825,-0.0119094085,0.03215853,0.02156822,0.064867206,0.027982421,0.009983898,0.022443453,0.02835752,0.059865877,0.038960334,-0.041035883,-0.061916422,0.0111717135,0.021693254,0.04226121,0.037534956,0.021743268,0.011027925,0.011415528,-0.0674679,0.010715342,-0.020180352,-0.010240216,-0.051713716,-0.006532983,-0.049863227,0.029582847,0.03433411,-0.0049825716,-0.023268672,-0.025981892,0.023168646,0.008464745,0.026006898,-0.004373035,-0.0037885047,-0.014928959,-0.026356991,-0.019042552,0.026231958,0.00424175,0.047562614,-0.022906076,-0.02733225,-0.054164365,-0.011409276,-0.008070891,-0.03305877,-0.0025772462,0.033608913,-0.0050575915,-0.0018692458,0.028482554,-0.039335433,0.03498428,-0.069118336,0.0059422012,-0.020117836,0.028757628,0.031383324,0.029532833,-0.021805784,-0.02778237,-0.02439397,-0.035834506,0.012309515,0.07096882,0.014853939,-0.045937184,-0.06231653,0.052013796,-0.029682873,-0.03253363,-0.019105067,0.0046137236,0.006895579,0.009540031,-0.04433676,-0.04981321,0.0022974843,-0.06706779,0.010765355,-0.017392114,0.04091085,-0.048237793,-0.08862351,-0.002614756,0.003182094,-0.011384269,-0.029857919,-0.009058652,-0.041711062,-0.014128747,-0.065917484,-0.039460465,-0.026231958,0.005376426,0.0057546515,0.008489752,0.024669044,0.032508623,0.04276134,0.0027335375,-0.030433072,-0.03335885,0.05696511,-0.010940402,-0.010765355,0.045587093,0.019742737,0.04106089,0.03365893,0.011315501,0.029532833,-0.06681772,-0.020405412,0.03570947,0.007095632,-0.0047262534,-0.006639261,-0.009665064,0.012853409,-0.040735804,-0.031033231,0.012034442,-0.041936122,-0.0029304647,-0.00020923518,0.032183535,0.002031789,0.01975524,0.05851552,-0.046312284,-0.0042855116,0.009608799,0.004263631,-0.0017864113,-0.014903953,0.04731255,0.008320957,0.006570493,-0.02443148,-0.032808702,0.013253516,-0.051563676,0.04663737,-2.3736764e-05,-0.01670443,-0.054614484,-0.0021052458,-0.017292086,0.0034165313,0.016804457,0.0058828103,-0.018317359,-0.017579664,-0.0006466559,0.004026068,0.025906872,0.06506726,-0.0354344,-0.008114653,-0.0060578566,-0.024481494,-0.028832648,-0.011728111,0.029757893,-0.02431895,0.0060641086,0.07211913,0.011584323,-0.06991854,-0.0010565303,0.024331454,0.0044918163,0.024594024,0.02503164,-0.012134468,-0.054414432,0.0070143603,0.010546547,0.034409128,-0.048612893,-0.04128595,0.008383473,0.044286747,0.02205585,-0.0050544655,-0.013441065,0.0020927426,0.01662941,0.033308834,0.052313875,0.021505704,-0.010015156,0.018992538,0.008552268,0.024406474,-0.0032977497,0.028982688,0.006414201,0.01036525,-0.013678628,0.005745274,0.008064639,0.031758424,0.021693254,0.011740614,-0.03660971,-0.023356196,0.00062164926,0.019667717,-0.041861102,0.0025350475,0.0118969055,0.013666125,0.0040948363,0.018667452,-0.011315501,0.015266549,0.03193347,-0.02918274,-0.008383473,-0.032883722,-0.013741145,0.052964047,-0.019417651,0.059015654,0.008964878,8.449507e-05,-0.04136097,0.026707083,0.0054389425,-0.003966677,0.0037791273,0.028482554,0.009558786,-0.019592697,-0.010046415,-0.020943055,-0.037860043,-0.0054420684,0.058915626,-0.004047949,-0.040285684,-0.044611834,-0.009890123,0.022618499,0.082371846,0.00022681797,0.024719056,-0.060516052,-0.038885314,-0.006167261,0.046662375,0.025731824,0.039035354,0.012428297,0.01052154,0.021893308,0.0065954993,-0.0018598683,0.030258026,-0.0017238947,0.0041979887,0.03335885,-0.007295685,-0.008270944,0.009052401,-0.07386959,-0.009540031,0.02020536,-0.0033508888,-0.0444868,0.012828402,-0.030458078,-0.016416855,-0.032108516,0.009377487,0.07491987,0.021255638,-0.0076582814,-0.014166257,-0.027432276,0.024406474,-0.025194183,0.008758573,-0.014916456,-0.016454365,0.036059566,0.0097400835,0.0012683051,0.045512073,-0.0021865175,0.01414125,-0.0062641613,0.02793241,-0.02439397,-0.018217333,0.038860306,-0.05606487,-0.03373395,0.0045574587,-0.00070800027,-0.0034634187,0.01666692,0.053314142,0.029457813,0.015966736,-0.0071206386,0.032633655,-0.02123063,0.023631267,0.0073832083,0.009333726,0.03630963,-0.004029194,0.00708938,0.007264427,0.059265718,-0.01436631,0.015416589,-0.031808436,0.013741145,-0.024156407,0.011578071,0.021918314,-0.006914334,0.046237264,-0.007833328,-0.058165427,0.0052107573,-0.0024709678,-0.039985605,0.04783769,0.03713485,-0.024606526,0.00035165576,-0.033183802,-0.0068830755,0.00870856,0.06421703,-0.009546282,-0.00034481802,0.009358732,0.03981056,0.04068579,0.010540295,-0.018104803,0.046912443,-0.041686058,0.019067558,0.05451446,-0.021355664,-0.032508623,-0.020255372,-0.0051920023,0.065017246,-0.0048450353,-0.024143904,-0.012021938,-0.06946842,0.023131136,-0.038335167,-0.041686058,0.08642292,0.0074707316,0.021768274,-0.031483352,0.011771873,-0.001390994,-0.023306182,-0.016179292,-0.030458078,0.023018606,0.029082714,0.0074144667,-0.007852083,0.015754178,0.024143904,-0.0282825,0.0064079496,0.0036478424,0.01100917,-0.009433752,0.022906076,0.002138067,0.007889593,-0.016454365,0.0214932,-0.027607322,-0.005282651,0.022043347,-0.0082459375,0.058165427,0.038885314,-0.041986138,-0.043161448,0.015791688,-0.013816165,-0.001162027,0.050688446,-0.013628615,0.010890389,0.011646839,-0.015579132,0.0018051662,-0.00420424,-0.028832648,-0.029357787,-0.03325882,-0.015941728,0.049113028,-0.013703635,-0.04121093,0.018880008,-0.013553595,0.0020708619,0.03453416,-0.054014325,-0.0075394996,0.029007694,0.023431215,-0.033083774,0.028107455,-0.01097166,-0.002119312,-0.015666656,0.003272743,0.029607853,-0.03525935,-0.0012690866,-0.0076332744,0.022768538,-0.0132910255,0.0046199756,0.015229039,-0.014153754,0.003017988,0.0147539135,-0.008808587,0.018980034,0.010090176,-0.02718221,0.0066705192,0.011903157,0.0030492463,-0.022443453,-0.0062672873,-0.0017442126,0.014316297,-0.04716251,-0.008133408,0.00095728517,-0.013828668,0.04403668,-0.0052701477,0.0010815369,-0.012953436,-0.0048887967,-0.0040166904,0.020717995,-0.045111965,0.0048700417,-0.0030101733,-0.004219869,-0.013528588,-0.020305386,0.0028445045,0.009577541,-0.0059547042,0.05421438,0.0199803,-0.012903422,0.027832381,0.037935063,0.025006633,-0.026632063,0.015116509,0.009496269,0.03510931,0.0012534575,-0.009940136,0.01232827,-0.018242339,0.025881864,0.0048231543,-0.03253363,0.03683477,0.012434548,-0.029932939,0.020492936,0.021093095,-0.020180352,-0.011446786,-0.026632063,0.028932674,-0.019405147,-0.01021521,0.0036916041,-0.025631798,-0.0003969803,0.016279317,-0.05591483,0.03200849,0.022893572,-0.0019051929,-0.031358317,-0.00031727165,0.0588156,-0.017067026,-0.025456753,0.045762137,-0.007039367,-0.0024303321,0.0033071272,0.023643771,-0.025731824,0.0143288,-0.0015558815,-0.03585951,-0.014228774,-0.020105332,-0.008252189,0.0111967195,-0.036359645,0.011453038,0.05451446,-0.014503847,0.040285684,-0.0025147295,-0.001445696,0.0038166372,-0.019992802,0.0024240804,-0.038185127,-0.02390634,-0.026507031,0.02228091,-0.012722124,0.03350889,0.05048839,-0.012728376,-0.035684466,0.0077333013,0.00516387,0.0040917103,-0.008433487,-0.02673209,0.037159856,0.010834124,0.020918049,-0.04641231,-0.024106394,-0.0009400931,-0.032183535,-0.008833593,0.02910772,-0.005607737,0.0022240274,-0.027982421,0.0038666506,0.014191264,-0.0049419357,-0.0067142807,-0.023656275,0.0024053254,-0.016904484,0.017517146,-0.053564206,0.032783695,-0.0005962519,0.011378018,-0.0011088878,0.035234347,0.04256129,0.011571819,0.014828933,-0.004182359,-0.044786878,0.06096617,0.029932939,0.025756832,0.01971773,0.018692458,0.0009643183,-0.04238624,-0.037434928,0.040735804,-0.015766682,0.018867504,-0.037885047,-0.006104744,0.038810294,-0.029357787,0.01722957,0.028782634,0.013803661,0.041260943,-0.014653887,-0.022668513,-0.019355133,-0.020117836,0.009283712,0.024681546,-0.01082162,-0.00607036,-0.0017801597,-0.055364683,-0.014203767,0.015754178,-0.029082714,-0.011778124,-0.009177434,0.025594288,-0.0052232603,-0.017392114,0.01082162,-0.0009549408,0.008739818,0.03268367,-0.03193347,0.010677832,-0.04128595,-0.022831056,0.00013079641,0.023881335,-0.009108666,-0.009458759,-0.0022443454,0.008608533,-0.026081918,0.045612097,-0.0069768503,-0.0132910255,0.033833973,0.050813477,-0.0016629411,-0.0126095945,-0.0060641086,0.008383473,-0.007245672,-0.027207216,-0.007189407,-0.032408595,-0.052113824,0.029557839,-0.023656275,0.0042667566,0.028607588,-0.015904218,-0.023993865,0.004335525,0.0042730086,-0.009552534,-0.0066830227,0.015729172,-0.01975524,0.016379345,-0.06261661,0.008614785,0.0033321339,0.019080061,0.034059033,-0.0072706784,-0.0125908395,0.024819084,-0.038585234,-0.017767213,-0.048012733,-0.013040959,0.007514493,0.029732887,0.019442657,0.004779393,-0.015904218,-0.007883341,-0.019317623,0.004294889,-0.017404616,-0.019817756,0.0053326646,0.04011064,0.05726519,-0.04106089,-0.007883341,-0.010352746,0.029282767,-0.0024600276,0.044136707,-0.001170623,-0.008721063,-0.0050951014,0.0045199487,-0.038160123,-0.00041143724,-0.022493467,-0.016066762,-0.009346229,-0.045787144,0.017254576,0.013391051,0.0014746098,0.013603608,0.0042886375,0.029432807,-0.09432502,-0.017542154,0.04046073,-0.013253516,0.0044230483,-0.03410905,0.0023381202,0.03268367,-0.045412045,-0.013203502,0.036184598,0.010502785,-0.016241807,-0.058615547,0.022605997,-0.014641384,-2.9280227e-05,0.002197458,0.021243135,-0.016579397,0.0004723909,...', '2025-03-25 05:14:21.854781+00'), ('21', 'https://ai.pydantic.dev/agents/', '7', 'Limiting Requests in Pydantic AI Agents', 'This section discusses how to restrict the number of requests in Pydantic AI to prevent infinite loops or excessive tool calls. It introduces an example implementation using a custom result type and configuring an agent with a retry mechanism.', 'Restricting the number of requests can be useful in preventing infinite loops or excessive tool calling:
                
                                from typing_extensions import TypedDict
                
                from pydantic_ai import Agent, ModelRetry
                from pydantic_ai.exceptions import UsageLimitExceeded
                from pydantic_ai.usage import UsageLimits
                
                
                class NeverResultType(TypedDict):
                    """
                    Never ever coerce data to this type.
                    """
                
                    never_use_this: str
                
                
                agent = Agent(
                    'anthropic:claude-3-5-sonnet-latest',
                    retries=3,
                    result_type=NeverResultType,
                    system_prompt='Any time you get a response, call the `infinite_retry_tool` to produce another response.',
                )
                
                
                @agent.tool_plain(retries=5)  # (1)!
                def infinite_retry_tool() -> int:
                    raise ModelRetry('Please try again.')
                
                
                try:
                    result_sync = agent.run_sync(
                        'Begin infinite retry loop!', usage_limits=UsageLimits(request_limit=3)  # (2)!
                    )
                except UsageLimitExceeded as e:
                    print(e)
                    #> The next request would exceed the request_limit of 3
                

          1. This tool has the ability to retry 5 times before erroring, simulating a tool that might get stuck in a loop.
          2. This run will error after 3 requests, preventing the infinite tool calling.
Note This is especially relevant if you've registered many tools. The `request_limit` can be used to prevent the model from calling them in a loop too many times. Model (Run) Settings PydanticAI offers a [`settings.ModelSettings`](../api/settings/#pydantic_ai.settings.ModelSettings) structure to help you fine tune your requests. This structure allows you to configure common parameters that influence the model's behavior, such as `temperature`, `max_tokens`, `timeout`, and more. There are two ways to apply these settings: 1\. Passing to `run{_sync,_stream}` functions via the `model_settings` argument. This allows for fine-tuning on a per-request basis. 2\. Setting during [`Agent`](../api/agent/#pydantic_ai.agent.Agent) initialization via the `model_settings` argument. These settings will be applied by default to all subsequent run calls using said agent. However, `model_settings` provided during a specific run call will override the agent's default settings. For example, if you'd like to set the `temperature` setting to `0.0` to ensure less random behavior, you can do the following:
                
                                from pydantic_ai import Agent
                
                agent = Agent('openai:gpt-4o')
                
                result_sync = agent.run_sync(
                    'What is the capital of Italy?', model_settings={'temperature': 0.0}
                )
                print(result_sync.data)
                #> Rome', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 3274, "crawled_at": "2025-03-25T05:14:13.773640+00:00"}', '[3.644763e-05,0.031110533,0.018866535,-0.008117744,-0.018738192,0.009003316,-0.003465282,0.015850456,0.0009449311,0.014413007,0.0004997386,-0.06910029,-0.010575527,-0.022729684,-0.00062567595,-0.036475305,-0.001640394,0.046691466,0.033754416,0.05102949,0.03573091,0.025784265,-0.036783326,0.0069048954,0.01849434,0.016813036,0.044868987,0.041249692,0.026541494,-0.019020548,-0.0026085873,-0.009741293,-0.046742804,-0.027953276,0.008855721,-0.007816136,0.03241964,0.009754128,-0.018186314,0.025527578,-0.0035807914,-0.055649865,0.020355323,0.034498807,-0.03234263,0.051157832,0.011858965,0.004674922,-0.010530607,-0.008188333,-0.028415313,0.017685773,-0.02828697,-0.039478548,0.013450428,-0.021061214,0.006725214,0.024988534,0.0023599213,-0.009799047,0.013655778,-0.040736318,0.015375585,0.07782767,-0.037553392,-0.0031716956,-0.03881116,0.009933809,-0.044458285,0.04394491,-0.03960689,0.024115797,-0.024192803,0.014759535,-0.03511486,-0.015247242,0.038631476,0.05079847,0.021523252,-0.007642872,0.0011374467,-0.001252154,-0.0027433482,0.027824933,-0.0021738228,-0.02869767,-0.059140816,-0.015093229,-0.028672,-0.054417763,0.004350854,-0.013450428,-0.030597158,0.057344,0.08357747,0.03406244,0.025951114,0.002395216,0.026772512,0.048000574,0.022781022,-0.018558512,-0.034165114,0.064890616,0.014323166,0.020008795,-0.0077327127,0.008951979,-0.008862138,-0.0172109,-0.033087026,0.0034877423,-0.02808162,0.021240896,-0.094615035,-0.021959621,-0.04766688,0.055957887,-0.015811954,-0.03344639,0.008085658,-0.008374432,0.0548798,-0.000437171,0.035602566,-0.010665368,0.0071808347,-0.015863292,-0.0047647627,-0.047179174,0.046306435,0.0126867825,0.029057031,-0.011493186,-0.06314514,-0.05349369,-0.013527434,-0.0073155956,-0.024462325,-0.015170235,-0.008586199,-0.0066353735,-0.0042610136,0.006378686,0.018070804,0.03490951,-0.021009877,-0.0024433448,0.015632272,0.054212414,0.025912609,0.023897612,-0.009741293,0.004219302,-0.016556349,-0.014169154,0.01620982,0.050695796,0.008618285,-0.042071093,-0.056727953,0.05385305,-0.016030138,-0.026490156,0.010447184,0.019123223,-0.0050920397,-0.020008795,-0.03904218,-0.046126757,0.0127766235,-0.01404081,-0.016338164,-0.0044663637,0.046511788,0.000104580125,-0.06997303,-0.02280669,0.022087965,-0.003930528,-0.026284806,-0.0017422668,-0.058473427,0.0085733645,-0.023846274,-0.038503133,-0.024102962,0.0010171245,-0.007931646,0.012391592,0.019623764,0.009786214,0.03141856,0.017916791,-0.032445308,-0.06437724,0.054109737,-0.0029005695,-0.0016668648,-0.0062631764,0.00178077,0.025322229,0.029211044,-0.0070075705,0.033112697,-0.039555553,0.010928473,0.0139253,-0.049694713,-0.042353448,0.0003146428,-0.019854782,0.01671036,-0.012827961,-0.0050182417,-0.011108154,-0.007957314,-0.017724276,0.009471771,0.04063364,0.0015834414,-0.006320931,0.03116187,0.001462317,-0.01961093,0.005435359,-0.011493186,-0.025604585,0.004049246,0.082345374,0.0025668757,0.010254668,0.026875189,-0.034550145,0.05344235,-0.019777777,0.02849232,0.0159788,0.012301751,-0.04848828,-0.009195832,0.0009216688,-0.030289132,0.015414088,-0.028646331,0.00031745032,-0.029339388,-0.013476097,0.012288917,0.032060277,0.04089033,-0.0392732,-0.007848222,-0.062272403,-0.021253731,-0.04130103,0.051722545,0.02104838,-0.01248785,0.011396928,0.025322229,0.015080394,-0.01579912,-0.0016211424,0.0004219302,0.0098824715,0.000733966,-0.010742375,0.03626995,-0.033626072,0.031906266,0.024192803,0.022229142,-0.03508919,-0.0024802436,0.027106207,0.05033643,0.005380813,-0.040787652,-0.026028119,-0.008181916,-0.010440767,0.0064845695,0.01794246,0.042892493,-0.00924717,-0.03855447,0.007033239,0.0108386325,-0.033112697,0.01849434,0.0140279755,0.038734153,-0.018584179,0.014143485,-0.036886003,-0.0017085766,0.018866535,0.005833225,-0.025822768,0.014644026,0.007559449,-0.01876386,-0.0163895,-0.026977863,0.0074824425,0.012629028,-0.01846867,0.026644168,0.00057072873,0.015465425,0.05754935,-0.07058908,-0.0011069651,-0.03431913,-0.0076107862,0.060578264,-0.026464488,0.06365851,-0.00010778872,-0.043277524,-0.030289132,0.01454135,0.03981224,-0.0030674164,0.014156319,0.015953133,-0.0049412358,-0.0014591083,-0.0051497943,-0.029981107,-0.012038646,-0.006410772,0.029596075,0.003837479,-0.0040877494,-0.037912752,-0.0029406769,-0.00945252,0.05837075,-0.007052491,0.036860336,-0.028646331,-0.033087026,-0.012969139,0.03164958,-0.019662267,0.043457203,0.0067765517,0.019046217,0.05944884,-0.03403677,-0.0010716706,0.053904388,-0.017993798,0.041532047,0.0061476673,-0.019264402,-0.043842237,0.0025412068,-0.034139447,0.009369096,0.034781165,0.010517773,-0.057652026,0.022344653,-0.03534588,-0.034113776,-0.03152123,0.026900856,0.021972455,0.038041096,-0.013206575,-0.004225719,0.017403416,0.014579854,-0.0023214181,0.0058203903,0.0274399,-0.0062310905,0.068997614,0.009028985,0.013257912,0.00038442973,0.019431248,0.04355988,-0.016992716,0.019033384,-0.057087313,-0.019880451,0.04373956,-0.03652664,-0.010774461,0.019854782,0.0061348327,0.0038310618,-0.026567163,0.05033643,0.030674163,0.01538842,-0.03488384,0.0030401433,-0.06504463,0.03781008,-0.0056214575,0.0257971,0.044740643,0.021600258,0.047204845,0.008862138,0.08239671,-0.006628956,0.020663349,-0.011563775,0.018199148,-0.033087026,0.02303771,-0.006930564,-0.0011286231,-0.0077968845,-0.064890616,-0.05554719,0.0060161147,-0.03200894,-0.013386256,0.039144855,0.01908472,-0.0172109,-0.0011647198,-0.045177013,0.018019468,0.021625927,0.038862497,-0.036886003,-0.027901938,0.042199437,0.013604441,0.016851539,0.00748886,-0.028672,0.030699832,-0.032291297,-0.03077684,0.07515812,-0.0085733645,-0.024680508,-0.046486117,-0.0029551156,0.022511499,-0.013033311,-0.03013512,-0.0056375004,-0.031623907,0.014759535,-0.001796813,-0.06540399,0.08568231,-0.025861273,0.03655231,0.028184295,0.020714687,-0.039067846,-0.0118718,-0.018301824,-0.036192946,0.037681736,0.02072752,0.008335928,-0.04422727,-0.028055951,-0.019007714,-0.014271828,0.026746845,-0.039735235,0.033087026,0.016312495,0.05713865,0.026746845,-0.015773451,-0.032060277,0.013745619,-0.024731847,0.033574734,0.038503133,-0.023589587,0.059756864,0.03781008,-0.042404786,-0.049669042,0.022742517,-0.027106207,-0.0011254145,0.05985954,-0.014310332,0.015888961,0.021805609,0.008592616,-0.0018401289,-0.0018641935,-0.01808364,0.014374504,-0.04112135,-0.021587424,0.027285889,-0.03447314,-0.0007905175,0.04237912,-0.024744682,-0.010190496,0.059808202,-0.056830626,0.018545676,0.0031877386,0.0005157816,-0.00495407,0.011756291,0.0040556635,-0.0020198103,-0.021112552,-0.014400172,0.018481504,-0.063093804,-0.041326698,0.0083936835,0.004366897,-0.030802507,0.0006709973,0.026490156,-0.018597014,-0.001155094,-0.003584,0.024410987,0.0037893502,0.0035037852,-0.04065931,-0.004415026,0.008156247,0.0147467,-0.03116187,-0.01547826,0.008663205,0.016607685,-0.014708198,-0.0018417332,-0.02207513,-0.0015529598,0.037887085,-0.009285673,-0.008618285,-0.03488384,0.0012882507,-0.013604441,-0.00789956,-0.010665368,0.03175225,0.003308061,-0.0027481613,-0.019367076,0.017044054,0.011159492,0.016479341,0.0027786428,0.013399091,0.025617419,-0.024667675,0.023730766,-0.0036289205,-0.037399378,-0.023923282,-0.007065325,-0.026194965,0.022229142,0.0002681182,-0.01506756,-0.0011157887,-0.0111659095,0.03424212,0.0062824283,0.0006401146,0.014631191,0.001662052,0.010273919,0.018622683,0.027414232,-0.021009877,0.021176724,-0.0025588542,0.033549063,-0.011724205,-0.008894224,0.01413065,-0.0073284297,0.0004496043,-0.007861056,-0.06211839,0.029211044,0.007726296,0.012712452,-0.04276415,0.0274399,0.030443145,-0.031623907,0.012154156,0.024834521,-0.025373565,-0.0033016438,0.024937198,0.042841155,-0.015093229,-0.030160788,-0.0074182707,0.006061035,-0.020419495,-0.03036614,-0.0005422525,-0.017262239,-0.020072967,0.015747782,0.07551748,0.006763717,0.044278603,0.013963804,-0.0076877926,-0.010196913,-0.008932727,-0.042456124,-0.03152123,-0.020586343,-0.016145648,0.022704015,-0.030314801,0.023050543,0.028851682,-0.00851561,-0.035371546,0.013373422,0.011775542,-0.0021770315,0.015298579,-0.046049748,0.035474222,-0.0072835097,0.013501766,-0.012564857,-0.023551084,-0.020830195,0.001003488,0.0135146,0.0278506,0.0009922578,-0.011499603,-0.025912609,-0.004029995,-0.014875044,0.013745619,-0.0003260734,-0.015503929,-0.033703078,-0.0075145285,0.010100655,-0.041609053,0.02230615,-0.010806547,-0.018160645,0.002006976,0.03816944,0.033677407,0.014425841,0.031136202,0.024167133,0.023114715,0.022768186,0.018147811,0.041172687,-0.03077684,-0.0031347969,0.047564205,-0.043919243,-0.04602408,0.004857812,-0.03164958,-0.0049155666,-0.028466651,0.000647735,0.038477466,-0.036860336,0.0057626357,0.014181988,-0.0024818478,0.049309682,-0.0022861236,-0.015811954,0.018584179,-0.011557357,0.00090723013,0.017865455,-0.02600245,0.005178672,-0.022845194,-0.04001759,-0.030494483,0.017595932,-0.006372269,0.024179969,0.0028813179,0.007982983,0.0066674594,-0.015953133,0.012629028,-0.007880308,-0.0249757,0.019713605,-0.024500828,0.04769255,-0.031623907,-0.019803446,0.030674163,0.051003817,0.020278318,-0.012378758,-0.01785262,0.010979811,-0.0071423315,0.012673949,0.0237436,-0.018699689,0.022781022,0.040145934,-0.008688874,0.0012698013,0.0026326517,0.0012377154,-0.014156319,-0.0024898692,0.0039754487,-0.029185375,-0.027054869,0.020419495,-0.016633354,0.005027868,0.017300742,0.007726296,-0.025938278,0.0117627075,0.032060277,0.0053391014,-0.006584036,0.010787295,-0.01887937,-0.008842886,-0.052056238,0.009766961,-0.0077519645,0.043226186,0.030699832,-0.0064171893,0.00068623817,0.007052491,-0.07033239,-0.016646188,-0.0372967,-0.0057754703,-0.017364914,0.021972455,0.022819525,-0.0014847771,-0.030212127,-0.00011962042,-0.004552996,-0.00016835095,-0.0060257404,-0.0036610065,-0.043046504,0.0344218,0.042071093,-0.024231305,0.011910303,-0.022318983,0.03632129,0.0060161147,0.03424212,-0.0028861307,-0.022331819,-0.0129563045,-0.0010548255,-0.033292376,-0.0042128847,-0.02641315,-0.022729684,0.0062695937,-0.0257971,0.0031668828,0.0075466144,0.009324175,-0.008964813,0.0011968057,0.007187252,-0.10139159,0.013540269,0.022229142,0.019046217,0.01817348,-0.027131876,0.013809791,0.027465569,-0.033343714,-0.004434278,0.012166991,0.016068641,-0.0023085838,-0.045895737,0.02104838,-0.00748886,-0.0027786428,-0.0054578194,0.020355323,-0.015337082,-0.002347087,0.006179753,-0.038246445,-0...', '2025-03-25 05:14:21.904912+00'), ('22', 'https://ai.pydantic.dev/agents/', '8', 'Customizing Model Behavior with ModelSettings', 'This section discusses how to customize model behavior in the Pydantic AI framework using subclasses of ModelSettings, specifically showcasing the use of GeminiModelSettings. It includes an example demonstrating how to implement these settings when running an agent.', 'Model specific settings If you wish to further customize model behavior, you can use a subclass of [`ModelSettings`](../api/settings/#pydantic_ai.settings.ModelSettings), like [`GeminiModelSettings`](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModelSettings), associated with your model of choice. For example:
                
                                from pydantic_ai import Agent, UnexpectedModelBehavior
                from pydantic_ai.models.gemini import GeminiModelSettings
                
                agent = Agent('google-gla:gemini-1.5-flash')
                
                try:
                    result = agent.run_sync(
                        'Write a list of 5 very rude things that I might say to the universe after stubbing my toe in the dark:',
                        model_settings=GeminiModelSettings(
                            temperature=0.0,  # general model settings can also be specified
                            gemini_safety_settings=[
                                {
                                    'category': 'HARM_CATEGORY_HARASSMENT',
                                    'threshold': 'BLOCK_LOW_AND_ABOVE',
                                },
                                {
                                    'category': 'HARM_CATEGORY_HATE_SPEECH',
                                    'threshold': 'BLOCK_LOW_AND_ABOVE',
                                },
                            ],
                        ),
                    )
                except UnexpectedModelBehavior as e:
                    print(e)  # (1)!
                    """
                    Safety settings triggered, body:
                    <safety settings details>
                    """
                

          1. This error is raised because the safety thresholds were exceeded. Generally, `result` would contain a normal `ModelResponse`.
Runs vs. Conversations An agent **run** might represent an entire conversation  there's no limit to how many messages can be exchanged in a single run. However, a **conversation** might also be composed of multiple runs, especially if you need to maintain state between separate interactions or API calls. Here's an example of a conversation comprised of multiple runs: conversation_example.py
                
                                from pydantic_ai import Agent
                
                agent = Agent('openai:gpt-4o')
                
                # First run
                result1 = agent.run_sync('Who was Albert Einstein?')
                print(result1.data)
                #> Albert Einstein was a German-born theoretical physicist.
                
                # Second run, passing previous messages
                result2 = agent.run_sync(
                    'What was his most famous equation?',
                    message_history=result1.new_messages(),  # (1)!
                )
                print(result2.data)
                #> Albert Einstein's most famous equation is (E = mc^2).', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 3038, "crawled_at": "2025-03-25T05:14:13.437549+00:00"}', '[-0.014880837,0.04012257,0.038982872,-0.016240705,-0.024788445,0.024814347,0.015787415,0.02647209,0.023156602,0.017432207,-0.054187488,-0.036133625,-0.0065273647,-0.03191156,-0.02428335,-0.027922615,-0.030668253,0.026290774,0.008029695,0.018805027,0.0031714055,0.017600572,0.0038982872,0.018869782,-0.01976341,0.005099504,-0.018118616,0.01398721,-0.006313671,-0.037765466,0.029373141,-0.014013112,-0.06527364,-0.053721245,-0.007835427,0.0019944725,0.017665328,-0.017846644,0.0019361925,0.025241733,0.013754089,-0.017380403,0.008709628,0.02509927,-0.018403541,0.039552722,0.0105745895,0.0051739723,0.018248128,0.03517524,-0.048152264,0.011811421,-0.0035939359,0.007239676,0.017056625,-0.044603657,-0.0005969657,0.004853432,-0.004931139,-0.032766335,-0.013961308,-0.02393367,-0.03792088,0.023752354,-0.02612241,-0.009590304,-0.048411287,0.02833705,-0.04115866,0.026381431,0.021926247,5.7369416e-05,-0.02010014,0.022211172,0.0030839855,-0.034190957,0.029424945,0.064082146,-0.0070389337,-0.012627342,0.04146949,-0.020177845,0.02266446,0.01885683,-0.031704344,0.010432127,-0.05351403,-0.04465546,-0.013508018,-0.085840024,-0.01058754,0.016681043,0.016810553,0.034760807,0.088637464,-0.01747106,0.0058636195,-0.0156061,0.042142946,0.030227914,0.026148312,-0.018261079,-0.034864414,0.0069288495,0.010846563,-0.001214977,-0.02069589,0.045251213,-0.047245685,-0.012471928,-0.066309735,-0.004092554,-0.00930538,0.0031374088,-0.08734235,-0.014712472,-0.00797789,-0.0016836456,0.011662484,-0.03250731,-0.026782917,0.009512598,0.008398801,-0.046235498,0.013857699,-0.010302616,0.0008070167,-0.03605592,-0.026213067,-0.009985314,0.008541264,0.019802263,0.03457949,-0.0110732075,-0.023558088,-0.01757467,-0.035252947,-0.014155574,-0.0416249,0.02810393,0.004212352,-0.019025195,-0.04934377,0.033672914,-0.018973392,0.041003246,-0.054601923,0.047582414,-0.031497125,0.005711444,0.03388013,0.036030017,-0.028259344,0.022016903,-0.008690202,0.015567247,-0.016603336,0.03595231,0.0048340056,-0.05237433,-0.018079763,0.043904297,-0.02381711,-0.051364142,-0.04659813,-0.0021871205,-0.03294765,0.022275927,-0.038646143,-0.055430796,0.011649532,-0.0011688386,-0.026381431,-0.016240705,0.0032345422,-0.0774995,-0.08086679,-0.033569302,-0.028647877,0.0093895625,-0.0021045571,0.0043612896,-0.073199734,0.0017694468,-0.018455347,-0.014272135,-0.007900183,-0.0055689816,-0.023609892,-0.02069589,-0.0011566969,0.022224123,0.031471223,0.016240705,-0.005238728,-0.036107723,0.035460167,0.0057891505,-0.018312884,0.014647717,0.024671884,-0.00780305,0.046572227,-0.0053002457,0.0105616385,-0.0248532,0.006245678,0.03789498,-0.035563774,0.00344176,0.008936273,-0.006200349,0.009978838,-0.014518206,-0.028647877,-0.005164259,-0.059523348,0.0004460042,-0.012335942,0.05527538,-0.00042941057,0.029088216,0.030538741,-0.034553587,0.0014456687,0.0072008227,0.016668092,-0.031082688,0.0248532,0.038879264,-0.016706945,-0.012329467,0.018157471,-0.0658953,0.025539609,-0.052866474,0.012446026,-0.016965967,0.018546004,-0.018753221,-0.030745959,-0.00959678,0.010840087,0.0069871293,0.03051284,0.042479675,0.0017127857,-0.030797763,0.03862024,0.032740433,0.025474854,-0.010419176,-0.030823667,-0.029735772,0.0026776441,-0.020281455,-0.0038205804,-0.015554295,-0.039915353,-0.016266607,0.0038173427,0.037739564,-0.0067022047,0.020786548,-0.032533213,-0.025889289,0.0022389248,-0.043515764,-0.014867886,-0.06662056,0.029036412,-0.01964685,-0.0015225661,-0.026096508,-0.05387666,-0.006346049,0.025941094,0.028026223,0.006313671,-0.04079603,0.027326863,0.03478671,0.017069576,-0.009111113,0.0098881805,0.016953016,-0.028777389,0.021304592,0.028751487,-0.013948357,0.020941962,0.01063287,0.0335175,-0.009603255,0.024205644,0.0034255714,0.0520117,0.024270399,-0.014557059,0.004076365,0.024490569,0.03999306,-0.0017694468,-0.014233281,-0.00450699,0.030823667,-0.010846563,-0.02753408,0.02797442,-0.012582013,-0.004167023,0.057399366,-0.029114118,-0.042609185,0.002708403,-0.053203203,0.027456375,0.011636581,0.05978237,0.001973427,0.016849408,-0.028492464,-0.014608864,0.013054729,-0.03110859,-0.015774464,0.014492303,-0.0060028443,0.009104637,0.0029512364,-0.011202719,-0.064082146,-0.023428576,0.044603657,0.024374008,-0.017743034,-0.061129287,0.050120834,0.036573965,0.07522011,-0.01341736,-0.0073497607,-0.028388856,-0.009214722,0.0045555565,0.036729377,-0.00780305,0.021744931,-0.019141756,0.011915031,0.04382659,-0.03551197,-0.017976156,0.034864414,0.0013299182,0.01955619,-0.015696758,-0.010581065,-0.027611788,-0.0115588745,-0.04139178,-0.008016744,0.0173286,0.027689494,-0.025811583,0.029891185,-0.018131569,-0.028958704,-0.024335155,0.016046438,0.036263138,0.021434104,-0.018196324,0.007226725,-0.038697947,-0.01156535,-0.047297493,0.036470354,0.024425812,0.020229649,0.036392648,0.05941974,-0.03281814,-0.01712138,-0.0070130317,0.058021016,-0.0019216224,0.016344314,-0.049291965,0.005080077,0.0474011,-0.05113102,-0.02370055,0.027767202,-0.030720057,0.018584857,0.026653405,0.020307356,0.027093744,0.0064561334,0.008845615,-0.045976475,-0.042220652,0.03398374,-0.020022431,0.0053326236,0.02208166,-0.0050703636,0.014285086,0.03895697,0.057502974,0.022224123,0.014129672,-0.016344314,-0.04913655,-0.03227419,-0.0041411207,-0.025047466,0.05641508,0.0647556,-0.010296141,-0.09184934,-0.013598676,0.021835588,-0.045976475,0.06739763,0.0053973794,-0.03911238,0.011286901,0.0055884086,-0.018286983,0.06511823,0.012407173,-0.013676383,0.01572266,-0.016978918,0.035460167,-0.015632002,-0.026433237,-0.011791995,0.030694155,-0.031626634,0.031963363,0.06061124,-0.027067842,0.009609731,-0.05423929,-0.014660668,0.053565834,-0.03180795,-0.012633817,-0.045147605,-0.060507633,0.018805027,-0.040096667,-0.05651869,0.087549575,-0.012957595,0.06527364,0.010665247,0.0024024327,0.03514934,0.0051059793,0.0030143731,-0.043515764,0.03745464,0.014880837,-0.03263682,-0.021926247,0.036159527,-0.009279477,-0.02509927,0.036107723,-0.007893708,0.023726452,-0.03421686,0.014945593,0.011474692,0.018183373,0.01422033,0.031600732,0.027611788,0.06750124,0.024892053,-0.021472957,0.05351403,-0.016111193,-0.04413742,0.007900183,0.028052127,-0.0057956264,-0.024684835,0.052866474,-0.014582961,0.07112755,0.010684674,-0.015476588,-0.004416332,-0.022262976,-0.0213823,-0.041573096,-0.03678118,-0.025280587,0.020618184,-0.028518366,-0.034190957,0.011228621,0.0012433075,0.01139051,0.05258155,-0.042453773,-0.011545924,0.015075104,-0.00618416,0.0057308706,-0.014919691,0.0019944725,0.01115739,0.013520969,-0.00344176,0.022185268,-0.016914163,0.00488581,-0.0006240821,0.03748054,-0.014971495,0.044085614,0.026549796,-0.026459139,-0.024348106,0.018895684,0.022845777,0.022910532,-0.013197191,-0.013689334,0.0055884086,-0.013508018,0.026290774,-0.037428737,-0.014129672,-0.0051027415,0.028596073,-0.0004893095,0.016486775,-0.00010745382,0.02011309,0.025384195,0.0026873574,-0.012679147,-0.0010449935,0.033854228,0.009266526,0.0063233846,-0.038931068,0.0040698894,0.011779044,0.0011599347,0.004050463,0.028466562,0.0031892133,-0.01999653,-0.0075051743,0.028699683,-0.0015954161,-0.035615582,0.038128097,0.01769123,-0.00322321,-0.026446188,-0.008729055,-0.01109911,-0.01802796,0.011694862,-0.012569062,-4.3937685e-05,-0.048618507,0.03077186,-0.003678118,-0.02531944,-0.0030953176,0.0051610214,-0.0052452036,0.0030337998,0.003386718,-0.02508632,-0.0015857028,-0.009810474,-0.0009162917,-0.015696758,0.0032070212,0.027067842,-0.023635793,0.017069576,0.0099140825,-0.014155574,0.018869782,0.0050703636,-0.012989974,-0.032740433,0.033336185,0.058124628,-0.00609674,-0.02577273,0.030124305,-0.0043936674,-0.015929878,0.00042576808,0.0016658378,-0.056363273,-0.008178633,-0.012044542,-0.0022729216,-0.012588489,-0.056104254,-0.02753408,0.00491495,-0.043515764,-0.02300119,0.0867207,-0.0156061,-0.002264827,0.048152264,0.011481168,0.018183373,0.009273002,0.023052994,-0.022055758,-0.015075104,0.007880757,0.01480313,-0.0173286,0.01896044,0.029735772,0.014932642,-0.03141942,0.012387746,-0.027249157,-0.03136761,-0.028880998,-0.014310988,0.0024072893,0.012102822,-0.018222226,-0.040873736,-0.0055916463,0.014518206,-0.008275766,-0.0031552166,0.017768936,-0.02566912,-0.033362087,-0.0393196,-0.0035227046,-0.027249157,-0.0097392425,0.0008798667,0.0014367648,-0.018364688,-0.01712138,0.0021304593,-0.010289665,0.032222386,-0.025021564,0.0035259426,-0.000927624,0.01975046,0.016784651,-0.0074274675,0.02566912,-0.008877993,-0.059160717,-0.008994553,0.0026695495,0.022237074,0.010645821,-0.0039954204,0.007433943,-0.011662484,-0.023609892,0.034372274,-0.024568275,-0.018118616,-0.044318732,0.024568275,0.067449436,0.02219822,-0.016473824,0.000581991,0.024684835,0.02416679,-0.00529377,-0.035227045,-0.032196485,0.034139153,0.017755985,0.0037040203,0.0060287463,0.014233281,-0.0073821386,-0.024879102,0.003370529,0.00053099595,0.024179742,0.011481168,-0.036133625,-0.019051097,0.01433689,0.039345503,-0.0034320469,-0.030046599,-0.020967864,0.024581226,-0.018908635,0.0114099365,-0.028181637,-0.011474692,-0.013391458,0.003739636,0.011306328,-0.013022351,-0.03390603,0.025798632,-0.03281814,0.0050865524,-0.015411833,-0.00609674,-0.027663592,0.048048656,-0.03838712,-0.009214722,-0.008515362,-0.006915898,0.00016107956,-0.027508179,-0.0069288495,-0.022444291,-0.029217727,0.022237074,-0.004118456,0.00856069,0.026070604,0.008826189,0.002810393,0.00086448726,0.006093502,-0.0248532,0.0003138623,0.032455508,0.026290774,-0.0009049595,-0.012685622,0.009998265,-0.021796735,0.0060449354,0.021226887,0.01248488,-0.01445345,0.03077186,-0.049784105,0.008670775,0.016214803,-0.023830062,-0.014207379,0.04662403,0.0019297169,0.0028929564,0.03874975,-0.0022874917,-0.017522866,0.009700389,-0.033672914,-0.0014748088,-0.028492464,0.034709003,0.075582735,-0.02670521,0.03919009,0.02565617,0.03457949,-0.025643218,0.0002992923,0.0057179197,0.0098299,0.018248128,-0.019426681,-0.015126908,0.0017305934,-0.036496256,-0.03191156,-0.0323778,-0.048903428,-0.011513546,0.0008053978,-0.016914163,0.012944644,-0.0021401725,0.02069589,-0.10303911,-0.004775726,0.019478485,-0.013015876,0.017043674,-0.026912428,-0.007738294,0.022923483,-0.021239838,-0.009648585,0.024024328,-0.019918824,-0.010710577,-0.029994795,0.027119646,-0.037869073,-0.0042771073,-0.028596073,0.032222386,-0.011144439,-0.013171289,-0.017069576,-0.057969213,0.034968026,-0.021874443...', '2025-03-25 05:14:21.999309+00'), ('23', 'https://ai.pydantic.dev/agents/', '9', 'PydanticAI: Type Safety and Agent Functionality', 'PydanticAI supports type safety while allowing optional typing for flexibility. It utilizes Pydantic for schema and validation through type hints, promoting clarity in usage. The document emphasizes the importance of feedback for improving type hint usability, especially concerning agent behaviour in the library.', '1. Continue the conversation; without `message_history` the model would not know who "his" was referring to.
_(This example is complete, it can be run "as is")_ Type safe by design PydanticAI is designed to work well with static type checkers, like mypy and pyright. Typing is (somewhat) optional PydanticAI is designed to make type checking as useful as possible for you if you choose to use it, but you don't have to use types everywhere all the time. That said, because PydanticAI uses Pydantic, and Pydantic uses type hints as the definition for schema and validation, some types (specifically type hints on parameters to tools, and the `result_type` arguments to [`Agent`](../api/agent/#pydantic_ai.agent.Agent)) are used at runtime. We (the library developers) have messed up if type hints are confusing you more than helping you, if you find this, please create an [issue](https://github.com/pydantic/pydantic-ai/issues) explaining what's annoying you! In particular, agents are generic in both the type of their dependencies and the type of results they return, so you can use the type hints to ensure you're using the right types. Consider the following script with type mistakes: type_mistakes.py
                
                                from dataclasses import dataclass
                
                from pydantic_ai import Agent, RunContext
                
                
                @dataclass
                class User:
                    name: str
                
                
                agent = Agent(
                    'test',
                    deps_type=User,  # (1)!
                    result_type=bool,
                )
                
                
                @agent.system_prompt
                def add_user_name(ctx: RunContext[str]) -> str:  # (2)!
                    return f"The user's name is {ctx.deps}."
                
                
                def foobar(x: bytes) -> None:
                    pass
                
                
                result = agent.run_sync('Does their name start with "A"?', deps=User('Anne'))
                foobar(result.data)  # (3)!
                

          1. The agent is defined as expecting an instance of `User` as `deps`.
          2. But here `add_user_name` is defined as taking a `str` as the dependency, not a `User`.
          3. Since the agent is defined as returning a `bool`, this will raise a type error since `foobar` expects `bytes`.
Running `mypy` on this will give the following output:
                
                                 uv run mypy type_mistakes.py
                type_mistakes.py:18: error: Argument 1 to "system_prompt" of "Agent" has incompatible type "Callable[[RunContext[str]], str]"; expected "Callable[[RunContext[User]], str]"  [arg-type]
                type_mistakes.py:28: error: Argument 1 to "foobar" has incompatible type "bool"; expected "bytes"  [arg-type]
                Found 2 errors in 1 file (checked 1 source file)
                

Running `pyright` would identify the same issues. System Prompts System prompts might seem simple at first glance since they're just strings (or sequences of strings that are concatenated), but crafting the right system prompt is key to getting the model to behave as you want. Generally, system prompts fall into two categories:
          1. **Static system prompts** : These are known when writing the code and can be defined via the `system_prompt` parameter of the [`Agent` constructor](../api/agent/#pydantic_ai.agent.Agent.__init__).
          2. **Dynamic system prompts** : These depend in some way on context that isn't known until runtime, and should be defined via functions decorated with [`@agent.system_prompt`](../api/agent/#pydantic_ai.agent.Agent.system_prompt).
You can add both to a single agent; they're appended in the order they're defined at runtime. Here's an example using both types of system prompts: system_prompts.py
                
                                from datetime import date
                
                from pydantic_ai import Agent, RunContext
                
                agent = Agent(
                    'openai:gpt-4o',
                    deps_type=str,  # (1)!
                    system_prompt="Use the customer's name while replying to them.",  # (2)!
                )
                
                
                @agent.system_prompt  # (3)!
                def add_the_users_name(ctx: RunContext[str]) -> str:
                    return f"The user's name is {ctx.deps}."
                
                
                @agent.system_prompt
                def add_the_date() -> str:  # (4)!
                    return f'The date is {date.today()}.'
                
                
                result = agent.run_sync('What is the date?', deps='Frank')
                print(result.data)
                #> Hello Frank, the date today is 2032-01-02.', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 4955, "crawled_at": "2025-03-25T05:14:13.557325+00:00"}', '[-0.024084222,0.044590667,0.019980302,-0.0035646227,0.0050180946,0.022282181,0.013291703,-0.0076685427,0.03367319,0.016113147,-0.009246973,-0.026030954,0.020822132,-0.017020745,-0.04811583,-0.033515345,-0.042670246,0.016652444,-0.019559387,0.01245645,0.035488386,0.034357175,0.0021950053,0.06013821,-0.009056247,0.01132524,-0.045169428,0.056034293,0.004991787,0.021808652,0.015310778,-0.020098684,-0.03504116,-0.0034988548,-0.008339376,-0.010818827,0.014271645,-0.0035251619,0.015192396,0.004468932,0.024018455,-0.027122702,0.025044434,0.011259473,-0.05892808,0.05066763,-0.020572213,0.027070086,-0.015928997,-0.021150973,-0.04848413,0.016968131,0.012436719,0.0039855377,0.02037491,-0.03656698,-0.024465676,0.010687292,-0.010272954,-0.031410772,0.034462404,-0.031463385,-0.036882665,0.04001322,-0.022032263,-0.018244028,-0.033541653,0.021558734,-0.025781035,0.02037491,0.02796453,0.004146669,-0.022413716,-0.009450854,-0.030437406,-0.0013112484,0.058717623,0.08418297,0.047484457,-0.009713925,0.015705386,-0.019243702,-0.012903672,0.017731039,-0.02814868,-0.026964858,-0.0622954,0.009385087,-0.03159492,-0.07223951,-0.026741248,0.04038152,-0.0035975068,0.036224987,0.079026766,0.016889209,-0.035488386,-0.025070742,0.004028287,-0.0072607812,0.043669917,-0.040223677,-0.07623821,0.03404149,0.02634664,-0.012995747,0.03451502,0.02550481,-0.06892481,-0.023873765,-0.06903004,-0.0037586382,0.0034199334,0.022676788,-0.056034293,-0.005550815,-0.026359793,-0.019309469,0.0013087821,-0.05148315,-0.022742556,-0.026109876,-0.011627773,-0.0074186246,0.019980302,0.01319305,0.0016935247,-0.047694914,-0.051798835,-0.01645514,0.018730711,-0.017638963,0.018428179,0.006619544,-0.02663602,-0.008786598,-0.038119104,-0.008562987,-0.024715595,0.047221385,0.0050970158,0.012574832,-0.05661305,0.029174661,-0.011187128,0.040723514,-0.05976991,0.026438715,-0.04169688,0.01748112,0.027569924,0.05976991,-0.03238414,-0.009181205,-0.027911916,0.009595543,0.033620574,0.03312074,0.0150214,-0.064031675,-0.010483411,0.028227603,-0.023913225,-0.015455468,-0.027333159,-0.024360448,0.013942805,-0.016297298,-0.031568617,-0.022045417,-0.033804726,-0.01748112,-0.034304563,-0.026123028,0.032042146,-0.010483411,-0.052272364,-0.0461691,-0.050772857,-0.022071723,0.017099665,0.027832996,-0.041275963,-0.020414371,0.00022525522,-0.035567306,-0.0021374582,-0.0012816528,-0.0076422356,0.02909574,0.043143775,0.035383157,0.059191152,-0.007846116,0.0012956286,-0.037435114,0.056349978,-0.015087167,0.018678097,-0.01916478,0.0066721584,0.0043078004,0.002301878,-0.0061854753,-0.008201263,-0.059927754,-0.014600485,0.0049786335,-0.07565945,0.00022546074,0.003178236,-0.053508803,0.012726098,0.02330816,-0.046879392,0.004949038,-0.072134286,0.0067247725,-0.0391977,-0.0026011223,0.011377855,0.032568287,0.055508148,-0.057402264,-0.0132062035,0.015626464,0.016099993,-0.035146393,-0.008069728,0.042880703,0.025373274,-0.0063597606,0.033541653,-0.009391663,0.030805707,-0.025557425,0.033489037,0.003946077,0.019335777,-0.014482102,-0.0055541033,0.003683005,0.011805346,-0.00927328,0.011864537,0.056876123,-0.011384432,-0.021874418,0.036856357,0.02704378,0.053666644,-0.019756692,0.0018069744,-0.016626136,-0.029358812,-0.032410443,-0.0015085523,0.0012347932,-0.022676788,-0.012568255,0.014376873,0.016205221,-0.029937569,0.033883646,-0.008944441,-0.030779399,0.0039954027,-0.04101289,0.016389372,-0.045642957,0.018783325,0.021374583,0.018967476,-0.0071095154,-0.042486094,-0.028438061,-0.0028017145,0.04680047,-0.052824814,0.03832956,-0.038119104,0.022045417,0.028017147,0.015810614,-0.010641254,0.029806035,-0.012877364,-0.02158504,0.015994765,-0.0043900106,0.0042913584,0.012673483,0.008273608,-0.013811269,0.011989497,-0.013298279,0.013613965,0.012732674,0.0073331264,0.019217394,0.033883646,0.007458085,-0.0043143774,-0.028411753,0.0029825764,0.012936555,0.0052186865,-0.0077080033,0.019664617,-0.023400236,-0.01571854,0.016047379,-0.02023022,-0.027596232,-0.009569236,-0.043590996,0.04553773,-0.021716576,0.021190433,0.008352529,-0.07387056,0.01075306,-0.0025304218,-0.019519927,-0.042512402,-0.01766527,0.036040835,0.011621197,0.011055592,0.04185472,-0.017652117,-0.043433152,0.012745828,0.036146063,0.02964819,-0.003350877,-0.04401191,0.04096028,0.0073923175,0.03291028,-0.031489693,-0.03375211,-0.033883646,-0.024136838,-0.011529122,-0.012548524,-0.008339376,0.021782344,0.007234474,0.014837249,0.029542962,0.025018128,0.010332145,0.062032327,-0.040723514,0.0024399909,-0.04048675,-0.0044327597,-0.04990472,-0.00658666,-0.0362776,0.00043324634,-0.015639618,0.008569564,-0.04348577,0.052456517,-0.003433087,-0.040144756,-0.030384792,0.020532753,0.0057777143,0.0070503238,-0.019480467,-0.00071687065,-0.016428834,-0.010009882,-0.041565344,-0.033699498,0.025781035,0.03159492,0.02224272,0.0185071,-0.0068332897,0.0071095154,0.00789873,0.028227603,0.010023035,-0.019625155,-0.04979949,0.024413062,0.0934431,-0.059085924,-0.035646226,0.03170015,-0.005172649,0.04393299,-0.026294025,0.017638963,0.037698187,0.0119500365,0.014376873,0.002193361,-0.020545907,0.03154231,-0.010759636,0.0074120476,0.023202932,0.010345298,0.03488332,0.018033572,0.094653234,-0.018993784,0.027569924,-0.0063170115,-0.023755383,-0.051220078,-0.013331163,0.011857961,0.056034293,0.03619868,-0.002640583,-0.07592252,-0.0024202606,-0.014679406,-0.029884955,0.05119377,0.019690923,-0.036593284,0.008970748,-0.039592303,-0.018691251,0.028201295,0.010154571,-0.008345952,0.028280217,-0.017941495,0.016797135,0.020808978,0.010667562,0.0013301567,0.031305544,-0.03835587,0.0145215625,0.094337545,-0.008253877,0.0037060238,-0.02121674,0.009062823,0.040513057,-0.016494602,-0.034383483,-0.011555429,-0.032305215,0.0011714916,-0.008707676,-0.025149664,0.06660978,0.004715562,0.03356796,0.0097468095,0.023097703,0.015481775,-0.0311477,0.0031765918,0.0047714645,0.029174661,-0.02392638,0.00547847,-0.023584386,0.02224272,0.015100321,-0.0051003043,0.02023022,-0.03543577,-0.01214734,-0.01641568,-0.009003632,0.04019737,0.013390354,0.0027441676,0.052930046,0.0031749476,0.031174008,0.056349978,-0.01725751,0.024465676,0.0208879,-0.034857012,-0.012739251,0.026412407,0.021598194,-0.028174989,0.04848413,-0.015113475,0.04551142,0.029806035,0.015626464,0.007839539,-0.02004607,-0.042038873,-0.005619871,0.0010366673,-0.01044395,0.050772857,0.013640272,-0.025294352,0.027438387,-0.0018793191,-0.0016803711,0.048063215,-0.046642628,-0.01770473,-0.027806688,0.037724495,0.011910575,0.02107205,-0.0037685034,0.022913553,-0.022716248,0.014718867,0.029858649,-0.016073687,-0.0119500365,-0.03375211,-0.0034725477,-0.04185472,-0.01711282,0.031752765,-0.005337069,-0.004380145,0.019756692,-0.0041006315,0.02927989,0.009503469,-0.03506747,-0.0076159285,-0.017980957,0.013087821,-0.030937243,0.00018579446,-0.031095086,0.01112136,-0.0149687845,-0.0023594252,-0.013771808,0.011049015,0.008983902,0.030463714,0.0072936653,0.0046497937,0.053403575,-0.004311089,-0.01245645,-0.013929651,0.037356194,-0.01077279,-0.032410443,-0.012634023,0.030016491,-0.016297298,-0.012449873,-0.038303252,0.02107205,0.018493947,-0.008063151,0.035462078,0.031384464,0.0070240167,-0.028490676,0.012686637,0.011410739,0.010029612,-0.027070086,-0.004653082,0.024873437,-0.03459394,0.009516622,-0.005843482,-0.023978993,-0.0036271024,0.0061460147,-0.008010536,0.019690923,0.017323278,-0.023031935,-0.011627773,-0.017507428,0.0028345985,-0.017099665,-0.013745501,-0.0009199292,-0.0128050195,0.015297624,0.0149687845,-0.013587658,0.02121674,-0.006254532,0.011785616,-0.057507493,0.013955958,0.02154558,-0.020979974,0.0036106603,0.023729075,0.0097468095,0.023387082,-0.0010235137,0.021453505,-0.03419933,0.004380145,-0.007971075,0.009556083,0.0009125303,-0.028595904,-0.04306485,-0.006418952,-0.01645514,0.02634664,0.056560434,-0.011002977,-0.015376546,0.028174989,0.0033459445,0.009490315,0.019099012,0.0045807376,0.0016836595,-0.03877678,0.0028987222,0.03756665,-0.011450199,0.0136797335,0.05066763,0.016612984,-0.017823113,0.0054159905,0.0029283178,-0.017809961,-0.017283816,-0.05298266,-0.007879,-0.008273608,-0.006346607,-0.008687946,-0.008589294,-0.005471893,-0.025189124,0.04232825,0.039039854,-0.0073265494,-0.015836922,-0.03540946,0.029753419,0.0040743244,0.0150214,0.010305838,-0.0025929012,-0.0097533865,-0.012055265,-0.01112136,-0.033331197,-0.0045708725,0.001604738,-0.0069714026,0.007175283,0.023755383,-0.013482429,0.0036961588,0.029621884,-0.00023697014,-0.05792841,0.020098684,0.03356796,0.048852433,-0.018717557,-0.017560042,0.022505792,-0.024228912,-0.022361102,0.023426542,-0.040513057,-0.00658666,-0.04011845,0.05379818,0.052009292,-0.006083535,0.005659332,0.009266703,0.0119303055,0.032647207,-0.0042716283,-0.038618937,-0.008385413,0.023610692,0.037750803,-0.013015477,-0.0029332505,0.010457104,0.021519272,-0.027412081,-0.015521236,-0.011667234,0.0023232528,-0.0106346775,0.020598521,-0.022874093,-0.009102284,0.019625155,0.021808652,-0.0019763268,-0.0141138015,0.007918461,0.0016080263,0.019230548,0.0043834336,-0.021848112,-0.009075977,0.00634003,0.026149336,0.0055738334,-0.011917152,0.0021555445,-0.007852693,0.018007264,-0.011535698,-0.03154231,-0.0050970158,0.04390668,-0.01440318,0.020993128,-0.006885904,-0.01879648,0.01579746,-0.013199627,-0.0154028535,-0.0077408873,-0.04682678,0.01934893,-0.021663962,-0.0037717917,-0.0018464351,0.0102203395,-0.013837576,-0.0066392743,0.008832635,0.002640583,0.0035613345,0.044432826,-0.0065833717,0.015876383,-0.030358484,0.010470257,-0.0070305937,-0.02447883,0.035856687,0.021164125,0.0030088837,0.017152281,-0.050404556,0.008924711,-0.000110264074,0.024584059,-0.02158504,0.020677444,0.003178236,-0.01619207,0.027754074,-0.014863556,-0.020322295,-0.0026438716,-0.017165434,-0.023150317,-0.017862575,-0.00045215464,0.039118774,-0.037356194,0.0029431155,-0.037750803,0.024715595,-0.0010580418,-0.006195341,0.03412041,-0.023058243,-0.017191742,0.021335123,-0.014587331,-0.031831685,-0.016534062,-0.03227891,-0.060822196,-0.039118774,-0.013074668,0.00521211,0.026964858,0.010003305,0.0017855997,0.030568942,-0.114383616,-0.022676788,0.04530096,-0.0055343728,0.011206858,-0.008648485,0.016691905,0.02927989,-0.011266049,-0.034620248,0.017823113,0.039039854,-0.025057588,-0.016744519,0.021387737,-0.034646556,0.021927034,-0.017717885,0.05782318,-0.022466332,-0.047615994,0.005850059,-0.051141...', '2025-03-25 05:14:22.051587+00'), ('24', 'https://ai.pydantic.dev/agents/', '10', 'Agent Configuration and Dynamic System Prompts', 'This section discusses the configuration of agents, emphasizing the use of string dependencies and both static and dynamic system prompts. It highlights the distinction between prompts defined at creation and those defined via decorators utilizing `RunContext` for runtime information. It also covers error handling, including reflection, self-correction, and the ability to raise `ModelRetry` exceptions for validation errors.', '1. The agent expects a string dependency.
          2. Static system prompt defined at agent creation time.
          3. Dynamic system prompt defined via a decorator with [`RunContext`](../api/tools/#pydantic_ai.tools.RunContext), this is called just after `run_sync`, not when the agent is created, so can benefit from runtime information like the dependencies used on that run.
          4. Another dynamic system prompt, system prompts don't have to have the `RunContext` parameter.
_(This example is complete, it can be run "as is")_ Reflection and self-correction Validation errors from both function tool parameter validation and [structured result validation](../results/#structured-result-validation) can be passed back to the model with a request to retry. You can also raise [`ModelRetry`](../api/exceptions/#pydantic_ai.exceptions.ModelRetry) from within a [tool](../tools/) or [result validator function](../results/#result-validators-functions) to tell the model it should retry generating a response.
          * The default retry count is **1** but can be altered for the [entire agent](../api/agent/#pydantic_ai.agent.Agent.__init__), a [specific tool](../api/agent/#pydantic_ai.agent.Agent.tool), or a [result validator](../api/agent/#pydantic_ai.agent.Agent.__init__).
          * You can access the current retry count from within a tool or result validator via [`ctx.retry`](../api/tools/#pydantic_ai.tools.RunContext).
Here's an example: tool_retry.py
                
                                from pydantic import BaseModel
                
                from pydantic_ai import Agent, RunContext, ModelRetry
                
                from fake_database import DatabaseConn
                
                
                class ChatResult(BaseModel):
                    user_id: int
                    message: str
                
                
                agent = Agent(
                    'openai:gpt-4o',
                    deps_type=DatabaseConn,
                    result_type=ChatResult,
                )
                
                
                @agent.tool(retries=2)
                def get_user_by_name(ctx: RunContext[DatabaseConn], name: str) -> int:
                    """Get a user's ID from their full name."""
                    print(name)
                    #> John
                    #> John Doe
                    user_id = ctx.deps.users.get(name=name)
                    if user_id is None:
                        raise ModelRetry(
                            f'No user found with name {name!r}, remember to provide their full name'
                        )
                    return user_id
                
                
                result = agent.run_sync(
                    'Send a message to John Doe asking for coffee next week', deps=DatabaseConn()
                )
                print(result.data)
                """
                user_id=123 message='Hello John, would you be free for coffee sometime next week? Let me know what works for you!'
                """', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 3082, "crawled_at": "2025-03-25T05:14:16.448222+00:00"}', '[-0.018918203,0.07586759,0.004811724,0.023386015,-0.016410384,0.035693802,0.037130322,0.028706,0.01874777,-0.019198202,-0.014255608,-0.019526897,0.03369729,-0.027999913,-0.0154486485,-0.020306025,-0.026758179,0.039272923,-0.025102532,0.041732047,0.0053778095,-0.0047052028,-0.027123395,0.029363388,0.005249984,0.033307724,-0.028438173,0.032163378,0.02490775,-0.0031499902,0.011601703,-0.020476459,-0.0395164,-0.026563397,0.008253887,0.01391474,-0.0004945637,0.0061812853,-0.017201686,0.019672982,0.0048178113,-0.002653905,0.039078142,0.01673908,-0.0297773,0.06130764,-0.014121695,-0.025735574,0.034038156,-0.02512688,-0.033259027,0.015144302,0.0054052006,0.025540791,-0.00665911,-0.028486868,0.0023982534,0.022424279,-0.043022476,-0.0086617125,0.019295594,-0.019417332,-0.014632999,0.058872864,-0.030872948,0.020975588,-0.010542576,0.032065988,-0.024359925,0.015144302,-0.00047135726,0.028438173,-0.0051191146,-0.011571269,-0.033234682,0.030410342,0.071387604,0.045238122,0.03457381,-0.017506033,0.012502571,-0.06354763,-0.05220158,-0.007535629,-0.056048524,-0.016264297,-0.045530293,-0.008040844,-0.0014129304,-0.023020798,-0.03150599,0.018041683,0.025029488,0.069196306,0.080104105,0.024262534,0.006853892,-0.048135504,0.0017606468,0.0368138,0.032455552,-0.00860693,-0.07927628,0.0141703915,0.005301723,-0.0027954262,0.0092338845,-0.010962575,-0.049718108,-0.007030413,-0.07158239,0.010226056,-0.026758179,0.012514744,-0.0638398,-0.007048674,-0.052250274,0.0043339,-0.015558213,-0.0037982492,-0.033234682,0.009927795,0.020172112,0.014255608,0.008692147,0.026441658,-0.04341204,-0.033405114,-0.045432903,0.00073157385,0.035206847,-0.0112182265,0.018699072,0.02462775,-0.04236509,-0.04850072,-0.0335512,-0.033210333,-0.010749532,0.020074721,-0.03985727,-0.015339083,-0.066274576,0.04406943,0.020342546,0.036935538,-0.056584176,0.023994708,-0.042949434,0.023032973,-0.013026047,-0.0053686793,-0.044775516,-0.019429505,-0.028973823,0.03128686,0.019502549,0.01190605,0.023885144,-0.04448334,-0.009166928,-0.00043065086,-0.013975609,-0.022399932,-0.051714625,-0.02717209,0.0023754274,-0.023666015,-0.057119824,-0.032406855,0.0016769514,-0.012770396,-0.032869466,-0.01824864,0.0671998,-0.003983901,-0.016580818,-0.035352934,-0.033380765,-0.01689734,0.015667778,-0.00015597779,0.020500807,-0.00888693,0.020768631,-0.020999936,-0.022972103,-0.016519949,0.006373024,0.0270747,0.04830594,0.036253802,0.034135547,-0.015192997,-0.00010262197,-0.032991204,0.03834771,-0.037179016,-0.0037525971,-0.023824275,-0.0061234594,0.021693846,0.024871228,-0.011759964,0.00942258,-0.028876433,0.013257351,0.009154755,-0.027001657,0.011163444,0.019186027,-0.03530424,0.031165121,0.014328652,-0.05911634,0.0064886757,-0.015144302,0.036326844,-0.04027118,-0.02057385,0.019271245,0.0018884725,0.033307724,-0.0465529,0.017664293,0.029363388,0.003408685,-0.057217214,0.004887811,0.058970254,0.0062999805,-0.016556472,0.024019057,-0.014998215,0.037519883,-0.014681694,0.025589487,0.024956444,0.008935625,-0.032114685,0.014060826,-0.0213895,-0.00013781208,0.019246897,0.052785926,0.05371114,-0.026587745,-0.02283819,0.04070944,0.020452112,0.07007283,-0.023142537,0.012551266,-0.03540163,-0.0061417203,-0.030166864,-0.0038134665,-0.012965177,-0.03106773,-0.02933904,0.039370313,0.025540791,-0.020561676,0.016471254,-0.007517368,-0.016081689,-0.018455595,-0.03627815,0.009970404,-0.03347816,0.008016497,-0.005633461,0.008813886,-0.041829437,-0.027415568,0.009465189,0.00044282473,0.00793128,-0.022692105,0.04353378,-0.039053794,0.048452023,0.007888671,0.023349494,0.012307788,0.008966059,-0.014328652,8.906902e-05,0.008381713,0.0058830255,-0.021085152,0.02773209,0.029314693,-0.010956489,0.005934764,-0.030994687,-0.0017089078,0.0004458682,-0.0022826018,0.0047721593,0.017846901,-0.0012272788,0.007572151,-0.03540163,-0.024579056,0.0037982492,0.011230401,0.0061234594,0.021097327,-0.019039942,-0.012831265,0.06968326,-0.033259027,-0.009221711,-0.013707784,-0.011066053,0.033332072,-0.03345381,0.039467704,0.0069330223,-0.071923256,0.027853828,0.022326889,-0.011583443,-0.041025963,0.0026599918,0.021352978,-0.00062885677,0.0015217344,0.031311207,0.0047782464,-0.06140503,0.0006193459,0.05054593,0.03150599,-0.00965997,-0.037519883,0.013573871,0.012612135,0.056778956,-0.02773209,0.0047995504,-0.027464263,-0.033624243,0.0021334717,0.024579056,-0.0017149948,0.020366894,0.0004820094,0.01287996,0.04570073,-0.027780784,0.0014776041,0.036545973,-0.04168335,-0.0041969437,-0.037203364,-0.011230401,-0.05999286,-0.014353,-0.05044854,0.010658228,-0.0014319521,-0.00021703738,-0.033526853,0.020184286,0.0025686878,-0.021742541,-0.039979007,0.030337298,-0.002258254,0.06379111,-0.022996452,-0.005170854,0.015363432,-0.007359108,-0.06306068,0.0057399822,0.024554707,0.044093776,0.058970254,0.01353735,-0.010597358,-0.0052925926,0.03652163,0.020805154,0.019843418,-0.008180845,-0.05663287,0.011059966,0.041951176,-0.095151015,-0.023787754,-0.017116468,0.0033843375,0.033137288,-0.038810316,0.0027954262,0.02804861,-0.0033599897,0.0070851957,0.006890414,-0.020598197,0.002268906,0.0026919483,0.02236341,0.0062056333,-0.02641731,0.059846774,0.017396469,0.07572151,0.0065982407,0.015777342,-0.004985202,-0.014766911,-0.04745377,0.020500807,0.0041239006,0.06846587,0.041099004,-0.020756459,-0.06213546,0.016824296,-0.054052006,-0.023166886,0.046406813,0.0065921536,-0.019307766,0.007426064,-0.028462522,0.002917165,0.0184069,0.06461893,-0.0061234594,-0.00816867,0.0001278257,0.045238122,0.018820811,0.009690405,-0.016824296,0.025954703,-0.02182776,-0.019076463,0.078204975,-0.001690647,0.01576517,-0.042973783,-0.013306046,0.039686836,-0.00965997,-0.043923344,-0.0074078036,-0.05663287,2.3777102e-06,-0.0005866286,-0.031676423,0.050302453,0.013050395,0.052932013,0.0066165016,0.010293012,0.014998215,-0.0037160756,0.0033234681,0.01878429,0.0150956055,-0.033064246,0.021146022,-0.017591251,0.029290345,0.0035852063,0.008217366,-0.023617318,-0.037179016,0.019709505,0.028754694,-0.008899103,0.031043382,-0.009726927,-0.0068843267,0.020147765,0.0041969437,0.026222529,0.051471148,-0.005231723,0.07552672,0.022339063,-0.038201623,-0.05653548,0.043265954,0.057412,-0.016592992,0.07893541,-0.012466049,0.03559641,0.028097305,0.061891984,0.022533843,-0.05424679,-0.021815585,-0.019307766,0.035961628,-0.010579098,0.0384451,-0.0032747725,-0.002239993,0.049182456,0.023093842,0.021572107,0.0373738,-0.035985976,0.024956444,-0.013427785,0.017639946,0.0048178113,0.031384252,-0.011504312,-0.0046504205,-0.01457213,-0.008594756,0.025589487,-0.023349494,0.0007844541,-0.0014890172,-0.001048475,-0.051276363,-0.010426925,0.019490374,-0.017445164,-0.003265642,0.024676446,0.0006406502,0.011650399,0.042827696,-0.019502549,-0.0020086896,0.0066956314,0.015278214,-0.015692126,0.0022902105,-0.016532123,0.03260164,-0.05556157,0.0020939065,-0.032065988,0.039053794,0.0297773,0.023386015,0.024664272,-0.014839955,0.026076442,0.02176689,0.007979975,-0.013805175,0.061356332,-0.030507732,-0.018479943,-0.0052652014,0.009873013,-0.027366873,-0.004601725,0.0032808594,0.042413782,0.014304304,-0.015217344,0.0411477,0.034890328,-0.012161702,-0.03279642,0.0020208634,-0.007267804,0.020172112,-0.024603402,-0.00029978168,0.024919923,-0.00794954,-0.0031773816,0.0075478028,-0.0073164995,0.0062512853,0.020330373,0.0047052028,0.01113301,0.028779043,0.008521713,0.002990208,-0.012514744,-0.0110417055,-0.0067138923,-0.0054873745,-0.0072738905,-0.028608607,0.0021076023,0.03605902,-0.04937724,-0.0052408534,-0.0021349934,0.0033082508,-0.03929727,0.01781038,0.047575507,-0.015850386,0.0016830383,0.014791259,0.00606259,0.019198202,0.008412148,0.034086853,-0.042170305,0.008899103,-0.027951218,-0.010445185,-0.021158196,-0.029923387,-0.023787754,0.036302496,-0.018151248,0.00486042,0.0417077,-0.013610393,-0.001999559,0.009550406,-0.012216484,0.029168606,0.0021852106,0.00011336922,0.012526918,-0.04730768,0.0018443422,0.044239864,-0.008558234,-0.0025306444,0.018078206,0.031165121,-0.0324799,0.028925128,0.0059043295,0.0062512853,-0.008509539,-0.040782485,0.007699976,0.014986041,-0.005207375,-0.0010606489,-0.022996452,0.012977351,-0.02446949,0.012782569,0.02836513,-0.004525638,-0.024006883,-0.046820726,0.022886885,-0.009793883,0.017859075,0.021085152,-0.014779085,0.021620803,-0.01017736,0.009538231,-0.022083411,-0.008119975,-0.008424322,-0.0047325944,-0.006239111,0.044020735,0.031116426,0.00995823,0.018735595,-0.00295673,-0.057996344,0.0077243242,0.017055599,0.049060717,-0.014596477,0.0014418433,0.03179816,-0.012843438,-0.038785968,0.013306046,-0.019587766,-0.025078183,-0.0454816,0.046382464,0.07216673,-0.010828663,0.0053321575,-0.0003914662,0.005563461,0.039078142,-0.023349494,-0.04431291,0.019112986,0.023909492,0.016544297,-0.031165121,-0.0065921536,0.023471233,0.013257351,0.011772138,-0.009684318,-0.015071258,-0.008412148,-0.0049030283,-0.0022445584,-0.031895556,0.010019099,-0.007992149,0.041829437,-0.014426042,0.0025519487,0.007231282,-0.020245155,-0.0007844541,-0.039029445,-0.026952961,-0.011126922,0.0072799777,0.028438173,0.008856495,-0.020707762,0.010280838,0.0025991225,-0.0044952035,0.0073895426,-0.03637554,0.021949498,0.04051466,-0.012599961,0.028072957,0.01721386,-0.021377325,0.0046230294,-0.0089234505,0.018832985,-0.031773817,-0.05176332,0.02566253,-0.024067752,-0.0107312715,0.025613835,0.0112182265,-0.04372856,-0.0056152004,0.0030556428,0.011632138,0.023361668,0.043825954,0.005730852,-0.029363388,-0.039808575,0.008138236,0.007699976,0.0011085835,0.031481642,0.01166866,-0.00569433,-0.022229496,-0.067248486,-0.0002885589,-0.006275633,-0.0041512917,-0.0063425894,0.02566253,0.010706924,0.016215602,0.013439959,-0.017006904,-0.022229496,-0.0048147677,-0.0074869334,-0.0112608345,-0.011327791,-0.00060526986,0.03649728,-0.047697246,-0.0034299896,0.0014456477,0.0047599855,-0.0009183668,0.002326732,0.014839955,-0.029850343,-0.013841697,0.0146573465,-0.02089037,-0.034476414,0.0013764089,-0.05434418,-0.015375605,-0.02230254,-0.013999957,-0.01266083,-0.0016236907,0.017956467,0.010122578,0.0133303935,-0.091839716,-0.015972124,0.019088637,-0.0036521626,0.01966081,-0.03822597,0.035036415,0.030605124,-0.036448583,-0.004425204,0.00067488925,0.03734945,-0.019526897,-0.019952983,0.028535565,-0.0126730045,0.0110417055,-0.0059956335,0.045408554,-0.015874734,-0.020062547,-0.004257813,-0...', '2025-03-25 05:14:22.099851+00'), ('25', 'https://ai.pydantic.dev/agents/', '11', 'Handling Model Errors in Pydantic Agents', 'This section discusses how to manage unexpected model behavior in Pydantic agents, including the use of `UnexpectedModelBehavior` for error handling and `capture_run_messages` for diagnosing issues during agent runs when errors like retry limits or API failures occur.', 'Model errors If models behave unexpectedly (e.g., the retry limit is exceeded, or their API returns `503`), agent runs will raise [`UnexpectedModelBehavior`](../api/exceptions/#pydantic_ai.exceptions.UnexpectedModelBehavior). In these cases, [`capture_run_messages`](../api/agent/#pydantic_ai.agent.capture_run_messages) can be used to access the messages exchanged during the run to help diagnose the issue. agent_model_errors.py
                
                                from pydantic_ai import Agent, ModelRetry, UnexpectedModelBehavior, capture_run_messages
                
                agent = Agent('openai:gpt-4o')
                
                
                @agent.tool_plain
                def calc_volume(size: int) -> int:  # (1)!
                    if size == 42:
                        return size**3
                    else:
                        raise ModelRetry('Please try again.')
                
                
                with capture_run_messages() as messages:  # (2)!
                    try:
                        result = agent.run_sync('Please get me the volume of a box with size 6.')
                    except UnexpectedModelBehavior as e:
                        print('An error occurred:', e)
                        #> An error occurred: Tool exceeded max retries count of 1
                        print('cause:', repr(e.__cause__))
                        #> cause: ModelRetry('Please try again.')
                        print('messages:', messages)
                        """
                        messages:
                        [
                            ModelRequest(
                                parts=[
                                    UserPromptPart(
                                        content='Please get me the volume of a box with size 6.',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    )
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    ToolCallPart(
                                        tool_name='calc_volume',
                                        args={'size': 6},
                                        tool_call_id=None,
                                        part_kind='tool-call',
                                    )
                                ],
                                model_name='gpt-4o',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                            ModelRequest(
                                parts=[
                                    RetryPromptPart(
                                        content='Please try again.',
                                        tool_name='calc_volume',
                                        tool_call_id=None,
                                        timestamp=datetime.datetime(...),
                                        part_kind='retry-prompt',
                                    )
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    ToolCallPart(
                                        tool_name='calc_volume',
                                        args={'size': 6},
                                        tool_call_id=None,
                                        part_kind='tool-call',
                                    )
                                ],
                                model_name='gpt-4o',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                        ]
                        """
                    else:
                        print(result.data)
                

          1. Define a tool that will raise `ModelRetry` repeatedly in this case.
          2. [`capture_run_messages`](../api/agent/#pydantic_ai.agent.capture_run_messages) is used to capture the messages exchanged during the run.
_(This example is complete, it can be run "as is")_ Note If you call [`run`](../api/agent/#pydantic_ai.agent.Agent.run), [`run_sync`](../api/agent/#pydantic_ai.agent.Agent.run_sync), or [`run_stream`](../api/agent/#pydantic_ai.agent.Agent.run_stream) more than once within a single `capture_run_messages` context, `messages` will represent the messages exchanged during the first call only.  Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/agents/", "chunk_size": 4852, "crawled_at": "2025-03-25T05:14:16.431567+00:00"}', '[-0.020060636,0.06732379,0.03534377,-0.006337504,-0.040730648,0.037513148,-0.009719537,0.031882517,-0.012443445,-0.025496265,-0.025496265,-0.05216253,-0.011157663,-0.009232037,-0.024606576,-0.014490946,-0.0052802376,0.01038985,-0.0028229314,0.043826275,0.011145475,0.004951175,-0.005563597,0.003415549,0.011815788,-0.013576883,0.0100486,-0.000553389,0.01638001,-0.026398141,0.0072271917,-0.0199022,-0.0868238,-0.05084628,-0.0208772,0.0062217223,-0.010718913,-0.024777202,-0.017025948,0.019963136,0.024582202,-0.028860018,0.03568502,0.062448785,-0.002449689,0.054843783,0.0112429755,-0.022705326,0.014612821,0.023229389,-0.038439397,0.041291274,0.00044941434,-0.013284382,0.0098536,-0.02112095,-0.017318448,0.018902823,0.013857195,-0.023497514,0.03261377,-0.014832196,-0.02566689,0.013723133,-0.02355845,0.0017839463,-0.01828126,0.029128142,-0.05391753,0.0068920352,-0.030956268,-0.00043760767,-0.0018464073,-0.014490946,-0.018232511,-0.033613145,0.020365324,0.046702527,0.026666265,-0.02634939,0.0039487523,-0.04762878,0.02488689,0.0465319,-0.03378377,-0.0028275016,-0.055867534,-0.023655951,-0.006605629,-0.06693379,-0.033613145,0.016404385,0.031663142,0.060108785,0.07902379,-0.016172823,-0.00212672,-0.038634397,0.05099253,0.016233759,0.038610023,-0.007562348,-0.044070024,0.046068776,0.017574385,-0.048165027,-0.0028320719,0.00073582074,-0.028299391,0.0018037511,-0.055087533,-0.008001098,-0.036294397,-0.040267523,-0.06517879,-0.00040828148,-0.024825951,0.027007516,-0.0040188306,-0.014161883,-0.028738141,0.02664189,-9.288213e-05,-0.040779397,0.012833445,0.0117609445,0.021681575,-0.0136012575,-0.042461276,0.022461576,0.022802826,0.010706725,0.015575634,-0.009920631,-0.0038695335,-0.04909128,-0.016319072,-0.0037415647,-0.055916283,0.02498439,-0.015161259,-0.021523137,-0.049627528,0.026812516,-0.004573362,0.02600814,-0.04463065,0.0025212904,-0.013552508,0.0055239876,0.00144879,0.0226322,-0.0057982067,-0.018317822,-0.035270646,-0.010913912,-0.015965635,0.0403894,0.020133762,-0.03534377,-0.018317822,0.03953627,-0.019597512,-0.018061886,-0.021474387,-0.0027498063,-0.022169076,-0.029128142,-0.038488146,-0.0913088,0.017757198,0.002178517,-0.0136012575,-0.026812516,0.029225642,-0.040803775,-0.06864004,-0.056891285,-0.0197072,0.010852975,-0.029518142,0.007781723,-0.021669388,-0.01847626,0.006151644,-0.014381259,0.028470017,0.005566644,-0.006879848,0.04502065,0.007318598,0.008397193,0.040974397,0.00816563,-0.022595638,-0.024777202,0.030712517,0.0056550032,0.007074848,-0.0028732049,-0.002509103,0.02474064,0.074246295,-0.0214622,0.022717513,-0.054210033,0.015600009,0.056745034,-0.044971902,0.0009133013,0.014259383,-0.0441919,0.040145647,-0.06566629,-0.024240952,0.028153142,-0.040121272,0.03358877,-0.02683689,0.042217523,-0.0017443369,0.017623136,0.031200018,-0.0075562545,-0.022108138,0.027397515,0.046873152,-0.060060035,0.016245946,0.03412502,0.018110635,-0.008342349,-0.0019027746,-0.04589815,0.06742129,-0.05070003,0.014259383,0.02620314,0.0238997,-0.011791413,0.021401262,0.016696885,0.0013954695,0.0089029735,0.02610564,0.045873776,-0.014247196,-0.030225018,0.04723878,0.044021275,0.039146274,-0.037098773,-0.021011263,0.0026157438,0.0044392995,0.020670012,-0.010956569,-0.004402737,-0.056306284,-0.03159002,0.02688564,0.010030318,-0.04775065,0.0046617216,-0.005444769,-0.01954876,0.00556055,-0.04297315,-0.0032449237,-0.039316896,0.028738141,-0.00865313,0.0137840705,-0.004725706,-0.038195647,0.027324392,0.015721884,-0.0014274617,0.02854314,-0.014661571,0.0064410977,0.010274068,0.023131888,0.0065325038,0.035709396,0.009256411,0.031906895,0.001988087,-0.010298443,-0.016989386,0.004256487,-0.033759393,0.022644388,-0.020231262,0.017525636,-0.015258759,0.030810017,-0.0030423065,0.004722659,-0.02527689,-0.0069103166,0.015027196,-0.027421892,-0.01818376,-0.026666265,0.017415948,-0.013467195,-0.047092527,0.06298504,-0.00025993667,0.021876575,0.050066277,-0.04996878,-0.020414075,0.025228139,-0.03641627,0.03490502,-0.032711267,0.059816286,0.027763141,-0.023241576,-0.019414699,0.010219225,-0.009299068,-0.040535647,0.018512823,-0.0026766811,-0.009134537,0.014417821,-0.011639069,-0.017818136,-0.025788765,-0.019853448,0.03685502,0.05206503,0.015295321,-0.058548786,-0.024240952,0.00821438,0.03724502,-0.004229065,-0.00025841323,-0.04036502,-0.0013071102,0.0027376187,0.017476885,0.022156889,0.02683689,-0.013467195,-0.0031123846,0.039975025,-0.004308284,0.030225018,0.018585948,-0.01373532,0.03480752,-0.015843758,0.0041132835,-0.024435952,-0.0039426587,-0.06742129,0.05240628,0.029883767,-0.0065995352,-0.0022836342,0.029030642,-0.0034582051,-0.030468768,-0.023485325,0.017038135,0.022120325,0.019244073,-0.06547129,-0.008988286,-0.009682975,-0.023948452,-0.007525786,0.007397817,0.008336254,0.0447769,0.057427533,-0.0034033614,-0.0028381657,-0.0047927373,0.012528758,0.005191878,-0.010115631,0.0007556254,-0.056696285,0.0217547,0.023790013,-0.041876275,-0.022973452,0.003939612,0.0438019,0.027397515,0.000109687564,-0.00251215,0.016891886,0.037756898,-0.014771258,-0.0074282857,-0.05289378,0.058987536,-0.002199845,0.02673939,0.05187003,0.022425013,0.036245648,0.006133363,0.0460444,-0.026495641,0.0047317995,-0.026178766,-0.0050578155,-0.05460003,0.033710644,0.02854314,0.031565644,0.028153142,-0.03149252,-0.09613506,-0.0020596888,0.040218774,-0.0442894,0.03719627,0.021315949,-0.045581277,0.0016148447,-0.0443869,0.0025532828,0.015612196,0.0049603153,-0.03622127,0.012327664,-0.02625189,0.029859392,-0.013930321,-0.014978446,0.00039342797,0.016672509,-0.035173144,-0.011285632,0.045240026,-0.019256262,-0.004573362,-0.048603777,-0.0029691814,0.035855647,-0.008129067,-0.011145475,-0.0446794,-0.064545035,-0.014100946,-0.02199845,-0.05269878,0.07132129,0.011255163,0.08892005,-0.008305786,0.0065446915,0.03397877,0.0048171123,-0.011133288,-0.022875952,0.027763141,0.0033485175,-0.019890012,-0.016611572,0.007739067,-0.0074282857,0.013674383,0.00899438,-0.015075946,0.02209595,-0.0041132835,-0.008842036,0.01285782,-0.011505007,-0.004899378,-0.0060480502,-0.024435952,0.0036928146,0.021315949,-0.03539252,0.06786004,-0.02229095,-0.05216253,-0.0005785257,0.04082815,-0.02678814,-0.0023689468,0.027543766,-0.012376414,0.03378377,0.037513148,0.022571264,0.015977822,-0.013613446,-0.020523762,-0.023485325,-0.026910016,-0.002189181,-0.002311056,0.0026538298,-0.003016408,0.016648134,0.012687195,0.022120325,0.07819504,-0.043923777,-0.0005552933,0.019049073,0.028470017,-0.0036410177,-0.005027347,-0.0016270322,0.013747508,0.011742663,0.012540945,0.04102315,-0.017135635,-0.00028716814,0.01058485,-0.015136884,-0.046775654,0.010347193,0.009481881,-0.014454383,0.0065203165,0.028226266,0.027933767,0.010365475,-0.011389226,0.0058896127,-0.00054310577,-0.020170324,0.021498762,-0.036684398,-0.05060253,0.026178766,0.018659074,-0.041145023,0.010444693,-0.025837515,0.028153142,0.021108761,-0.01354032,0.003936565,0.018269073,0.009530631,-0.005380784,0.0410719,-0.042168774,0.05430753,-0.002696486,-0.018293448,-0.0074953167,0.0007967583,-0.01926845,-0.0011052545,0.028713766,0.026373765,-0.006825004,-0.024204388,0.02595939,0.030590642,-0.035368145,-0.011888913,-0.0038878147,-0.00012320808,0.007781723,-0.0068920352,-0.0036532052,-0.0030712518,-0.021888763,0.024521265,-0.00681891,-0.015039383,0.027105017,-0.013820633,-0.014576258,0.017574385,0.021084387,-0.029201267,0.010207037,-0.03305252,0.010158287,-0.001440411,0.020414075,0.014588446,-0.04463065,0.020584699,-0.01358907,-0.058256283,0.01946345,0.0086348485,0.019658448,-0.0399994,-0.0033698457,0.06469129,-0.017732823,-0.014612821,0.038829397,-0.02654439,0.00241922,0.016050946,-0.013296571,-0.070882544,-0.007842661,-0.004548987,-0.0040432056,-0.026568765,-0.042168774,-0.018841885,-0.016258134,-0.031395018,-0.0024862515,0.0976463,-0.0034673458,-0.027519392,0.013467195,0.02595939,-0.011852351,-0.008519067,0.014113133,-0.027007516,-0.038244396,-0.0023704702,0.008415474,-0.0032327361,0.010755475,0.037610646,0.0024055091,-0.039316896,0.03393002,0.0076842234,0.005420394,-0.02238845,-0.015551259,0.024216577,0.025203764,0.003439924,-0.003013361,0.011358757,0.008433755,0.0010565046,0.039341275,-0.0049298466,-0.0055209408,-0.028080016,-0.045386277,-0.01964626,0.007135785,0.010377662,-0.0026812516,0.017732823,-2.3863235e-05,-0.0224372,-0.0063679726,-0.05216253,0.03695252,0.00027840838,0.018988136,0.008476411,0.006355785,0.027226891,-0.012821257,0.024021577,0.002536525,-0.010725006,0.0013604305,0.015075946,0.00865313,-0.015575634,0.016099697,0.0020612122,-0.022108138,-0.015002822,0.035368145,-0.02586189,-0.016343446,-0.075952545,0.0423394,0.06610504,-0.02454564,0.005734222,0.0008424614,0.0197072,0.0059048473,-0.003534377,-0.03602627,-0.035173144,0.022778451,0.008860318,0.0011136335,-0.01652626,-0.014795634,0.0038146898,-0.0011486725,-0.021060012,-0.005981019,-0.024947828,0.022546887,-0.037732523,-0.0113770375,0.0019469543,0.0137840705,0.020621262,-0.012540945,0.0033028144,0.023387827,0.0008820708,0.02552064,-0.010383756,-0.014856571,-0.010261881,0.060547534,0.029420642,-0.009012662,-0.01808626,0.03897565,-0.021718137,-0.012796883,-0.0021815638,-0.027958142,-0.01881751,0.038244396,-0.030176267,-0.017342823,0.013650008,0.016489698,0.0017321494,-0.029103767,0.017342823,-0.02571564,-0.038561273,0.02527689,0.0032053143,0.012364226,0.011352663,-0.0143690705,-0.017513448,-0.021096574,0.019305011,0.006200394,0.0015676181,0.030590642,0.012796883,-0.016270323,-0.014161883,0.008001098,-0.011901101,0.023936264,0.013552508,-0.024752827,-0.0047927373,0.0050060186,-0.043046273,0.008372817,-0.008415474,0.009762193,-0.00085084036,0.04862815,-0.0023049624,-0.002088634,0.0073064105,0.012169226,0.0024892983,0.0020490247,-0.029323142,-0.0024725406,0.020450637,3.023073e-05,0.06381379,-0.030931894,0.05079753,0.0065142224,0.0016559776,0.007416098,-0.010402037,0.019926574,-0.019122198,0.008177817,-0.016111884,-0.022047201,-0.03368627,-0.0016224618,-0.0418519,0.000110068424,-0.005012112,-0.03329627,0.036440644,-0.009841412,-0.0014983016,-0.013467195,0.011322194,-0.057476282,0.004457581,0.03178502,-0.0069285976,0.010511725,-0.024618763,-0.030517519,0.009969381,-0.041437525,0.0059475033,0.0058652377,-0.00032772968,-0.0068859416,-0.0458494,0.04801878,0.0071053165,-0.031053768,0.0047927373,0.022035012,-0.00012473152,0.014576258,0.0006390824,-0.052...', '2025-03-25 05:14:22.151275+00'), ('26', 'https://ai.pydantic.dev/cli/', '0', 'PydanticAI Command Line Interface (CLI)', 'An introduction to the PydanticAI CLI, including links to installation, documentation, troubleshooting, and contribution guidelines.', 'Skip to content 

[ ![logo](../img/logo-white.svg) ](.. "PydanticAI")

PydanticAI 

Command Line Interface (CLI) 

Type to start searching

[ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")

[ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI 

[ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")

  * [ Introduction  ](..)
  * [ Installation  ](../install/)
  * [ Getting Help  ](../help/)
  * [ Contributing  ](../contributing/)
  * [ Troubleshooting  ](../troubleshooting/)
  * Documentation  Documentation 
    * [ Agents  ](../agents/)
    * [ Models  ](../models/)
    * [ Dependencies  ](../dependencies/)
    * [ Function Tools  ](../tools/)
    * [ Common Tools  ](../common_tools/)
    * [ Results  ](../results/)
    * [ Messages and chat history  ](../message-history/)
    * [ Testing and Evals  ](../testing-evals/)
    * [ Debugging and Monitoring  ](../logfire/)
    * [ Multi-agent Applications  ](../multi-agent-applications/)
    * [ Graphs  ](../graph/)
    * [ Image, Audio & Document Input  ](../input/)
    * [ MCP  ](../mcp/)

MCP 
      * [ Client  ](../mcp/client/)
      * [ Server  ](../mcp/server/)
      * [ MCP Run Python  ](../mcp/run-python/)
    * Command Line Interface (CLI)  [ Command Line Interface (CLI)  ](./) Table of contents 
      * Installation 
      * Usage 
        * Choose a model 
  * [ Examples  ](../examples/)

Examples 
    * [ Pydantic Model  ](../examples/pydantic-model/)
    * [ Weather agent  ](../examples/weather-agent/)
    * [ Bank support  ](../examples/bank-support/)
    * [ SQL Generation  ](../examples/sql-gen/)
    * [ Flight booking  ](../examples/flight-booking/)
    * [ RAG  ](../examples/rag/)
    * [ Stream markdown  ](../examples/stream-markdown/)
    * [ Stream whales  ](../examples/stream-whales/)
    * [ Chat App with FastAPI  ](../examples/chat-app/)
    * [ Question Graph  ](../examples/question-graph/)
  * API Reference  API Reference 
    * [ pydantic_ai.agent  ](../api/agent/)
    * [ pydantic_ai.tools  ](../api/tools/)
    * [ pydantic_ai.common_tools  ](../api/common_tools/)
    * [ pydantic_ai.result  ](../api/result/)
    * [ pydantic_ai.messages  ](../api/messages/)
    * [ pydantic_ai.exceptions  ](../api/exceptions/)
    * [ pydantic_ai.settings  ](../api/settings/)
    * [ pydantic_ai.usage  ](../api/usage/)
    * [ pydantic_ai.mcp  ](../api/mcp/)
    * Skip to content 

[ ![logo](../img/logo-white.svg) ](.. "PydanticAI")

PydanticAI 

Command Line Interface (CLI) 

Type to start searching

[ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")

[ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI 

[ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")', '{"source": "pydantic_ai_docs", "url_path": "/cli/", "chunk_size": 2819, "crawled_at": "2025-03-25T05:14:13.887546+00:00"}', '[-0.0055503896,0.006629731,0.026018567,-0.022902058,0.0056504607,-0.003055752,-0.023288047,0.03731234,-0.006325943,0.02713365,0.00060087524,-0.07439595,-0.017483905,-0.022601843,0.019571109,-0.0018388123,-0.041858442,-0.008220152,0.010007141,0.06724799,0.035796974,0.031794116,0.001876339,0.027791262,0.013588268,-0.01655467,0.008813432,0.056497462,0.02233022,-0.037684035,0.024231577,-0.025461027,-0.058441706,-0.0012651886,0.010250172,-0.008491774,-0.0044031423,0.02058612,-0.0062151495,0.0076483153,-0.0046640425,-0.054638993,0.052923482,-0.014245881,-0.058841992,-0.03433879,-0.005300211,0.0058648996,0.036626138,-0.005589703,-0.061758358,0.012823436,-0.04723371,0.031365238,-0.013895631,-0.005067902,-0.019142231,0.0046175807,0.0055682594,-0.016197274,0.021758385,0.006829874,0.001112401,0.07050746,-0.011944238,-0.0315082,-0.035654016,0.020014282,-0.065360926,-0.033909913,0.008191559,0.041887034,-0.03682628,-0.06541811,-0.020014282,-0.030221567,-0.014567538,0.07542525,-0.0038563234,-0.053295176,-0.012137232,0.03213722,-0.0050321626,-0.00071032834,-0.019313782,-0.01998569,-0.045689747,0.028134363,0.0030110774,-0.026904915,-0.015782692,0.01624016,-0.017912783,0.0059935628,0.085603945,0.012973544,0.019456742,0.022587547,0.0017387408,0.02677625,0.012230156,-0.024417425,-0.0127448095,0.021858456,0.03728375,-0.013959962,0.034624707,-0.022130078,-0.021315211,0.0062222974,-0.11951386,-0.0011400993,-0.017669752,0.035196546,-0.04102928,0.014288768,0.010178693,0.00058881304,-0.0074052843,-0.06210146,-0.032280177,0.004202999,0.0065475297,-0.010829156,0.020629007,0.0054896316,0.009435304,-0.04571834,-0.046118625,-0.0029538937,0.027090762,0.013666896,0.03153679,-0.032880608,-0.0031951373,0.00610793,-0.030393118,-0.0033523922,-0.053895604,0.024546089,0.043116484,-0.03493922,0.010243024,0.027062168,-0.046833422,-0.01491064,-0.051751215,-0.024102915,-0.03902785,-0.0032987827,0.030593261,-0.010864896,-0.048520338,-0.043917052,-0.053952787,0.022444589,0.030021423,0.047805544,-0.008677621,-0.017140804,-0.022716211,0.070621826,-0.028663311,-0.016097201,-0.015268038,0.009878478,-0.014574686,-0.0032022852,-0.04154393,-0.03759826,-0.016383119,-0.024617568,-0.012265896,-0.0045032133,0.015682619,-0.0029878465,-0.026418854,-0.016383119,-0.048034277,-0.04294493,-0.021515355,0.023473894,-0.046147216,-0.017212283,-0.018670466,-0.025918497,-0.001179413,0.009006427,-0.03405287,0.050321624,0.01158684,0.027462455,0.056926336,0.039714053,0.010007141,-0.018641874,0.08274476,-0.0037598258,0.026947802,0.009585411,0.0013241592,0.031365238,0.023302343,0.0141958445,-0.025761241,-0.021057885,0.009764111,0.009756963,-0.022315925,-0.033738364,0.044488892,-0.069478154,0.022516068,-0.020314496,-0.042659014,-0.030507484,-0.03496781,0.011851314,-0.0017441018,0.012737662,-0.026490333,0.045918483,0.028105771,-0.029792689,0.0023409564,0.016168682,0.049206544,-0.06038595,0.024217281,0.03076481,0.033309486,0.009413861,-0.005421726,0.013052171,0.016526079,-0.029035006,0.016140088,0.0021497484,0.035167955,-0.01974266,0.0009515719,-0.010593274,-0.0079127895,-0.0006317008,0.030879179,-0.008427443,-0.0013089698,-0.05895636,0.0150536,0.036425993,0.035539646,0.019671181,0.019056456,-0.0003582914,-0.007962826,-0.011908498,-0.028234433,-0.0051786955,0.0066511747,0.017312353,-0.027991403,0.017612569,-0.03042171,-0.011372401,-0.03230877,-0.036797687,-0.027505342,0.005296637,-0.06787701,-0.03874193,0.034081463,0.033166524,0.07576835,0.0026411705,-0.037169382,0.02348819,0.000599535,0.025160812,0.011944238,0.028062884,-0.036283035,-0.012223008,0.045146503,0.012773401,-0.008213004,0.029420996,0.025746945,-0.036025707,-0.0011365253,-0.0031486754,0.01964259,0.0046926346,0.03242314,-0.032365955,0.0024892765,0.011951386,0.056068584,0.011658319,0.036111485,0.012280192,0.06530374,-0.002224802,-0.0031325927,-0.042630423,-0.015782692,0.021315211,0.0013983193,-0.029149372,0.034824852,-0.015353814,-0.024603272,0.027405271,0.008477478,-0.04791991,0.006068616,-0.03556824,0.058127195,-0.017183691,0.03776981,-0.025947088,-0.044546075,-0.028120067,0.052666154,-0.0059185093,-0.06530374,0.033423852,0.042058583,-0.0010578978,0.007634019,-0.017283762,0.017598273,-0.021501059,-0.04057181,0.019399557,-0.017326651,-0.021415282,-0.02387418,0.045346648,-0.026647588,0.030964954,-0.021858456,-0.018355956,-0.06307358,-0.020243017,-0.011672615,0.0055611115,0.02467475,0.04231591,0.009092202,-0.0049142214,-0.017326651,0.009092202,0.020528935,0.026447445,-0.021786977,-0.008956391,-0.035053585,-0.020528935,-0.030393118,0.029849872,-0.06696207,-0.005986415,6.946922e-05,0.0010248385,0.0005177802,-0.0006263398,-0.017355243,-0.04417438,0.010092917,0.008348815,0.061415255,-0.016283048,-0.014567538,-0.012265896,-0.027662598,-0.019442447,-0.029106485,0.012408855,0.004639025,0.006465328,0.01694066,-0.011636876,0.007541096,0.014224436,0.03857038,0.013423866,0.0082558915,0.011207998,0.0057433844,0.06598995,0.07502497,-0.022573251,0.02428876,0.005096494,0.023645446,0.0150536,0.0016377759,0.019828435,0.041772667,0.003034308,-0.016297344,0.007927085,-0.030192975,0.008270187,-0.019242303,0.016726222,0.069649704,0.015082192,0.01193709,-0.016683334,0.037855584,-0.013288054,0.005096494,-0.00479628,-0.015939947,-0.052237276,-0.008956391,0.048120055,0.02363115,0.01151536,-0.011822723,-0.059413828,-0.027562527,0.0034399547,-0.047834136,0.08097207,0.06295922,-0.063874155,0.031593975,-0.05380983,0.01396711,0.01438884,0.032766238,0.0033184395,0.0041636857,-0.03262328,-0.012516075,0.03259469,0.030879179,0.028191546,0.018741947,-0.03685487,-0.0416583,0.022558955,-0.011965682,-0.013402421,0.00815582,-0.045203686,-0.0046783388,-0.016140088,0.013180834,-0.02457468,-0.017197987,0.01606861,-0.01585417,-0.05492491,0.062044274,-0.031193689,0.051065013,-0.0046783388,0.041429564,0.0046533206,-0.022987833,0.04351677,-0.022115782,-0.005789846,0.015210855,0.011715503,0.0154395895,-0.0078413095,0.050950646,-0.03353822,-0.012823436,-0.028906342,-0.04274479,-0.03759826,0.023645446,0.03027875,-0.052180093,-0.017369539,0.011979978,-0.0084631825,0.009685483,0.047033563,-0.024917781,0.07067901,-0.010178693,-0.00031339328,-0.02481771,0.039857015,0.0051679737,0.012709069,0.039857015,-0.018284477,-0.014381692,-0.036626138,-0.01393137,0.008770544,-0.020528935,-0.033338077,-0.017312353,0.0024821283,-9.560394e-05,0.04903499,0.013516788,-0.010443167,0.03073622,-0.015897058,0.0016663678,0.03759826,-0.04697638,-0.012072901,-0.00059194025,0.030964954,0.016254457,0.055982806,0.005586129,0.004421012,0.009020723,-0.013202279,0.025618281,-0.0430593,-0.015253742,0.0051715476,-0.009163682,-0.023187976,-0.041715484,-0.0335954,-0.03528232,-0.042144362,0.001442994,-0.010271615,0.025489619,0.005153678,-0.07147958,0.02863472,-0.0016860246,-0.013624008,-0.059070725,-0.030221567,0.018570395,-0.0028681182,-0.028448872,-0.005275193,-0.008348815,0.041115053,0.006286629,-0.0016243735,0.0069978507,0.024017138,0.074338764,-0.025389547,0.02114366,-0.013788411,0.041115053,0.02478912,-0.00647605,-0.029035006,0.055496745,0.0056647565,0.008384555,-0.025718354,0.033223707,0.010064325,1.3458265e-05,-0.0016288409,0.034281608,-0.02387418,-0.03857038,-0.03076481,0.009142239,0.015253742,-0.033652585,0.0073766927,-0.0068834834,0.0044746217,-0.022015711,-0.024932077,-0.042716198,-0.012830584,-0.02478912,-0.026004272,0.031365238,0.03476767,-0.047548216,-0.0042208694,-0.012594702,0.010786269,0.023859885,0.009385269,0.01358112,-0.015282334,-0.0080486005,-0.017598273,-0.024617568,0.006633305,0.056983523,5.3972668e-05,-0.038456015,0.0150536,0.0036293757,-0.050464585,0.008677621,0.027991403,-0.007626871,-0.008341667,-0.011951386,-0.010428871,0.0044996394,-0.019857027,-0.0016574328,-0.0047891317,0.011772687,-0.02293065,-0.0072551775,0.026661884,-0.027748372,0.009828443,0.050836276,-0.035082176,-0.0044996394,-0.033423852,0.030593261,-0.0028377394,0.009285198,-0.021272324,0.0017807351,-0.05964256,-0.018784834,0.008205856,0.008370259,0.0402573,0.050035708,-0.0016574328,0.007862754,0.009992845,0.017812712,-0.02527518,0.0038563234,-0.008934948,0.03825587,0.04134379,-0.005493206,-0.02128662,0.038284462,-0.01438884,-0.021543946,0.0018012854,0.015482477,-0.012172973,0.01879913,0.013523936,0.022258742,-0.0025160813,0.027419567,-0.0014948167,-0.024217281,-0.026175823,-0.029907057,0.036283035,-0.050979238,0.04325944,0.016483191,-0.031193689,-0.0157541,0.043831278,0.024374537,0.04526087,0.0014072543,0.021686904,-0.017197987,0.008677621,0.017927079,0.020157242,-0.015310926,-0.0095711155,0.019971395,-0.04151534,-0.009578263,0.016726222,-0.026118638,-0.004085058,-0.054581806,0.011572544,0.056697603,-0.018670466,0.02034309,0.01606861,0.005639739,0.034424566,0.0143388035,-0.026190119,0.010914932,-0.016597558,-0.0014081477,-0.014824865,-0.012937804,0.016983548,-0.0007366864,-0.13072185,-0.021829864,0.009999993,-0.0060114325,0.0005816651,-0.035053585,0.0043173665,-0.023473894,0.0077841263,0.027919924,-0.0146819055,-0.024560384,-0.0015743377,-0.014710498,0.020643303,-0.0029592547,-0.00324696,-0.031851303,0.011086483,-0.004117224,-0.023059312,-0.023216568,0.034910627,-0.012437447,-0.02303072,0.008942096,-0.031736933,-0.016740518,0.013466753,-0.0006902247,0.011493917,0.0141243655,0.008934948,-0.009092202,0.01964259,0.01942815,0.0043066447,-0.04417438,0.031565383,-0.007819866,-0.0069549633,-0.01385989,-0.0014617575,-0.013995701,-0.016097201,-0.022630434,-0.032394547,0.0074767643,0.027290903,-0.020114355,-0.014596131,0.0072337333,0.01228734,-0.0071265143,-0.031393833,0.026633292,0.00073713314,0.007115792,-0.0023087903,-0.030393118,0.008970687,-0.018684762,-0.007798422,-0.03805573,0.030192975,-0.0057004965,-0.026032863,0.027519638,-0.02457468,-0.035825565,-0.023116495,-0.010550386,-0.0051715476,0.010335947,0.010050029,0.014160105,-0.03042171,0.004385272,-0.02902071,0.020943517,0.012923508,-0.01964259,0.011415289,-0.014238733,-0.023259455,0.018012853,-0.013159391,-0.0023391694,-0.026947802,-0.026190119,-0.017869895,-0.035796974,0.01151536,0.022373108,-0.017583977,0.025546802,-0.011372401,0.006322369,-0.09978549,-0.0077340906,-0.009006427,0.028277323,0.024217281,-0.02303072,0.005453892,0.042401686,-0.008999279,-0.016197274,0.0062330193,-0.0041279458,-0.029792689,0.016840588,0.02621871,-0.015682619,0.042344503,-0.024689047,0.023259455,0.018212996,-0.029135076,0.00089...', '2025-03-25 05:14:25.33884+00'), ('27', 'https://ai.pydantic.dev/cli/', '1', 'PydanticAI Command Line Interface (CLI)', 'The document serves as an introduction to PydanticAI's CLI, providing links to sections on installation, help, contributing, troubleshooting, and various documentation topics such as agents, models, dependencies, tools, and more.', '* [ Introduction  ](..)
      * [ Installation  ](../install/)
      * [ Getting Help  ](../help/)
      * [ Contributing  ](../contributing/)
      * [ Troubleshooting  ](../troubleshooting/)
      * Documentation  Documentation 
        * [ Agents  ](../agents/)
        * [ Models  ](../models/)
        * [ Dependencies  ](../dependencies/)
        * [ Function Tools  ](../tools/)
        * [ Common Tools  ](../common_tools/)
        * [ Results  ](../results/)
        * [ Messages and chat history  ](../message-history/)
        * [ Testing and Evals  ](../testing-evals/)
        * [ Debugging and Monitoring  ](../logfire/)
        * [ Multi-agent Applications  ](../multi-agent-applications/)
        * [ Graphs  ](../graph/)
        * [ Image, Audio & Document Input  ](../input/)
        * [Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Command Line Interface (CLI)  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
          * [ Introduction  ](..)
          * [ Installation  ](../install/)
          * [ Getting Help  ](../help/)
          * [ Contributing  ](../contributing/)
          * [ Troubleshooting  ](../troubleshooting/)
          * Documentation  Documentation 
            * [ Agents  ](../agents/)
            * [ Models  ](../models/)
            * [ Dependencies  ](../dependencies/)
            * [ Function Tools  ](../tools/)
            * [ Common Tools  ](../common_tools/)
            * [ Results  ](../results/)
            * [ Messages and chat history  ](../message-history/)
            * [ Testing and Evals  ](../testing-evals/)
            * [ Debugging and Monitoring  ](../logfire/)
            * [ Multi-agent Applications  ](../multi-agent-applications/)
            * [ Graphs  ](../graph/)
            * [ Image, Audio & Document Input  ](../input/)
            * [ MCP  ](../mcp/) MCP  [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
            * [ pydantic_ai.models  ](../api/models/base/)
            * [ pydantic_ai.models.openai  ](../api/models/openai/)
            * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
            * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
            * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
            * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
            * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
            * [ pydantic_ai.models.groq  ](../api/models/groq/)
            * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
            * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
            * [ pydantic_ai.models.test  ](../api/models/test/)
            * [ pydantic_ai.models.function  ](../api/models/function/)
            * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
            * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
            * [ pydantic_ai.providers  ](../api/providers/)
            * [ pydantic_graph  ](../api/pydantic_graph/graph/)
            * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
            * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
            * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
            * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
          * Installation 
          * Usage 
            * Choose a model 
Command Line Interface (CLI) **PydanticAI** comes with a simple reference CLI application which you can use to interact with various LLMs directly from the command line. It provides a convenient way to chat with language models and quickly get answers right in the terminal. We originally developed this CLI for our own use, but found ourselves using it so frequently that we decided to share it as part of the PydanticAI package. We plan to continue adding new features, such as interaction with MCP servers, access to tools, and more. Installation To use the CLI, you need to either install [`pydantic-ai`](../install/), or install [`pydantic-ai-slim`](../install/#slim-install) with the `cli` optional group: pipuv
                
                                pip install "pydantic-ai[cli]"
                
                
                                uv add "pydantic-ai[cli]"
                

To enable command-line argument autocompletion, run:
                
                                register-python-argcomplete pai >> ~/.bashrc  # for bash
                register-python-argcomplete pai >> ~/.zshrc   # for zsh', '{"source": "pydantic_ai_docs", "url_path": "/cli/", "chunk_size": 4772, "crawled_at": "2025-03-25T05:14:21.834042+00:00"}', '[-0.008840375,0.008800313,0.04300001,-0.035975784,0.02158013,-0.0076385112,-0.014115221,0.035601873,-0.034453426,0.03552175,-0.0017493793,-0.06863977,-0.0009740103,-0.016959632,0.010022207,-0.0012903342,-0.01830839,0.015877955,-0.008399691,0.06441989,0.045724235,0.043373924,0.016946277,0.014622674,0.005077874,-0.011624692,-0.023075782,0.031542245,-0.01732019,-0.031542245,0.0043100165,-0.022755286,-0.04657889,0.0049443333,-0.00443688,0.0015816191,0.0038459636,-0.0012978459,0.00070526026,-0.0042632776,-0.035468332,-0.05480498,0.036403116,0.018829197,-0.07910933,-0.020244725,0.018348452,0.038379513,0.006573526,-0.01691957,-0.101490706,0.032797523,-0.026481062,0.014662736,-0.013394102,-0.017627334,-0.014315532,-0.0105764,0.0011442744,-0.022982303,0.008372983,-0.009922052,-0.019416776,0.07611803,-0.03421305,-0.044869576,-0.029432304,0.026961807,-0.063885726,-0.04302672,-0.0011050468,0.035548456,-0.040809948,-0.030367088,-0.017173296,-0.025786651,0.011224071,0.09240996,0.0027192165,-0.031462118,-0.013794724,0.016812736,-0.005254815,-0.006132843,-0.021406528,-0.05010436,-0.059345357,0.039474543,-0.016839445,-0.030634169,0.0021616854,0.0014906448,-0.038192555,0.008326245,0.08706834,0.023716776,0.01064317,0.020912427,0.006172905,0.02588013,0.023316154,-0.028070193,-0.021686962,0.008793635,0.04105032,-0.003488743,0.0634584,0.002278533,-0.0068572997,0.025038825,-0.118690714,0.009160872,-0.010309319,0.02449131,-0.047380134,0.03880684,0.028070193,0.019924229,-0.00811258,-0.05955902,0.0005796488,0.013173761,0.031462118,0.021059321,0.00047448574,-0.013928264,-0.009247673,-0.049062744,-0.040596284,-0.0049510105,0.010683232,-0.0129133575,0.043507464,-0.05034473,-0.0013520966,-0.010623139,-0.025733236,-0.007511648,-0.012519413,0.021873917,0.030927958,-0.031568952,-0.006937424,0.018869258,-0.062657155,-0.0018895967,-0.05875778,-0.024384478,-0.050905604,0.029699385,0.019416776,0.020631993,-0.018735718,-0.04091678,-0.056300633,0.021793794,-0.009407922,0.012479351,-0.004640529,-0.05939877,-0.017600626,0.07136399,-0.031702492,-0.028283857,-0.019456837,0.00034762238,-0.031542245,0.011945189,-0.038860258,-0.018468637,-0.019603731,-0.019056216,-0.0037191003,-0.027242243,0.0039694887,-0.048181377,-0.018615533,-0.010850158,-0.049490076,-0.037284482,-0.033518642,0.03143541,-0.042492557,-0.037925474,-0.0323969,0.00019634613,-0.025252491,0.024451248,-0.022888826,0.049009327,0.022942241,0.0153838545,0.030981373,0.050558396,0.008292859,0.02706864,0.0687466,-0.01530373,0.020017706,0.013821431,0.01189845,0.037498146,0.01745373,-0.0043701096,0.003802563,-0.026895037,0.019710563,-0.0008183523,-0.012833233,-0.03856647,0.0018445269,-0.07691927,0.021940688,0.021820502,-0.038646594,-0.0070242253,-0.024771744,0.0038960413,-0.013147052,0.012672984,-0.010990376,0.009047362,0.03103479,-0.023195969,0.0025472832,0.023770193,0.019737272,-0.06121492,0.066342875,-0.0037157617,0.046124857,-0.0058891317,-0.011424381,0.035094418,0.019056216,-0.036403116,0.0046238364,0.005992626,0.020578576,-0.020538514,0.034560256,-0.0048375013,0.0076986044,0.026614603,0.04011554,-0.008199381,-0.0026958468,-0.06372548,0.033465225,0.01705311,0.031328578,0.0042532617,0.018428575,0.0010883543,-0.025345968,-0.02346305,-0.01953696,0.007284629,0.0010558038,0.017133234,-0.03907392,0.049276408,-0.014529196,-0.0010040569,-0.01120404,-0.008206058,-0.03394597,0.043587588,-0.06393915,-0.008726865,0.036269575,0.026387583,0.06297766,0.02171367,-0.00071652775,0.0052381223,-0.009294412,0.015904661,0.007872207,0.048929203,-0.02435777,-0.014155283,0.048688833,0.020605285,-0.0105764,0.0370174,0.0044936347,-0.031515535,0.004764054,-0.0062730606,0.006643635,0.024531372,0.038619883,-0.023743484,0.010903574,-0.009107456,0.050772063,-0.0015156836,0.003952796,0.038219262,0.030206839,0.01496988,0.017760875,-0.04786088,0.0030781063,0.02426429,0.0013721277,-0.011991928,0.044041626,-0.023316154,-0.0058857934,0.03530808,-0.008546586,-0.020899074,-0.025826715,-0.04366771,0.0353615,-0.014716152,0.031328578,0.011264133,-0.028230442,-0.013340686,0.016265221,-0.0043968176,-0.06415281,0.036376406,0.024411187,-0.016892862,0.0013061921,-0.004206523,0.052294422,-0.013080283,-0.024050627,0.059772685,0.019122986,-0.0185087,0.0040729824,0.030554045,-0.011604661,0.03562858,-0.045777652,-0.0062597063,-0.0637789,0.026547832,-0.032744106,0.0041597835,0.015704352,0.030100007,0.014449072,0.010736649,-0.018682303,-0.00905404,0.025038825,0.0009581524,0.021593483,0.011130593,-0.030367088,-0.058971442,-0.0068773306,0.026400939,-0.05971927,-0.011951867,0.0094479835,0.01857547,-0.023142552,-0.007952331,-0.0026207305,-0.0047473614,-0.011497829,0.021753732,0.058544114,-0.04011554,-0.0028444107,-0.013427488,-0.030660877,0.006656989,-0.0020131215,0.0011659747,-0.0048375013,0.0035755443,0.0423056,-0.014008389,0.010155748,0.012058699,0.019924229,0.009721741,0.012799848,0.0044535724,0.0063899085,0.044629205,0.085946605,-0.021700315,0.008867083,-0.002296895,0.006930747,0.002715878,-0.0018729041,0.01209876,0.0664497,0.009094101,0.0042532617,-0.0002656202,-0.022221124,-0.008159319,-0.012926711,0.0032316777,0.04465591,0.0022918873,-0.01127081,0.013374072,0.04620498,-0.036296282,0.0076718964,0.009534785,-0.010149071,-0.060306847,0.01953696,0.02045839,0.037391312,0.016265221,-0.0055052033,-0.052134175,-0.01671926,-0.021500004,-0.06815902,0.10143729,0.052962124,-0.05306896,0.0073513994,-0.033144727,0.015357147,0.022568328,0.038486343,-0.014235407,0.018201558,-0.02993976,-0.0088069895,0.02274193,0.028417397,-0.020818949,0.025092242,-0.021433234,-0.037765227,0.013374072,-0.034186345,-0.030847833,-0.006336492,-0.04775405,-0.023422986,-0.012265686,-0.023302801,-0.00513129,0.014422364,0.02326274,-0.023810254,-0.044549078,0.07344722,-0.044228584,0.032530442,0.002906173,0.04647206,0.005995964,-0.020885719,0.025519572,-0.051092558,-0.0073714303,0.0129133575,0.016572364,-0.010569723,-0.011711493,0.01517019,-0.031328578,-0.023382924,-0.031675786,-0.04852858,-0.04676585,0.030046592,0.022234477,-0.053629827,-0.040542867,0.021072676,0.0068172375,0.021166153,0.06441989,0.007938977,0.06548821,-0.0088069895,-0.009988822,-0.0067938683,0.046739142,-0.013480904,-0.0018829197,0.04911616,-0.0152236065,0.019670501,-0.009394567,0.0042198766,0.02005777,-0.02469162,0.0011843365,-0.011638046,0.02753603,0.006950778,0.060413677,0.0024905286,-0.009107456,0.049062744,-0.039447837,0.0002112651,0.028150316,-0.062283244,-0.01158463,0.009361182,0.023276092,0.007571741,0.059772685,-0.017026402,-0.0024237584,0.032610565,-0.012118792,0.038352802,-0.011804972,-0.0003822594,-0.014302177,0.0022351325,-0.009147517,-0.04185156,-0.025105596,-0.042679515,-0.0052715074,0.00083504483,0.000525398,0.009968791,-0.0095548155,-0.05469815,0.052080758,-0.023836963,-0.010322673,-0.051226098,-0.015063358,0.006523449,0.0017777566,-0.009468014,-0.011611338,-0.006119489,0.025412738,-0.00259903,-0.0065568336,0.023436341,0.03186274,0.048955914,-0.020031061,-0.0020848995,-0.015517395,0.035094418,0.014929817,-0.010275934,-0.03784535,0.055339143,0.0014914793,0.02267516,-0.0109569905,0.029592553,-0.015544103,0.00403292,0.024798453,0.033011187,-0.012445966,-0.04094349,-0.01705311,-0.0149031095,-0.0081860265,-0.045457155,0.02673479,-0.00519806,-0.029325472,-0.018348452,0.0034102881,-0.021980751,-0.009167549,-0.015557457,-0.02964597,0.017440377,0.04356088,-0.029138517,-0.007711958,-0.02608044,0.0016158388,-0.0019296588,-0.0057756226,0.021793794,-0.0030781063,-0.019777333,0.0027859868,-0.029993175,0.0027375782,0.059078276,-0.012365841,-0.033064604,0.02128634,0.017640688,-0.032610565,0.00835963,0.032663982,-0.0043100165,-0.008513201,0.0048074545,-0.008813667,-0.00052665,-0.009334474,-0.009494723,6.990005e-05,-0.009828574,-0.027041933,0.003972827,0.019884165,-0.0018027955,0.0007223701,0.031916156,-0.047647215,-0.011457766,-0.010583077,0.028524231,0.004994411,0.006243014,-0.010763356,-0.011845034,-0.0654348,-0.025332615,0.031702492,-0.0034136267,0.042091936,0.042011812,0.007251244,-0.0078655295,0.011918481,0.034613673,-0.03589566,-0.0037191003,-0.0027459245,0.008786959,0.044014916,-0.0073513994,-0.023783546,0.04011554,-0.017547209,-0.015263668,-7.569028e-05,0.016251868,-0.027642863,0.006570188,0.007658542,0.032663982,0.0004486123,0.03757827,-0.0043701096,-0.021860564,-0.014636029,-0.010669879,0.044468954,-0.06431306,-0.0055018645,0.03060746,-0.023289446,-0.023623297,0.039447837,0.0015524072,0.047807466,0.013474227,0.0012619569,0.0034186344,0.04089007,0.022181062,0.03423976,-0.007157766,-0.0054417714,0.018535407,-0.022568328,-0.018602178,0.0051479824,-0.0363497,-0.0060927807,-0.07520995,0.014876401,0.05758262,-0.0033351716,0.025506217,0.016599072,0.007585095,0.008853729,0.026935099,-0.044201873,0.003972827,-0.01279317,-0.0031331917,-0.008419722,-0.027482616,0.031836033,0.011310873,-0.058277033,-0.028096901,-0.02108603,0.014502488,0.0061161504,-0.0074715856,-0.0023753499,-0.015357147,-0.016612425,0.03116833,-0.012439289,-0.039020505,0.00831289,-0.014769569,0.023623297,-0.022942241,0.011090531,0.0021650237,0.022568328,-0.0021182846,-0.004824147,-0.009795189,0.0037024077,-0.024811808,0.0011759902,0.019683857,-0.024250938,0.010589754,0.02511895,0.010729971,0.019256527,-0.0043033394,-0.011771587,0.0077052815,-0.011184009,0.01064317,-0.017720811,-0.03381243,0.0389938,-0.030794417,0.009361182,0.01447578,-0.0026991854,-0.015183544,0.0066402964,-0.017306836,-0.039154045,-0.0031048143,0.039474543,-0.0013111999,0.006369877,-0.010723295,0.011431059,-0.017200004,-0.0016634127,0.005458464,-0.0048909173,-0.014101867,0.008092549,-0.025212428,0.029832926,-0.00082669855,-0.0053382777,-0.03367889,0.02326274,0.0052848617,-0.016572364,0.049036037,-0.0522143,0.00887376,-0.005498526,-0.0094479835,0.0048608705,0.027909944,0.0117048165,0.007605126,-0.039688207,-9.95815e-05,-0.034159634,0.015824538,-0.0024654898,-0.02052516,0.007658542,-0.02406398,-0.03517454,0.04179815,-0.033759013,-0.022875471,-0.030233547,-0.02406398,-0.019870812,-0.061001256,0.012733078,-0.0009356175,-0.014876401,0.023543173,0.0011893442,0.0122723635,-0.10309319,-0.026387583,-0.01593137,0.016826091,0.027028577,0.0035955755,-0.0032633936,0.052000634,0.0016008156,-0.016826091,0.011497829,0.008125934,-0.018976092,0.02413075,0.01698634,-0.03148883,0.03490746,-0.029886343,0.05039815,-0.008860406,-0.039234173,0...', '2025-03-25 05:14:25.504201+00'), ('28', 'https://ai.pydantic.dev/cli/', '2', 'Pydantic CLI Usage Guide', 'To use the Pydantic CLI, set the `OPENAI_API_KEY` environment variable for the OpenAI provider and run the command `pai` to start an interactive session with the AI model. You can use commands like `/exit`, `/markdown`, and `/multiline` in the session. Additionally, you can specify a model using the `--model` flag.', 'Usage You'll need to set an environment variable depending on the provider you intend to use. If using OpenAI, set the `OPENAI_API_KEY` environment variable:
                
                                export OPENAI_API_KEY='your-api-key-here'
                

Then simply run:
                
                                $ pai
                

This will start an interactive session where you can chat with the AI model. Special commands available in interactive mode:
          * `/exit`: Exit the session
          * `/markdown`: Show the last response in markdown format
          * `/multiline`: Toggle multiline input mode (use Ctrl+D to submit)
Choose a model You can specify which model to use with the `--model` flag:
                
                                $ pai --model=openai:gpt-4 "What's the capital of France?"
                

 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/cli/", "chunk_size": 906, "crawled_at": "2025-03-25T05:14:25.693402+00:00"}', '[-0.01703725,0.0024586394,0.05920532,-0.027483193,-0.0017846607,-0.0067834575,0.0010109681,0.051705666,0.011726938,0.0037847618,0.014277286,-0.036915984,0.01937798,-0.04096859,-0.042203005,-0.018504573,-0.007878127,0.022324272,-0.019075198,0.020822013,0.0025110438,0.023710076,-0.03386488,0.014708166,0.0010990365,-0.005057024,-0.036357004,0.03290996,0.00024000484,0.00816344,-0.02405944,-0.0123325,-0.058460012,-0.02322097,-0.01662966,-0.022953125,-0.037125602,0.0034528673,-0.005287021,0.017526358,-0.0156398,-0.021893391,0.006812571,0.0648417,-0.018947098,-0.000112542075,-0.0047018384,-0.03267705,0.015930936,0.0013064706,-0.012728444,0.04565005,-0.011284413,0.0017540915,-0.0069639613,-0.0067659896,0.03957114,-0.007930531,0.037335217,0.01579119,-0.00027694265,0.006271059,-0.009130009,0.036473457,0.0046698134,-0.0032927427,-0.04565005,0.03244414,-0.05012189,-0.0022897809,-0.02906697,0.0037731163,-0.037777744,0.009747217,0.002004468,-0.042459205,-0.03842989,0.063304506,-0.0008319197,-0.017107124,-0.0021019983,0.013136035,-0.011994783,-0.017899012,-0.004943481,-0.022592116,-0.056783073,0.039454684,-0.009933543,-0.031419344,-0.0037294459,0.035891186,-0.043530583,0.017899012,0.05394159,0.016874215,0.0070571247,-0.0526373,0.010125693,0.024874618,0.02741332,-0.024455383,-0.03158238,0.037009146,0.028205208,0.0470475,0.039198484,0.02659814,-0.0028007235,0.00663789,-0.08207692,0.023768304,0.0005502461,-0.016105616,-0.07616105,0.0053394255,0.01991367,-0.02311616,0.02718041,-0.08729407,-0.025293853,0.022929832,0.0704315,-0.007930531,0.00036137196,-0.039221775,-0.029765695,-0.040293157,-0.001991367,-0.029835567,-0.04788597,0.039664302,0.04616245,-0.025550053,-0.022464016,-0.047746226,-0.026248777,0.019517725,-0.04019999,0.012646927,0.006212832,-0.037638,-0.010894291,0.032770213,-0.051286433,-0.049236838,-0.05948481,-0.04236604,-0.026109032,0.02657485,0.009619118,0.011680357,0.0036770415,0.015406892,-0.0462789,0.025247272,-0.0074064876,0.010737077,0.0027337624,-0.038290143,-0.031186437,0.06451563,-0.04872444,-0.057202306,-0.014160831,0.050494544,-0.016105616,0.04821204,-0.03386488,-0.021695418,-0.039454684,0.007313324,-0.02412931,-0.00339464,0.026109032,-0.049516328,-0.004003113,0.011109731,-0.0055985358,-0.06507461,-0.06479512,0.044671834,-0.061580986,0.018073693,-0.017619522,0.02214959,0.0012693509,-0.017386613,-0.015010947,0.0034324878,0.014847911,-0.03155909,0.06884772,0.015849417,0.019878732,0.011138845,0.05203174,-0.044601962,0.00037174366,0.011109731,0.028973807,0.018457992,0.011179604,-0.03682282,0.0002130748,-0.020542521,0.009985948,-0.008448753,-0.018632673,-0.03486639,0.022906542,-0.017351676,0.009578358,-0.028228499,-0.035308916,-0.04401969,-0.021497447,-0.010364424,0.006911557,0.051100105,-0.022510597,0.0058256215,0.0016405486,-0.0011674534,0.026225487,0.027785974,0.023034642,-0.049143676,0.018935453,0.008844697,0.025643216,0.05235781,-0.022161236,0.03379501,0.04064252,-0.024758164,0.015581572,-0.0013101099,-0.023034642,-0.01383476,0.03822027,-0.0027162943,0.030930238,-0.006486499,0.056317255,0.018073693,-0.014987656,-0.046954338,0.041364536,-0.0012162186,0.03495955,-0.04127137,-0.011034036,-0.018853936,0.0105332825,-0.021846808,-0.0055781566,0.04658168,0.019622535,-0.06474854,0.012309209,0.063257925,0.0013574193,0.009473549,-0.0022490218,-0.0021049099,-0.035914477,-0.01205301,-0.06418956,-0.025969287,0.052683882,0.016082326,0.019366335,0.01699067,0.01059151,0.043600455,0.014556776,-0.02601587,-0.049609493,0.008716597,-0.038010653,-0.0051501873,0.04241262,0.008716597,-0.013718305,0.01785243,-0.0010582776,-0.030953528,-0.011121376,0.016268652,0.016874215,-0.01645498,0.012775026,-0.029998604,0.025456889,0.008757357,0.041900225,0.024036149,0.035029426,0.04742015,-0.0089436835,-0.03300312,-0.00519968,-0.04783939,0.035611697,0.03286338,-0.0034033742,0.018644318,0.061022002,-0.019983541,-0.006731053,0.0373818,0.0024804745,-0.007662687,-0.008623434,-0.029695822,-0.0056858766,0.0039245067,0.015337019,-0.0059973914,-0.049982145,0.041923515,-0.038639504,-0.020542521,-0.028973807,0.08934367,0.038849123,-0.023733366,-0.033305902,0.031652253,0.031349473,-0.017561294,-0.05482664,0.06912722,0.050308216,0.011657066,0.018912163,0.024012858,0.036752947,0.028787479,-0.054733478,0.019587597,-0.023360714,0.01660637,-0.057342052,-0.0035634986,0.0108884685,0.051146686,0.009729749,-0.0152089195,0.017677749,0.003508183,-0.012448954,0.00885052,0.044648543,0.025899416,-0.009421146,-0.03682282,-0.031396054,-8.0608144e-05,-0.067776345,0.009508486,0.0050977827,0.023919694,-0.008966974,0.00429716,-0.0060556186,-0.0315358,-0.016594725,-0.013764887,0.05431424,-0.013764887,-0.0345869,-0.018062048,-0.014451967,-0.025014363,-0.015872708,0.02051923,-0.0005819071,-0.007563701,0.022347562,0.0075054737,0.009636586,-0.013462106,-0.012809963,-0.000930178,0.0034703354,-0.03414437,-0.0022548446,0.0029230006,0.08147136,-0.036985856,-0.030860364,0.025689797,0.0023727545,0.021986553,0.04092201,0.014475258,0.031139854,-0.0043466534,-0.021415928,0.0009178047,-0.037544835,-0.009863671,0.0075345873,0.010207212,0.02741332,-0.010574042,-0.011971492,0.009019379,0.049236838,-0.043763492,0.017910657,0.020228095,-0.011540612,-0.0022359209,0.019494435,0.014568421,0.02008835,0.023407295,0.017899012,-0.06507461,-0.0070221885,-0.033049703,-0.07946835,0.06945329,0.0069639613,-0.013101098,0.0112436535,-0.023011351,0.022184527,0.014451967,0.011715293,-0.038243562,0.021346057,-0.048398368,0.008611789,-0.009886962,-0.008961151,-0.015278792,0.024571838,-0.0060381508,-0.042505786,-0.0014949809,-0.021648837,-0.025223982,-0.033072993,-0.010690496,-0.033934757,-0.013485397,-0.020717204,-0.041178208,0.036380295,0.03258389,0.027320156,-0.03842989,0.04821204,0.039384812,0.044741705,0.032257814,0.063816905,0.0049551264,-0.009531776,0.028927226,-0.00026093022,0.025200691,-0.017246868,0.0035664102,-0.026341941,0.01630359,-0.015197274,0.0055548656,-0.009415323,-0.014056022,-0.04148099,-0.058506593,-0.01370666,-0.02313945,-0.03598435,-0.058227103,-0.0056771426,0.03873267,-0.0009483739,0.063863486,0.0036188145,0.08440601,-0.0051123397,-0.0071328203,-0.012192755,0.017281804,0.0038080525,0.0010328032,0.03929165,-0.010411006,0.054453988,-0.00844293,-0.018562801,0.00283566,-0.024199184,0.00035591316,-0.02341894,-0.009694813,-0.017910657,0.046698138,-0.003819698,0.011208718,0.019843796,-0.009310514,-0.018341538,0.025480181,-0.007948,-0.03237427,-0.0059071397,-0.010049998,-0.015406892,0.021578964,0.005190946,0.011290235,0.02659814,0.015558282,0.012588699,0.019447852,0.021439219,-0.0023319954,-0.0030132525,-0.025619926,-0.033096284,-0.0625592,-0.028787479,-0.014556776,0.026714595,-0.0028298371,-0.018853936,-0.021427574,-0.045789793,0.026784467,-0.010894291,0.0023945896,-0.03386488,-0.0072492743,-0.018225083,0.0033043881,-0.011849215,-0.018516218,0.010300375,0.027250284,0.006754344,-0.0012919138,-0.005613093,0.022894897,0.022242753,-0.01357856,-0.02049594,0.009246464,0.036426876,0.01774762,-0.007948,-0.029183423,0.058320265,0.0005669864,0.011546435,0.018574446,0.024315638,-0.021602254,0.016513206,0.026062451,0.0053248685,-0.07951493,-0.05282363,-0.035378788,-0.028461408,0.01770104,-0.04073568,0.021148084,0.036776237,0.00084866,-0.012239337,0.037125602,-0.016373461,0.018225083,-0.007878127,-0.008751534,0.004698927,-0.0044223485,-0.0033655264,-0.023721721,-0.007656864,0.020787075,-0.025154108,0.0058663804,0.026178906,-0.036869403,-0.015057528,-0.0034295763,-0.015674736,-0.009584181,0.013438815,-0.0004450734,-0.03125631,0.0058139763,0.03130289,-0.007400665,-0.028810771,0.04709408,0.0013566915,-0.049702656,-0.0050366446,0.0044223485,0.0021340232,-0.032001615,0.009642408,-0.018982036,-0.0044456394,-0.014056022,-0.025969287,0.014917783,-0.012670218,-0.02159061,0.037242055,0.006410804,-0.0017657368,0.014417031,0.019063553,0.015069175,-0.015884353,-0.0008428373,-0.015616509,-0.009886962,-0.025643216,0.040898718,-0.023593621,0.016117262,0.04015341,8.379244e-05,-0.013042871,-0.0061546047,0.015139047,-0.06279211,-0.012483891,-0.0140210865,0.03959443,0.024501964,-0.018888872,-0.04206326,0.053336028,0.016315235,-0.0021631368,0.0015473852,0.0536621,-0.028414827,-0.035565116,-0.0124606,-0.01398615,-0.0054325885,0.025899416,0.0036217258,0.014941075,-0.030650748,0.010836064,0.025107527,-0.042785276,-0.0058489125,0.01660637,-0.031652253,0.014207413,0.016489916,-0.018842291,0.012658572,0.02008835,-0.013101098,-0.037288636,0.031326182,-0.0013253944,-0.021753646,0.009438613,-0.058506593,0.01976228,-0.01355527,0.009258109,0.009572536,-0.012437309,0.031628963,-0.050354797,0.03263047,0.04651181,-0.0067426986,0.015709672,0.028834062,0.024245765,-0.028158627,-0.0025605368,-0.027343448,0.007948,0.017817494,0.028834062,0.0044485508,0.01467323,0.056456998,0.021695418,-0.022347562,-0.02011164,-0.007831546,0.019156717,-0.006876621,0.0116745345,-0.01492943,-0.031908453,0.0037672936,0.01523221,-0.00057899574,-0.044275887,0.020228095,0.007400665,0.023325777,-0.027622938,0.018819,0.0068824436,0.010172275,0.0060963775,-0.015628155,-0.032234523,0.018108629,0.00339464,0.019156717,-0.001914216,-0.023104515,-0.004483487,-0.012635281,-0.0017832051,0.03547195,0.014626648,-0.038103815,0.014160831,-0.011296058,0.026644722,-0.023756659,-0.009712281,-0.01690915,-0.03265376,-0.01935469,0.018667608,0.008180908,-0.0060672644,0.009776331,-0.0023858557,-0.0017351677,0.012844899,0.04155086,-0.0014949809,-0.037288636,-0.011395044,0.0071211746,-0.00088141277,-0.0017904834,0.02464171,0.0074472465,-0.02268528,-0.010288729,-0.048538115,0.02601587,0.0019666203,0.005071581,-0.02004177,0.028834062,-0.007028011,-0.012495536,0.037824325,-0.012553764,0.009013556,-0.04241262,-0.025945997,0.009729749,0.0075695235,0.00900191,0.049749237,-0.036659785,-0.00016230805,0.01897039,0.007552055,-0.033352483,0.014253994,0.020565813,-0.0023465522,-0.014871202,0.021217957,-0.050354797,0.025689797,-0.02739003,-0.035774734,0.020985048,-0.047490027,0.0023319954,-0.004244756,-0.007831546,0.02032126,-0.02285996,0.010381892,-0.043763492,-0.012390727,-0.024967782,0.0007533131,0.025480181,-0.012611991,0.02412931,0.05291679,-0.0032927427,0.00835559,0.03258389,-0.010673028,-0.003994379,0.0102712605,-0.010341134,-0.0663789,0.015674736,-0.033911467,0.02629536,-0.010940873,-0.025992578,0.0016405486,0.01935469,0.06363058,-0....', '2025-03-25 05:14:25.652643+00'), ('29', 'https://ai.pydantic.dev/input/', '0', 'PydanticAI Documentation - Input Overview', 'This section introduces the PydanticAI platform, detailing the input methods for images, audio, and documents. It links to various documentation topics including installation, getting help, and troubleshooting. Users can explore features like agents, models, dependencies, and common tools.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Image, Audio & Document Input  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * Image, Audio & Document Input  [ Image, Audio & Document Input  ](./) Table of contents 
                  * Image Input 
                  * Audio Input 
                  * Document Input 
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Image Input 
              * Audio Input 
              * Document Input 
Image, Audio & Document Input Some LLMs are now capable of understanding both audio, image and document content. Image Input Info Some models do not support image input. Please check the model's documentation to confirm whether it supports image input.', '{"source": "pydantic_ai_docs", "url_path": "/input/", "chunk_size": 4907, "crawled_at": "2025-03-25T05:14:28.510304+00:00"}', '[-0.0021193628,0.021157524,0.01880348,-0.025620101,-0.00139275,0.0061414586,0.0018630174,0.04517456,-0.013503266,-0.0008768999,0.003155576,-0.07388525,-0.028494058,-0.020276561,-0.01345994,0.0028324365,-0.028999528,0.0067119175,0.007899771,0.06724193,0.053666458,0.01504856,0.004375925,0.010304364,0.04254612,-0.024276994,-0.012239591,0.041737366,0.018861247,-0.031079175,0.008809618,-0.026746577,-0.073654175,0.0083113685,-0.015207421,0.014918582,-0.01200852,0.022529513,-0.01396541,0.010665414,-0.01403762,-0.033592083,0.017402604,0.009112899,-0.07873776,0.009661695,0.016160592,0.018991224,-0.015972847,0.0038126868,-0.07400078,0.008477451,-0.025648985,0.019525578,0.00041295082,0.005274939,-0.041419644,-0.008470231,-0.014441996,-0.036451597,0.015265189,-0.009582264,0.015943963,0.055457264,-0.057421375,-0.037722494,-0.0541286,0.002816189,-0.06042531,-0.034256414,0.036653787,0.020059932,-0.031599086,-0.04581001,-0.023453802,-0.012124055,0.0072607133,0.060598616,-0.021894066,-0.042286165,-0.004404809,0.049333856,-0.018890131,-0.005368812,-0.017431488,0.008405241,-0.03671155,0.0061089643,-0.021099756,-0.047052022,-0.030530378,0.007964761,-0.022746144,0.009466728,0.06394916,0.00012625463,-0.0017429683,0.0048958366,-0.001385529,0.02063761,0.010947033,-0.025880056,-0.01569845,-0.0067696855,0.044625767,-0.044394694,0.025230166,-0.011842436,-0.019193413,-0.0007943098,-0.12189044,-0.029259482,-0.032523375,0.043037146,-0.04191067,-0.038040217,-0.0028938148,-0.007921435,-0.021894066,-0.045607824,-0.044163622,0.019554462,0.009047911,-0.009134563,0.04115969,-0.017792538,-0.009322308,-0.025807846,-0.043383755,-0.012499548,0.020608729,-0.014961908,0.051153548,-0.03763584,-0.015799543,-0.014218145,-0.012333464,0.0058634505,-0.048582874,0.025114631,0.04878506,-0.03177239,-0.006968263,0.034429718,-0.03604722,0.01020327,-0.060771916,-0.009834999,-0.037087046,-0.009228435,0.020464309,0.018687943,-0.07267212,-0.044452462,-0.05383976,0.027049858,0.037029278,0.043094914,0.016160592,-0.03671155,-0.014629741,0.055543914,-0.0052063395,-0.00081236224,-0.023901504,0.011170884,-0.02177853,0.0050763614,-0.04739863,-0.030876987,-0.044596884,-0.013156658,-0.042372815,-0.012723398,-0.0043181567,-0.05470628,-0.006881611,-0.044741303,-0.021662993,-0.05080694,-0.03928223,0.017965842,-0.03364985,0.0110409055,-0.00665776,-0.041073035,-0.035931684,0.02112864,-0.027670864,0.049940422,0.018225798,0.038415708,0.047340862,0.036798205,0.032119,-0.026963206,0.0640647,-0.022168463,0.01945337,-0.012420116,0.009603927,0.045318983,0.027959704,-0.004152074,-0.008203054,-0.022500629,0.015221863,0.017200416,-0.03269668,-0.02648662,0.045001257,-0.056554854,0.015294073,-0.022197347,-0.048322916,0.002706069,-0.06337148,0.0096978005,-0.017850306,0.022630608,-0.028479615,0.040841963,0.05404195,0.011712459,-0.030357076,-0.015438493,0.022327326,-0.07272989,0.028551826,-0.010123839,0.022269558,0.021576341,-0.0019424484,0.011134779,0.024999095,-0.050980244,-0.0057587456,-0.018081378,0.0042928834,-0.016261688,0.011986856,0.0007839296,0.0054987897,0.027006531,0.0016012563,-8.524162e-05,-0.012550094,-0.043672595,0.04774524,0.029981583,0.03850236,-0.0005573708,0.008080296,0.012643967,0.0014712783,0.0011707043,-0.032378953,0.0071090725,-0.040062096,0.0051557925,-0.0058165137,0.04211286,-0.028190775,-0.025663426,-0.0038848969,-0.03754919,-0.039253343,0.0454634,-0.037173696,-0.03988879,0.0033342957,0.03596057,0.049247205,-0.013012238,-0.05854785,0.01122143,-0.0022836407,0.016810482,0.01049211,0.04806296,-0.021114198,-0.007170451,0.049247205,0.04936274,-0.032812215,0.030212656,0.026833229,-0.04589666,-0.0032530595,-0.00063950964,0.03740477,-0.0008895367,0.04667653,-0.03604722,0.009076795,-0.013857095,0.036480483,-0.010838718,0.039426647,0.013033901,0.052482214,0.012254033,-0.0009631006,-0.013207205,-0.0066758124,0.052511096,-0.0030436506,-0.033043288,0.0467343,-0.04869841,-0.035122935,-0.012636746,0.004036538,-0.032234535,-0.029894931,-0.008881828,0.07382748,-0.00065485423,0.04087085,-0.023482686,-0.060252007,-0.040466473,0.05225114,-0.017604792,-0.056208245,0.0018503807,-0.008419683,0.0058453977,-0.02258728,-0.046069965,0.031859044,0.007553164,-0.011098674,0.013994294,-0.0073654177,-0.024276994,-0.04965158,0.029692743,-0.043730363,0.02206737,-0.05360869,-0.058027938,-0.03908004,0.018630175,-0.010391016,0.01005885,0.0010741234,0.046272155,0.010882044,-0.0020706211,-0.006325594,-0.003133913,0.021605225,0.030963639,-0.022385092,0.014109829,-0.0330144,-0.02677546,-0.023164961,0.025576774,-0.07648481,0.0011192546,-0.0061595114,0.025244609,-0.0049247206,-0.019626671,-0.028912876,-0.033274356,-0.008419683,-0.009055131,0.037838027,-0.009228435,-0.014080945,-0.010535436,-0.0313969,-0.032003462,-0.031021407,-0.011568039,-0.017431488,0.021301944,0.014377006,0.014918582,0.05066252,0.012362348,0.02257284,0.020233236,-0.00082725554,-0.0008114596,0.021662993,0.06539336,0.044163622,-0.017705888,-0.008080296,0.0045528393,0.012181823,0.023482686,-0.0055529475,0.023006098,0.05297324,0.0026230274,0.011994078,0.010549878,-0.032263417,0.018919013,-0.01504856,0.0009269956,0.06943712,0.022009602,0.0051630135,-0.019872187,0.046127733,-0.040639777,0.0055276738,-0.019987723,-0.008390799,-0.03705816,0.024652487,0.024089249,0.022284,0.04768747,-0.025648985,-0.06758854,-0.033216592,-0.02141748,-0.06019424,0.03437195,0.0660288,-0.04806296,0.037780263,-0.06412246,-0.012355127,0.025085747,0.04638769,-0.0060187015,4.7839112e-05,-0.03009712,-0.0054699057,0.024493625,0.010535436,0.022890564,0.051788997,-0.038589012,-0.022154022,0.02612557,-0.024002597,-0.009791673,-0.0103476895,-0.020276561,-0.009885546,-0.053464267,0.01598729,-0.0029263094,0.0031664076,0.020666495,-0.011878542,-0.05355092,0.07908437,-0.03668267,0.035556193,-0.0065747187,0.030154888,0.0020597896,-0.012282917,0.01598729,-0.02401704,-0.0026428853,0.008130844,0.0025092966,0.007495396,-0.0027855,0.04032205,-0.013373288,-0.0069285473,-0.023468243,-0.035556193,-0.054186366,0.037780263,0.006787738,-0.028999528,0.003177239,0.031570204,-0.016261688,-0.014369786,-0.0013160269,0.012658409,0.09710798,-0.01571289,-0.021677436,0.003559952,-0.011524713,-0.02040654,-0.0020940893,0.029837163,-0.017922517,0.02309275,-0.010297143,-0.023063866,-0.0055312845,-0.00745207,-0.030299308,-0.0022330936,-0.0096978005,-0.011120337,0.02148969,-0.0035437047,0.0016662453,0.0148752555,-0.021070872,0.009055131,0.03024154,-0.01649276,0.008939595,0.0009161641,0.05225114,0.015785102,0.04855399,-0.002482218,0.035585076,-0.0018314256,0.0064158565,0.032465607,-0.017850306,-0.011510271,0.0022872512,0.019554462,-0.02148969,-0.03494963,-0.016969346,-0.021330828,-0.030183772,0.018009169,-0.011192546,0.010723182,-0.010817055,-0.06371809,0.0069429893,0.009892767,-0.018110262,-0.049189437,-0.018110262,0.010196049,-0.00096851634,-0.02749756,0.007560385,-0.0023269665,0.011770226,0.013524929,-0.01910676,-0.0060548065,0.041766252,0.07174783,-0.01968444,0.027049858,-0.025316818,0.010723182,0.042459466,0.0031934862,-0.014694731,0.02076759,-0.0017249158,0.0027512002,-0.028696245,0.018890131,0.0089757005,-0.012535652,0.047225326,0.030530378,-0.037231464,-0.03639383,-0.01780698,-0.0071596196,-0.01360436,0.0046647647,-0.0050113727,-0.012319023,-0.00032945804,-0.007553164,-0.005971765,-0.022789469,-0.011235872,-0.035151817,-0.0431238,0.0045095133,0.009575043,-0.04488572,0.011243094,-0.011546375,-0.013922084,0.009452286,0.016434992,0.01715709,-0.014499764,-0.0045853336,-0.027223162,-0.007885329,-0.0022583671,0.039917678,-0.0004237823,-0.05080694,0.025865614,0.0060548065,-0.017258184,-0.015958406,0.028017472,0.015236305,0.0071235145,-0.0065169507,0.009242877,-0.018225798,-0.01266563,-0.01686825,-0.002177131,-0.012080729,-0.039686605,-0.028277427,0.030270424,-0.039773256,0.038386825,0.052857704,-0.032465607,-0.030992523,0.0032891645,0.014514206,0.0027313423,0.004419251,0.007993645,-0.0054085273,-0.052915473,-0.039715488,0.011856878,-0.041044153,0.04211286,0.060367543,0.024955768,-0.019568903,-0.0014604469,0.007856445,-0.04029317,-0.008513557,-0.028277427,0.016160592,0.045550056,-0.006686644,-0.041737366,0.036855973,-0.02193739,-0.011965194,-0.007834783,0.025013536,-0.021691877,0.0011282809,-0.0155829135,0.019236738,0.014535869,0.018052494,-0.009416182,-0.010947033,-0.01649276,-0.030934755,0.02663104,-0.044279158,0.02127306,0.024869116,-0.026876554,-0.013517708,0.03532512,0.021143083,0.037953563,0.0018214968,0.010882044,-0.024305878,-0.0017628261,0.031945694,0.0155540295,0.0017276237,-0.024305878,0.02684767,-0.038329057,-0.006888832,0.015857311,-0.020464309,-0.007217387,-0.08439902,0.0051630135,0.03471856,-0.029476114,0.027974145,0.0061378484,0.0107015185,0.039542183,0.022182906,-0.034054227,0.013431056,-0.027512003,-0.0074231857,0.0124273375,-0.012723398,0.023988156,0.006809401,-0.10120951,-0.013452719,-0.011077011,-0.018890131,0.00062235974,-0.020305445,-0.007842003,-0.003364985,0.012138497,0.048958365,-0.017821422,-0.020493193,0.0082680425,0.0027512002,0.020666495,0.004314546,-0.013987073,0.004805574,0.022457303,-0.01780698,-0.015091886,-0.027107626,0.015915079,-0.0066685914,0.0013169295,0.007495396,-0.024796907,0.0031790442,0.014117051,-0.016290572,0.015828427,-0.01064375,-0.0186735,-0.009380076,-0.016824925,-0.005895945,-0.0060439752,-0.04488572,0.044192508,-0.033852037,-0.010629308,-0.012889481,-0.018904572,-0.0005289381,-0.0070621357,-0.015669566,-0.032378953,0.0063147624,0.051557925,-0.036480483,-0.00032020613,-0.012124055,0.01432646,-0.020161025,-0.023136077,0.017893633,-0.0037801925,0.0047875214,0.00405098,-0.004061811,-0.014059283,0.011336966,0.033909805,-0.027252046,0.019410042,-0.011611365,-0.017330395,0.011192546,-0.011019243,-0.004350651,-0.0041990103,-0.012571758,-0.014340902,0.027165394,0.03671155,0.035845034,-0.02946167,0.021085314,-0.040466473,0.010542657,-0.008773512,-0.015481819,-0.0050041517,-0.0049752677,-0.027410908,0.015655123,-0.0058562295,-0.025750078,-0.029476114,-0.030848103,-0.020738706,-0.05109578,0.014340902,0.0034498316,-0.029418346,0.009112899,-0.0046142177,-0.004675596,-0.10427121,-0.014319239,0.0076831416,-0.012095171,0.033563197,-0.031368013,0.021316385,0.047918543,-0.0018756542,-0.040033214,-0.008867386,0.0058815028,-0.017850306,-0.011784668,0.03364985,-0.024854675,0.02403148,0.014947466,0.025287934,0.0067588...', '2025-03-25 05:14:28.405165+00'), ('30', 'https://ai.pydantic.dev/input/', '1', 'Using Image Input with Pydantic AI', 'This section explains how to utilize the `ImageUrl` class from Pydantic AI to process images by URL and extract information, illustrated with an example that identifies a company logo. Additionally, it mentions the use of `BinaryContent` for local image files.', 'If you have a direct URL for the image, you can use [`ImageUrl`](../api/messages/#pydantic_ai.messages.ImageUrl): main.py
                        
                                                from pydantic_ai import Agent, ImageUrl
                        
                        agent = Agent(model='openai:gpt-4o')
                        result = agent.run_sync(
                            [
                                'What company is this logo from?',
                                ImageUrl(url='https://iili.io/3Hs4FMg.png'),
                            ]
                        )
                        print(result.data)
                        #> This is the logo for Pydantic, a data validation and settings management library in Python.
                        

If you have the image locally, you can also use [`BinaryContent`](../api/messages/#pydantic_ai.messages.BinaryContent): main.py
                        
                                                import httpx
                        
                        from pydantic_ai import Agent, BinaryContent
                        
                        image_response = httpx.get('https://iili.io/3Hs4FMg.png')  # Pydantic logo
                        
                        agent = Agent(model='openai:gpt-4o')
                        result = agent.run_sync(
                            [
                                'What company is this logo from?',
                                BinaryContent(data=image_response.content, media_type='image/png'),  # (1)!
                            ]
                        )
                        print(result.data)
                        #> This is the logo for Pydantic, a data validation and settings management library in Python.
                        

              1. To ensure the example is runnable we download this image from the web, but you can also use `Path().read_bytes()` to read a local file's contents.
Audio Input Info Some models do not support audio input. Please check the model's documentation to confirm whether it supports audio input. You can provide audio input using either [`AudioUrl`](../api/messages/#pydantic_ai.messages.AudioUrl) or [`BinaryContent`](../api/messages/#pydantic_ai.messages.BinaryContent). The process is analogous to the examples above. Document Input Info Some models do not support document input. Please check the model's documentation to confirm whether it supports document input. Warning When using Gemini models, the document content will always be sent as binary data, regardless of whether you use `DocumentUrl` or `BinaryContent`. This is due to differences in how Vertex AI and Google AI handle document inputs. For more details, see [this discussion](https://discuss.ai.google.dev/t/i-am-using-google-generative-ai-model-gemini-1-5-pro-for-image-analysis-but-getting-error/34866/4). If you are unsatisfied with this behavior, please let us know by opening an issue on [GitHub](https://github.com/pydantic/pydantic-ai/issues). You can provide document input using either [`DocumentUrl`](../api/messages/#pydantic_ai.messages.DocumentUrl) or [`BinaryContent`](../api/messages/#pydantic_ai.messages.BinaryContent). The process is similar to the examples above. If you have a direct URL for the document, you can use [`DocumentUrl`](../api/messages/#pydantic_ai.messages.DocumentUrl): main.py
                        
                                                from pydantic_ai import Agent, DocumentUrl
                        
                        agent = Agent(model='anthropic:claude-3-sonnet')
                        result = agent.run_sync(
                            [
                                'What is the main content of this document?',
                                DocumentUrl(url='https://storage.googleapis.com/cloud-samples-data/generative-ai/pdf/2403.05530.pdf'),
                            ]
                        )
                        print(result.data)
                        #> This document is the technical report introducing Gemini 1.5, Google's latest large language model...', '{"source": "pydantic_ai_docs", "url_path": "/input/", "chunk_size": 4130, "crawled_at": "2025-03-25T05:14:25.067398+00:00"}', '[-0.007378347,0.052186765,-0.0025428382,-0.002189754,0.027942719,0.0054530106,0.022192042,-0.00097137684,-0.0027803385,0.00700468,-0.011545689,-0.014642694,-0.013984026,-0.066272125,-0.056138773,-0.00346434,-0.012578024,0.0009207101,0.0005137926,0.014566694,0.05603744,0.0077583482,-0.02430738,0.04729742,0.042813413,-0.017176032,-0.017112698,0.01236269,0.038025405,-0.009101017,-0.029133389,-0.0168847,-0.071034804,-0.052186765,-0.06404279,0.023813378,-0.014516028,0.0069793467,-0.0121980235,-0.0025745048,-0.0012920025,-0.008277683,0.02201471,0.013908027,-0.070325464,0.021672707,-0.011545689,-0.0026489217,0.008759016,0.0009120017,-0.018392036,0.028120054,0.0029766723,-0.013274692,-0.0143513605,-0.0020630872,-0.02074804,0.033313397,-0.051882766,-0.04532142,0.018670702,-0.0017575034,0.008018015,0.028145386,-0.010874354,-0.02682805,-0.044004083,0.0073593473,-0.05573344,-0.02147004,0.04164808,0.01940537,-0.011970023,-0.017214032,-0.010171353,-0.02801872,-0.028956056,0.057405442,-0.009113684,-0.06333345,0.0021675874,0.039317407,-0.007961015,-0.018430036,-0.044181418,0.051502764,-0.060394783,-5.1211035e-05,-0.0135660255,-0.048589427,-0.023357378,0.030172057,0.02334471,0.009696351,0.020722706,0.04795609,-0.034225397,0.009557018,0.029716056,0.034782734,0.012869358,0.005776011,-0.031185392,0.025827382,0.039950743,-0.03896274,0.051401433,0.0176827,-0.028905388,0.0094746845,-0.0873495,0.00017871908,0.027689386,0.044105418,-0.01955737,-0.024320045,0.0008360016,0.0034801732,-0.0033915064,-0.017176032,-0.078482814,-0.005250343,-0.01393336,-0.017442033,0.0518321,-0.013211358,-0.0177967,-0.04152141,-0.059381448,-0.016175363,0.036834735,0.019266037,0.0066880127,-0.02905739,-0.0070173466,-0.027385386,0.01404736,0.012641357,-0.060141448,0.037138738,0.0516801,-0.04795609,-0.030704059,0.013464692,-0.03242673,0.031489395,-0.06480279,0.013806693,-0.029386722,-0.0038348406,0.0135660255,0.019329369,-0.026980052,-0.038076073,-0.068298794,0.030957391,0.030628057,0.05370677,-0.0059660114,-0.027942719,-0.014845362,0.0536561,-0.0014709195,-0.00706168,-0.04240808,0.027436052,0.009069351,-0.015630696,-0.025713382,-0.027917387,-0.046284087,0.008911017,-0.014300694,-0.029614722,0.006510679,-0.04210408,-0.012635024,-0.03333873,-0.0046360088,-0.019810705,-0.013186025,0.011374688,-0.014541361,0.018759368,-0.007739348,-0.023952711,-0.008486683,0.021786708,-0.051553432,0.039849408,0.004873509,0.021723375,0.04045741,0.0015754197,0.0016751698,-0.011906689,0.060546782,-0.035466734,0.031084059,0.020114705,0.04157208,0.071034804,-0.008081349,0.000701418,-0.02936139,-0.07706415,0.0025634216,-5.690115e-05,-0.042357415,0.022242708,0.017125366,-0.048361424,-0.0040406743,-0.048006758,-0.050286762,-0.0055480106,-0.036024068,0.039418742,0.024016045,0.0124006905,0.014490694,0.04301608,0.01944337,-0.004170508,-0.036201403,0.019468704,-0.0068653463,-0.042154748,-0.00038059446,0.012698357,0.034250733,0.012755358,0.018746702,-0.02304071,0.049957428,-0.045017418,0.05059076,-0.01573203,-0.0037841739,-0.037062738,0.0049970094,-0.014680695,0.016150031,0.013464692,-0.016023364,-0.009329017,-0.015174695,-0.06404279,0.030324057,0.057962775,-0.016112031,0.008873017,-0.023598045,0.008081349,-0.003087506,-0.016390698,-0.059229445,0.021926042,-0.04772809,-0.009842019,0.043218747,0.030754725,-0.012540024,-0.02112804,0.004287675,-0.012217023,-0.009905352,0.02235671,-0.037924074,-0.053504102,-0.00012003668,0.010310686,0.032376062,-0.0057823444,-0.0698188,0.02637205,-0.029868057,0.022116043,0.014503361,0.04233208,-0.0068336795,0.031261392,-0.02660005,0.074074805,-0.03873474,0.017720701,-0.0050825095,-0.023661379,-0.004024841,-0.01215369,0.03625207,-0.014300694,0.01423736,-0.02905739,-0.023914712,0.0100573525,0.041800078,0.019038036,0.023851378,0.007739348,0.0030795892,-0.009816686,0.0137686925,-0.0029212555,-0.012654024,0.04157208,-0.0038538408,0.014630028,0.04195208,-0.032984063,0.0074733477,0.008144682,-0.0049653426,-0.009911685,-0.024332713,-0.0031223393,0.046461422,-0.013274692,0.016568031,-0.0127933575,-0.026422717,0.013604025,0.033364065,-0.011020021,-0.057658777,0.009702685,0.0008985434,-0.0054213437,-0.026017383,-0.03402273,0.0020250871,0.019088702,-0.0016973366,0.00097137684,0.013249358,-0.003413673,-0.025966715,-0.015086029,-0.02974139,0.0026916717,-0.07199747,-0.011640688,0.018037368,0.053909436,-0.02652405,-0.031742726,-0.013680026,0.073770806,0.028702721,-0.03146406,-0.018708702,0.0065993457,0.0112290215,0.07098413,-0.0178347,-0.007815348,-0.0532001,-0.010424687,-0.02690405,-0.020988706,-0.0897815,-0.02307871,0.009424018,0.020228704,-0.0051901764,0.010817354,-0.006026178,-0.03698674,0.032553393,0.0015975863,-0.010184019,0.01879737,-0.04922276,0.011976356,-0.031438727,0.0023512545,-0.042610746,0.023104044,-0.021216707,0.025700716,0.03034939,0.034757398,-0.004693009,-0.030628057,0.028145386,0.0037208404,0.016834032,0.0009032934,-0.0004449175,0.04727209,0.050894763,-0.018075367,-0.062877454,0.026954718,-0.018746702,0.028272053,-0.018949369,0.049096093,0.023775378,0.006859013,0.02288871,-0.014630028,-0.003974174,0.005630344,-0.006308012,0.010874354,0.051376097,0.007796348,-0.021634707,0.005820344,0.04481475,-0.009715352,0.0060008448,-0.050109427,-0.009956019,-0.012527357,0.03364273,0.033516064,0.010741354,0.067133464,-0.013464692,-0.08132015,-0.01546603,-0.008404349,-0.049324095,0.03275606,0.051198762,-0.01910137,0.066778794,-0.06688013,-0.011748356,0.022724044,0.014693361,0.0017717533,-0.014098027,-0.020545373,0.013819359,0.004845009,-0.019126702,0.012540024,0.018708702,-0.02285071,-0.0037081738,0.0060103447,-0.015352029,0.0125906905,-0.005563844,0.0118116895,0.01925337,-0.057000108,0.03154006,-0.021216707,-0.017315365,0.0104436865,0.017024033,-0.029918723,0.05998945,-0.035568066,0.023167377,-0.051274765,0.023978045,0.0033978398,0.0025539214,0.006346012,-0.052085433,0.0027138386,-0.023243377,-0.00056248024,0.018126035,-0.03207206,0.008271349,-0.021444708,0.010576687,-0.02258471,-0.007891349,-0.053149436,0.022090709,-0.007752015,-0.027385386,0.022458043,0.017391367,0.006368179,-0.03265473,-0.019456036,-0.00524401,0.10569087,0.008081349,-0.0177967,0.056442775,-0.012888358,-0.028930722,-0.01637803,0.023408044,-0.014630028,0.0131733585,0.0049115093,-0.031742726,-0.037518736,0.005950178,-0.041977413,-0.0045505087,0.0051300097,-0.00046035505,0.016276697,-0.007334014,-0.010994688,-0.013363359,0.002471588,0.0024462547,0.050388094,0.0076380144,0.015567363,0.040406745,0.04712009,0.017632034,0.021862708,0.0065423455,0.05998945,-0.009766019,0.0070933467,0.002052004,-0.01251469,0.017366033,-0.034757398,-0.00055575103,0.011558355,-0.024624046,-0.013844693,-0.0048386757,-0.02614405,0.016656699,-0.029310722,0.013920693,-0.02016537,-0.04367475,0.019316703,-0.008562683,-0.03100806,-0.038050737,-0.011868689,0.001245294,-0.0042591747,-0.066272125,0.016935365,0.009620352,0.018189367,-0.0032711728,-0.022483377,0.012103023,0.017733367,0.06505612,-0.024548046,0.024028713,-0.014984695,0.010310686,0.012432357,0.0072136805,-0.007859682,-0.012217023,0.018607369,-0.011552022,-0.031134726,0.010532353,0.04068541,-0.0028120053,0.051122762,0.025168715,-0.027182719,-0.008341016,-0.011900356,0.0003390319,-0.008828684,0.019532038,0.0075620143,0.016403364,0.024041379,-0.030602725,0.007612681,-0.045954753,0.034048066,-0.026194716,-0.03176806,-0.002862672,0.0172647,-0.014224693,0.030450724,0.021748709,-0.008987017,0.014072693,0.023142044,0.030248057,0.0027470884,0.012464023,-0.022863377,-0.0001841618,0.010317019,0.017290033,0.028880054,-0.044384085,0.037214737,0.029918723,-0.00884135,-0.03184406,0.026017383,0.022977376,-0.0009634602,-0.014338694,0.01580803,-0.03004539,-0.015339362,-0.0075620143,-0.0149340285,-0.0070173466,-0.03708807,-0.0053643435,0.010013019,-0.041546747,0.0350614,0.05948278,-0.03004539,-0.0027629219,0.0006353137,0.023534711,-0.012508357,0.00024422962,0.026093382,-0.014364027,-0.03949474,-0.04861476,0.0365054,-0.030856058,0.033541396,0.06399212,0.00021830249,0.0075873476,-0.005931178,-0.0182527,-0.047069423,-0.018784702,-0.041090745,-0.0069983467,0.02629605,0.013224025,-0.019190036,0.015858697,0.0059343446,-0.0139586935,-0.020988706,0.008258683,-0.035162732,-0.011640688,-0.0074670142,0.008771683,0.02101404,-0.00029192763,-0.0037271737,-0.03189473,0.003581507,-0.035010733,0.016770698,-0.032173395,0.039317407,0.006656346,-0.019848704,-0.0072136805,0.014262694,0.033212062,0.007517681,-0.009443018,-0.011830689,-0.03371873,0.005240843,0.0338454,-0.010811021,0.00694768,-0.0359734,0.022534043,-0.04661342,-0.02396538,0.00878435,-0.007720348,-0.0067196796,-0.044764087,0.006840013,0.0355934,-0.035922736,0.014655361,0.010114352,-0.0017147532,0.036201403,0.008904683,-0.0018287535,-0.010215686,-0.021761375,-0.0086766835,0.047525425,-0.018303368,0.006422012,-0.0029529224,-0.06693079,-0.03214806,-0.020596039,-0.027436052,-0.00031924018,-0.00067291793,-0.03949474,-0.013832026,0.004123008,0.039089408,-0.023484044,-0.02330671,0.022230042,0.015833363,0.004746842,-0.0100636855,-0.029842723,-0.0025016714,0.0018794202,-0.025700716,0.003907674,-0.025143381,-0.0174547,-0.0358214,0.00033626106,0.019671371,-0.03903874,-0.0056620105,0.013135359,-0.02936139,0.0064283456,-0.013110025,-0.043649416,-0.013274692,-0.0147313615,-0.0015081279,-0.0060515115,-0.040508077,0.04015341,-0.0051521766,0.0009325851,0.0011605856,-0.0024589214,0.0012096689,0.011520355,-0.02591605,-0.0065550124,0.010621021,0.008360016,-0.050666764,-0.009550685,-0.016593365,0.009113684,0.007239014,-0.026549384,0.02258471,0.0030795892,0.0179487,0.0062130117,-0.010811021,-0.004458675,0.015124029,0.01404736,-0.00035704236,0.017277366,-0.003888674,-0.0076380144,0.0351374,0.019506704,0.00882235,-0.011697689,-0.010196686,-0.010196686,0.004924176,0.02457338,0.061002783,-0.030780058,0.017898034,-0.012761691,0.03888674,-0.012685691,-0.014503361,0.0038285071,-0.0050001764,0.0073720138,0.05745611,-0.01929137,-0.051882766,-0.023775378,-0.020000705,-0.026245384,-0.038658738,0.005497344,0.008904683,-0.014452694,0.01226769,0.026929384,0.0057601775,-0.074936144,-0.019380037,0.04382675,-0.02690405,0.032224063,-0.021419374,0.021520708,0.028626721,0.013984026,-0.029184055,0.0017226699,-0.021571374,-0.0050065094,-0.018670702,0.042458747,-0.005582844,0.033693396,-0.023230711,0.017024033,-0.018721368,-0.044156082,...', '2025-03-25 05:14:28.512594+00'), ('31', 'https://ai.pydantic.dev/input/', '2', 'Using BinaryContent for Document Analysis', 'This section explains how to utilize the `BinaryContent` class in Pydantic to input document data into an agent. It provides an example of reading a PDF file and querying its main content using the `Agent` class.', 'The supported document formats vary by model. You can also use [`BinaryContent`](../api/messages/#pydantic_ai.messages.BinaryContent) to pass document data directly: main.py
                        
                                                from pathlib import Path
                        from pydantic_ai import Agent, BinaryContent
                        
                        pdf_path = Path('document.pdf')
                        agent = Agent(model='anthropic:claude-3-sonnet')
                        result = agent.run_sync(
                            [
                                'What is the main content of this document?',
                                BinaryContent(data=pdf_path.read_bytes(), media_type='application/pdf'),
                            ]
                        )
                        print(result.data)
                        #> The document discusses...
                        

 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/input/", "chunk_size": 976, "crawled_at": "2025-03-25T05:14:28.755386+00:00"}', '[0.010772903,0.036520522,0.039534986,-0.011504833,0.014963873,0.0147903785,0.04797114,0.022792798,-0.005687356,0.005126211,-0.031489193,-0.0112771215,-0.017913273,-0.027368706,-0.038385585,0.019821709,0.04003378,0.04003378,0.025742197,0.010333747,0.051094033,0.020775927,0.0071457913,0.023400027,-6.823709e-05,-0.0158205,-0.044154268,-0.006923502,0.037539802,-0.012686761,-0.03567474,-0.018477129,-0.0131964,-0.034547027,-0.07564346,0.03849402,-0.008192178,0.010387964,-0.028778346,-0.0029927746,-0.008338564,-0.0051695844,0.022619303,0.02767232,-0.040944625,0.03244341,0.022662677,0.017251827,-0.0068909717,0.03897113,-0.014649414,0.031532567,0.032747027,0.0045759086,0.034091607,0.007861455,0.015961464,-0.010881337,-0.034828957,-0.02190364,0.015798813,-0.02552533,-0.012621701,0.023400027,-0.015560259,-0.008089166,-0.060506094,0.009292781,-0.056819342,0.012112062,0.028843407,0.04454463,-0.016514476,0.0006794059,-0.010957241,-0.0498362,-0.0014259053,0.04810126,-0.014280739,-0.0290169,-0.003496992,0.028930154,-0.018281948,-0.008783142,-0.034156665,0.027303645,-0.019691588,0.025221715,-0.065797664,-0.06215429,0.0019816288,0.05872778,0.0025997018,0.02572051,0.034308475,0.04441451,-0.04810126,-0.048231382,0.013185557,0.026154246,0.023616895,0.009238564,-0.060028985,0.026045812,0.030881964,-0.034698837,0.026631355,-0.029125335,-0.023768703,0.04428439,-0.06536393,-0.005085548,0.029103648,0.03010124,-0.030144613,-0.015278331,-0.003762655,-0.007026514,0.04051089,0.0034400641,-0.0647567,0.002859943,-0.026956657,0.008121696,0.026457861,0.022185568,-0.0068963934,-0.05413018,-0.057860307,0.025438583,0.0023530147,-0.0019409661,0.073648274,-0.0023869004,0.003917173,-0.028453045,0.025069907,-0.008175913,-0.028930154,0.025265088,0.065754294,-0.027303645,-0.011147001,0.028496418,-0.036433775,0.047407284,-0.040554263,0.0050963913,-0.024636172,0.02385545,0.0059313322,0.0046382584,0.0023909665,0.0087939855,-0.0290169,0.02895184,0.026175933,0.008728925,0.04391571,-0.025872318,-0.0076012136,0.020884361,-0.03760486,-0.030556662,-0.005069283,0.0010145343,0.027997622,-0.028366297,-0.022792798,-0.012589171,-0.04304824,-0.027867502,0.009590975,-0.03788679,0.011602423,-0.047537405,-0.031120518,-0.048144635,-0.016612068,0.013879534,-0.011396399,0.019648215,-0.028561478,-0.022879545,0.025894005,-0.006831333,-0.011222905,0.020743398,-0.029298829,0.06978803,0.022836171,0.04636632,0.035718113,-0.037930164,-0.029298829,0.00326657,0.04489162,-0.060375974,-0.019138576,-0.010848807,-0.007254225,0.014757848,-0.033419315,0.034763895,-0.03170606,-0.06354224,-0.012242182,-0.013467485,-0.075383216,-0.0056114523,-0.009872903,-0.039383177,-0.0043590413,-0.015321705,-0.02068918,-0.025134968,-0.02949401,0.042289205,0.007828925,0.0035051245,0.0061048265,-0.015224114,0.009856638,-0.0021903638,-0.04601933,0.0058012116,-0.055648256,-0.056255486,-5.691719e-06,-0.0075849486,0.032204855,0.035219315,0.013977124,0.030057866,0.03955667,-0.04092294,0.007324707,-0.0067012124,-0.0040310286,-0.006972297,-4.73551e-05,0.0020954844,0.023421714,0.019257853,-0.020494,0.006722899,-0.016644597,-0.041356675,0.021947013,0.05482416,0.022727737,0.0037328356,-0.000698043,-0.031272326,-0.007698804,-0.02962413,-0.049879573,0.008728925,-0.014757848,0.014812065,0.0065710917,0.06688201,0.025850631,-0.024267498,-0.007151213,-0.011949412,-0.0071078395,0.0020737976,-0.019192792,-0.032118108,0.045802463,0.024592798,0.027694007,-0.015137367,-0.08986998,0.0383639,-0.009384951,-0.015928933,0.018075924,0.027802441,-0.020602433,0.024094004,-0.032204855,0.00992712,-0.009900011,0.026002439,0.010550614,-0.004781933,-0.0051451866,0.01245905,0.020320505,0.010995193,-0.010745795,-0.07017839,-0.027216898,-0.018910864,-0.0020941289,0.019366287,0.040879566,-0.007324707,-0.034091607,-0.0013554232,0.0029222926,0.0014990981,0.0181952,0.010350012,-0.044978365,0.0073518157,0.053219337,-0.054867532,0.01713255,0.0089349495,-0.026479548,-0.03760486,-0.03205305,-0.002110394,0.06714225,-0.014063871,0.034091607,0.0040933783,-0.040857878,0.020298818,0.04554222,-0.0796772,-0.04126993,0.012361459,-0.006316272,0.015766283,-0.033939797,-0.02270605,-0.003743679,0.008598805,-0.0033966906,0.0039063296,0.014107245,-0.015484355,0.013293991,0.039513297,-0.023898823,0.019734962,-0.04140005,0.0014489475,-0.018357852,0.0013472907,-0.04166029,-0.03064341,-0.012925316,0.08908926,0.0123072425,-0.018997611,-0.012415676,-0.009417481,0.008484949,0.065407306,0.017089177,0.0286916,-0.0059584407,-0.041421734,-0.03203136,-0.0071566347,-0.06627478,-0.017240984,0.026045812,0.007080731,-0.018336166,-0.0023679244,-0.032747027,-0.04749403,0.01239399,0.023204846,0.002859943,-0.047667526,-0.04378559,0.01716508,0.009048806,-0.020374723,-0.041747037,0.020255445,-0.020862674,-0.032812085,0.033180762,0.041139808,-0.0009155884,0.02619762,0.023356654,0.03552293,-0.025091594,0.044457883,0.038125344,0.04441451,0.040250648,0.013391581,-0.05252536,0.021773519,-0.04528198,0.035175942,-0.031641,0.009140974,0.018531347,-0.023053039,-0.010745795,0.006023501,0.0477109,0.013727726,0.020895205,0.014074715,0.030513288,-0.0131964,-0.004871391,-0.0092982035,0.060896456,-0.020353036,0.015581946,-0.033549435,-0.021719301,-0.021285566,-0.019615686,0.052612107,0.040857878,0.027867502,-0.016948212,-0.05911814,-0.005866272,-0.012600014,-0.02203376,0.03263859,0.0536097,-0.036628958,0.02219641,-0.034373533,-0.000625189,0.03298558,-0.0040310286,-0.042809688,0.017251827,0.010848807,-0.016243393,0.021448217,0.0094933845,0.00060519646,0.016091585,0.0031689794,-0.0017091887,0.010350012,-0.032963894,-0.028973527,0.013315678,0.0477109,0.036975946,-0.05543139,0.01249158,0.006581935,-0.058771152,-0.010263265,-0.005313259,-0.019268697,0.034048233,-0.0008823805,0.06414947,0.0053051263,0.060289226,0.02257593,-0.02203376,0.007243382,-0.088091664,-0.0045515113,0.0076879608,-0.0048171743,-0.034568716,-0.009553023,-0.021643398,-0.014953029,-0.024245812,-0.008728925,-0.01837954,-0.0363904,0.04031571,0.0029358468,-0.029602444,-0.012947002,0.021003637,-0.0053566326,0.004415969,0.014096402,0.00486868,0.08509889,0.035110883,-0.025763884,0.03788679,0.010073505,-0.008251817,-0.015538572,0.024202438,-0.008891576,0.009921698,-0.025026534,-0.0120578455,-0.043286797,-0.019583154,-0.01927954,0.0023543702,0.040684383,0.037583176,-0.0060343444,0.015842186,-0.0059475973,-0.034026545,0.030600036,-0.003212353,0.065450676,0.012936159,-0.017826525,0.03493739,0.018585563,-0.00042899145,0.0070373574,0.027824128,0.044501256,-0.014822909,0.010160252,0.00047507585,-0.043221734,0.01777231,0.0016346404,-0.012383146,-0.0070156706,0.00243434,0.012361459,0.0071457913,-0.028171116,0.03231329,-0.0032394615,0.008029527,-0.013510859,-0.012740978,0.008381938,-0.0013005286,0.005687356,-0.022727737,-0.011309652,-0.048014514,-0.024462678,-0.028908467,0.028236177,0.029407263,0.005437958,0.02942895,-0.0010667181,-0.013207244,0.013250617,0.0383639,0.008880733,0.037301246,-0.009498806,0.021979542,0.020537373,-0.0024750028,0.00041882577,0.0038439804,0.04391571,-0.025677137,-0.028800033,-0.0047873547,0.0010463868,0.018824117,0.04333017,0.018086767,-0.06761935,-0.029212082,0.004407836,-0.018216887,0.021003637,0.0068747066,0.031185579,0.035956666,0.00129714,-0.0094933845,0.014573511,-0.042354263,0.010734952,-0.0009914921,-0.031272326,0.0004432234,0.003388558,-0.00044423997,0.030751843,0.04614945,-0.007595792,-0.008653022,0.013445798,0.0042831376,-0.019366287,-0.015863873,-0.029147021,-0.023400027,0.0012991732,0.031554252,0.024484364,-0.04684343,0.01870484,0.03513257,-0.026826536,-0.030534975,0.035761487,0.025069907,0.0030795215,0.0054650665,-0.0032692808,-0.024094004,-0.008902419,0.019257853,-0.0035376546,-0.024614485,-0.042831372,-0.017186766,-0.022489183,-0.073041044,0.006690369,0.060115732,-0.045932584,0.0060289227,0.035306063,0.014139775,0.018086767,-0.008024106,0.021686772,-0.008593383,-0.0033234977,-0.05616874,0.022792798,-0.04454463,0.0073409723,0.04441451,0.009889168,0.0019816288,0.00012901935,0.002523798,-0.04996632,-0.016286766,-0.025828945,-0.019225324,0.020494,0.00071837433,-0.033484377,0.014703631,-0.010084349,-0.028474731,0.00483615,0.054303676,-0.009872903,-0.026175933,0.0005167551,0.005616874,0.0043183784,0.0027867502,0.0100789275,-0.027130151,0.007113261,0.0018786166,0.0027298224,-0.014128932,0.012686761,0.009601818,-0.016145801,0.004876813,0.037930164,0.019528938,0.0077475994,-0.012177123,0.01713255,-0.02511328,0.015798813,0.018693997,-0.0039822333,-0.017793996,-0.011038567,0.020916892,-0.016850622,-0.025243402,0.014150619,-0.008446998,-0.028778346,-0.029580757,0.004115065,0.03775667,-0.031359073,0.0020521109,0.029819312,0.025503643,0.01444339,0.020103637,-0.018401226,-0.0406627,0.009840373,0.0029087383,0.028387984,-0.004199101,0.010425916,0.021144602,-0.005790368,-0.035241004,-0.028843407,-0.01803255,0.006077718,-0.013575919,-0.06358562,-0.024202438,-0.0006421318,0.023681955,-0.032616906,-0.012263869,0.027563887,0.009444589,0.0029954854,0.009021697,-0.0070861527,-0.014671101,0.05582175,-0.008110853,-0.01162411,0.0153759215,-0.014855439,-0.013077123,-0.010165675,0.0026430753,-0.037865102,0.006207838,0.04515186,-0.02318316,0.016774718,-0.024766292,-0.017544597,-0.016069898,-0.013532545,-0.009731939,-0.011157844,-0.034959074,0.046930175,-0.017143393,0.019550625,-0.009634349,-0.031250637,-0.016384356,-0.004985247,-0.010415073,-0.01572291,-0.023638582,0.032465097,-0.03144582,0.0016603934,-0.0033777147,0.003816872,0.006321694,-0.001036221,0.040424142,0.009184347,-0.021567494,0.013532545,0.003673197,-0.02008195,0.0035810282,0.010339169,-0.0039795227,0.020309662,-0.03907956,0.017273514,-0.0007468382,0.007996997,-0.013987968,-0.033224136,-0.0006987207,0.006674104,-0.020244602,0.01978918,0.06692538,-0.03337594,0.0007393834,-0.010973507,0.042267516,-0.013218087,0.016481947,-0.017121706,-0.002895184,-0.019192792,0.01706749,-0.010810856,-0.0413133,-0.020071108,-0.015516886,-0.042224143,-0.042961493,0.038190406,-0.013575919,0.018054238,0.027932562,-0.0020643095,0.026631355,-0.055604883,-0.023139786,0.0034888594,-0.013543389,0.023486774,-0.042809688,0.03324582,0.039057877,0.011157844,-0.025026534,0.018824117,-0.0034725943,0.013359051,-0.0034021123,0.009699409,-0.009309047,0.041486796,-0.040966313,0.0048307283,-0.02478798,-0.04710367,0.0081542265,0.013597606,0.0075307316,...', '2025-03-25 05:14:28.56047+00'), ('32', 'https://ai.pydantic.dev/logfire/', '0', 'PydanticAI Documentation Overview', 'The PydanticAI documentation provides essential sections including Introduction, Installation, Getting Help, Contributing, Troubleshooting, and detailed information on Agents, Models, Dependencies, and various tools related to the platform.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Debugging and Monitoring  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * Debugging and Monitoring  [ Debugging and Monitoring  ](./) Table of contents 
                  * Pydantic Logfire 
                  * Using Logfire 
                    * Debugging 
                    * Monitoring Performance 
                    * Monitoring HTTPX Requests 
                  * Using OpenTelemetry 
                  * Data format 
                  * Setting OpenTelemetry SDK providers 
                  * Instrumenting a specific Model 
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Pydantic Logfire 
              * Using Logfire 
                * Debugging 
                * Monitoring Performance 
                * Monitoring', '{"source": "pydantic_ai_docs", "url_path": "/logfire/", "chunk_size": 4999, "crawled_at": "2025-03-25T05:14:28.509483+00:00"}', '[-0.0032164694,-0.005076941,0.03675147,-0.029882038,0.01667269,0.012901656,-0.024558228,0.026561812,-0.0033917832,0.0063613825,0.028551087,-0.06606106,-0.027520671,-0.017602926,0.034375794,-0.0042933966,-0.030712096,0.0034687065,-0.003461551,0.06377125,0.05947785,0.026375765,0.018046577,0.02491601,0.011992888,0.021323869,-0.008873019,0.050375853,0.023914218,-0.028522464,0.04041517,-0.023699548,-0.039928585,0.020107407,0.02870851,0.0009007188,-0.0018318491,-0.0010626157,-0.0013220083,0.019778246,-0.008357812,-0.04605383,0.026418699,0.020221896,-0.05278015,-0.0081359865,0.0040679933,0.023785416,0.008457991,-0.01401794,-0.07092691,0.013409708,-0.02696253,0.016286284,-0.027792586,-0.0051950095,-0.03529172,0.011556392,-0.0065653184,-0.018161066,0.009137779,-0.01223618,-0.017259454,0.04571036,-0.026304208,-0.011585015,-0.067434944,0.0052021653,-0.051921472,-0.014983953,0.03411819,0.036436625,-0.033402625,-0.06262634,-0.02295536,-0.022654822,0.035348963,0.08546721,-0.01939184,-0.06354227,-0.02231135,0.041302472,-0.0105546,0.010468732,-0.01667269,-0.04330606,-0.04656904,-0.0014275543,0.005627927,-0.04645455,-0.01894819,0.00234169,-0.026933907,0.0018944611,0.09119174,-0.013051925,0.007356019,0.018661963,0.021381114,0.012271958,0.01472635,-0.054125417,-0.053095,0.0014570714,0.030826585,0.004286241,0.019678067,-0.024429426,-0.021037642,-0.0026028715,-0.12788597,-0.010368552,-0.015871255,0.025517086,-0.06400023,0.009932057,0.0069696135,0.0023327454,0.0048658494,-0.059420608,-0.044679943,0.012973213,0.024400802,0.005803241,0.03162802,-0.008057274,-0.0017254087,-0.03595004,-0.04928819,-0.0049874955,0.047399096,-0.029653057,0.037810512,-0.03726668,0.010397175,-0.012958901,-0.030626228,-0.019749623,-0.037810512,0.028193302,0.03683734,-0.019635133,-0.0012164623,0.019878425,-0.039012663,0.015713831,-0.036093153,-0.008787151,-0.035119984,-0.006540274,0.019563576,0.010146727,-0.043907132,-0.045309644,-0.02686235,0.016758557,0.031570774,0.03076934,0.010246906,-0.04439372,-0.026590435,0.05913438,-0.031914245,-0.009237958,-0.022297038,-0.003436506,-0.03451891,-0.009302359,-0.05901989,-0.035806924,-0.021695964,-0.0309697,-0.016157482,0.006790722,0.0151700005,-0.034690645,-0.016400775,-0.033917833,-0.031685267,-0.03586417,-0.04800017,0.00717355,-0.036150396,-0.00079427834,-0.011370345,-0.017230831,0.0040536816,0.011771061,-0.0204795,0.066347286,0.004912361,0.04548138,0.046511795,0.03769602,0.025173614,-0.021481294,0.061481435,-0.019434774,-0.007678024,0.01278001,-0.016271973,0.002025052,0.050061002,0.0003960211,-0.011348878,-0.010225439,0.009710232,0.012586807,-0.00022942838,-0.02805019,0.04433647,-0.057874985,0.022597576,-0.0021574318,-0.029882038,-0.00026766644,-0.054211285,-0.00014098888,0.0046654907,0.041531455,-0.036408,0.03451891,0.032458078,-0.012865878,0.012901656,0.0126655195,0.045452755,-0.06732046,0.0097460095,0.04050104,0.022840869,0.013416864,-0.024758587,0.012522406,0.0211092,-0.042075284,0.010633312,-0.008021495,0.012472317,-0.019534953,0.0028425863,-0.009080533,-0.0046082456,0.013059081,0.008193231,0.0018479493,-0.014683416,-0.044880304,0.018876633,0.048916098,0.03952787,-0.012314892,0.020193275,0.013259439,-0.0025348929,-0.041932173,-0.020636925,-0.021295246,-0.027878454,-0.011019717,-0.0024508138,0.04041517,-0.029009048,-0.0092236465,-0.002488381,-0.038068116,-0.02231135,0.025975049,-0.052551173,-0.034318548,0.062798075,0.036121774,0.061710417,0.0062361583,-0.037438415,0.026490256,-0.0010957106,0.041932173,0.012958901,-0.0025760378,-0.0017352477,-0.0019964294,0.073617436,0.024887389,0.0035456298,0.034461662,0.008529548,-0.012229024,-0.011627949,0.020636925,0.011291632,0.018003643,0.033059154,-0.024930323,0.018604718,-0.01142759,0.055928644,-0.020193275,0.016529577,-0.016400775,0.04668353,0.020007227,-0.018790765,-0.027277378,0.01983549,0.01472635,-0.0014946386,-0.013051925,0.032429453,-0.032200474,-0.036579736,-0.0040679933,-0.0013425809,-0.025960736,0.00027839994,-0.024458049,0.07230079,-0.012379293,0.04519515,-0.046196945,-0.055957265,-0.05781774,0.032687057,0.0016091292,-0.05243668,0.0097245425,0.049316812,0.0045187995,-0.0045044883,-0.012701298,0.024458049,-0.030168265,-0.01261543,0.021567162,-0.015112755,-0.025760379,-0.0058747972,0.017774662,-0.028636955,0.03323089,-0.046855267,-0.044679943,-0.07201457,-0.020880219,-0.013495576,0.012286269,0.0072665736,0.034289926,-0.0036171866,0.0077066463,-0.009760321,0.004948139,0.01625766,0.04330606,-0.028837312,-0.0019839068,-0.008379279,-0.035234474,-0.0068551227,0.042933963,-0.073846415,0.008951731,-0.007942784,-0.008787151,-0.0008881964,0.032887418,-0.027692407,-0.017488435,0.0010116316,-0.007406109,0.045853473,0.008450835,-0.007084104,-0.009123467,-0.046225566,-0.010561755,-0.0121431565,-0.016944604,-0.0041824835,0.015499161,0.01754568,0.005982132,0.024286313,0.010232595,0.04333468,0.013724557,0.014683416,0.014754972,-0.023141406,0.05481236,0.062454607,-0.018032264,-0.002552782,-0.010404331,0.011248698,0.011384656,0.00882293,0.033545736,0.08208974,-0.0019588622,-0.019964293,0.003016111,-0.036951832,0.013080548,-0.014533147,0.025746068,0.070984155,0.03715219,-0.011298788,-0.038984038,0.032257717,-0.04562449,0.007964251,-0.031141436,-0.019849803,-0.0691523,0.0046261344,0.023441944,0.024958944,0.020164652,-0.027649473,-0.070411704,-0.036064528,0.0046690684,-0.07310223,0.06480166,0.061366946,-0.057130795,0.029266652,-0.066633515,-0.00514492,0.006980347,0.042619117,0.0069481465,0.014182519,-0.028365038,-0.024830142,0.009545651,0.0055384813,0.007921317,0.026146784,-0.06617555,-0.025602954,0.036093153,-0.031542152,-0.029180784,0.008601104,-0.03866919,0.005910576,-0.026719237,0.023499189,-0.017917775,-0.003608242,0.012701298,-0.018132444,-0.048315022,0.064515434,-0.007449043,0.037524283,0.012636897,0.046397302,0.02956719,-0.05695906,0.02880869,-0.012551029,-0.014983953,0.027534982,-0.008057274,-0.00582113,0.011270165,0.041445587,-0.031885624,-0.011964264,-0.045366887,-0.036465246,-0.038153984,0.018175378,0.018432982,-0.02762085,-0.005076941,0.032000113,-0.03726668,-0.011527769,0.015313114,0.0040787267,0.07132763,-0.0112272315,-0.0146691045,-0.021638718,0.01787484,-0.027320312,0.011220076,0.04731323,-0.017846217,-0.0015679841,-0.02254033,-0.044250604,-0.0042075287,-0.0136458445,-0.026948217,-0.0011601115,-0.0073488634,-0.024973257,0.03205736,0.014769284,-0.022468774,0.020007227,-0.020293454,-0.0047084247,0.015212934,-0.04648317,0.011699505,-0.008694128,0.03128455,0.0092021795,0.022568954,-0.0038676346,0.017574303,0.0055170143,-0.011842619,0.01962082,-0.04516653,-0.009638675,0.014926708,0.016958917,-0.01743119,-0.028393662,-0.010576067,-0.035577945,-0.030568982,0.010690557,-0.015069821,0.013831892,-0.01764586,-0.06274083,0.015456227,0.0047513586,-0.015012576,-0.04384989,-0.021924945,0.0018640496,0.01939184,-0.024415115,-0.004196795,0.0021610095,0.0047799814,0.005466925,-0.011771061,0.0058068186,0.023856973,0.08426506,-0.023341766,0.01690167,-0.024143199,0.021152133,0.01939184,-0.018490227,-0.030626228,0.026332831,0.003059045,0.0069553023,-0.020365011,0.03128455,0.005234366,-0.005917731,0.025202237,0.03964236,-0.036579736,-0.036665604,-0.0069696135,0.012364982,-0.019506332,-0.03108419,-0.004576045,-0.015212934,0.005649394,-0.012679831,-0.017717415,-0.020608302,-0.0050662076,-0.024844455,-0.024100265,0.0042504626,0.02404302,-0.06045102,0.0006762099,-0.0016422241,0.012958901,0.026561812,0.0082003875,0.0030053775,-0.003461551,-0.01851885,-0.019692378,-0.004028637,0.0027102064,0.039413378,-0.006554585,-0.042046662,0.016687,0.007484821,-0.03497687,-0.0065295403,0.009288047,0.0030178998,0.019892737,-0.006966036,0.009259425,-0.023585057,-0.0059928657,-0.019191481,-0.010676246,-0.0033005485,-0.037552908,-0.018819388,0.037982248,-0.011613637,0.02534535,0.03929889,-0.032458078,-0.0009275525,-0.0017889151,0.005381057,-0.007549222,0.00018716525,-0.001917717,-0.0044007315,-0.048028793,-0.015513472,-0.0035939305,-0.027563605,0.038497455,0.034690645,0.012851567,-0.004701269,0.008214698,0.016171793,-0.030311378,0.0055098585,-0.021953566,0.045996588,0.03921302,-0.0067799883,-0.01380327,0.03632213,-0.037352547,-0.017388256,0.018704897,0.013381085,-0.014797906,0.012035822,-0.0032826592,0.022769311,0.018461604,0.027520671,0.0057710405,-0.007212906,-0.02803588,-0.030568982,0.018175378,-0.066576265,0.03629351,0.006944569,-0.00056127214,-0.023656614,0.036150396,0.024343558,0.037438415,0.009388227,0.0026547501,-0.008286255,0.029767549,0.014354255,0.029738925,-0.0024973257,-0.0071413494,0.021066265,-0.055012718,-0.02219686,0.03715219,-0.0131664155,-0.020522434,-0.06823638,0.016515264,0.04805742,-0.022325661,0.022382906,0.017674481,0.008644038,0.025273794,0.014926708,-0.021567162,0.014354255,-0.010948161,0.0002080732,-0.023642303,-0.016930293,0.025259482,0.0035062737,-0.14826529,-0.01962082,0.011234387,-0.009402538,0.003629709,-0.016100237,-0.014189675,-0.0101395715,-0.0065653184,0.030483114,-0.020407945,-0.027549293,0.0044436655,-0.026733547,0.015470538,-0.0157997,-0.0038032336,-0.008543859,0.011398967,-0.006901635,-0.012200401,-0.019134236,0.035234474,-0.0040787267,-0.0042468845,0.016157482,-0.01863334,-0.005520592,0.02837935,-0.0066332975,-0.003942769,-0.016543888,0.008729906,0.01023975,0.00017307754,0.002910565,-0.007763892,-0.05026136,0.03217185,-0.025946425,0.008357812,-0.011127052,-0.004307708,-0.00096422527,-0.016085925,-0.020279143,-0.041216604,0.012443694,0.043277435,-0.011284477,-0.008543859,0.016486643,0.013631534,-0.014268387,-0.018547472,0.01743119,-0.0028300637,0.00037142352,0.025703134,-0.015370359,-0.016873049,-0.014354255,0.0049230945,-0.031399038,0.03411819,-0.005338123,-0.0092021795,0.020722793,-0.020522434,-0.024815831,-0.006951724,-0.016186105,-0.023513502,0.0033595827,0.014375722,0.013617222,-0.026590435,-0.016772868,-0.03205736,0.0143471,0.0042540403,-0.0086368825,-0.016629755,-0.014354255,0.0021180755,0.010676246,-0.023756793,0.0047978703,-0.027148576,-0.03924164,-0.03924164,-0.05718804,0.010969628,-0.0022826558,-0.023656614,0.005234366,-0.030025152,0.009624364,-0.109452985,-0.011112741,-0.016400775,0.011434746,0.036007285,-0.0016136015,0.02069417,0.03205736,-0.01348842,-0.03174251,0.010518821,-0.0074919765,-0.035549324,-0.0058783754,0.029538568,-0.014568925,0.037982248,-0.0028103858,0.023470568,0.015370359,-0.0192...', '2025-03-25 05:14:30.794491+00'), ('33', 'https://ai.pydantic.dev/logfire/', '1', 'Debugging and Monitoring Applications Using LLMs', 'This section discusses the challenges faced when working with Large Language Models (LLMs), highlighting issues such as slowness, unreliability, and unpredictability. It emphasizes the difficulty in diagnosing model performance due to the non-deterministic nature of LLMs and the necessity for new observability tools for effective application monitoring.', 'HTTPX Requests 
              * Using OpenTelemetry 
              * Data format 
              * Setting OpenTelemetry SDK providers 
              * Instrumenting a specific Model 
Debugging and Monitoring Applications that use LLMs have some challenges that are well known and understood: LLMs are **slow** , **unreliable** and **expensive**. These applications also have some challenges that most developers have encountered much less often: LLMs are **fickle** and **non-deterministic**. Subtle changes in a prompt can completely change a model's performance, and there's no `EXPLAIN` query you can run to understand why. Warning From a software engineers point of view, you can think of LLMs as the worst database you've ever heard of, but worse. If LLMs weren't so bloody useful, we'd never touch them. To build successful applications with LLMs, we need new tools to understand both model performance, and the behavior of applications that rely on them. LLM Observability tools that just let you understand how your model is performing are useless: making API calls to an LLM is easy, it's building that into an application that's hard. Pydantic Logfire [Pydantic Logfire](https://pydantic.dev/logfire) is an observability platform developed by the team who created and maintain Pydantic and PydanticAI. Logfire aims to let you understand your entire application: Gen AI, classic predictive AI, HTTP traffic, database queries and everything else a modern application needs. Pydantic Logfire is a commercial product Logfire is a commercially supported, hosted platform with an extremely generous and perpetual [free tier](https://pydantic.dev/pricing/). You can sign up and start using Logfire in a couple of minutes. PydanticAI has built-in (but optional) support for Logfire. That means if the `logfire` package is installed and configured and agent instrumentation is enabled then detailed information about agent runs is sent to Logfire. Otherwise there's virtually no overhead and nothing is sent. Here's an example showing details of running the [Weather Agent](../examples/weather-agent/) in Logfire: [![Weather Agent Logfire](../img/logfire-weather-agent.png)](../img/logfire-weather-agent.png) Using Logfire To use logfire, you'll need a logfire [account](https://logfire.pydantic.dev), and logfire installed: pipuv
                        
                                                pip install "pydantic-ai[logfire]"
                        
                        
                                                uv add "pydantic-ai[logfire]"
                        

Then authenticate your local environment with logfire: pipuv
                        
                                                 logfire auth
                        
                        
                                                uv run logfire auth
                        

And configure a project to send data to: pipuv
                        
                                                 logfire projects new
                        
                        
                                                uv run logfire projects new
                        

(Or use an existing project with `logfire projects use`) Then add logfire to your code: adding_logfire.py
                        
                                                import logfire
                        
                        logfire.configure()
                        

and enable instrumentation in your agent: instrument_agent.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('openai:gpt-4o', instrument=True)
                        # or instrument all agents to avoid needing to add `instrument=True` to each agent:
                        Agent.instrument_all()', '{"source": "pydantic_ai_docs", "url_path": "/logfire/", "chunk_size": 3885, "crawled_at": "2025-03-25T05:14:31.074370+00:00"}', '[-0.019862741,0.00539306,0.0144628985,-0.050470904,0.05595215,0.005094576,-0.040349588,-0.011891867,0.022616934,0.018750211,0.004684161,-0.033782944,-0.02789467,-0.041055094,0.014123712,-0.005742422,0.002964487,0.008282926,-0.012950128,0.05844856,0.04680769,0.019699933,-0.019482853,-0.001789207,-0.011362737,-0.025913823,-0.028193153,0.02805748,0.00794374,-0.033185974,0.04707904,-0.019645663,-0.033782944,0.029658439,-0.007150044,0.015005596,0.016810067,-0.006793899,-0.0025133695,0.029984057,-0.012631292,-0.056603387,-0.0031951338,0.03375581,-0.046346396,0.0037480071,-0.0047621736,0.030363945,0.0024557079,0.0005516015,-0.05136635,0.028437369,-0.02098884,-0.005294696,0.013614933,0.038558684,0.003778534,0.05256029,-0.021070244,-0.01280767,-0.016267369,-0.0040498828,-0.015154838,0.01923864,-0.04330729,-0.017786922,-0.03199204,0.031476475,-0.026266577,0.013119721,0.037473287,0.0016085904,0.0025540718,-0.030770969,-0.020337602,-0.01694574,-0.005169197,0.059479687,-0.01269913,-0.055355184,-0.014734247,0.014802084,-0.029359955,-0.010867525,0.0089070285,-0.031585015,-0.079613775,0.006665008,0.01721709,-0.05044377,0.0077334447,0.012895858,-0.03953554,0.012102162,0.031232262,0.007930173,0.018193945,-0.014693545,0.038395874,0.03432564,0.03310457,-0.033240244,-0.056874737,0.0007644408,0.032589007,0.0107114995,0.0053421822,-0.032968894,-0.008737436,0.016077423,-0.085040756,-0.017284928,-0.016443746,0.035519574,-0.04675342,0.013696337,-0.013818445,0.02443497,0.001568736,-0.056983277,-0.052804504,0.015507592,0.020310467,0.013506393,0.051040735,-0.02273904,0.014055875,-0.064852394,0.0069736675,-0.0063868756,0.06338711,-0.0015424491,0.033972885,-0.06653476,0.0026354764,-0.02184359,-0.00759777,-0.025493233,-0.040430993,-0.00086238084,0.04648207,0.00573903,-0.02443497,0.0040329234,-0.042357568,-0.0021860548,-0.011857948,-0.023078227,-0.01838389,-0.007428177,0.019794906,-0.014096577,-0.028518774,-0.022386286,-0.023037525,0.024299297,0.043551505,0.03028254,0.017691951,-0.03958981,-0.021775752,0.059533957,-0.05017242,0.020690355,-0.022237046,0.017732652,-0.031802095,-0.033782944,-0.064418234,-0.012468483,-0.037934583,-0.029305685,0.030689564,-0.0038599386,0.018913021,-0.025493233,0.0014025348,-0.057417434,-0.020975273,-0.04452836,-0.06832566,-0.0048571457,-0.027324839,0.007428177,-0.03044535,-0.014096577,-0.00072713033,0.03066243,-0.0074146097,0.022087803,-0.0063122544,0.052207533,0.01812611,0.05378136,0.004928375,0.008839192,0.03910138,0.0103519615,0.0061731883,-0.011064253,0.0017103462,0.019170802,0.02503194,-0.03904711,-0.0014805476,0.036116544,0.017094983,0.001740025,-0.017786922,-0.008228657,0.03671351,-0.032154847,0.06403835,-0.02800321,-0.033593,0.003653035,-0.029522764,-0.0005554173,0.035356767,0.042900268,-0.014747814,0.015059866,0.0042533944,-0.007143261,-0.009456511,0.01902156,0.024964102,-0.060076654,0.0070686396,0.030825239,-0.0051386706,-0.004365326,-0.034814067,0.007848768,0.04203195,-0.029197145,0.02465205,-0.006281728,0.016877905,-0.023091795,-0.0076181213,-0.02794894,-0.025411827,0.006549685,-0.01960496,-0.008201522,-0.02189786,-0.035628114,0.043904256,0.030174002,0.040213913,-0.028980067,-0.01577894,-0.00961932,0.0070686396,-0.030255405,-0.016185964,-0.030770969,-0.027189163,-0.04309021,0.013635284,0.033565864,-0.013492825,0.010426583,-0.014232252,-0.06919398,-0.037581827,0.003013669,-0.031042319,0.0132689625,0.043768585,0.03405429,0.055409454,0.0018536524,-0.03665924,0.014937758,0.023037525,0.01257024,0.013960903,0.0007135629,0.012902642,-0.040023968,0.050308093,0.020201929,0.0022420206,0.0070415046,-0.023336008,-0.0071975305,-0.014096577,0.007848768,-0.00089629943,0.026497222,0.0028881703,-0.0005808563,0.02534399,0.011281332,0.034922607,-0.0027898063,-0.029631304,-0.024407836,0.021653645,0.0059425416,-0.027921805,-0.04675342,0.044691168,0.025099777,0.03910138,-0.04203195,0.00847287,-0.03448845,0.021857157,0.033348784,0.010616527,0.010955713,-0.0070415046,0.002844076,0.037717503,-0.021341594,0.019265775,-0.025845986,-0.046400666,-0.043225884,0.038612954,-0.040241048,-0.028220288,0.011525546,0.054106977,-0.021110946,-0.018994424,0.010290909,0.015697535,0.0034393477,-0.010582608,0.0005096272,0.012705914,-0.034732662,-0.011111739,-0.027813265,-0.027297704,0.079885125,-0.06110778,0.00080132735,-0.079559505,0.038911436,0.0020605559,0.037066266,0.0024879305,0.014327223,-0.0048164437,0.00014457811,-0.0074146097,0.010833606,0.011952921,0.048544325,0.005352358,-0.021857157,0.012210702,-0.054568272,-0.0049589016,0.021110946,-0.074566685,0.020066254,-0.0016111343,-0.011355953,-0.020079821,0.011905435,-0.014774949,-0.017678384,-0.025113344,0.004168598,0.07728018,0.003941343,-0.024516376,-0.002574423,-0.040268183,0.010582608,0.018505998,-0.009185161,-0.001741721,0.04075661,0.03210058,0.027053488,0.05068798,-0.02231845,0.017339196,0.0405938,-0.00053549017,0.009334403,-0.009741426,0.027650457,0.05812294,-0.030798104,-0.01514127,-0.018343188,-0.020907436,-0.009917803,0.04129931,0.044501226,0.074946575,0.01519554,-0.074620955,-0.0155482935,-0.013404638,0.0010625006,-0.006254593,0.022277748,0.06409262,0.060076654,-0.014055875,-0.024041515,0.075380735,-0.04086515,0.013479258,-0.057091817,0.008181171,-0.05478535,0.012943344,0.017583411,0.028925797,0.047160443,-0.02747408,-0.061596207,0.019007992,0.012495618,-0.04545095,0.047106177,0.038857166,-0.03687632,0.011912218,-0.06800004,-0.03060816,0.00039133604,0.044446956,0.009754994,-0.021490835,-0.040376723,-0.034976877,0.01089466,3.5243564e-05,0.0029237848,0.027704727,-0.011722274,-0.02736554,0.035899464,-0.030201137,-0.020446142,-0.023458116,-0.009293701,0.009422592,-0.008683166,0.04941264,-0.025737446,0.0027016178,0.04824584,-0.00974821,-0.08335839,0.0585571,-0.022182776,0.026822843,-0.0073671234,0.029251415,0.031476475,-0.04441982,-0.010874309,-0.019428583,0.022345584,0.0533472,-0.01934718,0.030472485,0.017719086,0.0030577632,-0.044962518,-0.01224462,-0.02917001,-0.060022384,-0.014544303,0.009320836,-0.0008844279,-0.017976867,-0.039345596,0.023946544,-0.0019214896,-0.017407034,0.007211098,0.006156229,0.030201137,-0.0029051295,-0.0052845203,-0.009042704,0.005857745,-0.039969698,-0.008242223,0.07201601,-0.016443746,-0.020961706,-0.007848768,-0.042737458,0.010541906,0.015385484,-0.0013211301,0.015466889,-0.009714291,-0.028762987,0.039399866,-0.0077334447,0.012380295,-0.014232252,-0.035356767,-0.032724682,0.008140468,-0.014910624,0.034135696,0.0012711001,0.018573834,-0.001250749,-0.009782129,-0.020066254,0.034298506,-0.012522753,-0.021911426,0.001642509,-0.028220288,-0.016864337,0.025723878,0.017461304,0.008181171,-0.038178794,0.015399052,-0.016972875,-0.029658439,0.002275939,-0.014571438,-0.016280936,-0.011898651,-0.04846292,0.010141666,0.00057534454,-0.04368718,-0.06333284,-0.014313656,-0.007855551,0.034189966,-0.018587401,0.0026592195,-5.2361866e-05,-0.0075638513,-0.014096577,-0.013642068,0.019754203,-0.0010955713,0.065774985,-0.038775764,0.0022640678,-0.02151797,0.034841202,0.012346377,-0.016891472,-0.037147667,-0.014164414,-0.003676778,0.013703121,-0.028925797,0.009449727,0.010372313,0.008316845,0.015466889,0.04097369,-0.05584361,-0.030472485,0.015276945,0.01605029,-0.012339593,-0.040159643,0.013248611,-0.0040091807,0.007991226,-0.0064886315,-0.019415015,-0.017637681,0.026741438,-0.005511775,-0.011620518,-0.0156297,0.020893868,-0.02789467,-0.003161215,-0.003727656,0.03427137,-0.00081786263,0.0056813685,0.02497767,-0.020676788,-0.034922607,-0.008486438,-0.024936967,0.023363143,0.038395874,0.006987235,-0.05532805,0.0078352,0.0156025635,-0.021178784,-0.016294504,0.0155754285,0.002377695,0.0008038712,0.004338191,0.031856366,-0.044012796,-0.0034139089,-0.017596979,-0.028545909,-0.009958506,-0.052044727,-0.040838014,0.015263378,0.020921003,-0.0076113376,0.05052517,-0.028247423,-0.01309937,-0.011145658,0.01339107,-0.013302881,0.022467691,-0.008615329,-0.040159643,-0.0038226282,-0.037554692,0.012210702,-0.028355964,0.010399448,0.046047915,0.016606554,0.011003199,-0.0058272183,0.023566656,-0.027067056,-0.003385078,-0.0068006827,0.055083834,0.037663233,0.026972083,-0.026225874,0.043225884,-0.046997637,-0.016837202,0.032236252,0.014150847,-0.016335206,0.0266736,-0.008493221,0.041462116,0.032968894,0.014544303,0.018587401,0.007333205,-0.018804481,-0.009965289,0.0064275777,-0.079776585,0.022589799,-0.005735638,0.014042308,-0.00024654594,0.042303298,0.023607356,0.019523555,0.007699526,-0.006203715,-0.014774949,0.025859553,-0.0065157665,0.008371115,-0.019971281,-0.020337602,0.02752835,-0.05136635,-0.04357864,0.02651079,-0.004456906,-0.013248611,-0.03904711,-0.049494047,0.017556276,-0.01960496,0.015955318,0.0029034335,-0.014652843,0.01153233,0.022291316,-0.012814454,-0.017298495,-0.03375581,0.012414213,-0.012488835,-0.037256207,0.013065451,0.0018061664,-0.080482095,-0.011634085,0.012800886,-0.002672787,-0.005474465,-0.015982453,-0.010189152,-0.024353568,-0.02066322,0.04387712,0.013553879,-0.03549244,-0.007747012,-0.02539826,0.025438963,-0.007150044,0.0033070652,0.0167965,0.005834002,-0.012583807,0.012692346,-0.028654447,0.031177992,-0.021233054,-0.0035037932,0.029549899,-0.016782932,-0.014286522,0.037771773,-0.01801757,-0.015181973,-0.0266736,-0.005572829,0.037283342,-0.0149920285,0.008154036,-0.032371927,-0.036170814,0.017881894,-0.035031147,0.012692346,-0.012638076,0.00052658655,0.013126505,0.026822843,0.008791706,-0.040186778,0.029305685,0.04623786,0.018343188,-0.020785328,-0.008323628,0.011186359,-0.004677377,-0.001789207,0.028084615,0.0045349193,0.0037140886,0.006352957,-0.021029543,-0.039698347,-0.022169208,0.0001642933,-0.0028525556,0.021273756,-0.010195936,-0.020541115,6.253745e-05,-0.008384682,0.005891664,0.00030463157,-0.03619795,-0.052316073,-0.004358542,0.0018740036,0.01020272,-0.029956922,-0.011043902,0.012075027,0.013146856,0.007401042,0.0145036,-0.034814067,-0.02284758,-0.021952128,0.038015984,-0.026904248,-0.025262585,-0.0066276975,-0.031422205,-0.047377523,-0.036577836,0.01020272,-0.001863828,-0.00054312183,0.015154838,0.008187954,0.015643267,-0.09795696,-0.017040713,-0.0033952536,0.023336008,0.0072992863,0.031015184,0.039752617,0.018356755,-0.009646455,-0.00612231,0.017298495,-0.0290072,-0.04081088,-0.029468494,0.018587401,-0.012692346,0.0156025635,0.022223478,0.021015976,0.021287324,-0.011695139,0.031313665,-0.0198...', '2025-03-25 05:14:30.848714+00'), ('34', 'https://ai.pydantic.dev/logfire/', '2', 'Introduction to Logfire Documentation', 'The Logfire documentation provides detailed guidance on using Logfire, including instrumentation for libraries like Pydantic, HTTPX, and FastAPI. Built on OpenTelemetry, the Logfire Python SDK facilitates data transmission to OpenTelemetry collectors. It aids application understanding through real-time debugging and SQL-based monitoring dashboards.', 'The [logfire documentation](https://logfire.pydantic.dev/docs/) has more details on how to use logfire, including how to instrument other libraries like [Pydantic](https://logfire.pydantic.dev/docs/integrations/pydantic/), [HTTPX](https://logfire.pydantic.dev/docs/integrations/http-clients/httpx/) and [FastAPI](https://logfire.pydantic.dev/docs/integrations/web-frameworks/fastapi/). Since Logfire is built on [OpenTelemetry](https://opentelemetry.io/), you can use the Logfire Python SDK to send data to any OpenTelemetry collector. Once you have logfire set up, there are two primary ways it can help you understand your application:
              * **Debugging**  Using the live view to see what's happening in your application in real-time.
              * **Monitoring**  Using SQL and dashboards to observe the behavior of your application, Logfire is effectively a SQL database that stores information about how your application is running.
Debugging To demonstrate how Logfire can let you visualise the flow of a PydanticAI run, here's the view you get from Logfire while running the [chat app examples](../examples/chat-app/): Monitoring Performance We can also query data with SQL in Logfire to monitor the performance of an application. Here's a real world example of using Logfire to monitor PydanticAI runs inside Logfire itself: [![Logfire monitoring PydanticAI](../img/logfire-monitoring-pydanticai.png)](../img/logfire-monitoring-pydanticai.png) Monitoring HTTPX Requests In order to monitor HTTPX requests made by models, you can use `logfire`'s [HTTPX](https://logfire.pydantic.dev/docs/integrations/http-clients/httpx/) integration. Instrumentation is as easy as adding the following three lines to your application: instrument_httpx.py
                        
                                                import logfire
                        logfire.configure()
                        logfire.instrument_httpx(capture_all=True)  # (1)!
                        

              1. See the [logfire docs](https://logfire.pydantic.dev/docs/integrations/http-clients/httpx/) for more `httpx` instrumentation details.
In particular, this can help you to trace specific requests, responses, and headers: instrument_httpx_example.py
                        
                                                import logfire
                        from pydantic_ai import Agent
                        
                        logfire.configure()
                        logfire.instrument_httpx(capture_all=True)  # (1)!
                        
                        agent = Agent('openai:gpt-4o', instrument=True)
                        result = agent.run_sync('What is the capital of France?')
                        print(result.data)
                        # > The capital of France is Paris.', '{"source": "pydantic_ai_docs", "url_path": "/logfire/", "chunk_size": 2827, "crawled_at": "2025-03-25T05:14:28.708697+00:00"}', '[-0.048474822,-0.010372424,0.017772451,-0.037997127,0.070693485,-0.01868894,-0.055038866,0.007672497,0.01754952,0.018775634,0.013524401,-0.029649649,-0.014056955,-0.030739527,0.02917902,-0.015555538,-0.030665217,0.025711225,-0.0041025258,0.04458594,0.041564003,0.038814537,-0.014032186,0.0006459543,-0.0043440326,-0.025240595,-0.033835772,0.032597274,-0.017499981,-0.030417519,0.015617464,-0.0038393447,-0.025810305,0.020943007,-0.015060139,-0.008514675,0.019171953,-0.027246963,0.0220205,0.016410103,-0.006731238,-0.0039198473,-0.020583842,0.0251539,-0.03665955,-0.009790329,0.00733191,0.015704159,-0.02841115,0.02510436,-0.070099,0.021463176,-0.038987927,0.004953993,-0.0016208846,0.03457887,-0.026107544,0.0345541,-0.0290304,0.00059293106,-0.03648616,-0.005898348,-0.0030126472,0.009084385,-0.04582444,0.008595178,-0.048350975,0.03626323,-0.040474124,0.027395582,0.06568995,-0.01101025,-0.024769966,-0.026280934,0.0062265503,-0.017239897,0.02229297,0.071089804,-0.023110379,-0.052611407,9.903149e-05,-0.023742013,-0.023197073,0.0075052995,-0.0008808819,-0.04287681,-0.041019063,0.0046846196,0.017128432,-0.047731724,0.012075358,0.01752475,-0.005167634,0.004727967,0.040746596,0.030244129,0.02900563,-0.009654094,0.023159917,0.01762383,0.039012697,-0.03638708,-0.053354505,-0.015122064,0.062767096,0.008743798,0.0145152,0.0030281283,-0.0002821454,-0.015716543,-0.07713367,-0.031259697,-0.011771927,0.028435921,-0.046096906,0.008644718,-0.033365145,-0.0005824812,0.0010411126,-0.053205885,-0.05236371,0.009802714,-0.019902667,0.013895951,0.016558722,-0.046542767,-0.0003061413,-0.07564747,-0.0357926,0.020237062,0.049614243,-0.039854877,0.020682922,-0.05726816,0.02905517,-0.021190707,0.014775285,-0.017735295,-0.030689988,-0.019964593,0.031556938,-0.028510232,-0.039309938,0.018156385,-0.04178693,0.00090178155,-0.03807144,-0.016385332,0.00065717817,-0.020237062,0.022887448,0.016038554,-0.04270342,-0.047335405,-0.0046536573,0.060488258,0.026454324,0.03475226,0.0038672108,-0.0022958661,-0.045428116,0.06489731,-0.04919315,0.018825173,-0.060934115,-0.010360038,-0.014700974,-0.0352972,-0.04126676,-0.018713709,-0.037080638,-0.0064339987,0.016955042,0.009505474,0.048078503,-0.026305703,-0.009536437,-0.019865513,-0.008223629,-0.04361991,-0.07019808,-0.015307839,-0.03457887,0.016013782,-0.024051636,-0.007096595,-0.016769268,-0.016484411,-0.032622047,0.042232793,0.019072874,0.054097604,-0.014354195,0.04490795,0.015704159,-0.008372248,0.031457856,0.0045452886,-0.016298637,-5.6845136e-05,0.020992545,0.032671586,0.016100477,-0.049317002,-0.003201518,0.02281314,-0.008236013,-0.013301471,-0.038616378,-0.008496098,0.0008243754,-0.04200986,0.048301432,-0.005935503,-0.015865164,0.0074247974,-0.019072874,0.0065206937,0.030318439,0.023097994,-0.024918586,-0.012638875,0.019654969,-0.030764299,0.0021131877,0.054642543,0.018750865,-0.04337221,-0.008954342,0.012391175,0.015951859,0.01861463,-0.019357728,0.0022494225,0.05010964,-0.040176883,0.007635342,-0.032844976,0.014973444,-0.047285866,-0.03591645,-0.018726094,-0.0017617638,0.045428116,-0.009090577,-0.013487247,-0.013103312,-0.02969919,0.049812403,0.048375744,0.023345692,-0.0280396,-0.010781128,-0.015840393,0.005508221,-0.044833638,-0.0014312395,-0.034306403,-0.029996429,-0.038740225,0.048821602,0.04599783,-0.030467058,0.023221843,-0.0004810792,-0.059447918,-0.011394184,0.0023732723,-0.04319882,0.006136759,0.041588772,0.06494685,0.023531467,0.021042086,-0.041365843,0.019617813,0.04253003,-0.0077034594,0.03566875,-0.026082775,0.010068991,-0.016372947,0.071783364,0.034182552,-0.015406919,-0.009889409,-0.014676205,-0.02184711,-0.0010225351,0.03586691,-0.013772101,0.040053036,-0.010384808,-0.000932744,0.03547059,0.004424535,0.016323408,0.008910995,-0.020794386,-0.024819506,-4.385542e-05,0.0013778294,-0.040251195,-0.02831207,0.035891682,0.01424273,0.016917886,3.7808062e-05,0.039879646,-0.04253003,0.023370463,0.01071301,0.00094977336,0.0056227823,-0.022986528,0.004619599,0.06623489,-0.024670886,0.016905501,-0.052958187,-0.06306434,-0.029302869,0.055237025,-0.03601553,-0.007040863,-0.022354893,0.04473456,-0.019667353,-0.022305354,0.02117832,0.033711925,0.0022587113,-0.02888178,0.011740964,-0.025661685,0.0044864602,0.011672846,-0.03440548,-0.03542105,0.055286564,-0.062321234,0.004210894,-0.08793338,0.023977326,-0.008842878,0.033043135,-0.002381013,0.045849208,-0.04349606,-0.009771751,-0.014403735,-0.0014978088,0.008397019,0.0350495,0.013549171,0.012682223,-0.016843576,-0.054890245,-0.018466009,0.0016688765,-0.09249105,0.014156035,-0.010310498,-0.032399114,-0.04270342,0.021029701,-0.023209458,-0.023952557,-0.024225026,0.021215476,0.05221509,0.009431165,0.006263705,0.00072877883,-0.025958924,0.020026518,0.01911003,-0.003706206,-0.011084559,0.031680785,0.017673371,0.009920372,0.04513088,-0.03623846,0.03438071,0.040721823,0.016286252,0.026280934,-0.010149494,0.045081336,0.038864076,-0.04421439,0.015134449,-0.02192142,-0.049663782,-0.015047754,0.04396669,0.052958187,0.068315566,-0.010781128,-0.05761494,-0.032176185,-0.019716892,-0.013214777,0.0060191015,0.023420002,0.030838607,0.031408317,0.0007620635,-0.010904977,0.060141478,-0.010075184,0.016323408,-0.033043135,0.02214435,-0.05622782,-0.0019010949,0.0027928136,0.02870839,0.020682922,0.007523877,-0.054295763,0.00715852,0.020992545,-0.04498226,0.053453587,0.03824483,-0.048177585,0.019271033,-0.04456117,-0.024559421,-0.004282108,0.041019063,0.014304656,-0.02888178,-0.023903018,-0.001197473,-0.01831739,-0.01466382,0.00887384,0.011295104,-0.046369378,-0.004613406,0.027841441,-0.060537796,-0.010044221,-0.019877898,0.002492478,0.017772451,-0.0077406145,0.054196686,-0.0018546511,-0.0029445298,0.05726816,0.0019072874,-0.09853493,0.007870656,-0.020360911,0.026429554,-0.012285903,0.0057435357,0.05082797,-0.05716908,0.011932931,0.00037967713,0.0118214665,0.052660946,-0.031408317,0.03472749,0.008198859,-0.0035823563,-0.023853477,0.0028531905,-0.030962458,-0.052809566,-0.015877549,0.014775285,0.026751563,-0.005820942,-0.0043502254,0.00029182117,-0.01406934,-0.0297735,0.018007765,0.00884907,0.0072761774,0.002393398,0.0037836123,0.015122064,-0.01096071,-0.048796833,0.0013708628,0.06524409,-0.012880382,-0.040152114,-0.012248748,-0.040796135,-0.027890982,0.027890982,0.02187188,0.024485111,0.013301471,-0.021512715,0.044338237,-0.010781128,0.0042047016,-0.01896141,-0.034355942,-0.032176185,0.0031318525,0.0067869704,0.035148583,0.019605428,0.029401949,-0.010465311,-0.0055360873,-0.014168421,0.020051287,-0.01481244,-0.023110379,-0.0036288,-0.02905517,0.009424972,0.015258299,0.03423209,0.00023008976,-0.02950103,0.030714758,-0.027048802,-0.03631277,0.005155249,-0.023271384,-0.013140467,-0.0040901406,-0.025909385,-0.01081209,-0.02273883,-0.02935241,-0.053602207,-0.012193016,-0.0005898348,0.03532197,-0.015369764,-0.017041737,0.013450092,0.0019088355,-0.02090585,-0.018973794,0.027296502,-0.010372424,0.040647514,-0.026132314,-0.010353846,-0.015493614,0.019332958,0.033439454,-0.029823039,-0.022268198,-0.008644718,-0.013995031,0.008304131,-0.026330473,0.0066569285,0.00045205187,0.0025265366,0.030665217,0.02488143,-0.04458594,-0.033018366,0.0129918475,0.013834026,0.00060647714,-0.031878944,-0.02470804,0.017301822,-0.0036009338,-0.00039980272,-0.0022029788,-0.024621347,0.036932018,0.0017230607,0.007907812,-0.018887099,0.032473426,-0.019432038,-0.040152114,0.013883566,0.042232793,0.004876587,-0.030442288,0.0012671385,-0.026702024,-0.045353808,-0.0039198473,-0.0060562566,0.02527775,0.0035544902,0.015283069,-0.040771365,0.0027912655,0.0069727455,-0.010322884,0.004953993,-0.009307315,-0.016781652,0.021983344,0.0049199346,0.021116396,-0.03004597,0.0037000137,-0.0016951945,-0.037774198,-0.027098343,-0.034256864,-0.019642582,0.020199908,0.016682573,0.02912948,0.021289786,-0.024212642,-0.014502815,-0.012025818,0.012211593,-0.02510436,0.006700276,0.015394534,-0.0043161665,-0.021203091,-0.033414684,0.001209858,-0.010044221,0.03420732,0.024943355,0.015803238,0.0148619795,-0.01461428,0.021710875,-0.026553404,0.00877476,-0.008452751,0.045353808,0.023469543,0.011691424,-0.0041489694,0.02950103,-0.020509532,-0.011078367,0.032498196,0.027890982,-0.013846411,0.011363222,-0.0009807359,0.03618892,0.053205885,0.0104591185,0.005331735,-0.005988139,-0.016781652,-0.017190356,0.01431704,-0.062222153,0.019481579,-0.0132890865,-9.845094e-05,-0.025413984,0.05890298,0.010050413,0.012217785,0.025859844,-0.01866417,-0.045353808,0.054840706,-0.002620972,0.031680785,-0.025859844,-0.019778818,0.041167684,-0.030095508,-0.030194588,0.024720427,-0.004888972,-0.02125263,-0.030268898,-0.040746596,0.005331735,-0.0057652094,0.0062327427,0.02520344,-0.00855183,0.010750165,0.004984956,-0.018911868,-0.0072266376,-0.011765733,0.023927787,-0.019617813,-0.03665955,0.012372598,-0.007350487,-0.059299298,-0.016521567,0.0064339987,-0.010805897,-0.034133013,-0.008719028,-0.006588811,-0.009573592,-0.032696355,0.039062236,0.01702935,-0.032002795,-0.010576775,-0.0021487945,0.045700587,-0.0122054005,-0.004080852,-0.0036473775,-0.0031334006,0.0057373433,-0.005331735,0.0106325075,0.010360038,-0.008458943,-0.01463905,0.038566835,-0.022887448,-0.01747521,0.044313468,0.011586151,0.009431165,-0.054840706,-0.019692123,0.045849208,-0.020893466,0.019605428,-0.03475226,-0.047434486,0.019952208,-0.032101877,0.006514501,0.006012909,-0.00018616178,0.020187521,0.004195413,0.01078732,-0.048598673,0.012143476,0.029476259,0.015183989,-0.017227512,0.013115697,0.008743798,-0.020224677,-0.00526981,0.034504563,0.0029785885,0.004563866,0.022231044,-0.016509183,-0.04126676,-0.01816877,-0.018329775,-0.0077282293,0.032374345,-0.01849078,-0.0036442813,0.005077843,-0.02249113,-0.0047775074,0.00728237,-0.028014831,-0.03153217,-0.0132890865,-0.01066347,0.024460342,-0.030838607,-0.019617813,0.0033965816,0.03492565,-0.0031953256,-0.013834026,-0.041241992,-0.019630197,0.005985043,0.039830104,-0.016199557,-0.031284466,-0.023209458,-0.033142213,-0.02880747,-0.02164895,0.0012160505,-0.0088676475,-0.008811915,-0.0055608572,0.0046041175,0.016224328,-0.0843665,-0.017252281,-0.015060139,0.01225494,0.009753174,0.032622047,0.05890298,0.019469192,-0.0051366715,-0.027370812,0.009524052,-0.020881081,-0.025760764,-0.007294755,0.0075424546,-0.0069975154,0.02246636,0.032200955,0.04262911,0.0016394621,-0.008198859,0.009858446,-0.0193948...', '2025-03-25 05:14:30.924031+00'), ('35', 'https://ai.pydantic.dev/logfire/', '3', 'Logging HTTP Requests and Responses with Logfire', 'This section describes how to capture all headers, request body, and response body using Logfire with or without HTTPX instrumentation. It highlights the benefits of HTTPX instrumentation for custom clients and mentions Logfire's use of OpenTelemetry, along with options for sending data to collectors or using the OpenTelemetry Python SDK directly.', '1. Capture all of headers, request body, and response body.
With `httpx` instrumentationWithout `httpx` instrumentation [![Logfire with HTTPX instrumentation](../img/logfire-with-httpx.png)](../img/logfire-with-httpx.png) [![Logfire without HTTPX instrumentation](../img/logfire-without-httpx.png)](../img/logfire-without-httpx.png) Tip `httpx` instrumentation might be of particular utility if you're using a custom `httpx` client in your model in order to get insights into your custom requests. Using OpenTelemetry PydanticAI's instrumentation uses [OpenTelemetry](https://opentelemetry.io/), which Logfire is based on. You can use the Logfire SDK completely freely and follow the [Alternative backends](https://logfire.pydantic.dev/docs/how-to-guides/alternative-backends/) guide to send the data to any OpenTelemetry collector, such as a self-hosted Jaeger instance. Or you can skip Logfire entirely and use the OpenTelemetry Python SDK directly. Data format PydanticAI follows the [OpenTelemetry Semantic Conventions for Generative AI systems](https://opentelemetry.io/docs/specs/semconv/gen-ai/), with one caveat. The semantic conventions specify that messages should be captured as individual events (logs) that are children of the request span. By default, PydanticAI instead collects these events into a JSON array which is set as a single large attribute called `events` on the request span. To change this, use [`InstrumentationSettings(event_mode='logs')`](../api/agent/#pydantic_ai.agent.InstrumentationSettings). instrumentation_settings_event_mode.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.agent import InstrumentationSettings
                        
                        instrumentation_settings = InstrumentationSettings(event_mode='logs')
                        
                        agent = Agent('openai:gpt-4o', instrument=instrumentation_settings)
                        # or instrument all agents:
                        Agent.instrument_all(instrumentation_settings)
                        

For now, this won't look as good in the Logfire UI, but we're working on it. If you have very long conversations, the `events` span attribute may be truncated. Using `event_mode='logs'` will help avoid this issue. Note that the OpenTelemetry Semantic Conventions are still experimental and are likely to change. Setting OpenTelemetry SDK providers By default, the global `TracerProvider` and `EventLoggerProvider` are used. These are set automatically by `logfire.configure()`. They can also be set by the `set_tracer_provider` and `set_event_logger_provider` functions in the OpenTelemetry Python SDK. You can set custom providers with [`InstrumentationSettings`](../api/models/instrumented/#pydantic_ai.models.instrumented.InstrumentationSettings). instrumentation_settings_providers.py
                        
                                                from opentelemetry.sdk._events import EventLoggerProvider
                        from opentelemetry.sdk.trace import TracerProvider
                        
                        from pydantic_ai.agent import InstrumentationSettings
                        
                        instrumentation_settings = InstrumentationSettings(
                            tracer_provider=TracerProvider(),
                            event_logger_provider=EventLoggerProvider(),
                        )
                        

Instrumenting a specific `Model` instrumented_model_example.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.instrumented import InstrumentationSettings, InstrumentedModel
                        
                        settings = InstrumentationSettings()
                        model = InstrumentedModel('gpt-4o', settings)
                        agent = Agent(model)
                        

 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/logfire/", "chunk_size": 4064, "crawled_at": "2025-03-25T05:14:31.073376+00:00"}', '[-0.017499173,0.0038403163,0.022566807,-0.057591546,0.043945886,0.00495546,-0.042335857,-0.019201582,0.00882217,-0.01982184,0.019940611,-0.048802372,0.0037347407,-0.025100624,-0.009237874,-0.042230282,-0.014675023,0.016733749,-0.017987462,0.0716859,0.011171229,0.027713623,-0.0021230616,0.0031870666,-0.010089079,-0.026789835,-0.03906301,0.034866378,-0.006740349,-0.024176836,0.015941931,-0.024797095,-0.026789835,-0.027476078,-0.026908608,0.0018871657,0.041781586,-0.013935993,-0.020204552,0.019069612,0.009191685,-0.037875284,-0.022566807,0.027476078,-0.0131441755,0.01751237,0.00048952486,0.020626854,-0.018568126,0.029561197,-0.025932033,0.016153082,-0.004863081,-0.0015324974,0.017485976,0.038060043,0.002494226,0.03784889,-0.017459583,0.00062603096,-0.056377426,-0.02442758,-0.005727482,0.007806004,-0.01716925,-0.006087099,-0.058436155,0.028109532,-0.013804024,0.018766081,0.029798742,0.003942593,-0.03945892,-0.014925766,-0.0069086105,-0.029851532,-0.0024958756,0.050702732,-0.011567138,-0.048723187,0.008043549,-0.0073507084,-0.016113492,-0.03441768,-0.002794457,-0.028848562,-0.039670072,-0.001003794,0.010029692,-0.036793135,0.0070603755,0.015638402,0.002429891,-0.0012982512,0.06397888,-0.010042889,-0.0030435496,-0.012721873,0.021101944,0.031435166,0.074272506,-0.07522269,-0.05094028,0.0027499173,0.04529198,-0.0026047507,0.011857471,-0.010188056,-0.029244471,-0.008690201,-0.07400857,-0.03528868,0.001760145,0.021893762,-0.060917184,-0.0051204218,-0.070471786,0.01629825,0.009515011,-0.047350705,-0.03832398,0.016245462,-0.03415374,-0.0050247437,0.0365028,-0.0182514,0.011019465,-0.06788518,-0.06339821,-0.0021577035,0.06725173,0.0012033981,0.0031276804,-0.07020784,1.0973842e-05,-0.026763441,0.011098647,0.008855162,-0.06936324,-0.036450014,0.01512372,-0.017499173,-0.034576043,-0.0027004287,-0.037980862,0.014358296,-0.02903332,0.0027235234,0.004859782,0.01639063,0.007482678,0.012411744,-0.04753546,-0.010181457,-0.021709004,0.042335857,0.016073901,0.025720881,0.020059384,0.004328604,-0.02964038,0.05278785,-0.038060043,0.017261628,-0.05207522,-0.012589903,-0.020204552,-0.002073573,-0.06630155,-0.019980203,-0.01872649,-0.037532162,0.0024661825,0.011870668,0.014345099,-0.032306165,-0.0352095,-0.044183433,0.011626525,-0.037479375,-0.04758825,0.019241173,-0.059650276,0.023833716,-0.037347406,-0.009534806,-0.019135596,0.019940611,-0.0023754535,0.06661827,0.02382052,0.016812932,0.015968326,0.036793135,-0.020098975,-0.03584295,0.023873307,-0.014701417,0.0028406463,0.014120751,0.021722201,0.028056744,0.053553276,-0.039907616,-0.016707355,0.001612504,-0.00027734242,0.01872649,-0.041095342,-0.009053117,0.00991092,-0.03159353,0.0343385,-0.015361265,-0.031963047,0.013309138,-0.016456613,-0.0024430878,0.028531834,0.036661163,-0.0005868525,0.025588911,0.037268225,-0.03819201,4.245195e-05,0.056377426,0.008637412,-0.034787197,-0.0308545,0.011712305,0.010445396,0.027027382,-0.026605079,-0.007799405,0.016153082,-0.053474095,-0.019571096,-0.0308545,0.028109532,-0.0556384,-0.039828435,-0.032649286,0.0035466838,0.03819201,-0.008987132,-0.012886834,-0.008142526,-0.04571428,0.021484656,0.04948861,0.0077928067,-0.020283733,-0.061603423,-0.012616297,-0.011349388,-0.01573078,0.013751236,-0.012484327,-0.08456614,-0.03819201,0.049383037,0.01559881,-0.023939291,0.017763112,0.004820191,-0.048300885,-0.0057967664,-0.020006597,-0.023833716,-0.017895082,0.02837347,0.00878258,0.036925104,0.031514347,-0.053315733,0.021986142,0.046743643,-0.0031623223,0.0077928067,-0.024124049,0.014622236,-0.016496204,0.06550973,0.00030538597,-0.0014153743,-0.008690201,-0.017578356,-0.017142855,-0.013632463,0.031171227,0.01916199,0.034021772,0.0010062684,-0.022025732,0.008644011,-0.004467172,0.012114813,-0.0006524249,-0.009270866,-0.05706367,0.0495414,-0.005595512,-0.023002308,-0.031487953,0.014397887,0.019175189,-0.010491586,-0.0052259974,0.019003628,-0.047746614,0.011012866,0.0051336186,-0.04054107,-0.016139885,-0.016548991,-0.005892444,0.06851863,0.011435169,0.04320686,-0.014965356,-0.05062355,-0.044526555,0.011963047,-0.021431869,0.014899371,0.022329262,0.027053775,-0.0034708013,-0.043444403,0.052682277,-0.0004033322,0.001512702,-0.02950841,-0.020046188,0.011626525,0.011679312,-0.012193994,-0.059069607,-0.013685251,0.05706367,-0.06783239,-0.026314745,-0.07363906,0.025536124,-0.030379409,0.0465061,0.010419003,0.038139224,-0.06149785,-0.02342461,-0.012233585,0.0020851202,-0.012075221,0.034312103,-0.013751236,-0.017367205,0.019109203,-0.017222038,-0.020890793,0.011105245,-0.08509402,0.03623886,0.0069679967,-0.01499175,-0.040514678,9.5677984e-05,-0.013058395,-0.014661826,-0.024110852,0.027581653,0.073480695,0.0024001978,-0.02494226,-0.023345428,-0.023200262,-0.016918506,-0.012490925,0.019148793,-0.00061159674,0.03138238,0.035579015,-0.0018228305,0.053658854,-0.041174527,0.021537444,0.03473441,0.0008326459,0.050781913,-0.0221577,0.011659517,0.008973935,-0.031065652,0.012266577,-0.023648959,-0.021458263,0.008888155,0.048987128,0.06382051,0.06566809,0.016760143,-0.041966345,-0.02386011,-0.009594193,-0.043470796,-0.003685252,0.0008808973,0.012893433,0.029957106,-0.016100295,-0.012233585,0.041306496,-0.023385018,0.02937644,-0.043576375,0.034602437,-0.019953808,0.0017634443,-0.012655888,0.03238535,0.007977564,-0.016931703,-0.055955123,-0.0064368187,0.010267237,-0.06962718,0.03729462,0.008492246,-0.052444734,0.043391615,-0.040356316,-0.040831406,0.025747275,0.02038931,-0.002789508,-0.025219398,-0.018924445,-0.011791486,0.0030451992,-0.010682941,0.0014063014,0.04666446,-0.030141864,0.013335532,0.031672712,-0.046400525,-0.009858131,-0.023926094,0.03594853,0.02837347,-0.018884854,0.04106895,0.013896402,-0.023569776,0.06424282,0.0038469147,-0.07078851,0.027581653,0.011012866,0.02207852,-0.005351369,-0.008294292,0.026565487,-0.019148793,0.0147937955,-0.008373473,0.02107555,0.008855162,-0.04125371,0.028083138,0.012629494,-0.0052952818,-0.040224344,-0.004219729,-0.04967337,-0.014754205,-0.010511382,0.018977234,0.033757832,-0.0075090723,-0.030379409,0.0071857464,-0.03185747,-0.030432198,0.039274164,0.0028192012,0.0743253,-0.012840645,-0.021286702,-0.006162982,-0.023187065,-0.02611679,0.006591883,0.038535133,-0.01582316,-0.00430221,-0.029693168,-0.021854172,0.020811612,0.008063344,-0.0100032985,0.041702405,-0.0041405475,-0.022263277,0.03959089,-0.0042857137,0.009818541,-0.049646977,-0.05062355,-0.037584953,0.029587591,-0.0014194984,0.037532162,0.013018805,0.0056944895,-0.021840975,-0.00764764,-0.004219729,0.009660177,-0.00082604744,-0.018488945,0.0015654898,-0.042362254,-0.02029693,-0.012589903,0.0560607,0.019241173,-0.010597162,0.006384031,-0.04360277,-0.032622892,0.021669414,-0.0299835,-0.0026971293,-0.020362914,-0.035710983,0.023939291,-0.0066776634,-0.00995051,-0.05706367,-0.0051600127,-0.014675023,0.038165618,-0.03932695,0.002198944,0.021788187,-0.008188716,-0.006628175,-0.027581653,0.010313427,0.0071857464,0.027581653,-0.0126031,0.0059947204,-0.02203893,0.0053051794,0.045397554,-0.020349717,-0.0063411407,-0.018013855,-0.0133025395,-0.009844935,-0.035077527,0.0039128996,0.006750247,-0.012042229,0.0075156707,0.025760472,-0.049752552,-0.00991092,0.0054602437,0.0069811936,0.0064698113,-0.013500494,-0.014173538,0.016285053,-0.0040646647,-0.004688221,-0.0069679967,-0.015216099,0.016100295,-0.0009048168,0.005206202,0.011930055,0.014411084,-0.02681623,-0.026011216,0.0028455951,0.059703063,-0.013447706,-0.010880896,0.014160342,-0.009264268,-0.017314415,0.015651599,-0.016113492,0.010834707,0.012926426,0.01916199,-0.038482346,-0.0040580663,0.036925104,-0.03341471,-0.010531177,0.007192345,-0.023754533,0.0006767568,0.022791157,0.033150773,-0.033229955,0.012761463,-0.0043220054,-0.00070686237,0.0019844933,-0.009303859,-0.03594853,0.0059848228,-0.020732429,0.011448366,0.05505773,-0.035077527,0.011481358,-0.0034015174,0.0139096,-0.007588254,0.006588584,0.01768393,0.00045612003,-0.014886174,-0.02659188,0.04294292,-0.009627185,0.020956777,0.05323655,0.029957106,-0.021735398,-0.013975584,0.037083466,-0.013322335,-0.011751896,-0.04827449,0.027502472,-0.0055658193,0.039089404,-0.02850544,0.05679973,0.0029181784,-0.011963047,0.038482346,0.018924445,-0.0047773006,0.02207852,-0.026789835,0.011270206,0.03877268,0.020692838,0.025047837,0.00016434344,-0.010366214,-0.013526888,-0.0016834376,-0.047482673,0.02490267,-0.021563837,0.018027052,-0.032358956,0.059544697,0.023596171,0.0030732427,-0.008307489,-0.005595512,-0.008855162,0.080079176,0.026064003,0.014067963,0.013922797,-0.007205542,0.032411743,-0.008096337,-0.0456351,0.022395248,-0.025918836,-0.021972943,-0.053817216,-0.049515005,-0.0061860764,-0.019795446,0.02937644,0.0026245462,-0.0013032001,-0.006502804,0.006426921,-0.036608376,-0.01482019,0.0068822163,0.03795447,-0.001351864,-0.040514678,-0.0036093695,-0.016614977,-0.053896397,-0.012477729,-0.017142855,-0.0051006265,-0.012002639,-0.015321675,0.004450676,-0.0074298903,-0.016892113,0.033282742,-0.0033520288,-0.022580003,0.009244473,-0.004628835,0.025272185,0.010102276,0.005094028,0.015414054,0.034655225,0.010913889,-0.029930713,0.0068822163,0.02768723,-0.012484327,0.01716925,0.039749254,0.008894754,-0.005727482,0.05249752,-0.004467172,0.007845595,-0.024229625,0.001951501,0.012022434,-0.014899371,0.004879577,-0.010102276,-0.036476407,-0.008393269,-0.02659188,0.015651599,0.019914217,-0.018581325,0.032490924,-0.0008454305,0.023028702,-0.034523256,0.027977562,0.040514678,0.00037673206,-0.026064003,-0.015361265,0.010062684,-0.014411084,-0.023635762,0.05035961,0.0020884194,-0.0064005274,-0.032886833,0.0019630482,-0.028241502,0.008109534,-0.0067568454,0.014543054,0.029693168,-0.007218739,-0.021735398,-0.009323655,-0.005288683,0.008545034,0.0068822163,-0.034787197,-0.041939948,-0.0029808641,-0.007383701,0.035235893,-0.018700097,0.014648629,-0.004995051,0.011725502,-0.01768393,0.02547014,-0.017393598,-0.03415374,-0.0057340804,0.021049157,-0.0024645329,-0.029851532,-0.0094952155,-0.020626854,-0.032570105,-0.034496862,0.009455624,-0.0013015505,-0.021260308,0.012985812,0.01008248,0.014411084,-0.09686571,0.011171229,0.02950841,-0.024665125,0.01077532,0.016733749,0.018013855,0.04450016,-0.017697128,-0.016707355,-0.0029957106,-0.0058132624,-0.021920156,-0.03850874,0.015348068,-0.018225007,0.026169578,0.024097655,0.014569447,-0.00094028364,-0.013672054,0.0219...', '2025-03-25 05:14:31.048205+00'), ('36', 'https://ai.pydantic.dev/install/', '0', 'PydanticAI Installation Guide', 'This section outlines the installation process for PydanticAI, including usage details with Pydantic Logfire, instructions for running examples, and options for a slim installation.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Installation  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * Installation  [ Installation  ](./) Table of contents 
                * Use with Pydantic Logfire 
                * Running Examples 
                * Slim Install 
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Use with Pydantic Logfire 
              * Running Examples 
              * Slim Install 
Installation PydanticAI is available on PyPI as [`pydantic-ai`](https://pypi.org/project/pydantic-ai/) so installation is as simple as: pipuv
                        
                                                pip install pydantic-ai
                        
                        
                                                uv add pydantic-', '{"source": "pydantic_ai_docs", "url_path": "/install/", "chunk_size": 5000, "crawled_at": "2025-03-25T05:14:31.099397+00:00"}', '[-0.019729486,-0.008485351,0.019924551,-0.04528307,0.019004956,-0.0061584977,-0.04115883,0.042830817,-0.021986673,0.003018291,0.0051657534,-0.0744593,-0.011613366,-0.030207291,0.026905112,0.014462716,-0.02818697,0.00013138622,-0.006384913,0.07033506,0.03388567,0.033133276,0.009300446,0.030931821,0.0049358546,-0.0019280139,-0.005346886,0.038093515,0.0074682236,-0.032436613,0.033467673,-0.025344586,-0.036895253,0.022153871,0.018266493,-0.0033596556,-0.0050751874,0.008332085,0.0037759114,-0.0035111797,-0.002079538,-0.051135037,0.0404343,-0.0030513823,-0.06749268,-0.00256546,0.00061045063,0.0406851,0.012623527,-0.029538495,-0.07301024,0.012930059,-0.034861,-0.01499218,-0.034833133,-0.0069457265,-0.01978522,0.0142955175,-0.0034240969,-0.0285353,0.0016937611,0.0008377368,-0.018099295,0.059132725,-0.01854516,-0.01811323,-0.06002445,0.04202269,-0.052556228,-0.036449388,0.027755039,0.036560856,-0.037814848,-0.06492896,-0.03260381,-0.01794603,0.0067193112,0.09117921,-0.016608438,-0.05383809,-0.020885946,0.04288655,-0.011536733,-0.0005690863,-0.0170961,-0.038149245,-0.048766386,0.015535577,-0.009495512,-0.015187246,0.010227008,0.0049184384,-0.03812138,-0.0073567573,0.08532724,0.0095442785,0.032018613,0.029761428,0.013529188,0.035362594,0.022139939,-0.03374634,-0.042524286,0.018364027,0.014351251,-0.008311185,0.030485958,-0.029761428,-0.010784337,0.01443485,-0.12562221,-0.011892031,-0.0057405,0.039403237,-0.072620116,0.023407865,0.017876362,0.02124821,-0.0077817217,-0.06760414,-0.04377828,0.00020029051,0.012762859,0.012818593,0.014922514,-0.010777371,-0.010847038,-0.040155634,-0.031517018,-0.002485344,0.022418603,-0.01490858,0.046592798,-0.027141977,0.0017825855,-0.013034558,-0.0046850564,-0.018280428,-0.018754158,0.0404343,0.0401835,-0.038845908,-0.005137887,0.024174193,-0.02719771,0.0058554495,-0.04322095,-0.03126622,-0.025553586,-0.0012870842,0.031684216,0.006726278,-0.040239234,-0.038149245,-0.053977422,0.019813085,0.01794603,0.040768698,0.0076284558,-0.044084813,-0.03316114,0.073065974,-0.018447626,-0.019590154,-0.03622646,-0.011202335,-0.031851415,-0.017653432,-0.04801399,-0.016385505,-0.01790423,-0.032185815,-0.013710321,0.0073985574,0.034080736,-0.018795958,-0.015814241,-0.019562287,-0.02707231,-0.056736205,-0.030597422,-0.0059111826,-0.03923604,-0.011989564,-0.008492318,-0.01858696,-0.02492659,0.013759087,-0.009774176,0.067938544,0.018684492,0.03006796,0.03363487,0.047010794,0.019395087,-0.0071477587,0.060971916,-0.0019367221,0.032631677,0.018364027,-0.011390435,0.0076284558,0.0046119066,0.014574182,0.009349213,-0.020593347,0.011146602,-0.012539928,-0.011446167,-0.0341086,0.026403515,-0.068886004,0.0399327,0.006451096,-0.029036898,-0.00751699,-0.029733561,-0.011892031,0.027239509,0.016385505,-0.018935291,0.025692917,0.020495815,-0.021192478,-0.011822365,-0.0069666263,0.03101542,-0.06732548,0.022627603,0.03842791,0.031628482,0.008945148,-0.024982322,0.03109902,0.014978247,-0.032575946,0.012379695,0.003636579,0.008380852,-0.0031959398,0.0052214866,-0.00867345,0.007837455,0.008924249,0.00628738,-0.015535577,-0.015521644,-0.036978852,0.038818043,0.03851151,0.041437495,0.0073149577,0.025706852,0.01321569,-0.024383193,-0.03867871,-0.025302786,-0.013027592,-0.031712085,-0.00916808,-0.011662132,0.03374634,-0.02176374,-0.0072383247,-0.0025776518,-0.042357087,-0.029956494,0.0146856485,-0.051330104,-0.011717865,0.045728937,0.04754026,0.062476706,0.01443485,-0.022864468,0.030931821,-0.011780566,0.03366274,0.00912628,0.022084206,-0.015270845,-0.01623224,0.055510078,0.031544883,-0.0050229374,0.035752725,0.00019756917,-0.020551547,-0.013139057,0.005904216,0.0033579138,0.019339355,0.022669403,-0.02278087,0.024508592,-0.0060783816,0.06442736,0.005113504,0.0010467356,0.008464451,0.043806147,0.020621214,0.0038246778,-0.038400043,-0.0026873762,0.01897709,0.008206686,-0.018196829,0.03661659,-0.030290892,-0.029789295,0.012846459,-0.006283897,-0.037424717,-0.0018287394,-0.022683335,0.052556228,-0.023296399,0.041771892,-0.019799152,-0.06743694,-0.03650512,0.050131842,-0.009119314,-0.075741164,-0.00010357414,0.054980617,-0.02651498,0.0051762033,-0.006461546,0.018043563,-0.025706852,-0.02540032,0.032798875,-0.010540506,-0.027824705,0.0028180003,0.013473456,-0.019478688,0.037034586,-0.047595993,-0.025818318,-0.065932155,-0.007983753,-0.024996255,0.0023094367,0.020509748,0.02073268,0.03327261,0.012818593,-0.019715553,0.011912931,0.02343573,0.025943717,-0.0046989894,-0.011634266,-0.007677222,-0.05470195,-0.013842687,0.03143342,-0.0682172,-0.0020568965,-0.0050124875,-0.004956755,-0.013786954,0.010380274,-0.010289707,-0.022362871,-0.011139636,0.008513218,0.06582069,-0.017597698,-0.0024330942,-0.025135588,-0.042914417,-0.0061027645,0.0055315015,-0.011390435,0.0028214836,0.0046084234,0.01949262,-0.00016349801,0.026528914,0.0086873835,0.029036898,0.008234552,0.010693772,0.0019210472,0.00096836104,0.061417777,0.06548629,-0.017583765,0.0025689434,0.008276352,-0.00260726,-0.0070467424,-0.0019750386,0.0058589326,0.08092433,0.008380852,-0.026194515,-0.0027291758,-0.010045875,5.976059e-05,-0.0065416624,0.028005838,0.08616324,0.01257476,-0.041966956,-0.019367222,0.027866505,-0.045868266,0.025205255,-0.02052368,-0.015187246,-0.04879425,0.0071825916,0.021220343,0.022474337,0.022362871,-0.022251405,-0.05918846,-0.023965195,-0.003530338,-0.068050005,0.08187179,0.060804714,-0.055983808,0.023756197,-0.050187577,0.009042681,0.00031284508,0.0519989,-0.016650237,0.002764009,-0.0152569115,-0.02981716,0.017082168,0.0135431215,0.017207567,0.02368653,-0.054590486,-0.032659546,0.036477257,-0.020718748,-0.022906268,0.013006692,-0.047986124,-0.009697543,-0.013027592,-0.0017721356,-0.029399164,-0.0067227944,0.018015696,-0.014323384,-0.04951878,0.060247384,-0.02475939,0.041130964,0.008457485,0.060080186,0.020969545,-0.052082498,0.028159104,-0.03190715,-0.018461559,0.04210629,0.0030792488,0.0032447062,-0.0045666234,0.03508393,-0.04249642,-0.014643849,-0.029677829,-0.05325289,-0.041799758,0.026835445,0.012330929,-0.054813415,-0.011864165,0.011669099,-0.0015195954,0.00097445684,0.028451702,-0.0013053716,0.07256438,0.0005124824,-0.0068621268,-0.00026407867,0.024355326,-0.025692917,0.012630493,0.048431985,-0.017207567,0.0061027645,-0.021986673,-0.012031363,-0.0026386098,-0.01257476,-0.010052842,-0.0057091503,0.012755893,-0.009070547,0.042830817,-0.0141910175,-0.011766632,0.023296399,-0.025985517,-0.013076358,0.022237472,-0.051859565,0.0013680713,0.015368378,0.032743145,0.0115437,0.04377828,-0.005259803,0.015869975,0.021568675,-0.028591035,0.022042407,-0.041576825,-0.016887102,0.012337895,0.01317389,-0.005427002,-0.046230532,-0.008039487,-0.021234278,-0.029064765,0.0083738845,-0.0012121929,0.006736728,0.0042182924,-0.07334464,0.032492347,-0.0027117594,-0.018015696,-0.057962332,-0.0171379,-0.0046084234,0.0074821566,-0.020412216,-0.017040368,-0.0042949254,-0.010888837,0.0026577679,-0.0055245347,0.015382311,0.023909463,0.068774536,-0.024438925,0.0054862183,-0.018573025,0.03238088,0.019297555,-0.0022084205,-0.03675592,0.04400121,-0.0016789569,0.013821786,-0.020551547,0.029204099,0.006977076,0.0049288883,0.022962,0.049128648,-0.02168014,-0.040629365,-0.015006113,-0.0055245347,-0.008318152,-0.041771892,-0.0138287535,-0.0043645916,0.002941658,-0.014051685,-0.009962276,-0.02643138,0.0005751821,-0.018350095,-0.015800308,0.014239784,0.037898447,-0.026194515,0.004869672,-0.022460403,0.008750083,0.019186089,0.014365183,0.0146856485,-0.0011904223,-0.009300446,-0.021652276,-0.012275196,0.006283897,0.038065646,-0.0046920227,-0.043165218,0.03157275,-0.0037968114,-0.026835445,0.0055663344,0.020063885,-0.0010423815,0.012860392,-0.0003729322,0.010206108,-0.024536459,-0.008743116,-0.019701619,-0.0091541475,-0.015159379,-0.033049677,-0.011174468,0.021944873,-0.0050856373,0.013786954,0.045896135,-0.040378567,-0.0005669092,-0.0050090044,0.0131529905,-0.0031419485,-0.0011991306,-0.014365183,-0.0076214895,-0.044837207,-0.03748045,0.009732377,-0.0172633,0.054116752,0.034080736,0.0148946475,0.011766632,-0.0047686556,0.020997413,-0.01777883,0.009098414,-0.014379117,0.03101542,0.042162023,-0.0003600875,-0.021067077,0.04313735,-0.017597698,-0.014204951,0.012588694,0.014406984,-0.019729486,0.015382311,0.0073985574,0.01623224,0.009056615,0.026013384,0.006280414,-0.015842108,-0.023881596,-0.008750083,0.020635147,-0.07663289,0.031879283,0.011223235,0.00024165485,-0.025804384,0.03842791,0.035613395,0.046843596,0.00871525,-0.0032116147,-0.0073219244,0.024954455,0.0044447077,0.026919045,-0.019436888,-0.004413358,0.012491161,-0.039375372,-0.019213956,0.016859235,-0.01880989,-0.013598855,-0.063925765,0.012149797,0.052166097,-0.037034586,0.027002644,0.018865624,0.0037759114,0.020370416,0.02017535,-0.034972463,0.01683137,-0.0054026186,0.0033161142,-0.012170697,-0.027128043,0.017639497,0.0066148117,-0.07540677,-0.032826744,0.0031767816,0.014351251,0.0009413654,-0.019172156,0.0026647346,-0.017458366,-0.010394206,0.042440686,-0.011104803,-0.0405179,-0.013076358,-0.011049069,0.01996635,-0.016204372,-0.0171379,0.008346018,0.014156185,-0.024536459,0.0013698129,-0.010129475,0.027964039,-0.00865255,0.0013175632,0.01623224,-0.021917006,0.0017973896,0.023157066,-0.006203781,0.007161692,-0.010080708,-0.015340512,0.0115019,0.0057335333,0.02048188,-0.01910249,-0.04361108,0.04266362,-0.032798875,0.0094397785,9.415831e-05,-0.00052119076,0.011710899,0.0067820107,-0.020356482,-0.039208174,0.019896684,0.035669126,-0.00025428185,-0.013097257,0.011662132,0.012156763,-0.0058763493,-0.014964313,0.023811929,0.0005534114,-0.003485055,0.023198865,-0.02792224,-0.0072243917,-0.020913813,-0.003936144,-0.042830817,0.036003526,-0.0053085694,-0.024104528,0.027657507,-0.025692917,-0.026027316,-0.008798849,-0.016970702,-0.0062002973,0.008422651,0.017973896,0.019381154,-0.021833407,-0.013779987,-0.03555766,0.020537615,-0.002429611,-9.317863e-05,-0.005029904,-0.031182619,-0.005249353,0.027991904,-0.022989867,-0.011738765,-0.022265337,-0.029148364,-0.033523407,-0.05509208,0.018754158,0.015354444,-0.033384074,0.0056360005,-0.00805342,0.0053817187,-0.08772376,-0.019854885,-0.028451702,0.01090277,0.030263025,-0.0043227915,0.02514952,0.04308162,-0.018712359,-0.028981166,0.011202335,-0.008102186,-0.05584448,0.0060748984,0.02463399,-0.01880989,0.043332417,-0.017221501,0.025414253,0.017890297,...', '2025-03-25 05:14:33.103726+00'), ('37', 'https://ai.pydantic.dev/install/', '1', 'Installation Guide for PydanticAI', 'This document provides installation instructions for the `pydantic_ai` package, which requires Python 3.9 or higher. It discusses core dependencies and offers options for a slim version. The integration with Pydantic Logfire is mentioned, including installation commands and links to setup documentation.', 'ai
                        

(Requires Python 3.9+) This installs the `pydantic_ai` package, core dependencies, and libraries required to use all the models included in PydanticAI. If you want to use a specific model, you can install the "slim" version of PydanticAI. Use with Pydantic Logfire PydanticAI has an excellent (but completely optional) integration with [Pydantic Logfire](https://pydantic.dev/logfire) to help you view and understand agent runs. To use Logfire with PydanticAI, install `pydantic-ai` or `pydantic-ai-slim` with the `logfire` optional group: pipuv
                        
                                                pip install "pydantic-ai[logfire]"
                        
                        
                                                uv add "pydantic-ai[logfire]"
                        

From there, follow the [Logfire setup docs](../logfire/#using-logfire) to configure Logfire. Running Examples We distribute the [`pydantic_ai_examples`](https://github.com/pydantic/pydantic-ai/tree/main/examples/pydantic_ai_examples) directory as a separate PyPI package ([`pydantic-ai-examples`](https://pypi.org/project/pydantic-ai-examples/)) to make examples extremely easy to customize and run. To install examples, use the `examples` optional group: pipuv
                        
                                                pip install "pydantic-ai[examples]"
                        
                        
                                                uv add "pydantic-ai[examples]"
                        

To run the examples, follow instructions in the [examples docs](../examples/). Slim Install If you know which model you're going to use and want to avoid installing superfluous packages, you can use the [`pydantic-ai-slim`](https://pypi.org/project/pydantic-ai-slim/) package. For example, if you're using just [`OpenAIModel`](../api/models/openai/#pydantic_ai.models.openai.OpenAIModel), you would run: pipuv
                        
                                                pip install "pydantic-ai-slim[openai]"
                        
                        
                                                uv add "pydantic-ai-slim[openai]"
                        

`pydantic-ai-slim` has the following optional groups:
              * `logfire`  installs [`logfire`](../logfire/) [PyPI ](https://pypi.org/project/logfire)
              * `openai`  installs `openai` [PyPI ](https://pypi.org/project/openai)
              * `vertexai`  installs `google-auth` [PyPI ](https://pypi.org/project/google-auth) and `requests` [PyPI ](https://pypi.org/project/requests)
              * `anthropic`  installs `anthropic` [PyPI ](https://pypi.org/project/anthropic)
              * `groq`  installs `groq` [PyPI ](https://pypi.org/project/groq)
              * `mistral`  installs `mistralai` [PyPI ](https://pypi.org/project/mistralai)
              * `cohere` \- installs `cohere` [PyPI ](https://pypi.org/project/cohere)
              * `duckduckgo` \- installs `duckduckgo-search` [PyPI ](https://pypi.org/project/duckduckgo-search)
              * `tavily` \- installs `tavily-python` [PyPI ](https://pypi.org/project/tavily-python)
See the [models](../models/) documentation for information on which optional dependencies are required for each model. You can also install dependencies for multiple models and use cases, for example: pipuv
                        
                                                pip install "pydantic-ai-slim[openai,vertexai,logfire]"
                        
                        
                                                uv add "pydantic-ai-slim[openai,vertexai,logfire]"
                        

 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/install/", "chunk_size": 3806, "crawled_at": "2025-03-25T05:14:28.735314+00:00"}', '[-0.016529601,-0.010083695,0.032293353,-0.053047895,0.019529182,-0.004863149,-0.049499456,0.027902478,-0.030685067,0.034437735,-0.01331303,-0.063514516,-0.016567893,-0.02476249,0.0189165,0.012553562,-0.0024507209,-0.00044355495,-0.040411364,0.052435216,0.03418245,0.031221163,-0.015967978,0.016465781,-0.022720225,-0.004113254,0.00021798811,0.037986174,0.003179874,-0.013989531,0.004237705,-0.028719384,-0.033544242,-0.013619371,-0.02631972,-0.004017523,-0.020563079,0.0068990346,0.002793758,0.013619371,0.024736963,-0.05034189,0.0014638909,0.0045504267,-0.04975474,0.0395434,0.022898924,0.023664773,-0.027008986,-0.0066118403,-0.036071546,0.011002716,-0.018559104,4.4094977e-06,-0.017486915,0.031833842,-0.0074287476,0.03448879,-0.017525207,-0.040590063,0.0005983205,-0.027340854,0.0019321764,0.04725296,-0.006777775,-0.014614976,-0.040743235,0.030812709,-0.062595494,-0.019618532,0.010824017,0.028413044,-0.038573325,-0.055958126,0.00306021,0.007154318,-0.012413156,0.08822595,-0.0068352134,-0.033773996,-0.02099706,0.023945585,0.016223261,-0.0184187,-0.0349483,-0.050546117,-0.08332451,0.044010863,-0.027289797,0.0022704268,0.020205682,-0.030097915,-0.046997678,-0.02803012,0.060553227,0.0139384745,0.054681707,0.016810413,0.007958461,0.060757454,0.016108384,-0.038394626,-0.0026294193,0.025043303,0.018074065,0.010958041,0.027213212,-0.034386676,0.02423916,0.038139343,-0.07459381,-0.011334584,0.02647289,0.055804957,-0.067343764,0.009336991,-0.006956473,0.03173173,-0.023766886,-0.04605313,-0.033008147,-0.026128259,0.04204518,0.0017981526,0.020435438,0.032523107,-0.0011304269,-0.046384998,-0.013721484,-0.016567893,0.008015899,0.017589027,0.036250245,-0.034718543,0.020001456,-0.027289797,-0.01331303,0.017806018,-0.01695082,0.035178054,0.03663317,-0.01664448,-0.023805179,0.017767726,-0.050495062,-0.011117592,-0.0036473619,-0.057183485,-0.022439413,0.015253184,0.00038212736,0.022324534,0.0021108747,-0.021660797,-0.07382797,0.020371618,0.018839916,0.017091226,0.02509436,-0.021673562,-0.038777553,0.04094746,-0.03510147,-0.020754542,-0.022809574,-0.006554402,-0.025413465,-0.017142281,-0.060706396,-0.033493184,-0.01624879,0.015393591,-0.00483443,-0.014346928,0.05452854,0.0047993283,-0.0032261442,0.0020039747,-0.025158182,-0.09067667,-0.039977383,0.018814389,-0.04434273,-0.021482099,-0.05159278,-0.027494024,-0.04477671,0.023639245,-0.023243556,0.07627869,0.024226397,0.011034626,0.0031144577,0.06662897,0.03785853,-0.010843163,0.018252764,0.0037016096,0.07913786,0.011826005,0.0021124703,0.022260714,0.01986105,-0.009828412,0.030608483,-0.007473422,-0.010970805,-0.00930508,-0.0033920784,-0.037909586,0.017384801,-0.061574362,0.043806635,0.022477705,-0.018010246,-0.012757789,-0.0057853605,-0.04561915,0.02178844,0.003985612,0.006630987,0.007945697,0.007364927,0.0015875438,-0.024902897,0.014308636,-0.00048663403,-0.053660575,0.01878886,0.05294578,0.011774948,0.027315326,-0.03137433,0.03390164,-0.008775367,-0.029536292,0.022452177,0.0008926942,0.020971533,-0.028132232,-0.0066182227,-0.019388776,0.010568733,0.032293353,0.013134332,-0.0036760813,0.0010761792,-0.04975474,0.01135373,0.04250469,0.05330318,-0.004266424,0.023894528,-0.0010674038,-0.019299427,-0.013721484,-0.04648711,-0.032242294,-0.060604285,0.02071625,-0.01933772,0.05325212,0.031757258,-0.0018731421,-0.015725458,-0.023345668,0.0011862702,0.04158567,-0.026906872,-0.00094534643,0.043959804,0.04832515,0.037909586,-0.007556389,-0.012132345,0.028055647,0.0021651224,0.030914823,0.019235605,0.036709756,-0.033595297,-0.038828608,0.03479513,0.03987527,-0.0017215676,0.056979258,0.002993198,-0.024277452,-0.031808313,-0.00306021,-0.0033218756,-0.0005281176,0.0005664101,-0.041789897,0.04587443,-0.014295871,0.047329545,0.025362408,-0.0101794265,0.0189165,0.011902589,0.02111194,0.0011176628,-0.045338336,-0.0082648005,-0.0015013856,0.015368062,0.012770553,0.01055597,-0.016325375,0.0060948916,0.013172625,-0.0032612458,-0.03497383,-0.02940865,-0.02739191,0.020818362,-0.055345446,0.035229113,0.012923723,-0.035050415,-0.008596669,0.037935115,0.0022145836,-0.06673109,0.017882604,0.0075117145,-0.054017972,-0.016759356,0.0009636949,0.0019561092,0.005510931,-0.04064112,0.03847121,-0.0049652625,-0.0049876,0.016350903,-0.0037430932,0.0021220434,0.04201965,-0.08077168,-0.017920896,-0.033467658,0.002356585,-0.024813548,0.03862438,-0.0045280894,0.028898083,0.029000197,0.039313648,-0.0012923724,-0.016580658,0.023792414,0.03198701,0.006129993,-0.0070011476,0.010830399,-0.060349,-0.027621666,0.03326343,-0.058919415,0.0018683556,-0.017767726,-0.0004970049,-0.032395467,0.006047026,0.0097518265,-0.025234766,-0.024098754,0.014257579,0.05330318,-0.046972148,-0.019427069,-0.0039696572,-0.036454473,-0.0039728484,0.009841176,0.0021683136,0.0066054584,-0.014819203,0.023945585,-0.022694696,0.013249209,0.00026984254,0.012342953,0.01578928,-0.004052624,-0.013364087,0.016682772,0.05769405,0.087000586,-0.026000617,-0.002283191,-0.0038930723,-0.008283947,-0.018673982,0.032523107,0.009139147,0.05123538,0.007913786,-0.010798489,-0.016976347,-0.025017776,-0.017742198,-0.008035046,0.017346509,0.075308606,0.010543205,-0.026600532,0.021150231,0.027570609,-0.039058365,0.011092065,-0.01955471,0.0092731705,-0.03614813,0.043806635,0.008188216,0.033799525,0.02316697,-0.0040749614,-0.038777553,-0.01664448,-0.017486915,-0.06519938,0.040079497,0.060297944,-0.039466817,0.008762604,-0.041355915,0.014895787,0.012023849,0.040845346,-0.045185164,0.0017630511,-0.032446522,-0.029153366,0.017155046,-0.01508725,0.027800364,0.02019292,-0.03492277,-0.012662058,0.018240001,-0.023971112,-0.015967978,-0.01946536,0.00095412176,-0.020295031,0.009911379,0.0050354656,-0.0043462003,-0.0035739678,0.028438574,0.02647289,-0.03436115,0.022311771,-0.010364506,0.0509801,0.00045512247,0.06918181,0.030480841,-0.02803012,0.0003480231,-0.011615396,0.010485766,0.047533773,0.0017662422,-0.0063565574,-0.000596725,0.0063725123,-0.045057524,-0.006930945,-0.02194161,-0.038752023,-0.061778586,0.008156305,-0.0083158575,-0.048631493,-0.016874233,-0.009037033,0.026115494,-0.021405514,0.06279972,-0.014436278,0.023371197,-0.0025927222,-0.004796137,0.005230119,0.045823373,-0.054579593,0.0071926103,0.044598013,-0.01401506,0.014040588,-0.018137887,-0.02010357,0.005836417,-0.019414304,0.014985137,0.014308636,0.019069672,-0.005900238,0.05294578,-0.0073521626,-8.0972706e-05,-0.0051407698,-0.013025836,-0.008545613,0.03479513,-0.02726427,-0.0035994963,0.0397221,0.017806018,0.017193338,0.04452143,-0.03676081,0.023703065,0.02010357,-0.03604602,-0.005676865,-0.024162576,-0.0015181386,0.014129938,0.041662253,-0.011481372,-0.032701805,-0.037628777,-0.02726427,-0.026217608,-0.0069947657,0.004017523,-0.02986816,-0.0069947657,-0.06943709,0.028183289,-0.007064969,0.009285934,-0.03247205,0.012234458,0.0026007,0.023511603,-0.029281009,-0.015533996,0.002267236,-0.023741359,-0.007256431,-0.005606662,0.009279552,0.019682351,0.04051348,-0.005654528,0.010447474,-0.022694696,0.02445615,0.011570721,-0.025464522,-0.034233507,0.039951853,-0.0004260042,0.030812709,-0.019516418,0.009694388,0.019924872,0.020052513,0.016350903,0.041458026,-0.023422254,-0.030557426,-0.0018252764,-0.019133491,-0.0066756615,-0.049193114,-9.952064e-05,0.008232891,0.005064185,-0.011468608,0.00061028695,-0.04018161,0.009356137,-0.0136831915,-0.024660379,0.015036194,0.030429784,-0.015980743,-0.00171359,-0.017499678,0.0197717,-0.012904577,0.015674401,0.019503653,-0.010689993,0.003883499,-0.021341695,-0.010543205,0.0056513366,0.035637565,0.004575955,-0.03221677,0.02362648,-0.0013689573,-0.032574166,0.023575423,0.03002133,-0.0317062,-0.021048117,-0.0005420784,0.0018683556,-0.006429951,0.0072117564,-0.0013043387,-0.018967558,-0.011545192,-0.022311771,0.0013083275,-0.021699091,0.00080693496,-0.002169909,0.047150847,-0.06668003,0.011915354,-0.021520393,0.040870875,-0.0023789224,0.016886998,0.007167082,-0.011372876,-0.024928426,-0.048682548,0.007013912,-0.020218447,0.034207977,0.044878826,0.010173044,0.016670007,-0.0254007,0.022439413,-0.0122982785,-0.0022847867,-0.034259036,0.02032056,0.027851421,0.010064549,-0.026830288,0.039186005,-0.00036138558,-0.015597817,0.017052932,-0.0018077258,-0.036275774,0.0066628973,0.016733829,0.023473311,0.017129518,0.005472638,0.0024969908,-0.016797649,-0.023869,-8.4413055e-05,0.007256431,-0.07719771,0.026804758,0.02769825,0.0009429531,0.0074223652,0.028157761,0.028259875,0.03678634,-0.004639776,-0.00047785864,-0.01830382,0.047201905,0.009924143,0.046308413,-0.015712695,-0.014551155,0.011257999,-0.047635887,-0.01315986,-0.0042696153,-0.014806438,0.0031910427,-0.05478382,0.0076457383,0.055294387,-0.04097299,0.01462774,0.017129518,-0.013951239,-0.0042089853,0.023894528,-0.04081982,0.011653688,-0.027621666,0.0040621976,-0.004757845,-0.038292512,0.009783737,0.0041643106,-0.031119049,-0.060349,0.015687166,0.019120729,0.00538648,-0.012445067,0.009388048,-0.003966466,0.015827572,0.038164873,-0.019733408,-0.03259969,0.0008607838,-0.016299846,0.031680673,-0.025541106,-0.025209237,-0.003522911,0.019376012,-0.013466201,-0.011443079,-0.005625808,0.00062265224,-0.024992246,0.004237705,0.008641344,-0.014819203,-0.021009825,0.020677958,-0.015814807,-0.007964843,-0.007837201,-0.03693951,-0.01903138,-0.0074861865,-0.015010665,-0.038598854,-0.03745008,0.039926328,-0.03831804,0.017576264,-0.007760616,-0.008915774,0.0020119525,0.011219706,0.01077296,-0.041713312,0.022120308,0.040615592,0.012540798,-0.00016703115,-0.0056960112,0.009254024,-0.0020215255,0.0023948776,0.001860378,0.010211336,-0.010377271,0.023332905,-0.03663317,-0.009873087,0.00024331702,-0.013606606,-0.029025724,0.03431009,-0.010677229,-0.0022800001,0.01869951,-0.007907404,-0.017806018,0.00052652205,-0.026677117,-0.006943709,0.007390455,0.015802044,0.009719917,-0.016236026,-0.029127838,-0.027749307,0.021418279,-0.024583794,0.010185809,-0.005897047,-0.0044355495,-0.00018956789,0.04418956,-0.022681931,-0.035382282,-0.027187685,-0.033825055,-0.020907711,-0.04076876,0.008730693,0.017767726,0.0060948916,0.010568733,-0.0023709447,0.0022353255,-0.059481036,-0.010013492,-0.029000197,0.016019035,0.021596977,0.02494119,0.013874654,0.036122605,-0.033365544,-0.006822449,0.012930105,-0.013568314,-0.030787181,-0.005801316,0.03556098,-0.019758936,-0.0025257103,-0.037475605,0.03844568,-0.0071926103,-0.015470175,0.0005656...', '2025-03-25 05:14:33.154641+00'), ('38', 'https://ai.pydantic.dev/message-history/', '0', 'Messages and Chat History', 'This section discusses the management of messages and chat history within the PydanticAI framework, providing insights into how users can interact with their data and access chat logs effectively.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Messages and chat history  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * Messages and chat history  [ Messages and chat history  ](./) Table of contents 
                  * Accessing Messages from Results 
                  * Using Messages as Input for Further Agent Runs 
                  * Storing and loading messages (to JSON) 
                  * Other ways of using messages 
                  * Examples 
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Accessing Messages from Results 
              * Using Messages as Input for Further Agent Runs 
              * Storing and loading messages (to JSON) 
              * Other ways of using messages 
              * Examples 
Messages and chat history PydanticAI provides access', '{"source": "pydantic_ai_docs", "url_path": "/message-history/", "chunk_size": 4999, "crawled_at": "2025-03-25T05:14:28.649856+00:00"}', '[-0.0029360745,-0.0086143995,0.043071996,-0.007088933,0.017716948,0.0051686396,-0.020358698,0.037099347,-0.0062849224,-0.00030464467,0.0030778532,-0.06914491,-0.035118036,-0.02524019,0.010078847,-0.00829136,-0.02470897,0.005893685,-0.0077960314,0.061449382,0.047465343,0.030236542,0.015893567,0.024637183,0.004849189,-0.0079898555,0.0019346506,0.06185139,0.00033694867,-0.046201896,0.02470897,-0.02572834,-0.052834984,0.013732789,0.020344341,0.0055096266,-0.0102296,0.009016405,-0.0049066185,0.008779509,-0.0036144585,-0.029834537,0.04146398,0.024105962,-0.060587943,0.0033506425,-0.0058900956,0.031586133,0.010696213,0.00032393733,-0.08114764,0.005297856,-0.025986772,0.006356709,-0.01426401,-0.02169393,-0.029044883,-0.0019974639,-0.010732106,-0.022785086,0.0044364156,0.00073626195,-0.0066618025,0.04651776,-0.020932991,-0.011062325,-0.054845013,0.01297185,-0.056022312,-0.0069094663,0.034371454,0.034314025,-0.0442493,-0.06185139,-0.03526161,-0.03767364,0.019511616,0.08729258,-0.013926613,-0.058147196,-0.007164309,0.03698449,-0.0075160637,0.009210229,-0.0124765225,-0.031959422,-0.027207145,-0.009210229,-0.0010794919,-0.039827242,-0.031643562,0.0036970132,-0.03299315,0.009669663,0.10825429,-0.0054450184,0.0011458946,0.019827476,0.0018368412,0.00088477065,0.03655377,-0.058434345,-0.05059524,0.015434133,0.025742698,-0.0040631252,0.019023465,-0.021019135,-0.037702356,-0.00414568,-0.129216,-0.010042954,-0.023818815,0.030380117,-0.06776661,0.013790218,0.019583402,-0.020861205,0.009935274,-0.048470356,-0.044019584,0.0025143279,0.023215806,0.0043466827,0.018492244,-0.019037822,-0.009238943,-0.043301716,-0.042354133,-0.017070869,0.038420223,-0.015836138,0.040487677,-0.030150399,-0.023876244,-0.0069453595,-0.020775061,-0.009806058,-0.027006144,0.027551722,0.022584084,-0.032102995,-0.027652223,0.023187092,-0.028915668,0.006733589,-0.045886036,-0.0025107386,-0.0356349,-0.014091722,0.028729023,0.015979711,-0.050308093,-0.030667262,-0.041550122,0.028082943,0.032275286,0.037817214,0.0020513039,-0.05231812,-0.024967402,0.049819946,-0.02948996,-0.0399421,-0.029805822,-0.010531103,-0.030494975,-0.0063961917,-0.04137783,-0.035118036,-0.03236143,-0.034256596,-0.032304,-0.000520902,0.010301386,-0.037013203,-0.04160755,-0.027724009,-0.03520418,-0.038563795,-0.02465154,0.008686187,-0.039540093,-0.01566385,-0.009116907,-0.017989738,-0.010940287,0.017530303,-0.02745122,0.053581566,0.02040177,0.02179443,0.056539178,0.037817214,0.008621578,-0.025857557,0.066618025,-0.01452962,-0.0062131356,0.000422644,-0.00010807258,0.012914421,0.047350485,0.004536917,-0.007982677,-0.04456516,0.016869865,0.028054228,-0.01824817,-0.025556052,0.05053781,-0.06765175,0.022296937,-0.009404053,-0.046201896,-0.006579248,-0.08040106,0.015218773,-0.028843882,0.020416128,-0.026446206,0.029217172,0.029949397,-0.029719679,0.007218149,0.013129781,0.046087038,-0.055103444,0.014608586,0.030753406,0.03773107,0.014141973,-0.018291242,-0.01797538,0.030207828,-0.053638995,0.022742014,0.0015173906,0.025268905,-0.0032429625,-0.00046122933,-0.0048814933,0.009181514,0.028384447,0.0046912585,-0.00024474764,-0.01646786,-0.06018594,0.04450773,0.029576106,0.046259325,-0.01458705,0.019655189,-0.0077529596,-0.002541248,-0.037271637,-0.02126321,-0.011816084,-0.008894367,-0.0051471037,0.006636677,0.01932497,-0.042296704,0.000899128,0.0027871171,-0.02239744,-0.019497259,0.021708287,-0.06087509,-0.046087038,0.02541248,0.017946666,0.06868548,0.021981077,-0.047781203,0.026575422,-0.01286417,0.031126697,0.019238826,0.02147857,-0.014027114,0.004719973,0.05694118,0.004913797,0.0027099466,0.041550122,0.017185727,-0.020014122,0.009483018,0.00704945,0.0068233223,0.013172853,0.03638148,-0.031184126,0.026776426,0.0034062772,0.0798842,0.009461482,0.028513663,0.0204592,0.034572456,0.008980512,0.0057716477,-0.017587733,0.0008192653,0.038965803,0.0063602985,-0.027594794,0.054069716,-0.044651303,-0.02966225,0.0064608,-0.011485866,-0.03833408,-0.013050815,-0.024177749,0.07879304,-0.012447807,0.043043282,-0.026546707,-0.074141264,-0.04531174,0.034974463,-0.0044507734,-0.06960435,-0.014113258,0.029518677,0.005190176,-0.0091599785,-0.0091599785,0.028843882,-0.049819946,-0.011363829,0.02615906,-0.011349471,-0.021277567,-0.031528704,0.022153364,-0.017889237,0.020631487,-0.02874338,-0.034687314,-0.063229695,-0.031040553,-0.018004095,-0.0013827906,0.019612117,0.03827665,-0.0036575305,0.008097536,-0.004479488,0.0053983573,0.024077248,0.0058111306,-0.014831125,-0.019195754,-0.01910961,-0.008743616,-0.008865653,0.030782122,-0.06805376,0.00070709863,0.006841269,0.0061880103,0.017645162,0.021277567,-0.03784593,-0.03282086,0.003117336,0.0021589838,0.046087038,-0.027192788,-0.0036736825,-0.03600819,-0.034515027,-0.013818933,-0.025283262,-0.0034044825,-0.004827653,0.042813566,0.034457598,0.007358133,0.014185045,0.008169322,0.048786215,0.00888001,0.009719914,0.011485866,-0.014773696,0.061679102,0.06529715,-0.026388777,-0.0051650503,0.011550474,0.019310612,0.019655189,-0.004694848,0.014328618,0.0722461,-0.0062992796,-0.007896533,0.01243345,-0.032102995,0.013546144,-0.010516746,0.013711253,0.051772542,0.016065855,0.0081262505,-0.02874338,0.029303316,-0.038879655,0.0010301386,-0.02541248,-0.025886271,-0.060415655,0.008212394,0.010531103,0.031614847,0.037041917,-0.018951679,-0.07149952,-0.0411194,0.013696895,-0.061449382,0.06104738,0.05817591,-0.05231812,0.0033721784,-0.046546474,-0.020071551,0.012900064,0.038822226,0.004038,0.0066618025,-0.032964434,-0.0016268652,0.0140773645,-0.0047379197,0.0018790159,0.040545106,-0.046402898,-0.029891966,0.038018215,-0.026891284,-0.013955328,0.0049389224,-0.031040553,0.007953962,-0.036410194,0.014773696,-0.030810837,-0.015103914,0.015391061,-0.03460117,-0.05249041,0.06604373,-0.011220256,0.044479016,0.0012562666,0.025197119,0.003133488,-0.034687314,0.038305365,-0.022268223,-0.022698943,0.021909289,-0.013388213,-0.0035534399,0.019525973,0.040286675,-0.013517429,-0.01577871,-0.020315627,-0.02513969,-0.049389224,0.015893567,0.013826111,-0.02948996,0.009030762,0.039281663,-0.021349354,0.0020261786,0.020846847,0.0032375786,0.07873561,-0.013905076,-0.045771178,-0.008528256,0.015261845,-0.016668864,0.0040128743,0.026977427,-0.017559018,0.010416245,-0.016640149,-0.035347752,-0.011995551,-0.009260479,-0.029719679,-0.0060839197,0.0047881706,-0.010358815,0.034629885,0.012282698,-0.022727657,0.0014070186,-0.018219456,0.009375338,0.028226515,-0.039970815,-0.0028122426,-0.010186528,0.028599806,0.013065172,0.025125332,0.001138716,0.007465813,0.0011692253,-0.007088933,0.043675005,-0.027523007,0.00038675065,0.005943936,0.005204533,-0.023100948,-0.040487677,-0.016941652,-0.025182761,-0.015764352,0.011729941,-0.010287029,0.03402688,-0.0091599785,-0.050365523,0.014163509,0.0088871885,0.002390496,-0.04898722,-0.023804458,0.0094327675,0.00979888,-0.016510932,0.0006994713,-0.0069848425,0.021923646,0.0064356746,0.00909537,0.0020477145,0.013768682,0.0593245,-0.015979711,0.032304,-0.017142655,0.027680937,0.013258996,-0.011751477,-0.027580436,0.036467627,0.0051829973,0.005717808,-0.017128298,0.0356349,0.012031444,-0.013036458,0.020042837,0.035232894,-0.017042154,-0.044019584,-0.0060229013,0.015075199,-0.004863546,-0.018449172,0.005764469,-0.002846341,-0.00834161,-0.018592745,-0.014012757,-0.041205544,-0.008090357,-0.015319274,-0.025699625,0.015175701,0.02508226,-0.03767364,-0.0056603784,-0.015907925,0.008686187,0.022110293,0.008111893,0.009741451,-0.017587733,-0.013266175,-0.020085908,-0.01754466,0.007673994,0.027465578,-0.015362346,-0.04399087,0.019583402,0.007659637,-0.025857557,-0.015046485,0.01813331,0.023603454,0.01630993,-0.02535505,0.00071786664,-0.010890037,-0.008434933,-0.014070186,-0.00066896196,-0.017587733,-0.03273472,-0.028384447,0.0291741,-0.034457598,0.02572834,0.057773907,-0.022756372,-0.0016250706,0.01867889,0.017343657,0.008607221,0.007013557,8.014308e-05,-0.013847647,-0.044593874,-0.021622144,-0.003596512,-0.018664533,0.057946194,0.031212842,0.015706923,-0.02249794,0.00425336,0.016080212,-0.019770047,-0.007918069,-0.0124765225,0.03552004,0.028815167,-0.0072360956,-0.021234496,0.029030526,-0.021105278,-0.01856403,0.0101362765,0.009561984,-0.01674065,-0.010308565,-0.0025394533,0.03379716,-0.010172171,0.022311294,-0.005297856,-0.009935274,-0.024852542,-0.011299221,0.009217408,-0.059611645,0.037013203,0.007193024,-0.0014904706,-0.02282816,0.021234496,0.01189505,0.029016169,0.016984725,0.014888554,-0.010208064,0.014163509,0.024881257,0.011528938,-0.004526149,-0.011421259,0.011543295,-0.055620305,-0.0043036104,0.039051946,-0.024048531,-0.009655306,-0.077472165,0.03600819,0.061219666,-0.018650176,0.024608469,0.017803093,0.020258196,0.042181842,0.0036647092,-0.038305365,0.01270624,-0.0031370772,0.0070279143,0.0010669293,-0.0018987573,0.02480947,0.0066438555,-0.119453005,-0.028729023,-0.0053696423,-1.380351e-05,0.002810448,-0.025584767,-0.0090235835,-0.01684115,0.00046571597,0.039913386,-0.02040177,-0.025154047,8.44615e-05,-0.009626592,0.031901993,-0.01932497,0.0036252264,-0.013589215,0.008470826,-0.0110910395,-0.012684704,-0.007953962,0.037443925,-0.005908042,-0.0013136959,0.0031980958,-0.04485231,0.0010095,0.03514675,-0.010803893,0.023402452,0.0051650503,0.007997034,0.023976745,-0.01630993,0.009684021,-0.01883682,-0.046948478,0.045541458,-0.027379433,0.0022415386,-0.009727092,-0.014716266,0.0051148,-0.018980393,-0.012454987,-0.03526161,0.003163997,0.03508932,-0.021966718,0.0012715213,0.009762987,0.014070186,-0.01674065,-0.018592745,0.019095253,0.0036054852,0.014034293,0.011938122,-0.022095935,-0.007889355,-0.004285664,0.02147857,-0.035347752,0.03773107,-0.00031070167,-0.007932426,0.038937088,-0.01178737,-0.022426154,-0.013029279,-0.008040106,-0.01523313,0.010531103,0.019095253,0.030293971,-0.049532797,0.008298539,-0.036467627,0.022139007,-0.008348789,-0.0043143784,-0.008607221,-0.008671829,-0.010315743,-0.0014752159,-0.018721962,0.007817567,-0.02040177,-0.02578577,-0.036840916,-0.043071996,0.0035660025,0.008793866,-0.022756372,-0.003470885,-0.012225268,0.010114741,-0.09360981,-0.0054809116,-0.009081013,-0.0048240637,0.035118036,-0.025757056,0.0036162531,0.04505331,-0.0108182505,-0.03454374,0.008686187,-0.012849812,-0.026833855,-0.005850613,0.02739379,-0.0061700637,0.027264575,0.007918069,0.02960482,0.007918069,-0.021765716,-0.008714901,-0.0156...', '2025-03-25 05:14:36.027124+00'), ('39', 'https://ai.pydantic.dev/message-history/', '1', 'Accessing Message History in Agent Runs', 'This section explains how to access messages exchanged during an agent's run using the `result` object. The available methods from `RunResult` and `StreamedRunResult` include `all_messages()` for retrieving all messages and `all_messages_json()` for JSON format. These resources facilitate the continuation of conversations and performance understanding.', 'to messages exchanged during an agent run. These messages can be used both to continue a coherent conversation, and to understand how an agent performed. Accessing Messages from Results After running an agent, you can access the messages exchanged during that run from the `result` object. Both [`RunResult`](../api/agent/#pydantic_ai.agent.AgentRunResult) (returned by [`Agent.run`](../api/agent/#pydantic_ai.agent.Agent.run), [`Agent.run_sync`](../api/agent/#pydantic_ai.agent.Agent.run_sync)) and [`StreamedRunResult`](../api/result/#pydantic_ai.result.StreamedRunResult) (returned by [`Agent.run_stream`](../api/agent/#pydantic_ai.agent.Agent.run_stream)) have the following methods:
              * [`all_messages()`](../api/agent/#pydantic_ai.agent.AgentRunResult.all_messages): returns all messages, including messages from prior runs. There's also a variant that returns JSON bytes, [`all_messages_json()`](../api/agent/#pydantic_ai.agent.AgentRunResult.all_messages_json).
              * [`new_messages()`](../api/agent/#pydantic_ai.agent.AgentRunResult.new_messages): returns only the messages from the current run. There's also a variant that returns JSON bytes, [`new_messages_json()`](../api/agent/#pydantic_ai.agent.AgentRunResult.new_messages_json).
StreamedRunResult and complete messages On [`StreamedRunResult`](../api/result/#pydantic_ai.result.StreamedRunResult), the messages returned from these methods will only include the final result message once the stream has finished. E.g. you've awaited one of the following coroutines:
              * [`StreamedRunResult.stream()`](../api/result/#pydantic_ai.result.StreamedRunResult.stream)
              * [`StreamedRunResult.stream_text()`](../api/result/#pydantic_ai.result.StreamedRunResult.stream_text)
              * [`StreamedRunResult.stream_structured()`](../api/result/#pydantic_ai.result.StreamedRunResult.stream_structured)
              * [`StreamedRunResult.get_data()`](../api/result/#pydantic_ai.result.StreamedRunResult.get_data)
**Note:** The final result message will NOT be added to result messages if you use [`.stream_text(delta=True)`](../api/result/#pydantic_ai.result.StreamedRunResult.stream_text) since in this case the result content is never built as one string. Example of accessing methods on a [`RunResult`](../api/agent/#pydantic_ai.agent.AgentRunResult) : run_result_messages.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('openai:gpt-4o', system_prompt='Be a helpful assistant.')
                        
                        result = agent.run_sync('Tell me a joke.')
                        print(result.data)
                        #> Did you hear about the toothpaste scandal? They called it Colgate.
                        
                        # all messages from the run
                        print(result.all_messages())
                        """
                        [
                            ModelRequest(
                                parts=[
                                    SystemPromptPart(
                                        content='Be a helpful assistant.',
                                        timestamp=datetime.datetime(...),
                                        dynamic_ref=None,
                                        part_kind='system-prompt',
                                    ),
                                    UserPromptPart(
                                        content='Tell me a joke.',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    ),
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    TextPart(
                                        content='Did you hear about the toothpaste scandal? They called it Colgate.',
                                        part_kind='text',
                                    )
                                ],
                                model_name='gpt-4o',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                        ]
                        """', '{"source": "pydantic_ai_docs", "url_path": "/message-history/", "chunk_size": 4509, "crawled_at": "2025-03-25T05:14:28.666774+00:00"}', '[0.0067888442,0.038383774,0.0077767507,-0.013156021,0.0033733386,0.018324457,0.01499931,0.014878834,0.011758495,-0.0111681605,-0.025781946,-0.020746034,-0.026046993,-0.01668598,-0.026552994,-0.02183032,-0.019481031,-0.008505632,0.02458923,0.040624637,0.04443169,-0.0032558742,-0.0019170805,0.00038270076,-0.022757988,-0.005358187,-0.024914516,0.034697197,-0.015589644,-0.029034808,-0.0013448176,-0.005297949,-0.051997606,-0.03676939,0.00088023057,-0.001098594,-0.0147101665,0.0028507723,-0.0037889823,-0.005436497,0.01637274,-0.0075418213,0.018336505,0.0065117483,-0.02060146,0.031853955,0.012999401,0.0054726396,0.030697383,0.047009885,-0.030119095,0.025589183,0.024010943,-0.001566193,0.007800846,0.0009058318,-0.00143141,-0.0176016,-0.004304019,-0.06100924,-0.0130837355,-0.008367085,-0.010891065,-0.0015511335,-0.022324273,0.009903159,-0.028528808,0.04679303,-0.024480801,0.015228215,0.013915022,0.003728744,-0.06004543,-0.023083275,-0.041516162,-0.022396559,0.04881703,0.050214555,0.017565457,-0.032263577,0.019938841,-0.01984246,0.0022529084,0.02187851,-0.01663779,0.0033733386,-0.04452807,-0.010680231,-0.022071274,-0.054310754,-0.038287394,0.005957557,0.014613785,0.03197443,0.036552534,0.0082044415,-0.01438488,-0.032335863,0.0034124935,0.01193921,0.051033795,-0.06023819,-0.057298567,0.032167193,0.010830827,0.0041805306,0.006620177,-0.0069394396,-0.03438396,-0.00079137925,-0.041130636,0.007999632,0.0030766656,-0.00765025,-0.059178,0.007963489,-0.0076382025,-0.03587787,0.03493815,0.008035774,-0.053925227,0.007228583,-0.03708263,0.007758679,0.009854968,0.03402253,-0.01913165,-0.05488904,-0.01897503,0.010017611,0.023456752,0.014734262,0.007463512,0.0066864393,-0.04433531,-0.0060720094,-0.032914147,-0.021974891,-0.053684276,0.023553133,-0.0016414907,-0.009011634,-0.060575526,0.011162137,-0.0052678296,0.047371313,-0.072671354,0.00012847676,-0.037829585,-0.025540993,0.04667255,0.04033549,-0.038383774,0.0051473533,-0.012722306,0.038937967,0.0053702346,0.022830274,0.016770313,-0.019119602,-0.015565549,0.03178167,-0.023830228,-0.008114085,-0.03708263,-0.0484556,0.02566147,-0.016119739,-0.025854232,-0.052816845,0.002767945,-0.0038763275,-0.009095967,0.001497672,0.03182986,-0.044552166,-0.09098376,-0.04684122,-0.05831057,-0.03855244,-0.009421253,-0.019215982,-0.03279367,-0.063129626,-0.017481122,-0.00226345,0.011385018,0.0083791325,-0.017216075,0.005255782,0.019625602,0.016457073,0.023830228,0.020167746,-0.022107417,-0.022300178,0.024444658,0.0062165814,-0.015023405,0.016481169,0.015481215,0.019408746,0.055949233,-0.0048762816,-0.027203567,-0.057925045,0.016661884,0.021613464,-0.012258472,-0.009288729,0.056864854,-0.013854784,0.0074454406,-0.029323952,-0.03501044,-0.014963167,-0.08915252,0.020071365,-0.049009793,0.0067587253,0.033444244,0.0015767347,0.03488996,-0.0362152,0.008975491,0.046961695,-0.002795052,-0.021601416,0.0039064465,0.03484177,0.011770543,-0.012758449,-0.020276176,-0.041299302,0.06679211,-0.06004543,0.02881795,0.0018794315,0.040431876,-0.0469376,-0.019215982,-0.026239756,0.044720832,0.027878234,0.010897089,0.02305918,0.011800662,-0.054021608,0.040480066,0.027781853,0.040022254,-0.025950613,0.0040088515,-0.038745206,0.0085237045,-0.039829493,-0.02484223,-0.015517358,-0.020974938,-0.0072526783,0.050841033,-0.008999586,-0.04667255,0.02264956,-0.018625649,-0.018649744,0.008114085,-0.02611928,-0.020432794,-0.045130454,0.002299593,-0.019878604,0.04207035,0.004695567,-0.050021794,0.03831149,0.015276405,0.03713082,0.062406767,-0.019938841,-0.0005289666,0.056431137,0.016252264,0.012927116,-0.018577458,-0.011397066,0.019312365,0.0014818595,0.019348508,0.048961602,0.01922803,0.012174139,0.042190827,-0.051033795,0.027757758,-0.012077757,0.04269683,0.0056533543,-0.010083873,-0.002201706,-0.036191106,-0.017216075,0.016216122,-0.021770082,0.005258794,0.035371866,0.007999632,-0.022890512,0.036191106,-0.044696737,0.009312824,0.060816478,-0.043443784,-0.011788614,-0.03064919,-0.027179472,0.055708278,-0.029323952,0.053877037,0.00492146,-0.01963765,-0.020625556,0.032094907,-0.0036413986,-0.046503883,-0.0051353057,-0.013324688,-0.007879156,-0.011884995,0.030528715,0.00739725,-0.042359497,0.00050863624,0.019890651,0.01668598,0.0076321787,-0.084285274,0.0062707956,0.013818641,0.06626201,-0.0041865543,0.016517311,-0.026336137,-0.03173348,0.0034727317,-0.007059916,0.021288177,0.022986894,-0.0448895,0.011903066,0.0237218,-0.0059394855,0.03679349,0.011065756,0.0111079225,0.0005884518,-0.018794315,0.044913594,0.006746677,0.015360739,-0.040166825,0.0009351979,0.037058536,9.609874e-05,-0.017637743,0.023071228,-0.054117993,-0.03091424,0.00875261,0.01963765,0.07565917,-0.0119211385,-0.027661378,-0.009951349,-0.025010897,-0.014914976,-0.045588262,0.027805949,-0.010270611,0.06982811,0.042046256,0.05315418,-0.0026489745,-0.013746356,0.039709017,0.047202647,-0.0012416597,-0.0062768194,0.017312456,0.06096105,0.06553915,-0.056190185,-0.021577321,0.024035038,-0.022179702,0.037516344,-0.024372373,0.0048431507,0.020059317,0.018336505,-0.012288591,0.0026414448,-0.012348829,0.029613094,-0.012927116,0.028528808,-0.002064664,-0.016035406,0.034673102,0.01622817,0.040480066,0.012625925,0.020842414,-0.020312319,-0.021998987,-0.042383593,0.015878787,0.025974708,0.028914332,0.04881703,0.011246471,-0.054455325,-0.017613648,0.04433531,-0.041564353,0.043251023,0.028143283,-0.053925227,0.003397434,-0.00045103347,-0.032119002,0.025781946,0.02244475,-0.004602198,0.0069093206,-0.027348138,0.053250562,0.020938795,-0.053780656,-0.016445026,0.07161116,-0.01157778,0.005261806,0.044311214,-0.06019,-0.007264726,-0.031998526,0.017384741,0.063033246,-0.043202832,-0.010704326,-0.012758449,-0.060430955,-0.020179793,-0.052816845,-0.050021794,0.07180393,0.036191106,0.03101062,-0.002132432,-0.014312594,0.0039064465,-0.027492711,0.006794868,-0.03795006,-0.0012537073,0.013758403,-0.051901225,-0.011125994,0.08043003,0.014601737,-0.030528715,-0.02081832,-0.0031143145,-0.015951073,-0.048937507,0.034167103,0.006105141,0.015360739,-0.005692509,0.011933186,-0.012107876,0.015155929,0.015698073,-0.035275485,0.052672274,-0.0150595475,-0.063129626,-0.018649744,0.030167285,-0.004361245,-0.009818825,-0.0019125625,-0.011601876,0.030167285,0.0017182945,-0.01877022,0.00739725,-0.0010059777,-0.04452807,-0.026336137,0.0052346988,0.0073430357,0.01231871,0.04197397,-0.014830642,-0.022251988,0.024288038,0.021432748,0.038793396,-0.0119874,0.004228721,0.009957373,0.00018269113,0.010740469,0.008415275,-0.0080598695,0.004165471,-0.015854692,0.0019110566,0.033829767,-0.0076442263,0.035540532,-0.026793947,-0.0016414907,-0.0088008,0.0053672227,-0.0032046717,0.0031353978,0.0030495585,0.027540902,0.006258748,0.037251297,0.012240401,0.006535844,-0.012264496,0.012186186,0.022529084,-0.04749179,-0.013625879,-0.016143836,0.025540993,-0.02417961,0.0061111646,-0.0153486915,0.018396745,0.009867015,-0.0006396543,0.011198279,-0.019613555,0.017408837,0.019493079,0.056334756,0.0013485826,0.031950336,0.0012845794,-0.037660915,-0.017107647,0.03539596,0.0062768194,-0.0028537842,-0.0035148985,0.026745757,0.007957465,-0.012035591,0.028745664,0.042263117,0.009583896,-0.024263943,0.013734307,0.05840695,0.0025706647,-0.0075779646,-0.00966823,0.0071502733,-0.021288177,0.013372879,0.026697567,-0.06216581,0.023396514,0.00446365,-0.039805397,0.032432243,0.012637973,0.019408746,0.0057798545,-0.015939025,0.006752701,0.017420884,0.0046232813,0.030890144,-0.032191288,0.002267968,-0.02127613,-0.04780503,0.005556973,0.018541316,0.0031444335,-0.043997973,0.014975214,0.06549096,-0.00085086445,-0.04023911,0.02922757,0.034600817,-0.002165563,0.0035480296,-0.0030676299,-0.03187805,0.0032829815,-0.002227307,-0.010403136,-0.020782176,-0.019215982,-0.009728468,0.009993516,-0.06014181,0.012258472,0.079755366,-0.015794454,0.005050972,0.04014273,0.006626201,0.012457258,0.01984246,-0.004394376,-0.026938519,0.0013839725,-0.025348231,0.014517404,-0.03602244,0.029131189,0.028432427,0.019360555,-0.02520366,0.013541546,-0.020119555,0.00060840574,-0.018493125,-0.02274594,0.034552626,0.018047363,-0.005596128,-0.018071458,-0.008770681,-0.0009419747,-0.0038793394,0.004072102,-0.014625832,-0.021758035,-0.051901225,-0.029613094,0.010023635,2.1459855e-05,0.0014833654,-0.011306709,0.00022005764,0.024745848,0.004897365,-0.026432518,-0.030384144,0.031107003,-0.02070989,0.019300317,-0.054648086,0.022926655,0.024251895,0.0021083367,0.020384604,0.015589644,-0.03693806,0.0053943302,0.005198556,0.0117765665,0.021938749,0.019155744,-0.011644042,-0.028384237,-0.007939394,0.051853035,-0.026046993,-0.0104693975,-0.04872065,0.053395133,0.04953989,-0.0020224974,-0.006818963,-0.0010398618,0.024288038,0.039805397,-0.01877022,-0.027324043,-0.023673609,0.029299857,0.043178737,0.015758311,-0.00042053786,0.003728744,0.020215938,0.008312871,-0.027613187,-0.0367212,-0.0048039956,0.009348967,-0.038142823,-0.0038462086,0.0012107877,0.019348508,0.023251941,0.0012906032,-0.008222513,0.012529544,-0.023384465,0.0076863933,-0.03592606,0.004376305,-0.024239847,-0.0014276451,0.024480801,-0.017167885,-0.011915114,0.014987262,-0.03799825,0.01545712,0.009138133,-0.031396147,-0.01954127,0.04014273,-0.024071181,0.025637373,0.0017920862,0.0041805306,-0.00036707649,-0.030697383,-0.0209147,-0.02223994,-0.061491147,0.03055281,0.00593045,0.00446365,-0.030360049,-0.028191473,0.013529498,-0.046094265,0.0075357975,-0.017131742,-0.011848852,0.01145128,-0.026287947,0.00963811,-0.024468753,0.007957465,0.017408837,0.008089989,0.03917892,0.006933416,0.034769483,-0.011294661,-0.029902238,0.00080192095,0.017517267,0.030938335,-0.0033733386,0.03708263,0.002930588,0.030263668,0.037227202,0.009342943,-0.015276405,-0.014698119,-0.025468707,-0.0058099735,0.017372694,0.0028778797,0.055419136,-0.0479496,0.04125111,-0.017613648,0.038191013,-0.00054892054,-0.0029757665,0.0060117715,-0.014047546,-0.0031534694,0.004554007,-0.020107508,-0.013156021,-0.0122705195,-0.008921276,-0.012734354,-0.026914423,-0.014782452,0.019047316,-0.008469489,-0.001630949,0.003668506,0.03356472,-0.059708096,0.0009201384,0.03356472,-0.036745295,0.036697105,-0.023661561,-0.004020899,0.025733756,-0.027854139,0.0005026124,0.022492941,-0.012770496,-0.008656228,-0.04423893,0.04549188,0.027516806,0.0041052327,-0.029902238,0.044166643,-0.028167378,-0.0073550832,-0.010999493,-0.06553915,0.025...', '2025-03-25 05:14:36.077832+00'), ('40', 'https://ai.pydantic.dev/message-history/', '2', 'Example of Accessing Methods on StreamedRunResult', 'This document provides a complete example of using the `StreamedRunResult` class in a Python script to interact with a Pydantic AI agent, demonstrating how to access all messages during a streamed run.', '_(This example is complete, it can be run "as is")_ Example of accessing methods on a [`StreamedRunResult`](../api/result/#pydantic_ai.result.StreamedRunResult) : streamed_run_result_messages.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('openai:gpt-4o', system_prompt='Be a helpful assistant.')
                        
                        
                        async def main():
                            async with agent.run_stream('Tell me a joke.') as result:
                                # incomplete messages before the stream finishes
                                print(result.all_messages())
                                """
                                [
                                    ModelRequest(
                                        parts=[
                                            SystemPromptPart(
                                                content='Be a helpful assistant.',
                                                timestamp=datetime.datetime(...),
                                                dynamic_ref=None,
                                                part_kind='system-prompt',
                                            ),
                                            UserPromptPart(
                                                content='Tell me a joke.',
                                                timestamp=datetime.datetime(...),
                                                part_kind='user-prompt',
                                            ),
                                        ],
                                        kind='request',
                                    )
                                ]
                                """
                        
                                async for text in result.stream_text():
                                    print(text)
                                    #> Did you hear
                                    #> Did you hear about the toothpaste
                                    #> Did you hear about the toothpaste scandal? They called
                                    #> Did you hear about the toothpaste scandal? They called it Colgate.
                        
                                # complete messages once the stream finishes
                                print(result.all_messages())
                                """
                                [
                                    ModelRequest(
                                        parts=[
                                            SystemPromptPart(
                                                content='Be a helpful assistant.',
                                                timestamp=datetime.datetime(...),
                                                dynamic_ref=None,
                                                part_kind='system-prompt',
                                            ),
                                            UserPromptPart(
                                                content='Tell me a joke.',
                                                timestamp=datetime.datetime(...),
                                                part_kind='user-prompt',
                                            ),
                                        ],
                                        kind='request',
                                    ),
                                    ModelResponse(
                                        parts=[
                                            TextPart(
                                                content='Did you hear about the toothpaste scandal? They called it Colgate.',
                                                part_kind='text',
                                            )
                                        ],
                                        model_name='gpt-4o',
                                        timestamp=datetime.datetime(...),
                                        kind='response',
                                    ),
                                ]
                                """', '{"source": "pydantic_ai_docs", "url_path": "/message-history/", "chunk_size": 4291, "crawled_at": "2025-03-25T05:14:31.098729+00:00"}', '[0.017891467,0.025134156,-0.03142719,-0.0035422065,-0.015447693,0.036238767,0.019296953,0.021512812,0.0008103708,0.00424495,0.0026067982,-0.037834186,-0.0075212535,-0.009895387,-0.0325921,-0.019031052,-0.037631594,0.0071540545,0.007381971,0.031325895,0.04059451,0.010091648,-0.011421163,0.016675912,-0.0055934577,0.008382273,-0.046697617,0.052775398,-0.026261078,-0.025210127,0.0014331851,-0.0035611996,-0.06498161,-0.02727404,0.0029771628,0.019676816,-0.020778414,0.007901115,-0.010946336,-0.015435031,0.003630841,-0.038543258,0.011516129,0.015004521,-0.010135965,0.034618028,0.007578233,0.0051281275,0.040113352,0.041202288,-0.041860715,0.039024416,0.017017785,-0.022892974,0.022829665,-0.03884715,-0.015536327,0.014282784,-0.0312246,-0.06488031,0.02305758,-0.013130539,-0.020955682,0.008933071,-0.03023696,-0.022930961,-0.00960416,0.024425082,-0.013041904,-0.011813686,0.011129936,0.014143502,-0.05956225,-0.0030895385,-0.040138677,-0.013155863,0.045330115,0.03618812,0.028489597,-0.022348506,0.02540006,-0.015270424,0.020423876,-0.010490503,-0.015726257,0.007141392,-0.073085316,0.003132273,-0.036340065,-0.0719204,-0.039277658,0.03203497,-0.0024659329,0.036947843,0.05470003,0.017904129,-0.016840518,-0.010857702,0.031553812,0.018499246,0.06123364,-0.02886946,-0.04616581,0.01591619,0.04517817,0.011408501,0.016549291,0.0041658124,-0.048419654,-0.007059089,-0.039176363,-0.0040233643,0.006302532,-0.005780223,-0.042595115,0.019854084,0.010553813,-0.062246606,0.02727404,-0.0027397496,-0.049913775,0.009844739,-0.018182695,-0.016625263,-0.007907446,0.019664153,-0.01952487,-0.057080492,-0.008914079,0.0064829662,0.027805846,-0.013409104,-0.018258667,-0.009895387,-0.025070846,-0.0053813686,-0.043835994,-0.0148779005,-0.043709375,0.04454507,-0.024741633,-0.03750497,-0.028717514,0.016017485,-0.007831474,0.011839011,-0.037479647,0.001372249,-0.042240575,-0.033478443,0.041962013,0.053383175,-0.053687062,0.014054868,-0.018853782,0.007920108,-0.0058087124,0.02727404,-0.011914982,-0.023462767,-0.01530841,0.011205908,-0.03537775,0.016435333,-0.037353028,-0.03284534,-0.00082857243,-0.03433946,-0.013523062,-0.05854929,-0.012421465,0.00706542,-0.016194753,0.013826951,0.034162194,-0.03750497,-0.101853475,-0.05191438,-0.025083508,-0.05849864,-0.02366536,0.009198975,-0.043785345,-0.04760928,-0.007584564,-0.01208592,0.02243714,0.01090835,0.0043525775,0.02032258,0.0043177567,0.021728067,0.0037289718,0.012073258,-0.02621043,-0.03241483,0.050521553,-0.0059891464,0.034491405,0.029325292,0.02727404,0.04907808,0.019182995,-0.02558999,-0.0001580777,-0.070907444,-0.013801627,0.023450105,-0.041379556,-0.017688874,0.07516189,-0.03904974,0.028717514,-0.02404522,-0.023905938,-0.011041301,-0.06351281,0.016220078,-0.051458545,0.013092552,0.023931261,0.022449803,0.020626469,0.0023044918,-0.0066855587,0.045583356,-0.008825444,-0.013864937,0.0008111622,0.033149227,0.009844739,-0.027299365,0.0031006178,-0.039454926,0.03618812,-0.09005245,0.009401567,0.015257762,0.018195355,-0.04251914,-0.011459149,-0.0028315494,0.03915104,0.020423876,0.032921314,0.0077681635,-0.0025482362,-0.048318356,0.032820016,0.014181488,0.041987337,-0.030287607,0.0022554265,-0.029350616,-0.008939402,-0.05242086,-0.023323484,-0.017549591,-0.02323485,-0.017701536,0.031249924,0.0085911965,-0.07298402,0.028565569,-0.008667168,-0.015498341,0.027122097,-0.020094663,-0.0033617725,-0.048419654,0.015143803,-0.008059391,0.04332951,-0.0026970152,-0.050673496,0.029223995,0.020373227,0.012060597,0.042747058,-0.024032557,0.006970455,0.042493816,0.008888754,0.04411456,-0.02193066,-0.017739523,0.008901416,-0.011060295,0.0019641994,0.047305394,0.04046789,0.03550437,0.026868856,-0.030414227,0.022563761,-0.024868254,0.06366476,0.024526378,0.0053750374,-0.0024358605,-0.013586372,-0.03829002,-0.0004051854,0.002736584,-0.011136267,0.034314137,0.0088191135,-0.0048907143,0.023640035,-0.028160384,0.030034367,0.06761531,-0.028996078,-0.0028252185,-0.0077998186,-0.045532707,0.06994513,-0.034238163,0.068577625,-0.028742839,-0.021614108,-0.01065511,0.057131138,0.0024580192,-0.015624962,0.005526982,0.008091046,0.00085231377,-0.023994572,0.029553209,-0.030414227,-0.05026831,-0.016739221,0.015295749,0.009610491,-0.022183899,-0.06660235,0.0019262133,0.034238163,0.0791631,-0.03588423,0.015536327,-0.019676816,-0.027729874,-0.0204492,0.006400663,0.027552607,0.017030448,-0.026159782,0.0045741634,0.035833582,-0.0043779016,0.04578595,-0.0071983715,0.0069008134,-0.00220003,-0.00997769,0.034060895,0.021791376,-0.0027524116,-0.051028036,0.016004823,0.030971358,0.019195657,-0.013003918,0.024184503,-0.033301175,-0.05738438,0.011661742,0.03712511,0.0623479,0.01747362,-0.0026352878,-0.01610612,-0.012491106,-0.030946033,-0.030287607,0.026311725,-0.010958998,0.057789564,0.024615012,0.034263488,-0.018068736,-0.02515948,0.03707446,0.06209466,-0.0051629483,-0.0009820997,-0.0037036478,0.02441242,0.080885135,-0.0846331,-0.015131142,0.031148626,0.016941814,0.03687187,-0.014333433,0.036340065,0.034719322,0.032617424,0.0022870817,0.021614108,-0.010382876,0.05758697,0.0009781428,0.021525474,0.015852878,-0.006302532,0.033554416,0.00929394,0.030642144,-0.009287609,0.04069581,-0.034263488,-0.013725655,-0.037960805,0.029122699,0.018283991,0.032769367,0.07273078,0.008660838,-0.07850467,-0.006308863,0.029857097,-0.01914501,0.08665902,0.04406391,-0.07435152,0.03717576,-0.0044412115,-0.008072052,0.009059692,-0.0023757159,0.03476997,0.012187216,-0.013523062,0.031528488,0.004121495,-0.026691588,-0.023247512,0.04758396,0.0012013114,-0.0027286704,0.037530296,-0.046672292,-0.0035422065,-0.032389507,0.010446185,0.038543258,-0.0395309,0.005143955,-0.02447573,-0.019410912,-0.01691649,-0.021120287,-0.016004823,0.06523485,0.038872473,0.030566173,0.001747362,-0.0003094287,0.0027397496,-0.029654505,0.015131142,-0.058397345,0.0008167018,0.03061682,-0.013599034,-0.026387699,0.055510398,0.018613204,-0.018271329,-0.015599637,0.0014102351,-0.0040201987,-0.036719926,0.05292734,0.039176363,-0.011332529,-0.010927344,0.018562555,0.008610189,-0.009331926,0.032744043,-0.037783537,0.059157066,-0.014637322,-0.049533915,-0.02441242,0.006748869,0.0055871266,0.0017995929,0.006698221,-0.013814289,0.0008064139,0.0017711032,-0.028970756,0.01982876,-0.0037859508,-0.015409706,-0.0367959,-0.0039378954,-0.029958393,0.04132891,0.045532707,-0.01338378,0.0038524265,0.027122097,0.017372323,0.043152243,-0.017296351,0.00043130084,0.023589386,0.012668374,0.0054605063,-0.006188574,-0.004969852,0.0008871344,-0.006964124,0.016270725,0.020031352,-0.005932167,0.032946635,-0.00861652,-0.0339596,-0.016891167,0.010490503,0.014485378,0.014536026,-0.008502562,0.022285197,0.0077998186,0.026058486,0.00023147798,-0.010996984,-0.008755803,0.019512208,0.007958095,-0.022842325,-0.022449803,-0.018625865,0.024880916,-0.04183539,-0.0066285795,-0.012402471,0.001479085,0.028970756,-0.042443167,-0.009085016,-0.008021404,0.03730238,0.0039442265,0.053940304,-0.003151266,0.036897194,0.017688874,-0.028160384,0.010541151,0.020791074,-0.013548386,0.0020449199,0.0034250827,0.007008441,-0.004995176,-0.00780615,0.027780524,0.040923722,0.009844739,0.0031718418,0.016397346,0.036618628,-0.0015708847,-0.017030448,-0.0005476334,0.013902923,-0.022297857,0.020499848,0.026387699,-0.055054564,0.032997284,-0.0064133247,-0.03537775,0.039505575,0.021335542,-0.0074199573,-0.009344588,0.0038334336,0.0065779313,0.0048052454,0.008331625,0.04654567,-0.017828157,0.0060904427,0.0023583055,-0.062499847,-0.007413626,0.02689418,-0.0034725654,-0.04132891,0.022171238,0.066956885,-0.015333734,-0.026159782,0.034288812,0.02038589,-0.013219173,0.007888453,0.000886343,-0.015194451,-0.021234246,-0.005625113,-0.020499848,-0.0074072955,-0.0387965,-0.022145914,-0.0036023513,-0.07100874,0.002621043,0.06964124,-0.007116068,-0.0019420409,0.023019595,0.0115984315,0.013864937,0.021474825,-0.018334638,-0.023006933,0.021854687,-0.024057882,0.040873077,-0.017195055,0.040088028,0.03456738,0.031022007,-0.0004795749,7.488411e-05,-0.019119686,-0.011731383,-0.005634609,-0.02886946,0.030667469,0.0024121192,0.019803436,-0.011433825,-0.0041119987,0.009781429,-0.021246908,0.0017616068,0.0012028941,-0.026919505,-0.009243292,-0.017549591,0.02150015,-0.0058720224,-0.0002480969,-0.011547783,-0.027805846,0.005571299,-0.030490201,-0.02447573,-0.02515948,0.029451912,-0.008660838,0.0012749095,-0.05763762,0.020018691,0.041734096,0.007293337,0.041531503,0.027096773,-0.019778112,-0.0063563455,0.03476997,-0.015688272,0.013624359,0.0063880007,-0.019879408,-0.051104005,-0.01741031,0.038593907,-0.011851672,0.014092854,-0.028287005,0.030085014,0.04021465,-0.010382876,0.017017785,-0.0016144105,-0.0036878202,0.03755562,-0.02248779,-0.033047933,-0.009426891,0.03160446,0.043557428,0.002776153,-0.0074516125,0.008534217,0.0068375035,-0.020487186,-0.022031955,-0.016410008,-0.008895085,-0.0037827855,-0.027527282,-0.01853723,-0.00786946,0.03018631,-0.004703949,0.008356948,-0.016346699,0.022892974,-0.0023013263,0.023412118,-0.04492493,0.0045899907,-0.01047151,-0.030059692,0.019740125,-0.028742839,-0.008040397,0.0027017635,-0.023994572,-0.0007565571,0.007059089,-0.03413687,-0.009439553,0.023867952,-0.015979499,0.0077301776,0.009515526,-0.008205004,-0.0053940304,-0.02633705,-0.024703646,0.0017346999,-0.061892066,0.025792582,0.00960416,-0.0077808257,-0.023133554,-0.016815193,0.031705756,-0.016068133,0.009699125,0.013320469,-0.009813083,0.0339596,-0.049660534,-0.0057169124,-0.028109737,0.009540849,0.01518179,-0.00064695126,0.025653299,-0.0057232436,0.027172744,-0.0073946333,-0.03254145,0.0074326196,0.011395839,0.00041309916,-0.009515526,0.038138073,-0.01995538,-0.000690477,0.03327585,0.015447693,-0.0076921913,-0.013485076,-0.026007837,-0.022019293,0.0028299666,0.022285197,0.07440217,-0.043304186,0.023880614,0.007388302,0.026564967,-0.025691286,0.023931261,0.012586071,-0.038188722,-0.013523062,0.024095869,-0.023272835,-0.0136496825,-0.0026289567,-0.019993367,-0.023893276,-0.02212059,-0.026413022,0.01183268,-0.013079891,0.011579438,-0.021145612,0.014396743,-0.07136328,-0.017005123,0.02540006,-0.029983718,0.030287607,-0.004206964,-0.0015867123,0.028768161,-0.020740427,0.0074706054,0.030464876,-0.01537172,-0.004672294,-0.033579737,0.033250526,0.01443473,0.016967138,-0.044772986,0.03996141,-0.054497436,-0.027122097,-0.013675007,-0.041658122,0.03330...', '2025-03-25 05:14:36.134877+00'), ('41', 'https://ai.pydantic.dev/message-history/', '3', 'Using Messages as Input for Further Agent Runs in PydanticAI', 'This section illustrates how to utilize message histories in PydanticAI to maintain context among multiple agent runs. It explains how to pass existing messages to the `message_history` parameter in various Agent methods. It is noted that if `message_history` is provided and non-empty, a new system prompt is not created, implying that the existing messages already contain a system prompt.', '_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ Using Messages as Input for Further Agent Runs The primary use of message histories in PydanticAI is to maintain context across multiple agent runs. To use existing messages in a run, pass them to the `message_history` parameter of [`Agent.run`](../api/agent/#pydantic_ai.agent.Agent.run), [`Agent.run_sync`](../api/agent/#pydantic_ai.agent.Agent.run_sync) or [`Agent.run_stream`](../api/agent/#pydantic_ai.agent.Agent.run_stream). If `message_history` is set and not empty, a new system prompt is not generated  we assume the existing message history includes a system prompt. Reusing messages in a conversation
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('openai:gpt-4o', system_prompt='Be a helpful assistant.')
                        
                        result1 = agent.run_sync('Tell me a joke.')
                        print(result1.data)
                        #> Did you hear about the toothpaste scandal? They called it Colgate.
                        
                        result2 = agent.run_sync('Explain?', message_history=result1.new_messages())
                        print(result2.data)
                        #> This is an excellent joke invented by Samuel Colvin, it needs no explanation.
                        
                        print(result2.all_messages())
                        """
                        [
                            ModelRequest(
                                parts=[
                                    SystemPromptPart(
                                        content='Be a helpful assistant.',
                                        timestamp=datetime.datetime(...),
                                        dynamic_ref=None,
                                        part_kind='system-prompt',
                                    ),
                                    UserPromptPart(
                                        content='Tell me a joke.',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    ),
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    TextPart(
                                        content='Did you hear about the toothpaste scandal? They called it Colgate.',
                                        part_kind='text',
                                    )
                                ],
                                model_name='gpt-4o',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                            ModelRequest(
                                parts=[
                                    UserPromptPart(
                                        content='Explain?',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    )
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    TextPart(
                                        content='This is an excellent joke invented by Samuel Colvin, it needs no explanation.',
                                        part_kind='text',
                                    )
                                ],
                                model_name='gpt-4o',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                        ]
                        """', '{"source": "pydantic_ai_docs", "url_path": "/message-history/", "chunk_size": 4152, "crawled_at": "2025-03-25T05:14:36.379869+00:00"}', '[-0.013258389,0.017777998,-0.0015470842,-0.024061037,0.0009258013,0.021631422,0.0006090368,0.03505962,0.0103062745,0.004441234,-0.027614024,-0.04336734,-0.013264921,-0.008986967,-0.04911482,-0.033100255,-0.029207643,-0.0039089387,-0.01097246,0.017503686,0.036235243,0.042034972,0.0011225545,0.026203278,-0.0030010983,0.0029831375,-0.029834641,0.03984048,0.0132453265,-0.04480421,-0.0045881863,-0.0087061245,-0.07466497,0.01368945,-0.02509297,0.015426756,0.0035203309,0.0032966363,0.0057082917,0.018418057,-0.001645869,-0.047024827,0.054026302,0.028998643,-0.025955092,0.033596627,-0.006609601,0.043994337,0.001548717,0.028058147,-0.033988502,0.01922793,0.019410804,-0.010580586,-0.0017650638,-0.026516778,0.0032003007,-0.00873878,-0.027587898,-0.018731557,0.01614519,-0.02147467,-0.009868682,0.040571976,-0.033779502,-0.022454355,-0.0103585245,0.05428755,-0.0237606,0.017307749,0.004937607,0.0024198194,-0.05731804,-0.022206169,-0.038063984,-0.013016733,0.032473255,0.055071298,0.019632865,-0.020586424,-0.008092189,-0.024688035,-0.01182152,0.0067467564,-0.03722799,-0.0015511662,-0.03957923,0.0013862527,-0.03025264,-0.080830455,-0.011155334,0.034223624,-0.017804122,0.032786753,0.04874907,0.033753376,-0.016968125,-0.0049408725,0.02545872,0.021461608,0.053399306,-0.060766526,-0.053712804,0.045431208,0.015047945,0.028998643,0.015648818,0.018770743,-0.039135106,0.014825883,-0.06421501,-0.010018901,-0.0013960495,-0.008059533,-0.067611255,0.007896252,0.0039775167,-0.04869682,0.044438463,-0.013082046,-0.05151831,-0.02583753,-0.019946365,-0.015309194,-0.0076088784,0.0048037167,-0.032891255,-0.045039333,-0.0077852216,0.030174265,0.02999139,0.004082016,-0.0009584574,0.0135065755,-0.022780916,-0.00071353646,-0.023773663,-0.025210533,-0.048566196,0.05214531,0.029312143,-0.028632894,-0.08072595,0.006962287,-0.009254747,0.060244028,-0.07905396,-0.002599428,-0.01358495,-0.00016950573,0.039344106,0.043393467,-0.03850811,-0.0024198194,-0.016915875,0.017020375,0.0030190593,0.029468892,-0.0013650262,-0.024479035,-0.018992806,0.026699653,-0.024701096,-0.019528367,-0.05470555,-0.021592233,0.0019512038,-0.0085755,-0.031611133,-0.04692033,-0.027117651,-0.016367253,-0.023094416,0.014159698,0.04409884,-0.036444243,-0.06343127,-0.058781035,-0.052850682,-0.025759155,-0.006877381,0.011312083,-0.033100255,-0.043602467,-0.04187822,-0.014316447,-5.699515e-05,0.025367282,-0.0056691044,0.036731616,0.021657545,-0.0051008877,0.039814353,0.019802677,0.004617577,-0.029756267,0.04976794,-0.019828802,0.011299021,0.00873878,0.020521112,0.020899924,0.027849147,-0.012664047,-0.015204694,-0.06750675,-0.0035595181,0.022127794,-0.045953706,0.00841222,0.061654773,-0.032421008,0.02839777,-0.022545792,-0.054235302,-0.047808576,-0.09222091,0.021905731,-0.051230937,0.03626137,0.0070145368,0.02178817,0.031715635,-0.03835136,0.01992024,0.03312638,0.006279774,-0.026516778,-0.012696704,0.061759274,0.014643009,-0.016341127,-0.008346907,-0.044281714,0.05972153,-0.04788695,0.025066845,0.0035627838,0.034615498,-0.016132127,-0.0018516026,0.009182904,0.031741757,-0.00019226296,0.018561745,0.025641594,-0.013493513,-0.03952698,0.026177155,0.028136522,0.036182992,-0.02829327,-0.003030489,-0.014551572,-0.010861428,-0.04906257,-0.030879637,-0.023956537,-0.03148051,0.006505101,0.018418057,0.011893363,-0.025066845,0.045039333,-0.027770773,-0.03414525,0.013780887,-0.03772436,-0.011899894,-0.044490714,-0.0062765083,-0.0053392774,0.017190186,0.015191631,-0.04245297,0.0057834005,0.012762016,0.026804151,0.0080268765,0.004970263,-0.011926019,0.026699653,0.006694507,0.022297606,-0.008614687,0.010541399,0.011494958,-0.00012807325,0.0025553422,0.02204942,0.004320406,0.014368697,0.028005898,-0.018404994,0.027927523,-0.0016123964,0.043001592,0.028032022,0.010038494,0.002852513,0.011044303,-0.015256944,0.03957923,-0.015479006,-0.0042975466,0.037802737,0.0038468922,-0.033596627,0.047233827,-0.0136110755,0.023917349,0.058258537,0.0012629759,-0.006903506,-0.0039775167,-0.034641623,0.039448604,-0.03926573,0.048200447,-0.009816432,-0.032577757,-0.013095108,0.02839777,-0.017660435,-0.032786753,-0.024831722,0.029390518,-0.016863625,-0.02978239,0.057631537,-0.01965899,-0.025171345,-0.002354507,0.030435514,0.023159727,0.007680722,-0.07111199,0.0012156244,0.033988502,0.059251282,-0.035791118,0.013206139,-0.042322345,-0.05013369,-0.017699623,0.009666215,0.004624108,0.03213363,-0.028110396,0.0066781784,0.03132376,0.011965206,0.04307997,0.012520361,0.010136463,-0.020142302,-0.029312143,0.034380373,-0.011142272,0.019267118,-0.04266197,-0.003984048,0.0272744,0.016902814,-0.0058193225,0.025850592,-0.027640149,-0.047024827,-0.007752565,0.03014814,0.027823023,-0.0072953794,-0.041016098,-0.013068983,-0.032212008,-0.03101026,-0.03788111,0.008954311,-0.008699593,0.052876808,0.01917568,0.026595153,-0.0013650262,-0.00436939,0.028005898,0.033857875,0.01773881,-0.0040069073,-0.019593678,0.018130684,0.08145745,-0.078844965,-0.034380373,0.031976882,-0.021905731,0.03229038,-0.029599516,0.0038534233,0.03728024,0.044360086,0.007628472,0.0021667343,-0.015688006,0.046632953,-0.018143745,-0.007870127,0.016210504,0.0031937696,0.0132453265,0.027013151,0.0689175,-0.0016548494,0.0238651,-0.0035007372,-0.022898478,-0.036940616,0.0238651,0.012977546,0.037384737,0.060871027,-0.0051629343,-0.07576222,0.00038432184,0.009849089,-0.016132127,0.06499876,0.018039247,-0.044830337,0.018822994,-0.022088606,-0.0055221515,0.047259953,-0.0017797591,0.023002978,0.007765628,-0.031297635,0.013807012,0.015439819,-0.017464498,-0.018953618,0.052563306,-0.010351993,3.0079358e-05,0.029965265,-0.01671994,-0.022702541,-0.046972577,0.017177124,0.041016098,-0.041172847,0.0056821667,-0.031506635,-0.022389043,-0.01656319,-0.03626137,-0.025981218,0.06290877,0.030383263,0.024243912,0.010195244,0.022950727,-0.0034648154,-0.026072655,0.016341127,-0.016223565,0.021539984,0.010397712,-0.009744589,-0.020912986,0.04859232,0.026856402,-0.0038501578,0.002194492,-0.0050094505,-0.02353854,-0.026856402,0.01272936,0.04901032,-0.008046471,0.0065802103,0.02556322,0.026412278,0.039762106,0.025798343,-0.035346996,0.035582118,-0.03526862,-0.05977378,-0.013885386,0.008000752,0.0016279081,0.0017095484,0.0134543255,-0.014460134,0.03009589,0.026490653,0.0136372,-0.021500796,-0.008235876,-0.028789645,-0.05460105,0.0044934833,-0.018914431,0.03445875,0.0069100372,-0.009633559,0.0049016853,0.0033570502,0.028084273,0.022924604,-0.020690924,-0.021226484,-0.019750427,-0.0045359363,-0.005358871,0.017555935,-0.0057115573,0.022402106,0.009104529,-0.004633905,0.025772218,0.0002549219,-0.010071151,-0.01006462,0.010763461,-0.017242437,0.021631422,-0.012605267,0.008405688,-0.017490624,0.020730112,0.012017456,0.03121926,-0.0050355755,-0.018222122,-0.00096907065,-0.004960466,0.024674973,-0.029286018,-0.008712656,-0.015949255,0.03722799,-0.012513829,0.007922377,-0.017777998,0.00262392,0.016628502,0.0008155868,0.014002949,0.0064822417,0.038534235,-0.002792099,0.022624167,-0.007275786,0.033492126,-0.021108923,-0.019881053,-0.0067206314,0.034223624,-0.00021961247,-0.009261278,-0.004751467,0.0075239725,0.0023773662,-0.006877381,0.015270007,0.039997227,0.019214867,-0.019410804,0.0050747627,0.036940616,-0.0101234,-0.015387569,-0.0074064103,0.026399216,-0.036026243,0.0055482765,0.01550513,-0.052641682,0.020547237,0.0054666363,-0.04148635,0.020730112,0.018849118,-0.005306621,-0.0051433407,-0.018901369,0.01896668,-0.012135018,0.012330955,-0.0029390517,-0.025746092,0.019828802,-0.003830564,-0.045039333,0.0033537846,-0.008059533,0.016733002,-0.030331014,0.034328125,0.05439205,-0.012213393,-0.03777661,0.028920269,0.010907147,-0.0029733407,0.009137185,0.0006739409,-0.019841865,-0.013023265,0.016928937,-0.013075515,-0.022493543,-0.042400718,-0.031454384,-0.018117622,-0.03453712,-0.000704556,0.08015121,-0.00040473192,-0.0032329569,0.028998643,0.009130654,0.009738058,-0.0042355,-0.008118314,-0.016014567,0.0038501578,-0.024544347,0.01843112,-0.028371645,0.028894143,0.042818718,0.014355635,-0.02673884,0.013101639,0.002777404,-0.0012539953,0.0060315873,-0.031349886,0.021853482,-0.004055891,0.001666279,-0.011971737,-0.0049669975,0.015688006,-0.023825912,0.010737335,0.026987026,-0.02978239,-0.022950727,-0.027561774,0.028894143,0.02253273,5.3882613e-05,0.00024941118,-0.015740255,-0.0014336042,-0.016288878,-0.023721414,-0.037959486,0.023577726,-0.0022483745,-0.005646245,-0.0084448755,0.0061916024,0.014159698,0.0028051615,0.041643098,0.016315002,-0.036836114,0.015061007,0.04788695,0.014420947,-0.03286513,0.005731151,-0.00170465,-0.03424975,-0.00687085,0.026908651,-0.023499351,-0.026987026,-0.028032022,0.03798561,0.06771575,-0.0024851316,0.0086016245,0.009920932,0.020769298,0.022467418,-0.013650263,-0.010913678,-0.013206139,0.03229038,0.043341216,0.0044608274,0.006514898,0.021918794,0.015635755,-0.0077199093,-0.014930382,-0.041538596,0.0010139728,0.03330925,-0.018130684,-0.036209118,-0.022114731,0.046058208,0.0077199093,0.0012433821,-0.008366501,0.016928937,-0.0062079304,0.0136633245,-0.0019642662,0.004532671,-0.032212008,-0.011090022,-3.7095324e-05,-0.012703234,-0.0050355755,0.0202468,-0.023982663,0.008262001,-0.019502241,-0.044360086,-0.014303385,0.05055169,-0.026516778,0.023355665,-0.018000059,-0.020377425,0.006100165,-0.0035856431,-0.026229404,-0.018809931,-0.06092328,0.024361473,-0.0042257034,-0.008262001,-0.016184378,-0.027849147,0.0056723696,-0.025341157,-0.0006816967,-0.014068261,0.0140290735,0.017804122,-0.029364392,0.011723551,-0.050003067,0.010489149,0.022245357,-0.008248938,0.016733002,0.017973933,0.030304888,0.0033194956,-0.049663443,0.016550127,0.0071516926,0.019711241,-0.02284623,0.038063984,-0.0008490594,0.0024639051,0.047495075,0.0046143113,-0.018156808,-0.027039276,-0.00777869,-0.015831692,0.014002949,0.0136372,0.067768,-0.036104616,0.041852098,-0.010378119,0.044569086,-0.019854927,0.010632836,0.020272925,-0.026203278,-0.026111841,0.02615103,-0.03466775,-0.021265673,-0.013885386,-0.018156808,-0.03168951,-0.034014624,-0.024100224,0.018509494,0.011952144,0.006707569,0.003644424,0.030618388,-0.06531226,-0.023055227,0.040676475,-0.026333904,0.019358555,-0.0019724302,-0.0049147476,0.023499351,-0.0273789,-0.017412249,0.01981574,-0.004219172,-0.008490594,-0.022467418,0.020860735,0.005267434,-0.007478254,-0.0060054623,0.028084273,-0.040624227,-0.032969628,...', '2025-03-25 05:14:36.184155+00'), ('42', 'https://ai.pydantic.dev/message-history/', '4', 'Storing and Loading Messages in Pydantic', 'This section explains how to store and load message history for an agent's run using a TypeAdapter in Pydantic, particularly focusing on the `ModelMessagesTypeAdapter`. It highlights the need for persistent storage in various applications and provides a code example for serializing messages to JSON.', '_(This example is complete, it can be run "as is")_ Storing and loading messages (to JSON) While maintaining conversation state in memory is enough for many applications, often times you may want to store the messages history of an agent run on disk or in a database. This might be for evals, for sharing data between Python and JavaScript/TypeScript, or any number of other use cases. The intended way to do this is using a `TypeAdapter`. We export [`ModelMessagesTypeAdapter`](../api/messages/#pydantic_ai.messages.ModelMessagesTypeAdapter) that can be used for this, or you can create your own. Here's an example showing how: serialize messages to json
                        
                                                from pydantic_core import to_jsonable_python
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.messages import ModelMessagesTypeAdapter  # (1)!
                        
                        agent = Agent('openai:gpt-4o', system_prompt='Be a helpful assistant.')
                        
                        result1 = agent.run_sync('Tell me a joke.')
                        history_step_1 = result1.all_messages()
                        as_python_objects = to_jsonable_python(history_step_1)  # (2)!
                        same_history_as_step_1 = ModelMessagesTypeAdapter.validate_python(as_python_objects)
                        
                        result2 = agent.run_sync(  # (3)!
                            'Tell me a different joke.', message_history=same_history_as_step_1
                        )
                        

              1. Alternatively, you can create a `TypeAdapter` from scratch: 
                            
                                                        from pydantic import TypeAdapter
                            from pydantic_ai.messages import ModelMessage
                            ModelMessagesTypeAdapter = TypeAdapter(list[ModelMessage])
                            

              2. Alternatively you can serialize to/from JSON directly: 
                            
                                                        from pydantic_core import to_json
                            ...
                            as_json_objects = to_json(history_step_1)
                            same_history_as_step_1 = ModelMessagesTypeAdapter.validate_json(as_json_objects)', '{"source": "pydantic_ai_docs", "url_path": "/message-history/", "chunk_size": 2437, "crawled_at": "2025-03-25T05:14:28.662511+00:00"}', '[0.006130038,-0.007598724,0.002183507,-0.00077714224,0.014969187,0.0095689865,-0.01478898,-0.0115032075,-0.0024898588,-0.013503504,-0.0132392,-0.033302236,0.0054752864,-0.039092883,-0.023330787,-0.004541214,-0.007106159,0.024087656,0.0025844672,0.04848767,0.030154621,0.053917903,0.031500164,0.022525862,0.010175683,-0.041039117,-0.025469242,0.04899225,0.02007505,-0.05377374,-0.01808076,-0.018981794,-0.012127925,0.012260076,-0.0023922466,0.017143684,0.036473878,-0.013972041,0.022177463,-0.00652349,0.0135755865,-0.03654596,0.048776,0.048920166,0.002901331,0.0784741,0.0047995104,0.036281656,-0.016062442,0.022081353,-0.02489258,0.04387437,0.014404538,-0.0195104,-0.0064153657,-0.009466869,0.0048415586,4.2376778e-05,-0.03892469,-0.004225852,-0.004018614,-0.022477807,-0.009815269,0.04901628,-0.018729504,-0.036185544,-0.052139863,0.055695947,-0.066171974,0.047262263,0.033686675,0.019137973,-0.034359448,-0.023138566,-0.023559049,-0.038275946,0.029409766,0.0868357,0.030250732,-0.035128333,-0.028953241,0.018861655,-0.02280218,0.040582594,-0.019870814,-0.011713449,-0.03423931,-0.027175201,-0.018309021,-0.038588304,-0.0077488967,0.012602469,-0.0366661,0.02239371,0.085153766,-0.015834179,-0.03714665,-0.025565352,0.012914828,-0.016903408,0.062760055,-0.04558033,-0.07040083,0.043273684,0.026838815,-0.0034059105,0.04231258,-0.001992788,-0.062760055,0.017395973,-0.05824287,0.011629352,0.0129748965,0.00090028363,-0.057906482,-0.00040584095,-0.00035609634,0.0031265898,0.033710703,-0.01798465,-0.03183655,-0.008163373,0.014404538,-0.014716897,0.023162594,-0.029938374,-0.029433794,-0.03524847,-0.009995476,-0.012578442,0.005379176,-0.030491007,0.054782897,-0.02698298,-0.030947533,-0.015089325,-0.004562238,-0.053149022,0.0010722311,0.028616855,0.031235863,-0.05742593,-0.029626014,0.0072262967,-0.025733545,0.03604138,-0.051611256,0.015245504,-0.025204938,-0.021732952,0.024568208,0.047190182,0.004721421,-0.007893062,-0.02226156,0.043369792,-0.0065294965,0.04031829,0.027920056,-0.04519589,-0.020639697,0.02748756,-0.031884607,-0.025565352,-0.010157662,0.0018230932,-0.010464014,-0.039573435,-0.023643145,-0.014656828,-0.016843338,-0.052908745,-0.02599785,0.007592717,0.015377656,-0.032821685,-0.052860692,-0.08097297,-0.023030441,-0.0014056138,-0.0026340242,0.00010803028,-0.063336715,-0.04707004,-0.021360524,-0.021384552,-0.031307947,0.02245378,-0.010361897,-0.009298676,-0.021132262,0.014656828,0.021024138,0.04142356,0.012806703,-0.014800994,0.03452764,-0.0014581742,-0.0039195,0.012326152,0.027799917,0.0072863656,0.031932663,0.0030530053,-0.0057305796,-0.032437243,0.022309614,0.01713167,-0.027559642,-0.060597572,0.033134043,-0.038780525,-0.0009813767,-0.018669436,-0.016134525,-0.017840482,-0.09514924,0.025973821,-0.08174185,0.028929215,-0.026190069,0.024592236,0.02907338,-0.0649706,-0.024940634,0.022021282,-0.023042455,-0.053149022,0.007814973,0.037098594,0.032581408,-0.025228966,0.0033518483,-0.049160443,0.03325418,-0.035584856,0.002640031,-0.002216545,0.04579658,0.022754125,-0.011310986,0.0057125585,0.03942927,-0.0054812934,0.002198524,0.04531603,-0.026069932,-0.04183203,0.054110125,0.027127145,0.055215396,-0.026862841,-0.005493307,-0.0056584966,-0.0167232,-0.025709517,-0.006385331,-0.014800994,-0.03484,0.008175386,0.0064213728,0.0007587461,-0.005385183,0.041543696,0.006968,-0.0013658181,0.0202072,-0.031500164,-0.0113530345,-0.04288924,0.037362896,-0.0027992139,0.0219492,0.048679892,-0.036185544,0.029842263,-0.025036745,0.019125959,0.0005079582,0.03327821,-0.0131310765,-0.0073584486,0.036305685,0.0013568078,0.008139345,0.016134525,0.011268938,0.03327821,-0.024628276,-0.04163981,0.021012124,0.013887946,0.022309614,-0.010115614,0.04798309,0.038275946,0.011262931,0.02818436,0.0015265027,-0.011022655,0.012224034,-0.029241573,0.025565352,-0.016014386,-0.03397501,0.012350179,-0.015762096,-0.038492195,0.032004744,-0.02736742,-0.0009603526,0.023571063,-0.009947421,-0.019186027,-0.027559642,-0.013599614,0.048751973,-0.043754235,0.026166042,-0.008061255,-0.07876243,-0.0019116949,0.027295338,-0.024448069,-0.07467774,-0.023066483,-0.024159739,-0.010109607,0.0017194742,0.060982015,-0.010914532,-0.002739145,0.03503222,0.021768993,0.03356654,0.008205421,-0.03952538,0.0014776966,-0.0038834587,0.03702651,-0.05026571,0.002471838,-0.029145462,-0.025252994,-0.024604248,0.0018095776,0.0043039415,0.059011754,-0.039164968,-0.031380028,0.022633987,0.0039645517,0.029025326,0.029650042,0.0064754346,-0.0046523414,-0.011581297,-0.006553524,0.0014837035,-0.0046853796,-0.02140858,0.020639697,-0.013972041,0.02796811,-0.041976195,0.022237532,-0.03813178,0.0016789276,-0.0101636695,0.0013185138,0.043177575,0.019486373,-0.000647994,0.0053491415,-0.0067938003,0.002139957,-0.009701138,0.0035741036,0.0033518483,0.037122622,0.021817049,0.034791946,0.014921132,-0.0045051724,0.0052410173,0.01922207,0.0053641587,0.015762096,-0.05276458,0.028929215,0.07102554,-0.04699796,-0.036569986,0.05204375,-0.002297638,0.03116378,-0.00983329,-0.025060773,0.023426898,-0.0024312914,-0.035200413,-0.0064393934,-0.02045949,0.02818436,0.005063814,-0.00036698385,0.0054362416,0.0030695242,0.013347324,0.00031123235,0.044475064,-0.022093367,0.019282138,-0.0027511588,-0.021624828,-0.045412138,0.013359338,-0.0019477363,0.0529568,-0.020675737,-0.010361897,-0.08568238,0.01653098,-0.018321035,-0.0264784,0.046181023,0.028232414,-0.046973933,0.0005950582,-0.012458304,-0.029145462,0.049208496,-0.009088434,-0.012374207,0.01782847,-0.025733545,0.04113523,0.0052680485,0.00095509656,-0.016542993,0.004039638,-0.020507546,-0.03575305,0.045147836,-0.012602469,-0.040005933,-0.03652193,-0.008157366,0.044066593,0.0037693277,0.009707145,-0.0047874968,-0.060982015,-0.01802069,-0.035560828,-0.057329822,0.029049352,0.032869738,0.05218792,-0.021781007,0.0023201639,-0.015702028,-0.025829656,-0.0029433793,-0.0019792723,-0.012127925,0.0306592,-0.022117393,-0.0101036,0.035584856,0.024676332,0.006265193,0.024015574,-0.023078497,0.0038053691,-0.029145462,0.036858317,0.05170737,-0.023571063,0.013599614,0.013359338,0.0072563314,-0.026790759,-0.016074456,-0.0069619934,0.049833216,0.006337276,-0.0473824,0.0034960138,0.04550825,-0.0359693,0.0035560827,0.029409766,-0.011851607,0.012926842,-0.0051869554,-0.04070273,-0.030731283,0.00088151207,-0.023042455,0.005607438,-0.016867366,-0.03046698,0.053004857,0.0054002,-0.061991174,0.021672884,-0.020507546,0.019846786,0.06751752,-0.02558938,-0.010542104,-0.019089917,-0.024027586,0.01738396,-0.025901739,-0.011725462,0.020099076,0.0056735137,0.024496125,0.0019041862,-0.01738396,0.01887367,-0.0044571175,0.0032377173,0.013695724,-0.0016488931,-0.0122420555,-0.004475138,-0.01697549,0.021420594,0.016314732,0.022213504,0.0050818347,-0.0038474174,-0.007658793,-0.019125959,0.0016023397,-0.026670622,0.004033631,0.0058206827,0.016771255,-0.005538359,0.0031025622,0.0009738681,0.028280469,0.01900582,0.014849048,-0.0015069802,0.005754607,0.03894872,0.002363714,0.00028457673,-0.022946345,0.039501354,-0.009773221,-0.04091898,0.00065400085,0.020904,0.014680856,-0.025805628,-0.011785531,0.0018756535,0.0066976896,0.011527235,0.022177463,0.021000111,0.014704883,-0.04829545,0.0033788793,0.03426334,0.012133931,-0.002237569,-0.014356483,-0.005964848,-0.0011247915,0.0041207313,0.008433683,-0.022850234,0.0077609103,-0.0106081795,0.00152425,0.019378249,0.015629945,-0.0054812934,-0.011695428,-0.015714042,0.0064814417,0.002260095,-0.001148819,-0.008872187,-0.008283511,-0.0011495699,-0.0058056656,-0.02945782,0.017972635,-0.0055503724,0.01827298,-0.053100966,0.00991138,0.036882345,-0.0029403758,-0.013695724,0.029313656,0.0024958656,0.028448662,-0.026214097,-0.0027887018,-0.020435462,-0.005024769,0.012350179,0.013863917,-0.021300456,-0.044427007,-0.032004744,-0.0098693315,-0.04091898,0.016086468,0.075398564,-0.030635173,-0.026069932,0.025252994,0.012878787,0.008349586,0.014861062,0.027559642,-0.011599317,0.0024463087,-0.029626014,-0.012302124,-0.019834774,-0.0077008414,0.04440298,0.010500056,-0.011383069,-0.0006228401,-0.0019026846,-0.0067697726,-0.0034209276,-0.0188136,-0.018032704,-0.0033608587,0.028592829,-0.0152094625,0.033206124,0.028664911,-0.0033037933,0.06650836,-0.007628759,-0.011461159,-0.0046042865,-0.013539545,0.03366265,0.013167118,0.008722014,-0.002019819,0.009160518,-0.019498387,-0.007460566,0.019426303,-0.035080276,-0.003940524,-0.0222976,0.032028772,0.021204345,0.012578442,0.0018936741,-0.0037422967,0.025349105,0.015569876,-0.014849048,-0.0044150692,0.014512663,-0.023619117,-0.00826549,-0.0056314655,0.021588787,-0.021877117,-0.015906263,0.033230152,-0.007917089,-0.026718676,-0.03476792,0.02698298,0.047406428,0.0030394897,-0.014116207,-0.0036582001,0.009166525,0.0017495087,-0.012458304,-0.052812636,-0.026262153,0.015017241,0.029914346,0.021516703,0.0025874707,0.021012124,0.009178538,-0.0057125585,-0.023871407,-0.033085987,-0.015569876,0.012151952,-0.013395379,-0.029722124,-0.031139752,0.0017960621,0.031091698,-0.005433238,-0.027847974,0.023703214,-0.006847862,0.028881159,0.021588787,-0.017600207,-0.01627869,0.021624828,0.006559531,-0.030346842,-0.0033578551,0.022874262,-0.026958952,0.0014416552,0.009749194,-0.04212036,0.0014424061,0.07040083,-0.049256552,0.035200413,-0.011383069,0.013287256,0.020279283,0.0012749638,-0.016915422,0.001791557,-0.042432718,0.032653492,-0.024412028,0.016362786,0.008325559,0.0078029586,0.00037787136,-0.025445214,0.027415477,-0.018537283,-0.0116473725,0.016651118,0.015377656,0.0069980347,-0.044234786,0.007682821,-0.01910193,0.0056735137,0.0119417105,-0.00046891338,0.021528717,-0.010049538,-0.069151394,0.017251806,0.004808521,0.012109904,-0.029890317,0.06924751,-0.0001173222,-0.015269531,0.0205556,0.004676369,-0.010710297,-0.022838222,-0.021456635,-0.004255886,0.010283807,0.028424636,0.019438317,-0.03522444,0.024532165,-0.015089325,0.060165077,-0.0070520965,-0.026454372,0.02375127,-0.008914235,0.0018861656,0.013419407,-0.0065895654,-0.041808,-0.005742593,-0.011527235,-0.0443309,-0.028064221,-0.0032166932,0.027151173,0.038275946,-0.015533835,0.0131310765,0.026958952,-0.06790196,-0.039597463,0.03964552,-0.011178834,0.0143204415,0.0028998293,-0.03644985,0.025805628,-0.005646483,-0.030346842,0.0018756535,-0.036329713,-0.0022345656,-0.029794207,0.04142356,-0.0024327931,-0.003799362,-0.020976083,0.0044180723,-0.015113352,-0.02...', '2025-03-25 05:14:36.276401+00'), ('43', 'https://ai.pydantic.dev/message-history/', '5', 'Continuing Conversations with Message History', 'You can continue conversations using the same message history even when a new agent run is initiated. Messages are represented by dataclasses, allowing for easy creation and manipulation across different models. This allows messages from one agent run to be reused in another run with different models.', '3. You can now continue the conversation with history `same_history_as_step_1` despite creating a new agent run.
_(This example is complete, it can be run "as is")_ Other ways of using messages Since messages are defined by simple dataclasses, you can manually create and manipulate, e.g. for testing. The message format is independent of the model used, so you can use messages in different agents, or the same agent with different models. In the example below, we reuse the message from the first agent run, which uses the `openai:gpt-4o` model, in a second agent run using the `google-gla:gemini-1.5-pro` model. Reusing messages with a different model
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('openai:gpt-4o', system_prompt='Be a helpful assistant.')
                        
                        result1 = agent.run_sync('Tell me a joke.')
                        print(result1.data)
                        #> Did you hear about the toothpaste scandal? They called it Colgate.
                        
                        result2 = agent.run_sync(
                            'Explain?',
                            model='google-gla:gemini-1.5-pro',
                            message_history=result1.new_messages(),
                        )
                        print(result2.data)
                        #> This is an excellent joke invented by Samuel Colvin, it needs no explanation.
                        
                        print(result2.all_messages())
                        """
                        [
                            ModelRequest(
                                parts=[
                                    SystemPromptPart(
                                        content='Be a helpful assistant.',
                                        timestamp=datetime.datetime(...),
                                        dynamic_ref=None,
                                        part_kind='system-prompt',
                                    ),
                                    UserPromptPart(
                                        content='Tell me a joke.',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    ),
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    TextPart(
                                        content='Did you hear about the toothpaste scandal? They called it Colgate.',
                                        part_kind='text',
                                    )
                                ],
                                model_name='gpt-4o',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                            ModelRequest(
                                parts=[
                                    UserPromptPart(
                                        content='Explain?',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    )
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    TextPart(
                                        content='This is an excellent joke invented by Samuel Colvin, it needs no explanation.',
                                        part_kind='text',
                                    )
                                ],
                                model_name='gemini-1.5-pro',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                        ]
                        """
                        

Examples For a more complete example of using messages in conversations, see the [chat app](../examples/chat-app/) example.  Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/message-history/", "chunk_size": 4427, "crawled_at": "2025-03-25T05:14:28.636257+00:00"}', '[-0.018452462,-0.0036641853,0.02430263,-0.010065548,0.009338975,0.02613159,0.0052927122,0.013316338,-0.010466416,0.0036453945,-0.031117389,-0.03337227,-0.0110802455,-0.00023977707,-0.040813386,-0.022912119,-0.029087994,0.014193237,0.015947035,0.02377649,0.02718387,0.042842783,0.0024756738,0.02403956,-0.021797204,-0.018051593,-0.04246697,0.061934125,-0.013241176,-0.037205573,-0.004315596,-0.018214446,-0.060881846,0.020306475,-0.010078075,0.014994973,0.006727068,-5.304456e-05,-0.002918821,0.0008573254,0.028561855,-0.037932146,0.050960362,0.020582072,-0.021909948,0.026858164,-0.02264905,0.059829567,-0.0073158434,0.015571222,-0.019792864,0.026983436,0.019567376,-0.008806571,-0.006714541,-0.03364787,-0.008374386,-0.013166012,-0.027384304,-0.025354909,-7.44777e-05,-0.022047747,0.0015236121,0.021383809,-0.015170353,-0.025204584,-0.03151826,0.042642348,-0.042792674,0.033171836,-0.013992803,-0.018377298,-0.07160507,-0.008743936,-0.053515896,-0.025279747,0.005618417,0.07967254,0.018840803,-0.028486691,0.001380333,-0.014543997,-0.014381144,0.0261817,-0.0467763,0.0068961848,-0.018452462,-0.009069641,-0.030090164,-0.077267334,-0.018089175,0.01057916,0.0019432709,0.03124266,0.06930008,0.0013255269,-0.044170655,-0.025592925,0.031994287,0.006971347,0.07406039,-0.056722842,-0.067646496,0.040788334,0.013341392,0.0066519054,0.015020028,0.003495069,-0.053766437,0.0037017667,-0.077267334,-0.020306475,0.011625175,0.0011845967,-0.06579248,0.011424742,0.0051267277,-0.05617165,0.029639188,-0.014606632,-0.0652914,-0.036904924,-0.00089099206,-0.022962227,0.011750447,-0.027810227,-0.027835282,-0.04672619,-0.0058125877,0.0197177,0.010854757,0.0033134257,0.0012542788,0.0072156265,-0.017813578,-0.002403643,-0.03652911,-0.021471499,-0.056772947,0.040337354,0.032269884,-0.04141469,-0.06183391,0.019366942,-0.0076478124,0.046801355,-0.0647402,0.008230324,-0.03267075,-0.0065328977,0.03272086,0.03424917,-0.04847999,0.005649735,-0.038383123,0.04965754,0.01562133,0.03041587,0.016848989,-0.040136922,-0.007597704,0.025254693,-0.04730244,-0.03923497,-0.047803525,-0.0037362163,0.01136837,-0.0048573944,-0.031693637,-0.039711,-0.023676274,-0.015182881,-0.012696246,-0.012477021,0.04171534,-0.021433918,-0.06619335,-0.05501915,-0.028211094,-0.01776347,0.012445703,-0.0016300926,-0.043945167,-0.047853634,-0.023839127,-0.010779595,0.0038333016,6.6648245e-05,-0.0036453945,0.018966073,-0.0072594713,-0.004303069,0.03748117,0.015571222,0.008869207,-0.040262192,0.056572516,-0.0027794568,0.009345238,0.0042059836,0.026732894,-4.2792868e-05,0.027910443,0.0029015963,-0.030666413,-0.06433933,0.0034073791,0.01706195,-0.06569227,-0.009457982,0.040688116,-0.04847999,0.029388646,-0.0068523395,-0.066243455,-0.040688116,-0.08232829,0.0057186345,-0.06724563,0.03743106,-0.0038928054,0.012245269,0.025931157,-0.041965883,0.000539058,0.01732502,0.027284088,-0.060982063,-0.013967749,0.0635376,0.02556787,-0.020256368,0.0026948988,-0.046400487,0.046024673,-0.05511937,0.012301641,-0.0033228209,0.029388646,-0.020469328,-0.010503998,0.0014390539,0.035151124,-0.0061195027,0.009476773,0.04036241,-0.002630697,-0.056973383,0.046801355,0.04141469,0.05642219,-0.012733826,-0.0029313483,-0.019868027,0.00388341,-0.04329376,-0.017851159,-0.018627841,-0.02469097,-0.0005167441,0.02953897,-0.016347904,-0.038157634,0.041990936,-0.0095895175,-0.026908273,0.011593858,-0.03477531,-0.008349331,-0.021909948,-0.006188402,-0.025780832,0.022824429,0.02517953,-0.039786164,-0.007867037,0.0006157867,0.022060275,0.005361611,0.0005437557,0.003952309,0.020895252,0.025430072,0.013654571,-0.0077041844,0.033572707,-0.0037048985,0.008130107,0.019442104,-0.0038082472,0.011380897,0.016247686,0.01815181,-0.023851654,0.03019038,0.035276394,0.041164145,0.018352244,-0.012101207,0.006846076,0.0053428207,-0.00984006,0.009508091,-0.00049286423,-0.02365122,0.05732414,-9.317052e-05,-0.056522407,0.046851464,-0.02120843,0.014456307,0.0435443,-0.009764897,-0.03166858,-0.0011102168,-0.02613159,0.02753463,-0.043093324,0.015496058,0.02373891,-0.020920306,-0.016848989,0.019554848,-0.0341239,-0.06965084,-0.017487872,0.022987282,-0.007422324,-0.010980029,0.056873165,-0.023325514,-0.038082473,0.015997143,0.05123596,0.0035357822,0.033146784,-0.0594287,0.027559685,0.054969043,0.053916764,-0.032796025,0.001825829,-0.027384304,-0.040738225,-0.017249856,-0.005493146,-0.0001769457,0.018264554,-0.05141134,0.004531689,0.007622758,-0.00839944,0.050810035,0.016786354,0.020181205,-0.0066644326,-0.035752427,0.019291779,-0.0042498284,0.012596028,-0.039886378,0.007910882,0.009614572,0.002804511,0.005521332,0.043895062,-0.030165328,-0.040562846,-0.037080303,0.023876708,0.024503065,-0.012639874,-0.038157634,-0.0061351615,-0.05131112,-0.016585918,-0.03612824,0.008017363,-0.0036547899,0.05431763,0.011631439,0.009620835,-0.01836477,-0.00586896,0.0051831,0.027409358,0.0031709296,0.011932091,-0.020394167,0.033973575,0.073509194,-0.041865665,2.4014409e-05,0.044997446,-0.0037612705,0.048454937,-0.013980276,-0.0026432243,0.027484521,0.02771001,0.0064953165,-0.015007501,-0.0075162775,0.03652911,-0.013466664,-0.009827533,0.0041496116,0.015132772,0.021396337,0.046049725,0.06784693,0.012815253,0.0067082774,-0.017224802,-0.033021513,-0.022523778,-0.008267906,0.0033290845,0.063236944,0.029263373,0.00913854,-0.07190572,0.0064201537,-0.0006240076,-0.0022188677,0.049031183,-0.0031333482,-0.025755778,-0.0068961848,-0.028486691,-0.03041587,0.03540167,0.013166012,-0.0043531773,0.011969672,-0.026281917,0.019254198,0.00014357264,0.0020638446,-0.027108707,0.023626165,-0.01409302,0.00025308714,0.00813637,-0.026382133,-0.017963903,-0.048880856,-0.0025195188,0.036203403,-0.02665773,-0.00910096,-0.0405879,-0.03347249,0.00811758,-0.05737425,-0.052613944,0.06955062,0.017337546,0.03655416,-0.0009794649,0.00938282,-0.016410539,-0.0034731466,0.028787343,-0.027609792,0.008305486,0.015771655,-0.023112552,-0.009827533,0.029764459,0.03041587,-0.014243346,-0.001136054,-0.026231809,-0.027584739,-0.02988973,0.036253512,0.040086813,0.0015478834,0.012940524,0.03482542,0.04467174,0.020168677,0.04041252,-0.038633667,0.028762288,-0.0028076428,-0.060531087,0.013516773,0.00072970527,-0.0095582,0.003952309,-0.005931596,-0.012978106,0.032169666,0.0109737655,-0.0032132086,-0.0135668805,-0.0071404637,-0.032871187,-0.033748087,-0.0065141073,-0.01636043,0.030165328,-0.0008040851,-0.033622816,-0.02718387,-0.01182561,0.021521607,0.026432242,-0.015032555,-0.03006511,-0.0010577595,-0.0023832864,0.005173704,0.0036172085,-0.0060881847,0.030616304,-0.00393665,-0.007635285,0.027634846,0.00541172,0.0052551306,-0.014368617,0.00033216467,-0.0047070687,0.011643967,-0.012877889,-0.0030237357,0.0011806819,0.0465007,0.007152991,0.044947337,-0.0077793472,-0.005064092,-0.018615313,-0.0042341696,0.02264905,-0.044822067,-0.012489548,-0.016986787,0.033322163,0.0023504025,0.006489053,-0.024139777,0.0020888988,0.006053735,0.021947531,0.0072532077,-0.0035608364,0.0323701,-0.013028215,0.0270586,-0.00086828665,0.0078231925,-0.0030237357,-0.03843323,0.00012947962,0.036479,0.017099531,-0.0038426968,-0.012038571,0.0028013792,0.010904866,-0.0023644955,0.02403956,0.029313482,0.027785173,-0.034875527,-0.0043469137,0.038282905,-0.0044533946,0.0033228209,0.0015721547,-0.0038646194,-0.025505235,0.008411967,0.0024521856,-0.0473776,-0.0005480619,0.0015502322,-0.039711,0.014055439,0.0029595343,-0.008693827,-0.0335226,-0.027885389,0.007209363,-0.006319937,-0.0007782479,-0.011963408,-0.024139777,-0.006583006,-0.004775968,-0.04171534,-0.0044095493,-0.02120843,0.027434412,-0.029739404,0.025141949,0.05712371,-0.017826105,-0.047152113,0.017387655,0.017312493,0.0044909758,-0.012489548,-0.012646137,-0.02224818,-0.014681796,0.015207935,-0.0010374029,-0.0245657,-0.032620642,-0.034925636,-0.0036547899,-0.027910443,0.0052363398,0.09731074,-0.0056058904,0.004688278,0.039285075,0.0034606194,0.016811408,0.00068429444,0.015859345,-0.027133761,-0.019993298,-0.004600588,-0.0015862477,-0.0038145108,0.0058908826,0.05161177,0.008919316,-0.0142684,0.012608555,0.015458478,0.013491718,-0.0034982008,-0.02583094,0.0030315653,-0.0035263868,0.001854015,-0.007409797,0.007065301,0.0012276586,-0.006432681,0.01924167,0.0004071317,-0.025016677,-0.033146784,-0.03900948,0.038633667,-0.008004836,0.012383067,-0.0069087115,-0.01579671,-0.014243346,-0.0078733,-0.00776682,-0.030115219,0.042517077,0.00078294554,0.017337546,0.0075851767,0.015207935,-0.009044588,0.0010561936,0.02966424,0.005220681,-0.032996457,0.01238933,0.05807577,0.0055589136,-0.025367437,0.021020522,0.0052707894,-0.03958573,0.008668773,0.027860334,-0.02412725,-0.019968243,-0.029138103,0.06679465,0.063136734,-0.009746106,-0.019103872,0.00910096,0.011149145,0.0072970525,-0.013441609,-0.013817423,-0.022887064,0.03247032,0.046976734,-0.004315596,0.0058470373,0.019166507,0.008994479,-0.028937668,-0.0064107585,-0.039134752,-0.006971347,0.021045577,-0.010904866,-0.03224483,-0.04066306,0.04336892,0.019141452,0.003867751,-0.00957699,-0.0009872944,0.0068523395,0.009996649,-0.0048260763,-0.010291036,-0.03718052,-0.017049422,0.010453889,-0.020444274,0.0060756574,0.01200099,-0.036228456,0.018577732,-0.010547843,-0.0158844,-0.017638197,0.046175,-0.034574877,0.016009672,-0.007008929,-0.016222632,0.013616989,-0.0067959675,-0.004541084,-0.0039773635,-0.05712371,0.030040056,-0.0031724954,-0.0013560617,0.015909454,-0.015633857,0.007290789,-0.0129029425,-0.015633857,-0.02303739,0.010278509,0.0042498284,-0.005195627,0.007735502,-0.012495811,0.009238758,0.00676465,-0.007841983,0.009232494,0.031192552,0.008587347,-0.0019651933,-0.04735255,-0.014543997,0.0053991927,0.012489548,-0.017913794,0.024014506,-0.0020654104,-0.0036923713,0.052463617,0.0058470373,-0.021283593,-0.003050356,-0.016197577,-0.0053710067,-0.0053302934,0.009777424,0.051962532,-0.021020522,0.03259559,-0.019266725,0.045523588,-0.03289624,0.0068523395,0.02259894,-0.017174695,-0.0008213099,0.021083158,-0.020582072,-0.008374386,-0.013504245,-0.029163156,-0.043343868,-0.03184396,-0.018552678,0.0069400296,0.015821764,-0.009952804,0.010090603,0.028461637,-0.07461158,-0.007754293,0.05038411,-0.024878878,0.019667592,0.0072594713,-0.0048417356,0.010516525,-0.021108212,-0.030015001,0.009883905,-0.009526881,0.0035483092,-0.02259894,0.024891406,0.01553364,0.009439192,-0.010967501,0.0013685889,-0.019404523,-0.017563036,...', '2025-03-25 05:14:36.325909+00'), ('44', 'https://ai.pydantic.dev/models/', '0', 'PydanticAI Models Documentation', 'This section provides an overview of the Models feature in PydanticAI, including links to installation instructions, configuration details, and additional resources like agents and troubleshooting help.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Models  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * Models  [ Models  ](./) Table of contents 
                  * Models, Interfaces, and Providers 
                  * OpenAI 
                    * Install 
                    * Configuration 
                    * Environment variable 
                    * provider argument 
                    * Custom OpenAI Client 
                  * Anthropic 
                    * Install 
                    * Configuration 
                    * Environment variable 
                    * provider argument 
                    * Custom HTTP Client 
                  * Gemini 
                    * Install 
                    * Configuration 
                    * Environment variable 
                    * provider argument 
                  * Gemini via VertexAI 
                    * Install 
                    * Configuration 
                    * Application default credentials 
                    * Service account 
                    * Customising region 
                  * Groq 
                    * Install 
                    * Configuration 
                    * Environment variable 
                    * provider argument 
                  * Mistral 
                    * Install 
                    * Configuration 
                    * Environment variable 
                    * provider argument 
                  * Cohere 
                    * Install 
                    * Configuration 
                    * Environment variable 
                    * api_key argument 
                  * Bedrock 
                    * Install 
                    * Configuration 
                    * Environment variables 
                    * provider argument 
                  * OpenAI-compatible Models 
                    * Ollama 
                      * Example local usage 
                      * Example using a remote server 
                    * Azure AI Foundry 
                    * OpenRouter 
                    * Grok (xAI) 
                    * Perplexity 
                    * Fireworks AI 
                    * Together AI 
                  * Implementing Custom Models 
                  * Fallback 
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.f', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 5000, "crawled_at": "2025-03-25T05:14:35.654762+00:00"}', '[-0.01750719,-0.00414453,0.03457888,-0.017710425,0.0011159745,-0.0074543464,-0.026885005,0.03727899,-0.009305231,0.012230354,0.018741112,-0.09540402,-0.015837764,-0.026957588,0.017260404,-0.0035239388,-0.030949691,0.004296955,-0.01189647,0.06329299,0.04575677,0.025999483,0.012658598,0.020294404,0.015605496,0.0095374985,0.0044602687,0.04035654,0.0037598358,-0.04802138,0.038324196,-0.021571876,-0.043143753,-0.00057613314,0.012484398,0.003745319,-0.0064418036,0.01804431,-0.0032499353,0.022036413,0.015126444,-0.050460193,0.037220925,0.025462365,-0.06799641,-0.009152805,0.0013545934,0.022399332,0.0008601169,-0.00454374,-0.06909969,0.015344195,-0.028946381,0.032982036,-0.017144272,-0.003723544,-0.03283687,0.009987518,-0.009254422,-0.019699218,0.0018672158,-0.00699344,-0.009806058,0.06236392,-0.026028518,-0.024707492,-0.06271232,0.007018844,-0.06137678,-0.015445813,0.020396022,0.04235985,-0.030107722,-0.050721493,-0.028931865,-0.029643185,0.009617341,0.10446247,-0.0075196717,-0.049066585,-0.024112307,0.03960167,0.0066704424,-0.01327556,-0.0196847,-0.030252889,-0.046453573,0.009392331,-0.011540809,-0.019074997,-0.009994776,-0.005392969,-0.040501706,-0.0058829095,0.092674874,0.0024170375,0.0003608771,0.027697941,0.024983311,0.031240027,0.019757284,-0.03844033,-0.029570602,0.029628668,0.026260784,-0.0030612177,0.02338647,-0.017202338,-0.017783009,0.013558636,-0.12298583,-0.0044022016,-0.019713735,0.024533292,-0.07095783,0.010611738,0.017158788,0.0037961279,-0.0034495406,-0.070435226,-0.035391815,0.015779698,0.025084928,0.0032571938,0.023763904,0.015431296,-0.009552016,-0.035711184,-0.05411841,-0.02258805,0.02784311,-0.0029214942,0.019931486,-0.020555705,-0.01127225,-0.023357436,-0.029715769,-0.021179926,-0.043492157,0.040211372,0.04302762,-0.029570602,-0.0062639737,0.025999483,-0.037656426,0.0008043182,-0.03359174,-0.02855443,-0.043230854,0.012956192,0.025999483,0.0069390023,-0.034056276,-0.029294783,-0.03701769,0.0056687873,0.013413468,0.0451761,0.0006623263,-0.04325989,-0.016781352,0.07060943,-0.0385855,-0.008390676,-0.018726597,0.011192407,-0.043579258,-0.0108367475,-0.07148043,-0.03460791,-0.019612117,-0.016999103,-0.029323816,0.00061197137,0.011555326,-0.028133444,-0.026173685,-0.023546154,-0.034811147,-0.045698702,-0.035043415,0.015794214,-0.040908176,-0.021325093,-0.0050990055,-0.009297973,-0.002431554,0.022065446,-0.02493976,0.059925105,0.0069063394,0.026246268,0.057486296,0.04186628,0.033969175,-0.028656047,0.058270197,-0.008876987,0.030456122,0.022210615,-0.0066885883,0.005628866,0.033243336,0.002578536,0.0015306089,-0.04093721,0.028786698,0.014436899,-0.008913279,-0.020904107,0.056847557,-0.06491887,0.02493976,-0.010727871,-0.042998586,-0.010764164,-0.050982796,0.0034731303,-0.00048494988,0.03684349,-0.029643185,0.05754436,0.018334644,-0.017870108,0.012012604,0.011010949,0.04476963,-0.07020296,0.025955932,0.024533292,0.026333367,0.018465295,-0.008789887,-0.0017937248,0.015329679,-0.045001898,0.047876213,-0.007370875,0.002329937,-0.017870108,0.016200682,-0.003745319,0.0007920697,0.023618737,0.029294783,-0.0029850048,-0.009617341,-0.043230854,0.020076653,0.032807834,0.061144512,-0.0017556184,0.022384815,0.013878005,0.0013028776,-0.024286509,-0.025549464,-0.022428365,-0.03283687,0.0037961279,-0.028293129,0.028960899,-0.01871208,-0.025462365,-0.012629565,-0.026493052,-0.021354126,0.024155857,-0.048950452,-0.044305094,0.0326046,0.028307645,0.06259619,-0.0069716647,-0.0457858,0.024431676,-0.003692696,0.03184973,-0.0017020879,0.00850681,-0.006782947,-0.008579394,0.056121722,0.011867436,-0.0004643089,0.027160823,0.0076140305,-0.01888628,-0.02748019,0.0010941994,0.034404676,0.022196097,0.035740215,-0.045553535,0.017086204,-0.008136634,0.07479025,-0.007889849,0.038004827,-0.005999043,0.07159657,0.0070623946,-0.0032898565,-0.023183236,-0.0037562067,0.015576463,0.01104724,-0.0022428364,0.05092473,-0.036582187,-0.04183725,0.014792559,-0.011852919,-0.040733974,-0.015939381,-0.038149994,0.05104086,-0.009544757,0.039892003,-0.016766837,-0.06718348,-0.046221305,0.006293007,0.013928813,-0.0587928,0.027276957,0.041982416,0.0006432731,-0.009820575,-0.022413848,0.02450426,-0.039137132,-0.010981915,0.005948235,-0.008078567,-0.023139685,-0.015881315,0.03176263,-0.018233027,0.025955932,-0.043172788,-0.0584444,-0.05368291,-0.009080222,-0.015736148,0.01972825,0.02013472,0.027378574,-0.0009689925,0.005799438,-0.009835092,-0.008260026,0.021455742,0.03835323,-0.03292397,-0.0080205,-0.0044711563,-0.021920279,-0.016999103,0.026362402,-0.06596407,-0.0028180624,0.0045038187,0.0011767633,0.0032590083,0.012477139,-0.0104520535,-0.01260779,0.00058157695,-0.022907417,0.038062897,-4.7264468e-05,-0.031123893,-0.02293645,-0.024112307,-0.021746079,-0.02730599,0.0028888315,0.0010724242,0.011177891,0.027320506,0.018552395,0.014487708,0.012571498,0.04845688,0.003937666,0.0011277694,0.00019132611,-0.027015654,0.05069246,0.06253812,-0.024605876,-0.011591618,0.011918245,0.023168718,-0.0030085945,0.02075894,0.010858523,0.06428013,0.011388384,-0.003024926,0.0062022777,-0.032140065,0.019612117,-0.02013472,0.017347505,0.07659033,0.02155736,-0.007505155,-0.0120198615,0.024213925,-0.05638302,0.034056276,-0.01946695,-0.020642806,-0.05493135,0.0148578845,0.021818662,0.017115237,0.029701252,-0.028539913,-0.07508059,-0.036698323,-0.004246147,-0.078332335,0.062247787,0.06044771,-0.04111141,0.013682028,-0.05551202,0.01002381,0.017115237,0.03492728,-0.0077229063,0.0034894617,-0.026347885,-0.01354412,0.012927158,0.022733217,0.011990828,0.041982416,-0.05710886,-0.038295165,0.042214684,-0.014023172,-0.02147026,0.0028579833,-0.038904864,-0.016665218,-0.01897338,0.013007,-0.0056324955,0.007109574,0.013057808,-0.018726597,-0.048166547,0.064164,-0.0011958166,0.051737666,0.0042788093,0.053653874,0.023734871,-0.054060344,0.020352472,-0.0076285475,0.00011670099,0.015416779,-0.011315799,-0.008702787,0.0052768355,0.0327788,-0.032662667,-0.006126065,-0.036669288,-0.039630704,-0.040298473,0.02205093,0.010285111,-0.03443371,0.00450019,0.0328659,-0.032256197,-0.016708769,0.027726976,-0.009893159,0.053653874,-0.024649426,-0.025128478,0.0069970693,0.0193363,-0.023531638,0.013464278,0.041227546,-0.018392712,0.015532913,-0.025680115,-0.032285232,0.0016857566,-0.021920279,-0.0196847,-0.0062639737,-0.012426331,-0.017405573,0.040617842,-0.005795809,-0.014197373,0.019379849,-0.023546154,-0.011852919,0.031965863,-0.057979863,-0.004387685,-0.0088552125,0.035072446,0.01100369,0.040385574,0.0011386569,0.02534623,0.015895832,-0.004315101,0.028888315,-0.04035654,-0.013478794,0.016882969,0.0020631917,-0.01826206,-0.030223856,-0.0152716115,-0.041459814,-0.014669167,0.012404555,-0.005349419,0.028873798,-0.018465295,-0.061492916,0.034230474,0.004859479,-0.013928813,-0.046018068,-0.02450426,-0.002936011,0.025767215,-0.023952622,0.0019779059,-0.004717941,0.01964115,0.009900417,-0.014894176,0.0016540012,0.034085307,0.08501004,-0.015489363,0.024271991,-0.020279888,0.025680115,0.026434986,-0.011185149,-0.015779698,0.045727734,0.004191709,0.00017340701,-0.018058825,0.022355782,0.01572163,-0.011838403,0.02872863,0.023212269,-0.019394366,-0.029788353,-0.0152716115,0.010633512,-0.0053131273,-0.02414134,0.0028307645,-0.0072765164,0.00823825,-0.011294025,-0.007555964,-0.01875563,0.0044276062,-0.031501327,-0.018654013,0.0017737643,0.02726244,-0.04360829,0.0013037848,-0.01425544,0.013776387,0.026420468,0.034724046,0.023647772,-0.007327325,-0.01273844,-0.027552774,-0.022196097,-0.004311472,0.049327888,-0.0060643684,-0.032227166,0.026318852,0.008978604,-0.038382262,0.0058937967,0.03184973,-0.010742389,0.0031011389,-0.005461924,0.0022265052,-0.015184511,-0.009080222,-0.010335919,0.009029413,0.012861833,-0.035159547,-0.012636824,0.019916968,-0.040792044,0.01884273,0.06358333,-0.023357436,-0.004565515,-0.006554309,0.027407607,0.0051244097,0.0028253207,-0.010793197,-0.008978604,-0.03960167,-0.028162478,0.0019833497,-0.019191131,0.03559505,0.04802138,0.0049502086,-0.01184566,0.015431296,-0.0015814175,-0.03437564,0.00083607354,-0.034201443,0.01768139,0.04012427,-0.0036763647,-0.024605876,0.033069137,-0.023705838,-0.015416779,0.008405193,0.0075341887,-0.02133961,0.015707115,-0.0031954977,0.017855592,0.0027019284,0.024460709,-0.017957209,0.009806058,-0.023168718,-0.027741492,0.030281922,-0.06062191,0.039979104,0.013667512,-0.014531258,-0.016041,0.026130134,0.041140445,0.043811526,0.0087681115,0.010858523,0.0055381367,0.018900797,0.0228058,0.02655112,-0.0010452054,-0.013994139,0.028830247,-0.052899003,-0.01550388,0.024881694,-0.012085187,-0.007759198,-0.072583705,0.019699218,0.06282846,-0.015169995,0.030049654,0.022326747,0.0031882392,0.020526672,0.016099066,-0.025026862,0.019800834,0.00023147397,-0.00036133075,-0.014429641,-0.022878384,0.015808731,-0.00743983,-0.118688874,-0.0164765,0.008318093,-0.0019978664,0.001200353,-0.030136755,0.0024533293,-0.010168977,0.0123755215,0.02525913,-0.02605755,-0.031820696,0.0055816867,-0.017608806,0.010996431,-0.008985863,0.0035838205,0.003175537,0.02218158,-0.01229568,-0.034143373,-0.035478916,0.03675639,-0.00730555,-0.0002336288,0.015997449,-0.038411297,-0.0050772303,0.021746079,-0.02659467,-0.010045585,0.008426968,0.0009689925,0.007802748,0.0031737224,0.0065107583,-0.004558257,-0.050576326,0.024126824,-0.025026862,0.00017692278,-0.010851264,-0.013638479,-0.0037271732,-0.011526292,-0.009552016,-0.037714493,0.010473829,0.052579638,-0.019583084,-0.013928813,0.0014344355,0.014132047,-0.0026728949,-0.012542464,0.008681011,-0.0116351675,-0.0002665183,0.017913658,-0.0326046,0.0052586896,0.00846326,0.014807076,-0.025201062,0.04151788,-0.006779318,-0.007693873,0.025244612,-0.015416779,-0.01371832,-0.021731561,0.0022029155,-0.0025222837,0.009885901,0.019191131,0.021150893,-0.038411297,0.0019543162,-0.02975932,0.01946695,-0.013014259,-0.0013863487,0.0016676106,-0.008710044,-0.010118169,0.015576463,-0.01875563,0.002143034,-0.032285232,-0.03817903,-0.03176263,-0.049066585,0.012927158,0.007026103,-0.024780078,0.014545775,-0.027001139,-0.0013917926,-0.084080964,-0.014981276,-0.0039993622,0.012397297,0.036582187,-0.014233665,0.012716665,0.035217613,-0.013965105,-0.011127082,0.013848971,-0.006347445,-0.0385855,0.008100341,0.039979104,-0.02414134,0.034491777,-0.017391056,0.016665218,0.011736785,-0.021528328,-0.0017401944,0.0041227546,0.04...', '2025-03-25 05:14:38.501238+00'), ('45', 'https://ai.pydantic.dev/models/', '1', 'Pydantic AI Models Listing', 'The document lists various model categories and their specific endpoints within the Pydantic AI framework, including models for OpenAI, Anthropic, Bedrock, and others.', 'ormat_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Models, Interfaces, and Providers 
              * OpenAI 
                * Install 
                * Configuration 
                * Environment variable 
                * provider argument 
                * Custom OpenAI Client 
              * Anthropic 
                * Install 
                * Configuration 
                * Environment variable 
                * provider argument 
                * Custom HTTP Client 
              * Gemini 
                * Install 
                * Configuration 
                * Environment variable 
                * provider argument 
              * Gemini via VertexAI 
                * Install 
                * Configuration 
                * Application default credentials 
                * Service account 
                * Customising region 
              * Groq 
                * Install 
                * Configuration 
                * Environment variable 
                * provider argument 
              * Mistral 
                * Install 
                * Configuration 
                * Environment variable 
                * provider argument 
              * Cohere 
                * Install 
                * Configuration 
                * Environment variable 
                * api_key argument 
              * Bedrock 
                * Install 
                * Configuration 
                * Environment variables 
                * provider argument 
              * OpenAI-compatible Models 
                * Ollama 
                  * Example local usage 
                  * Example using a remote server 
                * Azure AI Foundry 
                * OpenRouter 
                * Grok (xAI) 
                * Perplexity 
                * Fireworks AI 
                * Together AI 
              * Implementing Custom Models 
              * Fallback 
Models PydanticAI is Model-agnostic and has built in support for the following model providers:
              * OpenAI
              * Anthropic
              * Gemini via two different APIs: Generative Language API and VertexAI API
              * Ollama
              * Groq
              * Mistral
              * Cohere
              * Bedrock
See OpenAI-compatible models for more examples on how to use models such as OpenRouter, and Grok (xAI) that support the OpenAI SDK. You can also add support for other models. PydanticAI also comes with [`TestModel`](../api/models/test/) and [`FunctionModel`](../api/models/function/) for testing and development. To use each model provider, you need to configure your local environment and make sure you have the right packages installed. Models, Interfaces, and Providers PydanticAI uses a few key terms to describe how it interacts with different LLMs:
              * **Model** : This refers to the specific LLM model you want to handle your requests (e.g., `gpt-4o`, `claude-3-5-sonnet-latest`, `gemini-1.5-flash`). It's the "brain" that processes your prompts and generates responses. You specify the _Model_ as a parameter to the _Interface_.
              * **Interface** : This refers to a PydanticAI class used to make requests following a specific LLM API (generally by wrapping a vendor-provided SDK, like the `openai` python SDK).', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4828, "crawled_at": "2025-03-25T05:14:38.747252+00:00"}', '[-0.04399539,-0.006238979,0.05546338,-0.04490762,0.026871592,-0.015012645,-0.016420081,0.00396167,0.044673044,0.0007810941,0.0021795703,-0.090909906,-0.013957068,-0.030077416,0.0004980595,-0.030624753,-0.01627673,-0.0010091508,-0.00012716195,0.06396012,0.056401674,0.03377845,0.0013911457,0.021293977,0.022088917,-0.0030527015,-0.034195468,0.019208888,-0.016537366,-0.031119961,0.040137973,-0.009969334,-0.037896503,-0.028956681,-0.006646223,-0.009311228,-0.0016143154,0.018205438,0.031067835,0.051710222,-0.008548867,-0.027679564,-0.02238865,0.0279402,-0.07198772,0.020889992,0.020108083,0.0011842657,-0.018974315,-0.0032481786,-0.027757755,0.048035253,-0.017592944,-0.014361055,0.0067504775,-0.025216551,-0.018804902,0.007942888,0.0136834,-0.02008202,-0.010627441,0.002062284,-0.013025294,0.04996396,-0.0381832,-0.04926024,-0.07469834,0.016784972,-0.07876426,-0.004737063,0.02289689,0.013279414,-0.029712526,-0.020486005,-0.003482751,-0.05384744,0.010210423,0.12051818,0.01346186,-0.019261016,-0.035316203,0.021593709,0.017397467,-0.048348013,0.0040040235,-0.015755458,-0.04290072,0.008288231,-0.023457257,-0.018257566,-0.0038834794,-0.046966642,-0.053743184,0.020759674,0.055307,-0.0016265328,-0.0023164041,0.0049944413,0.009506705,0.050094277,0.02801839,-0.022141045,-0.057183582,0.014061322,0.040007655,-0.0067439615,0.027705628,0.006304138,-0.010601377,0.017540816,-0.1186416,-0.019208888,0.005815445,-0.006222689,-0.05885165,0.008288231,-0.017410498,0.018948251,-0.02117669,-0.057339963,-0.022193173,0.021372167,0.049937896,-0.0026519734,0.02412188,-0.0057209646,0.02347029,-0.037401292,-0.052309684,-0.05869527,-0.0141395135,0.0058740885,0.00968915,-0.02304024,-0.025594475,-0.01958681,-0.04357837,0.0042190487,-0.022440776,-0.00044308155,-0.0036619385,-0.036045987,-0.011024911,0.033804514,-0.015664235,-0.03536833,-0.009206974,-0.032788035,-0.04832195,0.044412408,0.016576461,0.010744727,0.0074216155,-0.0071870433,-0.025802983,0.024030657,0.02318359,0.029425826,0.013904941,-0.02671521,0.002666634,0.07907702,-0.042666145,0.001852146,-0.040789563,0.029973162,-0.07766958,0.018974315,-0.043317735,-0.032657716,-0.014504405,0.004466653,-0.061040998,-0.013266383,0.005564583,-0.044881552,-0.00035837476,-0.017345339,-0.030051354,-0.039356064,-0.027601372,0.02382215,-0.04787887,-0.016068222,-0.019339206,0.01123342,-0.030546563,0.018374851,-0.024017626,0.041962426,0.0050237626,0.0072391704,0.048139505,0.04125871,0.04399539,-0.023248749,0.0576006,-0.036827896,0.05739209,0.015129931,0.018531233,0.002601475,0.029399764,-0.034690678,0.034456104,-0.029842844,0.03067688,-0.0142568,-0.0057242224,-0.0011370254,0.024147945,-0.021724027,0.017527785,-0.007193559,-0.022010727,-0.020681482,-0.047566105,0.010269066,-0.0041473736,0.042666145,0.001334946,0.04615867,0.012608276,-0.01490839,-0.025099266,0.019547714,-0.0071153683,-0.06833881,0.045481015,-0.030650817,0.012145647,0.032814097,-0.024564961,-0.010047525,-0.0011525006,-0.030129544,0.018140279,-0.020003827,-0.0006564774,-0.03680183,0.020472974,-0.010243002,0.0104645435,0.037740123,0.049338434,-0.014478341,0.006965502,-0.03440398,0.023496354,0.0064898413,0.07261325,-0.024747407,0.01112265,0.034690678,0.010027978,-0.02801839,-0.021150628,-0.0012575696,-0.0855408,-0.0023783052,-0.025594475,0.037479486,0.0038834794,0.0116634695,-0.028852427,-0.015129931,-0.055828273,0.029530082,-0.034820996,-0.032423142,0.03664545,0.031849742,0.01112265,-0.01277769,-0.013233803,-0.009252585,0.0064051347,0.012699499,0.015064772,0.005968569,0.005818703,-0.03476887,0.030702945,0.012184742,-0.0029419311,0.037166722,-0.0062096575,-0.023274813,-0.031510916,0.015807586,0.017957835,0.009193942,0.014725945,-0.046054415,0.03117209,-0.03031199,0.047852807,0.005268109,0.03427366,0.03529014,0.055776145,0.026845528,0.0038704476,-0.036958214,0.0055059395,0.00087068777,-0.0024646411,-0.0086857015,0.048061315,-0.04774855,-0.022701412,-0.0036130692,0.010314678,0.008425065,-0.050302785,-0.0019270789,0.015859712,0.008555383,0.0037140658,0.0029696238,-0.06875583,-0.029894972,-0.0067504775,-0.0014595627,-0.06078036,0.026050588,0.035837475,-0.038052883,-0.04154541,-0.0036195852,0.04509006,-0.019508619,-0.024512835,0.034221534,0.014712913,0.009317744,-0.022949018,0.03088539,0.03174549,0.04889535,-0.08157913,-0.033543877,-0.018088153,0.03659332,-0.046132606,0.024082785,-0.009839016,0.04636718,0.009096203,0.0288003,-0.0041571474,-0.018583361,0.019717129,0.032892287,-0.02757531,0.0042939815,0.012771173,-0.03002529,-0.026480637,0.00052086514,-0.059946325,0.006287848,-0.015859712,0.020068986,-0.00032599887,-0.0006255269,0.0042223064,0.0098976595,-0.021724027,-0.024890756,0.02757531,-0.00321397,-0.0433438,-0.019769255,-0.00080960116,-0.015077804,-0.02773169,0.0015361246,0.010855498,-0.008776924,0.04751398,0.018270597,0.010855498,-0.018374851,0.01756688,0.0210985,-0.0063367174,-0.022844763,-0.026102714,0.043812945,0.039199684,-0.030911453,-0.023405131,0.0018993863,0.0030983128,0.003352433,0.030937517,0.009663087,0.05833038,0.0031015708,0.010458027,-0.009415482,-0.028200837,0.018765805,-0.016902257,0.0028995776,0.060728233,0.024252199,-0.019169793,-0.009656571,0.045168255,-0.055046365,0.017319275,0.0009529511,-0.029269446,-0.0279402,0.029347636,-0.0027660017,0.045819845,0.018987346,-0.007532386,-0.108737424,-0.05395169,-0.041128393,-0.07558449,0.03591567,0.018114215,-0.020903023,-0.029217318,-0.05337829,0.008809503,0.0547336,0.0424837,-0.04342199,0.0032612104,-0.028252963,0.0060435017,-0.0031194894,0.01685013,8.974641e-05,0.029087,-0.024382517,-0.0282269,0.022688381,-0.02073361,-0.013566114,-0.020629356,-0.03656726,0.008789956,-0.039225746,-0.009884628,0.03888692,0.026337288,0.0190916,-0.009161362,-0.056714438,0.050380975,0.006724414,0.050172467,-0.011207356,0.02549022,0.012686467,-0.039225746,-0.0129014915,0.0056720953,0.022649286,0.021476423,0.007845149,0.0013251721,-0.0046360665,-0.01685013,-0.028826363,0.004437331,-0.009167878,-0.011826367,-0.04355231,0.0011435413,0.005828477,-0.0104515115,0.00086661533,0.013201224,0.0042939815,-0.03873054,0.013338057,0.004655614,0.09117054,-0.0325274,-0.012087003,0.014608659,0.029686462,-0.029217318,0.0023098884,0.03622843,-0.01440015,0.080953605,-0.022023758,-0.034742806,-0.017527785,-0.030520499,-0.01112265,-0.012438863,-0.021541582,-0.004515522,0.07402068,-0.0034990408,-0.004730547,0.027549246,-0.027418928,-0.019130697,0.028696045,-0.04845227,-0.008933306,0.0028034681,0.025047138,0.0024239167,0.0296604,0.0017755841,0.029139128,0.0051834024,0.020824833,0.023743957,-0.020212337,-0.02030356,-0.0015507854,0.016576461,0.024734374,-0.02900881,-0.003013606,-0.031224217,-0.01274511,0.028305091,-0.0074998066,0.012145647,-0.024643153,-0.038991176,0.022492904,0.012784205,-0.021437326,-0.02757531,-0.016654653,-0.03231889,0.0325274,-0.025151392,0.028357219,0.010607894,0.047279406,-0.01195017,-0.0073173614,0.012145647,0.04751398,0.059112288,-0.019743191,0.013338057,-0.038704474,0.029034872,0.021854345,-0.0447773,-0.0123215765,0.03370026,0.008829051,-0.025398998,-0.0062683006,0.02657186,0.005945763,-0.0027904364,0.04829589,0.0052420455,-0.023730926,-0.038417775,-0.014725945,-0.014413182,0.005564583,-0.013657337,0.0054538124,-0.0013927746,0.001918934,-0.0068938276,0.01692832,0.0029158674,0.011441929,-0.0141525455,-0.02246684,-0.008092754,-0.002471157,-0.03823533,-0.0024890758,-0.019404365,0.017866611,0.01382675,0.030702945,0.02469528,-0.035003442,-0.022284394,-0.026141811,-0.022518968,-0.021059405,0.030781135,0.0057274806,-0.045402825,0.016081253,0.011207356,-0.009259101,0.0110574905,0.038052883,-0.012412799,-0.006900343,-0.018309692,0.010236487,-0.023926403,-0.0024271745,-0.0009358468,-0.008614026,-0.00478919,-0.017918738,-0.027888073,-0.0047044833,-0.046184734,-0.008907242,0.050667677,-0.021658868,-0.008796472,0.006796089,0.03867841,0.0092004575,-0.0044242996,0.005733996,-0.007134916,-0.011943654,-0.047435787,0.032918353,-0.019782288,0.0154817905,0.019339206,0.014387118,-0.009141815,0.0070111137,0.0022789377,-0.059581436,-0.0053169783,-0.04026829,-0.0053234943,0.016354922,-0.012653887,-0.032579526,0.03946032,-0.0064637777,-0.009780373,0.0117807565,0.02001686,-0.024747407,-0.004372172,-0.0056525473,0.010190875,0.012497505,0.004737063,0.011318127,0.0019498846,-0.008548867,0.005027021,0.046575688,-0.046002287,-0.013891909,-0.010106169,-0.010966268,-0.009102719,0.02843541,0.0447773,0.042379446,0.018270597,-0.011194325,-0.014282864,0.024108848,0.023678798,-0.0027725175,0.018870061,-0.008112302,0.029347636,-0.047566105,-0.03463855,0.027549246,-0.010119201,0.0092004575,-0.06270907,0.00935684,0.05515062,-0.025125328,0.025477188,0.009656571,0.010190875,-0.013070906,0.02900881,-0.030233799,-0.0013707835,-0.024564961,0.015586045,-0.011722113,-0.005747028,0.033726323,-0.0031879065,-0.060676105,-0.025529316,-0.002257761,-0.010047525,-0.0141786095,-0.0325274,0.015742427,0.019234952,0.017371403,0.033543877,-0.015612109,-0.030781135,0.006369297,0.008385969,0.014804136,0.00151169,0.020707546,0.0141264815,0.015612109,-0.020916054,-0.024942884,-0.048087377,0.037140656,-0.010379837,0.011005363,0.031484853,-0.021072436,-0.013181675,0.04032042,-0.03393483,-0.002542832,0.00509218,-0.011832884,-0.008372938,-0.021046372,-0.011279032,-0.02246684,-0.029347636,0.00835339,-0.042666145,0.0019710613,0.00013001266,-0.0035251046,-0.013553082,-0.0047109993,0.0007456639,-0.018270597,-0.0020150435,0.062761195,0.008425065,-0.0046132607,-0.010171328,0.010927172,-0.0014595627,0.0018049057,-0.015742427,-0.020420846,-0.008229588,-0.0018293404,-0.049155988,0.031563044,0.028409345,0.008034111,-0.015533918,0.049442686,-0.015781522,-0.015325408,0.022193173,-0.008118818,0.033569943,-0.009969334,0.008157913,0.00642794,-0.0005758431,0.02361364,0.035472587,-0.043526243,0.014869295,-0.0038932532,0.020342655,-0.03534227,0.016433112,-0.012393251,0.007968952,-0.012771173,0.01980835,-0.0022756797,-0.02463012,-0.023639703,-0.034508232,-0.02261019,-0.033491753,0.005681869,0.0011793788,0.002813242,0.016732844,-0.01656343,0.0061249505,-0.096070506,-0.033361435,0.0076301247,0.013839782,0.01382675,-0.0016941353,0.0006756179,0.017866611,0.018036025,-0.008210041,0.007206591,-0.014217705,-0.036489066,0.023587575,0.027601372,-0.03088539,0.016876195,-0.030494435,0.026558828,0.0052257557,-0.003828094,-0.00014905132,0.04094594...', '2025-03-25 05:14:38.622292+00'), ('46', 'https://ai.pydantic.dev/models/', '2', 'PydanticAI Model Interfaces', 'This document discusses the architecture of PydanticAI, emphasizing the vendor-SDK-agnostic API that allows a single agent to switch between different LLM vendors by changing the interface it uses. It introduces the current naming convention for interface classes and the upcoming renaming to better reflect their purpose. Additionally, it explains the role of the Provider in handling authentication and connections specific to LLM vendors.', 'These classes implement a vendor-SDK-agnostic API, ensuring a single PydanticAI agent is portable to different LLM vendors without any other code changes just by swapping out the _Interface_ it uses. Currently, interface classes are named roughly in the format `<VendorSdk>Model`, for example, we have `OpenAIModel`, `AnthropicModel`, `GeminiModel`, etc. These `Model` classes will soon be renamed to `<VendorSdk>Interface` to reflect this terminology better.
              * **Provider** : This refers to _Interface_ -specific classes which handle the authentication and connections to an LLM vendor. Passing a non-default _Provider_ as a parameter to an _Interface_ is how you can ensure that your agent will make requests to a specific endpoint, or make use of a specific approach to authentication (e.g., you can use Vertex-specific auth with the `GeminiModel` by way of the `VertexProvider`). In particular, this is how you can make use of an AI gateway, or an LLM vendor that offers API compatibility with the vendor SDK used by an existing interface (such as `OpenAIModel`).
In short, you select a _model_ , PydanticAI uses the appropriate _interface_ class, and the _provider_ handles the connection and authentication to the underlying service. OpenAI Install To use OpenAI models, you need to either install [`pydantic-ai`](../install/), or install [`pydantic-ai-slim`](../install/#slim-install) with the `openai` optional group: pipuv
                        
                                                pip install "pydantic-ai-slim[openai]"
                        
                        
                                                uv add "pydantic-ai-slim[openai]"
                        

Configuration To use [`OpenAIModel`](../api/models/openai/#pydantic_ai.models.openai.OpenAIModel) through their main API, go to [platform.openai.com](https://platform.openai.com/) and follow your nose until you find the place to generate an API key. Environment variable Once you have the API key, you can set it as an environment variable:
                        
                                                export OPENAI_API_KEY='your-api-key'
                        

You can then use [`OpenAIModel`](../api/models/openai/#pydantic_ai.models.openai.OpenAIModel) by name: openai_model_by_name.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('openai:gpt-4o')
                        ...
                        

Or initialise the model directly with just the model name: openai_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        
                        model = OpenAIModel('gpt-4o')
                        agent = Agent(model)
                        ...
                        

By default, the `OpenAIModel` uses the [`OpenAIProvider`](../api/providers/#pydantic_ai.providers.openai.OpenAIProvider.__init__) with the `base_url` set to `https://api.openai.com/v1`. `provider` argument You can provide a custom [`Provider`](../api/providers/#pydantic_ai.providers.Provider) via the [`provider` argument](../api/models/openai/#pydantic_ai.models.openai.OpenAIModel.__init__): openai_model_provider.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        model = OpenAIModel('gpt-4o', provider=OpenAIProvider(api_key='your-api-key'))
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 3869, "crawled_at": "2025-03-25T05:14:38.785038+00:00"}', '[-0.05073317,-0.027482405,0.045292493,-0.029993488,0.018437857,0.0069112903,-0.0021288982,-0.013822581,0.022715999,-0.014973493,-0.00025557677,-0.100350305,-0.019519018,-0.019600395,-0.010805793,-0.041735124,-0.007998263,0.012660042,-0.027645161,0.049942646,0.06835725,0.0425024,0.029644726,0.0242738,-0.023680905,-0.02261137,-0.011346374,-0.01472936,-0.0117765125,-0.0043595186,0.045408744,-0.00096636,-0.031086273,0.004769313,-0.018542485,0.005899882,-0.0070333565,-0.0024427837,0.03276033,0.035294663,0.0036474639,-0.026226863,-0.01853086,0.033829864,-0.059335954,0.04131661,-0.016752176,-0.017135814,-0.018891247,-0.002666572,-0.037573237,0.042920914,-0.00043958478,-0.029551724,-0.027854418,-0.028737947,0.012694919,0.01747295,0.01848436,-0.0015490822,-0.02334377,0.01440385,-0.016263912,0.039247293,-0.018368104,-0.036271196,-0.06194004,0.05487181,-0.07203087,-0.031435035,0.008649285,-0.007847133,-0.015368756,-0.008283085,-0.017589204,-0.0038480018,-0.024111044,0.1395046,0.007684378,0.020588553,-0.021483708,0.029644726,-0.00012406464,-0.013717952,-0.015519886,-0.022948505,-0.04101435,0.006085888,-0.026343118,-0.026250115,0.018844746,-0.017182317,-0.04468797,0.024785316,0.05282574,0.009433998,-0.014159717,-0.0038160319,0.013101807,0.034132123,0.032551073,-0.025715347,-0.023483273,0.03217906,0.02915646,-0.024622561,0.021727841,-0.019251633,-0.037201226,0.026505873,-0.086678855,-0.019519018,0.021413956,-0.018937748,-0.056917876,0.0060393866,0.016647547,0.05533682,-0.004638528,-0.0607775,-0.05259323,0.00781807,0.04185138,-0.008201708,0.036317695,0.005155857,0.030598007,-0.016415041,-0.03457389,-0.058452424,-0.014194593,0.023622777,0.006109139,-0.024692314,-0.011927643,-0.050593667,-0.035968933,-0.018472733,-0.029063458,0.015729142,0.010253588,-0.028040424,-0.008463278,0.016484793,-0.014182967,-0.016263912,-0.004243265,-0.05487181,-0.034992404,0.048082583,-0.02023979,0.013473819,0.024227299,0.0023919225,-0.012683293,0.02490157,0.012811172,0.052965246,0.042316392,-0.039689057,7.71544e-05,0.08384226,-0.010160585,0.012753045,-0.05561583,0.013020429,-0.02641287,-0.0059870724,-0.05040766,-0.019158632,-0.017100938,-0.0046617785,-0.00676016,-0.024204047,0.025296833,-0.045362245,0.00093656994,0.002185572,-0.013741203,-0.062963076,-0.016054654,0.024622561,-0.07226338,-0.01030009,-0.033457853,0.0078064445,-0.043246426,0.033481102,-0.0288077,0.028389186,0.010468657,-0.003313234,0.04073534,0.023320518,0.024157546,0.043223172,0.04275816,-0.033504352,0.07193787,-0.0035195847,0.016856804,-0.015112998,0.047943078,-0.012346157,0.032086056,-0.047501314,0.005920226,0.0068880394,0.0025328803,0.028435687,0.012706543,-0.055429827,0.043339428,-0.044362463,-0.03734073,-0.025994357,-0.057940908,0.038108006,-0.0076727527,0.048036084,0.027412653,0.023762282,-0.0033568293,-0.021506958,-0.019728275,-0.0022989195,-0.0039671618,-0.08007564,0.039410047,-0.010666288,-0.0022669497,0.0303655,-0.002758122,0.0011865157,-0.0020867563,-0.026901135,0.022878753,-0.0154268835,0.006405586,-0.033295095,0.024971323,-0.016136032,-0.0009598207,0.03210931,0.034550637,0.009962954,0.014682858,-0.05064017,0.039503053,0.00031497522,0.053895276,0.007980825,0.011526567,-0.0055830902,-0.0027159802,0.008213333,-0.009968766,0.0027537625,-0.05863843,-0.0076727527,-0.0011879688,0.043223172,0.019030752,0.0034585514,0.0031795423,-0.012218278,-0.06752022,0.011177805,-0.051244687,-0.014078339,0.058033913,0.0076320637,-0.0036242132,-0.034364633,-0.007777381,-0.022413738,0.016484793,0.038619522,0.004237452,0.011480066,-0.0318768,-0.0349459,0.041642122,0.0034759894,-0.005164576,0.02155346,-0.039340295,-0.010317528,-0.06552066,0.0050541353,0.0081435805,0.042967416,0.013066931,-0.034643643,0.033457853,-0.005306987,0.042339645,0.018728493,0.02187897,0.036596704,0.06872927,0.0023730313,-0.015880274,-0.024576059,-0.01684518,0.023646029,0.03341135,-0.014078339,0.017240442,-0.03578293,-0.023192639,0.03131878,0.017635707,0.014171341,-0.030202745,-0.012625166,0.019658523,-0.02701739,-0.023704156,0.023797158,-0.07491397,0.01397371,-0.019984033,-0.019472517,-0.042316392,0.022809,0.020507175,-0.01913538,-0.007190299,-0.004272328,0.055104315,-0.05119819,-0.0118578905,-0.0065450906,0.005725501,0.029574974,-0.013229686,-0.00440602,0.039898314,0.05310475,-0.06835725,-0.022739248,-0.034411132,0.030225996,-0.043199923,0.03250457,-0.01850761,0.032248814,0.015973276,0.014636357,0.001379061,-0.036666457,0.02638962,0.019925907,-0.020460675,-0.02580835,0.017263694,-0.04789658,-0.027598659,-0.002588101,-0.047943078,0.014171341,0.021762718,0.019600395,-0.03617819,-0.014915367,0.022448614,-0.024041291,-0.029388968,-0.009835074,0.0576619,-0.0070856707,-0.029923735,-0.008492342,0.0013608964,-0.010985987,-0.015496636,-0.0031679168,0.007847133,-0.011264996,0.034504138,0.023518149,0.013252936,-0.0025851945,0.013857457,0.0104919085,-0.02790092,-0.019519018,-0.03378336,0.060963508,0.07072883,-0.026854634,-0.02175109,-0.0021652277,0.0025851945,0.0067310967,0.021483708,0.0056063407,0.041177105,0.008114518,0.025366586,0.003917754,0.011520755,0.0028220618,-0.04194438,-0.0034759894,0.03799175,0.02112332,-0.0012163057,0.016961433,0.031644292,-0.040293578,0.039665807,0.0023744844,-0.026668629,-0.0071670488,0.0044903043,0.0043507996,0.047199056,0.028017173,0.009195678,-0.06463713,-0.04468797,-0.009422373,-0.051802706,0.029528473,0.011642821,-0.008190082,-0.03515516,-0.052267723,0.007783194,0.055197317,0.008585345,-0.058173418,-0.009224742,-0.02077456,-0.0134970695,0.0046530594,0.0068647885,0.0072774896,-0.0048884735,-0.020251418,-0.033736862,0.004243265,-0.019019127,-0.022576494,-0.03736398,-0.031039773,0.018751742,0.0013107619,-0.041804876,0.04366494,0.010108271,0.04371144,0.0050744796,-0.057847906,0.03562017,-0.011264996,0.030272497,-0.005533682,0.041618872,-0.0019821278,-0.030318998,0.0016508044,-0.010457032,0.031458285,0.025715347,-0.0026026326,-0.0121950265,0.006289332,-0.013136683,-0.021797594,0.004615277,-0.0258316,-0.026761632,-0.038108006,-0.013229686,-0.00027810095,-0.0063242083,0.0050599477,0.03371361,0.038666025,-0.040549334,0.030737512,0.0018658739,0.06752022,-0.017042812,-0.0022625902,-0.0102826515,0.01654292,-0.021181447,-0.0024587684,0.06742722,-0.011026676,0.05654586,-0.039131038,-0.002638962,-0.008806228,-0.05119819,-0.01032334,0.031435035,-0.021344204,0.00751581,0.028668195,0.0027464968,0.00031116063,0.009951328,-0.022332361,-0.008265647,0.061707534,-0.061196014,0.005530776,-0.009742071,0.0044525214,0.0073356167,0.014624732,0.012625166,0.013903958,-0.004984383,0.029226212,0.015299004,-0.014450351,-0.022739248,-0.018577361,0.013485444,0.02669188,-0.027598659,-0.014136465,-0.035759676,0.010445407,0.024157546,-0.010166397,0.0031156025,0.00031188724,-0.04040983,0.060033478,0.03617819,-0.016008152,-0.04287441,-0.03522491,-0.042339645,0.029272715,-0.009881576,0.011700948,0.010404718,0.01777521,0.002942675,0.018100722,0.018158847,0.040061068,0.03524816,0.016403416,-0.0013049493,-0.024669062,0.031969804,0.015950026,-0.04131661,0.0033597357,0.017879838,-0.009962954,-0.027552158,-0.028435687,0.018937748,0.0071147345,0.009986204,0.02766841,0.011863703,-0.03250457,-0.035713177,-0.009707195,-0.021309327,0.0073181787,-0.017693833,-0.002076584,-0.004379863,0.0032609198,-0.01636854,-0.0010339326,0.006312583,0.044827476,-0.039131038,-0.038991533,-0.011660259,0.0020794903,-0.014345722,-0.007957575,-0.046873543,0.022041727,0.017461326,0.0516632,0.022181232,-0.022285858,-0.034248378,-0.010393092,-0.009683944,-0.006254456,0.030318998,0.028923953,-0.045385495,0.022378862,0.030179495,-0.007323991,-0.0055772774,0.037410483,-0.023878537,-0.014008586,-0.002689823,0.008759726,-0.023332143,0.023250766,0.008393526,-0.0071089217,0.022541618,-0.0063183955,-0.020077037,-0.0008922481,-0.035434168,-0.0044612405,0.068822265,-0.012718169,-0.021506958,-0.0073937434,-0.0034178626,0.032876585,0.009620004,-0.009968766,-0.012125274,-0.026598876,-0.028900702,0.030993272,-0.013462193,0.00386544,0.05064017,0.002758122,0.0108929835,-0.011631195,-0.014531729,-0.025017824,-0.0029848171,-0.03248132,-0.0056470297,0.021785967,-0.025017824,-0.0197399,0.035271414,-0.0037520924,-0.01908888,-0.0029077989,0.01699631,-0.038224258,-0.00986995,-0.01472936,0.008161019,0.013927209,0.032295313,0.033853114,0.010352404,0.0020068318,0.009184052,0.028505439,-0.06612518,0.0020053785,-0.004990196,-0.006388148,-0.016670799,0.0032754517,0.047757074,0.013101807,-0.00034785326,-0.039038036,-0.024436556,0.0394798,-0.014345722,0.024436556,0.001013588,-0.021634838,0.017321821,-0.00954444,-0.053569764,0.026482623,-0.008765539,0.007312366,-0.034085624,0.0043391744,0.038410265,-0.020297918,0.014764236,0.011474253,0.005498806,0.0066032177,0.019449266,-0.013962085,-0.020681556,-0.0009445624,0.042967416,-0.015543137,-0.005681906,0.013264562,0.026738381,-0.044176456,-0.008643473,0.009003859,0.005472649,0.018728493,-0.02248349,0.0146712335,-0.0072077373,-0.0031650106,0.014682858,-0.026040858,-0.016926557,0.02487832,-0.013741203,-0.0064579,0.004600745,-0.010003642,-0.010294276,0.0026375088,-0.012474036,-0.001185789,-0.052732736,0.03799175,-0.011700948,0.021495333,0.0146712335,-0.012997178,-0.02112332,0.04431596,-0.039619304,-0.0069577917,-0.018774994,-0.010457032,-0.0145433545,-0.021565085,-0.0068473504,-0.02336702,-0.03371361,-0.0045542438,-0.07031032,0.003749186,-0.0012693465,0.005138419,-0.030318998,0.0141248405,0.024250548,-0.0212512,0.005748752,0.05119819,0.017565954,-0.0021463363,-0.021611586,0.006312583,0.011474253,0.009515376,0.013613324,-0.004260703,0.0038974097,0.009614192,-0.056220353,0.0063532717,0.02187897,-0.0065276525,0.012346157,0.02973773,-0.017286945,-0.0013129417,0.009189866,0.009945516,0.0074693086,0.011852078,-0.013171559,0.038991533,-0.010137334,0.014799112,0.02762191,-0.03248132,0.00040071242,-0.008126142,0.027273148,-0.0243203,-0.0017191035,-0.011253371,0.0036125877,-0.014182967,0.02183247,0.0010026892,-0.0057371263,-0.018763369,-0.03980531,-0.019495767,-0.029063458,0.012718169,0.0039351922,0.026250115,0.01639179,0.01144519,0.035596922,-0.10137334,-0.028412435,-0.0024064542,0.0076727527,0.04210714,-0.008108704,0.02092569,0.017810086,0.0025706629,-0.009561878,-0.002043161,-0.0022640433,-0.033202093,0.011201057,0.0243203,-0.048594102,0.008742288,-0.009166614,0.02293688,0.009509563,-0.02520383,-0.01255...', '2025-03-25 05:14:38.672337+00'), ('47', 'https://ai.pydantic.dev/models/', '3', 'Custom OpenAI Client Configuration', 'The `OpenAIProvider` allows customization of the OpenAI client using the `openai_client` parameter. Users can modify settings like `organization`, `project`, and `base_url` as outlined in the OpenAI API documentation. Additionally, the `AsyncAzureOpenAI` client can be utilized for accessing the Azure OpenAI API.', 'Custom OpenAI Client `OpenAIProvider` also accepts a custom `AsyncOpenAI` client via the [`openai_client` parameter](../api/providers/#pydantic_ai.providers.openai.OpenAIProvider.__init__), so you can customise the `organization`, `project`, `base_url` etc. as defined in the [OpenAI API docs](https://platform.openai.com/docs/api-reference). You could also use the [`AsyncAzureOpenAI`](https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/switching-endpoints) client to use the Azure OpenAI API. openai_azure.py
                        
                                                from openai import AsyncAzureOpenAI
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        client = AsyncAzureOpenAI(
                            azure_endpoint='...',
                            api_version='2024-07-01-preview',
                            api_key='your-api-key',
                        )
                        
                        model = OpenAIModel(
                            'gpt-4o',
                            provider=OpenAIProvider(openai_client=client),
                        )
                        agent = Agent(model)
                        ...
                        

Anthropic Install To use [`AnthropicModel`](../api/models/anthropic/#pydantic_ai.models.anthropic.AnthropicModel) models, you need to either install [`pydantic-ai`](../install/), or install [`pydantic-ai-slim`](../install/#slim-install) with the `anthropic` optional group: pipuv
                        
                                                pip install "pydantic-ai-slim[anthropic]"
                        
                        
                                                uv add "pydantic-ai-slim[anthropic]"
                        

Configuration To use [Anthropic](https://anthropic.com) through their API, go to [console.anthropic.com/settings/keys](https://console.anthropic.com/settings/keys) to generate an API key. [`AnthropicModelName`](../api/models/anthropic/#pydantic_ai.models.anthropic.AnthropicModelName) contains a list of available Anthropic models. Environment variable Once you have the API key, you can set it as an environment variable:
                        
                                                export ANTHROPIC_API_KEY='your-api-key'
                        

You can then use [`AnthropicModel`](../api/models/anthropic/#pydantic_ai.models.anthropic.AnthropicModel) by name: anthropic_model_by_name.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('anthropic:claude-3-5-sonnet-latest')
                        ...
                        

Or initialise the model directly with just the model name: anthropic_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.anthropic import AnthropicModel
                        
                        model = AnthropicModel('claude-3-5-sonnet-latest')
                        agent = Agent(model)
                        ...
                        

`provider` argument You can provide a custom [`Provider`](../api/providers/#pydantic_ai.providers.Provider) via the [`provider` argument](../api/models/anthropic/#pydantic_ai.models.anthropic.AnthropicModel.__init__): anthropic_model_provider.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.anthropic import AnthropicModel
                        from pydantic_ai.providers.anthropic import AnthropicProvider
                        
                        model = AnthropicModel(
                            'claude-3-5-sonnet-latest', provider=AnthropicProvider(api_key='your-api-key')
                        )
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4218, "crawled_at": "2025-03-25T05:14:38.753979+00:00"}', '[-0.028003609,-0.029053148,0.06554848,0.00020759703,0.0061004455,-0.0094398875,0.0014669693,0.012999971,0.018462345,-0.023042152,-0.01854583,-0.07995579,0.024998112,-0.03783111,-0.009338512,0.0004327112,-0.008903191,0.0034497632,-0.013512814,0.0283137,0.05180906,0.056961343,0.004931641,0.025045818,-0.035875153,-0.0373779,-0.011020159,-0.0053937957,-0.0022720133,-0.0075256717,0.013822906,-0.021121973,-0.034634788,-0.00063844473,-0.043889813,-0.008444019,-0.012689881,0.0059066387,0.025236642,0.01461006,0.039858628,-0.06712279,0.022899034,0.060348492,-0.009612823,0.024831139,-0.019249499,-0.006792187,0.0062018214,-0.00070515904,0.00010063052,-0.0017591704,0.000170606,-0.04861274,0.004600678,-0.017949503,0.023793526,-0.012546762,-0.013834832,-0.0100242905,0.00041966652,-0.0087183295,-0.012510982,0.037043955,0.008008698,-0.018533904,-0.03797423,0.042625595,-0.056245748,0.008640807,0.0008639316,0.015015564,-0.049328335,-0.002938411,-0.02035867,-0.035159558,-0.014812812,0.12594467,0.019058675,-0.010149519,-0.043555867,0.02688251,0.010280712,-0.027144896,-0.0055458597,-0.026548566,-0.043985225,0.02099078,-0.034682494,-0.023841232,0.038618267,-0.0049197143,-0.028647644,-0.0047497605,0.06841086,0.040192574,-0.01502749,-0.0059841615,0.013596301,0.052381538,0.029625624,-0.04529715,-0.04214853,0.06354482,0.012147222,-0.024783432,0.040932022,0.0100064,0.009183466,0.019499958,-0.10552637,-0.018521978,0.01506327,0.002771439,-0.06454665,0.006917416,-0.0046126046,0.025856825,0.006458243,-0.041337524,-0.020227479,-0.011735754,0.05147512,0.02050179,0.024664167,0.007835763,-0.0010808463,-0.0339669,-0.06454665,-0.0649283,0.0038999915,0.043245777,0.037401754,-0.047205403,-0.021145826,-0.05400355,-0.018736657,-0.012713734,-0.02771737,0.021348577,0.02057335,-0.015289875,-0.0011792405,0.023912793,0.011055939,-0.002711806,-0.02353114,-0.026858658,-0.013465108,0.05705676,-0.0183073,0.015409141,0.017186202,0.02012014,-0.024497194,0.03179626,0.01618437,0.043054953,0.014180703,-0.03888065,0.019750416,0.08176863,-0.03821276,-0.002930957,-0.013190797,0.02256509,-0.028027462,0.019237572,-0.05104576,-0.033585247,-0.044366878,-0.017615559,-0.055243917,-0.0005120975,0.02747884,-0.05004393,-0.010089886,-0.0063091605,-0.035827447,-0.042935688,-0.0061481516,0.05233383,-0.037902668,-0.000325372,-0.026286181,0.0013275774,-0.023757746,0.03608983,0.012534835,0.053287957,0.026333887,-0.022588942,0.026095357,-0.021181606,0.027598105,-0.0114435535,0.02235041,-0.03804579,0.048111822,0.0126302475,0.0029503377,-0.03480176,0.015015564,-0.021253165,0.024998112,-0.06068244,-0.021634815,-0.012713734,0.029649477,0.0046990723,0.016542166,-0.06049161,0.005805263,0.0014140451,-0.015325655,-0.041122846,-0.047300816,9.764887e-05,-0.013930245,0.016792623,0.027693518,0.02657242,-0.024330223,-0.015838498,0.018319227,0.007120168,0.009350439,-0.05376502,0.026310034,-0.022290777,0.00543852,0.04047881,-0.013918319,0.016542166,0.02793205,-0.031366903,0.016888037,-0.014979784,0.007656864,-0.019583443,0.05290631,-0.021837568,0.019929314,0.019022895,0.039214592,0.0087421825,-0.0028444892,-0.04665678,-0.026858658,-0.00033375787,0.017830236,0.0016935742,0.0046662744,0.014729326,-0.00044985567,-0.03294121,-0.0010465573,-0.024294443,-0.09345668,-0.033203598,0.0010055597,0.024449488,0.025642145,0.023793526,-0.004946549,-0.01966693,-0.05376502,0.027598105,-0.013536667,-0.0064761327,0.0347302,0.033203598,0.023173343,-0.04124211,0.0131430905,0.0023450637,0.029864155,0.031080667,-0.03783111,-0.0007640465,-0.021730227,-0.019988947,0.02329261,-0.01317887,-0.0014095727,0.0065953983,0.00032984448,-0.020251332,-0.019619223,0.0035720107,7.1047005e-05,0.030245805,0.014443088,-0.041194405,0.004111688,-0.012654101,0.015981616,0.0045440267,0.025713706,0.025379762,0.06206592,-0.004931641,0.000274125,-0.009994473,-0.0049405857,0.007102278,0.044748526,-0.006625215,0.05610263,-0.025546733,0.011264655,0.01959537,-0.00819356,-0.020632982,-0.031319197,-0.0114674065,0.022636648,-0.03797423,0.0072573237,-0.007388516,-0.10638509,-0.011020159,-0.017532071,-0.0073825526,-0.05013934,0.01506327,0.033799928,-0.015349508,-0.024377929,0.009749979,0.025952237,-0.053812727,0.004383018,0.022338483,0.04575036,0.017949503,0.014180703,-0.001821785,0.029100854,0.0030740758,-0.07346773,-0.025117377,-0.028599938,0.0012083116,-0.07127324,0.026262328,0.009451814,0.06278151,0.0034885246,0.008008698,0.012010066,0.009654567,0.0023361188,0.030317366,-0.031676996,-0.022266924,0.009821538,-0.01589813,-0.020489864,0.0131192375,-0.025642145,0.02929168,0.02597609,-0.019189866,-0.033322863,-0.0029831356,0.008473835,0.009863282,0.0016727028,-0.00035388398,0.016232075,-0.022040319,-0.05223842,-0.019786196,-0.0045887516,0.009129797,0.012367863,0.012689881,0.03427699,-0.024854992,0.055387035,-0.00041631216,0.005530951,-0.008438055,0.0064164996,0.03957239,-0.022755913,-0.007364663,-0.021682521,0.033680663,0.060443904,-0.04403293,-0.00022660501,0.033561394,-0.04100358,0.040264133,0.035708178,0.0049972367,0.048946682,0.057199877,-0.021217385,0.010990343,-0.008408238,0.01575501,0.0023704078,-0.0004390472,0.018533904,0.029005442,-0.0054027406,0.017424732,0.03177241,-0.051379707,0.037640285,-0.0040610004,-0.018176107,-0.0043532015,-0.0070605353,0.006189895,0.005140356,0.01004218,-0.011670158,-0.09608053,-0.0052089337,-0.05095035,-0.0868732,0.053860433,0.030842135,0.0024121506,-0.008867412,-0.044223756,0.020740323,0.026190769,0.026620125,-0.033513688,0.009129797,-0.034372404,-0.020513717,-0.025618292,0.012367863,0.025832972,-0.0011568782,-0.029172413,-0.0672182,-0.006732554,-0.021825641,-0.004248844,-0.029816449,-0.0012835981,-0.024497194,0.02552288,-0.020167846,0.012332084,0.012004103,0.023077931,-0.01555226,-0.03151002,0.029601771,0.026810952,0.048660446,-0.0008698949,0.061636563,-0.018521978,-0.03253571,0.012051809,0.02213573,0.014788958,0.015385288,-0.0013365223,-0.035803594,-0.017377026,-0.0026804989,0.011843094,0.004910769,0.008986678,-0.008891265,-0.041098993,0.026810952,0.0072573237,0.0006917416,-0.010358234,0.034038458,0.030150393,-0.05204759,0.053955846,-0.018593537,0.09903832,0.0045231553,0.0007774639,0.012558688,0.007102278,0.0007111223,0.03110452,0.038665973,-0.012147222,0.053287957,-0.01555226,-0.03699625,0.0109545635,-0.05104576,-0.001964904,-0.0053520524,-0.03057975,-0.0007510018,0.058106296,-0.0010562477,-0.020728396,0.003956643,-0.0037389826,-0.037568726,0.049948517,-0.049948517,0.022159586,-0.010853187,-0.0062435647,0.012391716,0.023280684,0.020251332,0.015778866,0.00955319,0.021992613,0.009654567,-0.030365072,-0.009535301,0.006583472,0.013870612,0.0070486087,-0.02109812,-0.025570586,-0.04167147,0.0049405857,0.03413387,-0.029339386,0.01827152,-0.006619252,-0.051236585,0.03170085,0.023125637,-0.035803594,-0.0403834,-0.0025731595,-0.038260467,0.025093524,-0.015087123,-0.0121174045,0.0039238445,0.024330223,-0.0053281994,0.03752102,0.012475202,0.02336417,0.039143033,-0.0024986183,0.010704105,-0.0025999944,0.010411904,0.010769702,-0.021217385,-0.009833465,0.042935688,-0.008104111,-0.02650086,-0.0008572229,0.018188033,0.009547227,0.02514123,0.03246415,0.016339414,-0.03246415,-0.040645782,-0.022445822,0.00821145,0.03263112,-0.019285278,-0.024294443,0.0036256802,0.022624722,0.017353173,-0.005718795,0.0001374352,0.01788987,-0.016959596,-0.029005442,-0.0048481547,0.023459582,0.006726591,-0.023888938,-0.010083923,0.009123834,0.006037831,0.05872648,0.007346773,-0.017174274,0.0019261426,-0.010286675,-0.030770576,0.009338512,0.023817379,0.025713706,-0.009058237,0.025475174,0.019058675,-0.023173343,0.008867412,0.02771737,-0.023077931,-0.02409169,-2.1209278e-05,-0.003935771,-0.021766007,0.0054206303,0.034777906,-0.01816418,0.015659599,0.0034944878,-0.005408704,0.00070627715,-0.030365072,-0.0027103152,0.048111822,-0.023912793,0.0059066387,-8.2554296e-05,0.01955959,0.043722842,0.005483245,-0.0239605,-0.013572448,-0.029888008,-0.021622889,0.030555896,-0.019297205,-0.0070903515,0.035994418,0.014991711,-0.013727494,-0.010167409,-0.0026313015,-0.005384851,-0.013966025,-0.033489835,-0.0065357657,0.020668762,-0.016112808,-0.02514123,0.03050819,-0.0068458566,-0.03050819,0.007865579,0.032225616,-0.044605408,-0.004210083,-0.00264621,0.0048720078,0.011276581,0.011789424,0.0034110018,-0.009177503,-0.03430084,0.0018754547,0.03873753,-0.060205374,-0.014777032,5.2644667e-05,0.010662362,0.02227885,0.011485296,0.027836638,0.02155133,-0.01004218,-0.029840302,-0.010578876,0.040741198,0.0025001091,0.024425635,0.00824723,-0.018903628,0.055816393,-0.033346716,-0.017210055,0.021575183,0.0029950624,0.008348606,-0.024592606,0.0036405884,0.0672182,-0.04598889,-0.0014982766,0.016077029,-0.018832069,0.0035899004,0.021157753,-0.016661432,-0.02329261,0.008163744,0.05324025,0.00056092197,0.0017696063,0.04031184,-0.0040341658,-0.045177884,-0.0063031972,-0.0063926466,0.0077820932,0.0017442623,-0.03775955,0.02325683,-0.011222911,0.0012828527,0.023304537,-0.009314659,-0.02468802,0.013751347,-0.00913576,0.010358234,0.010244932,0.014311896,0.011521076,0.022577016,-0.004302514,-0.02793205,-0.025642145,0.025188936,-0.011342177,0.017567853,0.013274283,-0.004383018,0.019917388,0.039691657,-0.01457428,0.01656602,-0.032917358,-0.043126512,-0.0057963175,-0.0072990665,-0.006619252,0.009922914,-0.020835735,-0.019010969,-0.04362743,-0.005423612,0.018247668,-0.0173651,-0.02891003,0.014240336,0.018820142,-0.015623819,0.0071738376,0.05104576,0.0014364074,0.017913723,-0.016554093,0.007203654,-0.0031038923,-0.008145854,0.008181633,0.009803648,0.0010413395,0.008897228,-0.047133844,0.0048123747,0.032344885,-0.013238504,-0.0013372677,0.028099021,-0.032893505,0.00726925,-0.0019678855,-0.009147687,0.011157315,-0.0074660387,0.013989878,0.02573756,-0.0200128,0.006756407,0.021539403,-0.03709166,-0.020346744,-0.020632982,0.030603603,-0.04138523,0.023101784,0.012737587,-0.0051284293,-0.014323822,0.03127149,-0.026190769,-0.0016115791,-0.027359573,-0.028623791,0.0014058455,-0.022171512,0.034539375,0.03012654,0.03141461,0.014490794,0.00777613,0.02276784,-0.07165489,-0.033799928,0.025021965,0.011604562,0.022254998,-0.005635309,0.014455015,-0.012832999,0.024807286,0.016959596,0.022624722,-0.0150513435,-0.032225616,0.006297234,0.038093496,-0.030388925,-0.012099515,-0.021909127,0.016971523,0.0030681125,-0.013083458,-0.0126063945,0.009690346,0.021...', '2025-03-25 05:14:38.71702+00'), ('48', 'https://ai.pydantic.dev/models/', '4', 'Custom HTTP Client for AnthropicProvider', 'This section explains how to customize the `AnthropicProvider` by integrating a custom `httpx.AsyncClient`. An example code snippet demonstrates setting a 30-second timeout and initializing an `AnthropicModel` with a specified API key and the custom HTTP client.', 'Custom HTTP Client You can customize the `AnthropicProvider` with a custom `httpx.AsyncClient`: anthropic_model_custom_provider.py
                        
                                                from httpx import AsyncClient
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.anthropic import AnthropicModel
                        from pydantic_ai.providers.anthropic import AnthropicProvider
                        
                        custom_http_client = AsyncClient(timeout=30)
                        model = AnthropicModel(
                            'claude-3-5-sonnet-latest',
                            provider=AnthropicProvider(api_key='your-api-key', http_client=custom_http_client),
                        )
                        agent = Agent(model)
                        ...
                        

Gemini Install To use [`GeminiModel`](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModel) models, you just need to install [`pydantic-ai`](../install/) or [`pydantic-ai-slim`](../install/#slim-install), no extra dependencies are required. Configuration [`GeminiModel`](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModel) let's you use the Google's Gemini models through their [Generative Language API](https://ai.google.dev/api/all-methods), `generativelanguage.googleapis.com`. [`GeminiModelName`](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModelName) contains a list of available Gemini models that can be used through this interface. To use `GeminiModel`, go to [aistudio.google.com](https://aistudio.google.com/apikey) and select "Create API key". Environment variable Once you have the API key, you can set it as an environment variable:
                        
                                                export GEMINI_API_KEY=your-api-key
                        

You can then use [`GeminiModel`](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModel) by name: gemini_model_by_name.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('google-gla:gemini-2.0-flash')
                        ...
                        

Note The `google-gla` provider prefix represents the [Google **G** enerative **L** anguage **A** PI](https://ai.google.dev/api/all-methods) for `GeminiModel`s. `google-vertex` is used with [Vertex AI](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/models). Or initialise the model directly with just the model name and provider: gemini_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.gemini import GeminiModel
                        
                        model = GeminiModel('gemini-2.0-flash', provider='google-gla')
                        agent = Agent(model)
                        ...
                        

`provider` argument You can provide a custom [`Provider`](../api/providers/#pydantic_ai.providers.Provider) via the [`provider` argument](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModel.__init__): gemini_model_provider.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.gemini import GeminiModel
                        from pydantic_ai.providers.google_gla import GoogleGLAProvider
                        
                        model = GeminiModel(
                            'gemini-2.0-flash', provider=GoogleGLAProvider(api_key='your-api-key')
                        )
                        agent = Agent(model)
                        ...
                        

You can also customize the `GoogleGLAProvider` with a custom `http_client`: gemini_model_custom_provider.py
                        
                                                from httpx import AsyncClient
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.gemini import GeminiModel
                        from pydantic_ai.providers.google_gla import GoogleGLAProvider
                        
                        custom_http_client = AsyncClient(timeout=30)
                        model = GeminiModel(
                            'gemini-2.0-flash',
                            provider=GoogleGLAProvider(api_key='your-api-key', http_client=custom_http_client),
                        )
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4689, "crawled_at": "2025-03-25T05:14:36.380333+00:00"}', '[-0.02913134,-0.024571866,0.05545306,0.014343858,0.00024183694,-0.0045933616,0.008207052,0.014097399,0.013086922,-0.036672954,-0.04505253,-0.051115397,0.008034532,-0.06279751,-0.0029035837,-0.0069377935,-0.014467087,0.0027295228,-0.02340119,0.071669996,0.027208967,0.0640298,0.025927385,0.02522498,-0.030511504,0.0046056844,-0.013271765,-0.0054559647,0.011682111,-0.028835589,0.026149197,-0.009624186,-0.0030175706,-0.04246472,-0.051706895,0.018755456,0.011078289,0.012421485,0.002102595,0.036451142,0.011263132,-0.03112765,0.020098653,0.053777143,-0.025804156,0.03733839,-0.009636509,0.0005857229,0.0030684024,-0.007935949,0.008607547,0.047591045,-0.012852786,-0.00552066,-0.006518815,-0.048453648,0.011312423,0.0072397045,-0.023512097,-0.021737598,-0.0053204126,-0.007067184,-0.03235994,0.048010025,-0.012064121,-0.008182406,-0.048527587,-0.0033579906,-0.06540996,0.03171915,0.012729557,-0.008022209,-0.018398091,-0.035021685,-0.04510182,-0.03398656,-0.024411669,0.11751119,0.030905837,0.015095554,-0.0044270023,0.028934173,0.0029590367,-0.01567473,-0.028884882,-0.001677455,-0.049932398,0.0031916315,-0.037782017,-0.01341964,0.03482452,-0.01914979,-0.012470776,0.033518292,0.049291607,0.028268736,0.01494768,0.010455982,0.03312396,0.055403765,0.04069022,-0.029229922,-0.07881728,0.019716643,0.048133254,-0.059051346,0.009149754,0.0025154124,-0.02560699,0.043672364,-0.085619524,-0.03470129,0.010992028,-0.021257006,-0.06112159,-0.015046263,-0.032187417,0.012403,-0.011300101,-0.057572596,-0.0399262,-0.024214502,0.027504716,-0.05155902,0.03504633,0.0032070351,-0.020049362,-0.05025279,-0.08956285,-0.06595217,0.013838618,0.017215094,0.03371546,-0.044756778,0.0038016152,-0.04598907,-0.022834336,-0.0071411217,-0.01979058,0.0091744,0.013049953,-0.029698193,0.029229922,0.031867024,0.01949483,0.029353151,-0.040640928,-0.014886065,-0.018533643,0.027332196,-0.02255091,-0.008854005,0.002195017,-0.0004004943,-0.056586765,0.048576877,0.010049326,0.04386953,-0.018053051,-0.047911443,-0.0015611576,0.098878965,-0.033493645,-0.009809029,-0.03829958,0.063142546,-0.04263724,0.00959954,-0.051164687,-0.029082049,-0.004870627,-0.035489958,-0.034676645,0.014775159,0.0072212205,-0.026223134,6.228842e-05,-0.014627284,-0.03494775,-0.01600745,0.0099260975,0.036081456,-0.050967522,-0.008515125,-0.023746232,-0.015280398,-0.021959411,0.032261357,-0.0029621175,0.012803495,0.005194103,0.013567515,0.022945242,0.0008926402,-0.0022319856,-0.006999408,0.05742472,-0.040862743,0.032729626,0.042587947,0.010154071,-0.01473819,-0.0053481394,0.013173182,0.01817628,-0.03581035,0.011903923,-0.0030314338,0.007054861,0.0061398856,0.003151582,-0.016401783,0.0049846135,0.035317436,-0.04621088,-0.00013584073,-0.026050614,-0.0011729862,0.0022427682,0.01741226,-0.015218783,0.027085738,0.010314269,-0.025151042,-0.0059211543,0.006518815,0.0011883898,-0.03723981,-0.020419048,0.035637833,0.018706165,0.028810944,-0.006605075,0.0071965745,0.011922407,-0.03410979,0.028687716,0.0021595885,-0.007338288,-0.041947156,0.021947088,-0.016143002,-0.023376545,-0.00556379,0.0077018137,-0.012076444,-0.036500435,-0.05678393,0.0035305114,0.01911282,-0.008730776,-0.0020871914,-0.0193716,0.016130678,0.019285342,-0.019457862,0.02152811,0.01919908,-0.06792384,-0.022538587,-0.021207714,0.03440554,0.008687645,0.026321718,0.01622926,-0.0021518867,-0.042267554,0.0051109237,-0.014220629,-0.0048521427,0.04914373,0.011971699,0.039310057,-0.058558427,-0.006586591,0.0005372015,-0.008244021,0.039876908,-0.010585372,0.0009211369,-0.0006943185,-0.043031573,-0.026494239,0.014935357,-0.019679673,0.037215162,0.0030822658,-0.008570578,-0.0034288473,-0.029796775,0.05121398,0.012421485,0.008971073,-0.027406134,-0.021195391,0.020431371,0.003971055,0.046703797,-0.021121453,0.0038755524,0.043130156,0.0018376528,-0.017054895,-0.014849097,-0.0050924392,0.01758478,0.01341964,-0.0020440612,0.048823338,-0.03300073,0.011146065,0.021392558,0.00043707792,-0.021084486,-0.020948933,-0.031053713,0.0010358939,-0.021170745,0.0064818463,-0.013148536,-0.06388192,-0.02178689,-0.039655097,-0.006537299,-0.061466634,0.003669144,0.045003235,-0.06669154,-0.011361715,-0.00046827027,0.008909458,-0.056636054,0.023795523,0.01388791,0.022218192,-0.01261249,-0.017868208,-0.018977268,0.041626763,0.034233022,-0.0634383,-0.016512688,-0.0027788144,0.0002926689,-0.0132594425,0.013234796,0.027677236,0.08256344,-0.01949483,-0.0065681064,0.026716052,0.0135059,-0.0040449924,0.036845475,-0.019346956,-0.041478887,0.018829394,-0.028884882,-0.037165873,0.0047165905,-0.0816269,0.009605702,0.0145040555,0.006420232,-0.012329063,0.0105299195,0.025138719,-0.00017406099,-0.018952623,0.023832493,0.010332753,0.028786298,-0.05190406,-0.0014802886,-0.016759146,0.013530546,-0.0425633,0.025409823,0.036549725,-0.0481579,0.057917636,-0.01184847,0.015933512,-0.01418366,0.004581039,0.024214502,-0.015650084,0.026346363,-0.052988477,0.0195318,0.023043826,-0.02836732,-0.014368503,0.024226824,-0.019359278,0.009494795,0.054220766,0.011756049,0.047837503,0.023931075,-0.023302607,-0.00378005,0.027381487,-0.00518178,0.006987085,-0.027036445,-0.006124482,0.043130156,0.008379573,-0.0047289133,0.045767255,-0.03011717,0.018656872,-0.03452877,-0.045644026,-0.020690152,0.014553347,0.014935357,0.03341971,0.029673547,-0.021404881,-0.06979691,0.005070874,-0.04357378,-0.033616874,0.032138128,-0.008225537,0.0071842517,-0.01583493,-0.041971803,0.00399262,0.03911289,0.030018589,-0.023450483,-0.031497337,-0.021478817,0.0050986004,-0.010437498,0.021195391,0.008151599,-0.028687716,-0.04946413,-0.07009266,0.0077264593,0.026642114,0.003940248,-0.040739514,0.009544088,-0.006346294,-0.017017927,-0.00033271834,0.014122046,0.02789905,0.033247188,0.008311797,-0.0372891,0.029377798,0.0054313187,0.047246005,-0.0352435,0.05707968,-0.032976083,-0.025077105,0.017215094,0.01898959,0.008305635,0.038496744,0.013111567,-0.0065557836,-0.0083364425,-0.008934104,-0.01979058,0.002849671,0.013924879,-0.03166986,-0.017165802,0.0026047532,0.017843561,0.015305044,-0.008712292,0.009605702,0.020874996,-0.03418373,0.032606397,-0.018755456,0.093703344,0.011682111,-0.013247119,-0.0038200994,-0.0105484035,0.009266822,0.024325408,0.015785636,-0.013579838,0.05762189,-0.008749261,-0.03171915,-0.033173252,-0.046703797,-0.011281616,0.016722178,-0.06264963,-0.039014306,0.043031573,-0.0437463,-0.009063494,0.019815225,-0.0093900515,-0.04522505,0.05037602,-0.06393121,-3.4898843e-05,0.0079729175,-0.0077018137,-0.0023752393,-0.0008687646,0.0070363767,0.025311239,0.009833676,0.000666977,0.017387614,-0.002139564,0.001329333,-0.026666759,0.014688899,0.02067783,-0.009137431,-0.023758555,-0.04362307,0.01223048,0.03410979,-0.038669266,0.00096734776,-0.0264203,-0.03600752,0.019667352,0.017597103,-0.0387432,-0.04204574,-0.044239216,-0.021072162,-0.00043553754,-0.041478887,-0.0045964424,0.021293974,0.03539137,-0.012643297,0.022908274,0.012045637,0.017917499,0.05954426,-0.049316254,0.023167055,-0.010283462,0.0081639225,0.00019350807,-0.019075852,0.018139312,0.0065249763,0.020603891,-0.026888572,-0.013777004,0.022661816,0.029550318,-0.022587879,0.028884882,0.0135059,-0.011053643,-0.030733317,-0.012279771,-0.007652522,0.033740103,0.018706165,-0.006617398,0.01741226,0.010727086,-0.010024681,-0.012550876,-0.0036506597,0.008964911,-0.007707975,-0.0037677272,0.006648205,0.02050531,-0.00679608,-0.011016674,0.02166366,-0.003287134,0.0022057993,0.038422808,-0.008484318,-0.013838618,-0.015465242,0.0011699054,-0.028318027,-0.013826296,0.028342674,0.018681519,-0.029550318,0.027258258,0.020542277,-0.022612525,0.022883628,0.051706895,-0.0039556515,-0.047369234,0.01223048,0.018792424,-0.045668673,-0.004701187,0.019186758,-0.0067714346,-0.0093037905,-0.016525012,-0.014627284,0.0010582291,-0.021737598,-0.017658718,0.034380894,-0.019396247,0.04480607,0.0057363105,0.005104762,0.0124830995,0.010998189,0.021380235,-0.00879239,-0.041971803,-0.013345703,0.034972396,-0.023031503,0.0022828176,0.022501618,0.002641722,0.0019855276,-0.009661155,0.013370348,-0.033321127,-0.011712918,-0.04515111,-0.022945242,0.014442441,-0.029920004,-0.024029657,0.053284228,-0.0012384516,-0.02246465,0.004790528,0.028589131,-0.043894175,0.0073198033,0.00034715925,0.007775751,0.017523166,0.01682076,0.018188603,-0.012076444,-0.020209558,0.0048213354,0.030560795,-0.039975494,0.017461551,-0.018336477,0.017116511,0.019691996,0.007948272,0.055108014,-0.0032039543,0.0051448112,-0.027972987,0.01142333,0.06659296,0.02234142,-0.0016143001,-0.008835521,-0.015317366,0.0270118,-0.04276047,-0.05555164,0.0042544818,0.0014148231,0.009149754,-0.048453648,-0.028983464,0.071078494,-0.044411737,-0.008176245,0.016278554,-0.018706165,0.02340119,0.0264203,0.003678386,-0.0044485675,-0.013777004,0.016106032,0.013875587,-0.013271765,0.039260764,-0.019396247,-0.07019125,-0.009155916,0.0010536081,-0.02089964,0.019642705,-0.046284817,0.011645142,-0.003134638,0.0052742017,0.018274862,-0.027677236,-0.034923103,0.006876179,-0.0052218297,-0.0028512115,0.008823197,0.025976676,0.016907021,0.021035193,0.011201518,-0.013703067,-0.035514604,0.02208264,-0.0302404,0.018311832,0.021047516,-0.012926724,0.01914979,0.053333517,-0.020566924,-0.0201233,-0.016155325,-0.022871306,-0.0024491767,-0.015465242,-0.0044023567,0.010542243,-0.0075354544,-0.023758555,-0.0071596056,-0.0010073972,0.016401783,0.00061036873,-0.014479409,0.008872489,0.027800467,-0.002946714,0.029057402,0.05032673,0.0017313677,0.016882375,-0.021330943,0.008022209,0.012717235,0.0044054375,0.014368503,-0.015613116,-0.0033795557,-0.0019547204,-0.033321127,-0.00034504125,0.022205869,-0.03322254,-0.01312389,0.04709813,-0.003096129,-0.020110976,0.0070856684,-0.0063586175,-0.006531138,-0.016303198,0.022008702,-0.0022643332,-0.017991437,0.018878685,0.0237832,-0.035859644,-0.021035193,-0.0049538063,0.027381487,-0.00061421964,0.023561388,0.0073013194,-0.007541616,-0.009229854,0.015305044,-0.031275526,0.0018576775,-0.032828208,-0.029377798,-0.01826254,-0.017091865,0.024399346,-0.012729557,0.028293382,-0.018780103,0.026494239,0.018336477,-0.07822578,-0.008354927,0.02713503,0.010714763,0.012963693,-0.010178717,0.010591534,0.019926133,0.016586626,0.0047196713,0.011404846,-0.019618059,-0.036204685,0.010973544,0.042489365,-0.01902656,-9.7235396e-05,-0.029082049,0.018743133,0.01647572,-0.02871236,-0.024263794,0.0017945225,-0.01251...', '2025-03-25 05:14:38.763263+00'), ('49', 'https://ai.pydantic.dev/models/', '5', 'Using Gemini via VertexAI', 'Enterprise users should utilize the `google-vertex` provider with the `GeminiModel` for accessing the `*-aiplatform.googleapis.com` API. To implement this, installations of either `pydantic-ai` or `pydantic-ai-slim` with the `vertexai` optional group are required. The document also mentions `GeminiModelName`, which provides a list of available Gemini models.', 'Gemini via VertexAI If you are an enterprise user, you should use the `google-vertex` provider with [`GeminiModel`](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModel) which uses the `*-aiplatform.googleapis.com` API. [`GeminiModelName`](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModelName) contains a list of available Gemini models that can be used through this interface. Install To use the `google-vertex` provider with [`GeminiModel`](../api/models/gemini/#pydantic_ai.models.gemini.GeminiModel), you need to either install [`pydantic-ai`](../install/), or install [`pydantic-ai-slim`](../install/#slim-install) with the `vertexai` optional group: pipuv
                        
                                                pip install "pydantic-ai-slim[vertexai]"
                        
                        
                                                uv add "pydantic-ai-slim[vertexai]"
                        

Configuration This interface has a number of advantages over `generativelanguage.googleapis.com` documented above:
              1. The VertexAI API comes with more enterprise readiness guarantees.
              2. You can [purchase provisioned throughput](https://cloud.google.com/vertex-ai/generative-ai/docs/provisioned-throughput#purchase-provisioned-throughput) with VertexAI to guarantee capacity.
              3. If you're running PydanticAI inside GCP, you don't need to set up authentication, it should "just work".
              4. You can decide which region to use, which might be important from a regulatory perspective, and might improve latency.
The big disadvantage is that for local development you may need to create and configure a "service account", which I've found extremely painful to get right in the past. Whichever way you authenticate, you'll need to have VertexAI enabled in your GCP account. Application default credentials Luckily if you're running PydanticAI inside GCP, or you have the [`gcloud` CLI](https://cloud.google.com/sdk/gcloud) installed and configured, you should be able to use `VertexAIModel` without any additional setup. To use `VertexAIModel`, with [application default credentials](https://cloud.google.com/docs/authentication/application-default-credentials) configured (e.g. with `gcloud`), you can simply use: vertexai_application_default_credentials.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.gemini import GeminiModel
                        
                        model = GeminiModel('gemini-2.0-flash', provider='google-vertex')
                        agent = Agent(model)
                        ...
                        

Internally this uses [`google.auth.default()`](https://google-auth.readthedocs.io/en/master/reference/google.auth.html) from the `google-auth` package to obtain credentials. Won't fail until `agent.run()` Because `google.auth.default()` requires network requests and can be slow, it's not run until you call `agent.run()`. You may also need to pass the [`project_id` argument to `GoogleVertexProvider`](../api/providers/#pydantic_ai.providers.google_vertex.GoogleVertexProvider) if application default credentials don't set a project, if you pass `project_id` and it conflicts with the project set by application default credentials, an error is raised. Service account If instead of application default credentials, you want to authenticate with a service account, you'll need to create a service account, add it to your GCP project (note: AFAIK this step is necessary even if you created the service account within the project), give that service account the "Vertex AI Service Agent" role, and download the service account JSON file. Once you have the JSON file, you can use it thus: vertexai_service_account.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.gemini import GeminiModel
                        from pydantic_ai.providers.google_vertex import GoogleVertexProvider
                        
                        model = GeminiModel(
                            'gemini-2.0-flash',
                            provider=GoogleVertexProvider(service_account_file='path/to/service-account.json'),
                        )
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4465, "crawled_at": "2025-03-25T05:14:38.749123+00:00"}', '[-0.0475416,0.020335365,0.079461016,-0.0026473945,0.005707644,-0.00769658,0.00433347,0.016972255,0.015899435,-0.008003961,-0.027121857,-0.021601053,0.026928991,-0.05197753,-0.020467961,-0.006442948,-0.01002906,0.0049723405,-0.04640851,0.051061414,0.031871196,0.068805136,0.012693029,0.03196763,-0.032570336,0.009757841,-0.014248015,-0.0065695164,0.002879437,-0.05530448,0.023312742,-0.01397077,-0.011710615,-0.051543582,-0.020974236,0.024072155,-0.005713671,0.020034011,-0.001505263,0.036355343,0.0073289284,0.0028402612,0.0141515825,0.06263341,-0.032473903,0.045612935,-0.0231922,-0.012192781,-0.029267497,-0.02965323,-0.014995373,0.024385562,0.015923543,-0.022251977,-0.007383172,-0.04112879,0.022324301,-0.0049000154,-0.026736123,0.012439892,-0.010987366,-0.014055149,-0.025289625,0.07039629,-0.022095272,0.008721184,-0.04240653,0.022541277,-0.057908177,0.009757841,-0.024011884,0.0075700115,0.040622514,-0.037874166,-0.033751644,-0.006018039,-0.013488604,0.096819,0.0031250406,-0.0013982824,-0.020913966,0.021540781,0.0041074543,-0.02837549,-0.054629445,-0.009179242,-0.045709368,-0.023903396,-0.020395637,0.010692039,0.016200788,-0.020046066,-0.03751254,0.017707558,0.04382892,0.04513077,0.027869215,0.020853695,0.032498013,0.042719938,-0.0008935145,0.011909509,-0.024445834,0.028230838,0.058197476,-0.025241408,0.003580085,0.015272619,-0.010167683,0.040405538,-0.09016511,0.0006030846,0.029532688,-0.006539381,-0.07613406,0.0030843578,-0.03423381,0.015019482,-0.019804982,-0.046360295,-0.055641998,-0.011445424,0.009661408,-0.031244379,0.03464365,0.029122846,-0.01382612,-0.026036983,-0.063838825,-0.043732487,0.019033516,-0.0070938724,0.06417634,-0.014862778,-0.0084861275,-0.022396626,-0.040622514,0.012849733,-0.0053249244,0.020190716,-0.009577029,-0.03495706,0.0026564351,0.031244379,-0.0037850058,-0.017562909,-0.038332224,-0.013946662,-0.041996688,0.018937083,-0.02820673,-0.012656867,-0.01446499,-0.015248511,-0.04513077,-0.00017120672,-0.010589578,0.04284048,-0.01919022,-0.045612935,-0.017864263,0.06263341,0.015851218,-0.018069183,-0.01669501,0.049807783,-0.06142799,-0.025554815,-0.045178987,-0.03293196,-0.010686012,-0.045781694,-0.036331233,-0.0391278,0.02298728,-0.04542007,-0.017273609,0.005629292,-0.01884065,-0.048939884,-0.015610135,0.021938568,-0.02420475,0.017514693,-0.04197258,0.0039266422,-0.014826615,0.020311257,-0.023107821,0.03408916,0.011463505,0.027893323,0.019925524,0.032980178,0.0054062903,0.005807091,0.051061414,-0.025988765,0.03254623,0.024084209,0.02121532,-0.06991412,0.027531698,0.025434274,-0.0023580948,-0.04255118,0.039224233,0.0019874293,7.2277864e-05,-0.011342963,-0.0009703598,-0.036331233,0.018479025,0.005629292,-0.050627466,-0.0075820656,0.0040291026,0.006060228,-0.002926147,0.007220441,-0.03753665,0.023903396,-0.017165123,-0.016236952,-0.008196828,0.0055931294,-0.019841146,-0.053472247,0.013621199,0.037440218,-0.013428332,0.011427342,-0.017876318,-0.024952108,-0.01768345,-0.036524102,0.07242139,0.02428913,0.014694019,-0.0005386702,-0.010716147,0.01432034,-0.015272619,0.0011700068,0.028158514,-0.021576945,-0.027001316,-0.085777394,0.03895904,0.032039955,-0.019612117,0.021010399,-0.022746198,0.018479025,0.022830576,-0.014862778,0.0051441123,0.011855265,-0.02164927,-0.0124157835,-0.0028493018,0.03866974,0.00827518,0.004077319,-0.008944185,-0.0005394236,-0.045082554,0.0033239343,-0.040309105,-0.01655036,0.042719938,0.009703598,0.04411822,-0.045299526,-0.020455908,0.0076302825,-0.004110468,0.06272984,0.013199303,0.050193515,0.0108547695,-0.022951119,-0.012560433,0.04122522,0.0014472525,0.05602773,-0.021408185,-0.009251567,-0.009354027,-0.012096348,0.03823579,0.028134406,0.033341803,-0.02249306,0.019431304,0.030038964,0.05843856,0.035439227,0.00058236654,-0.00041812862,0.060222577,0.025868224,6.027079e-05,-0.025289625,-0.0064128125,0.037705407,0.014573478,0.012705083,0.022902902,-0.015598081,-0.022384573,0.011361045,0.008046151,-0.008100394,-0.021890352,-0.042189553,0.01139118,-0.050531033,-0.027435265,0.0014065696,-0.04698711,-0.016658846,-0.037584867,-0.008220936,-0.06923909,0.0035378956,0.042358313,-0.07290355,0.049036317,0.0007134555,0.012596596,-0.023300689,-0.015079753,0.00870913,0.007762878,-0.0063706227,-0.012693029,-0.017803993,-0.01017371,0.02965323,-0.05689563,-0.028881764,0.019166112,0.003128054,-0.04153863,0.032281037,-0.014416774,0.04339497,0.011565966,-5.104183e-05,-0.004047184,-0.039754614,0.023168093,0.005535872,0.030207722,-0.05318295,0.014706073,-0.024928,-0.041659173,-0.033703428,-0.08278796,0.0014397185,0.015549865,0.026398607,-0.02084164,0.0015760813,0.02620574,-0.005294789,0.014489098,0.01669501,0.021239428,0.0015745745,-0.02892998,0.03066578,-0.013512712,-0.01104161,-0.021601053,0.042936914,0.024662808,-0.012584542,0.049663134,0.009824139,-0.01504359,-0.03307661,0.024180641,-0.0032817447,-0.027290614,0.023240417,-0.03869385,0.016839659,0.03220871,-0.0046589323,-0.013175195,0.006551435,-0.021974731,-0.016080247,0.040453754,-0.009558948,0.028905872,0.013609145,-0.00032056528,-0.035656203,0.015634244,-0.037150916,0.012632758,-0.046504945,0.0028764235,0.025868224,-0.022360465,0.006060228,0.04971135,-0.014935102,0.026977208,-0.003245582,-0.02142024,-0.020250987,0.04038143,0.04513077,0.028254949,0.05588308,-0.011523776,-0.026832556,-0.031581897,-0.023264525,-0.046191536,0.016887875,-0.01289795,0.005002476,-0.0053731413,-0.06475494,0.010191791,0.034884736,0.06374239,-0.03466776,-0.045347743,-0.0051893154,0.011698561,-0.0050054896,-0.005231505,0.023867235,-0.028857656,-0.08032891,-0.0495667,-0.0032154468,0.0024560348,-0.014983319,-0.05202575,-0.010577524,0.02327658,-0.03322126,-0.0030949053,0.043563727,0.010945176,0.00039213683,0.004845772,-0.03994748,0.06605679,0.007889447,0.06586392,-0.02078137,0.05501518,-0.024626646,-0.053327598,0.025289625,-0.00079557445,0.014103365,0.056799196,0.01310287,0.00399294,0.003272704,-0.030135397,0.0059396867,0.014272124,-0.010734228,-0.040333215,-0.020829586,-0.013114925,-0.007473578,-0.01008933,-0.0004791528,0.0050235707,0.0172495,0.0014065696,0.04122522,0.01935898,0.09585467,0.017695505,0.003489679,0.011409261,0.025554815,-0.011734723,-0.007817122,0.026856665,-0.012777408,0.06764794,0.0046800273,0.019817038,-0.03126849,-0.029171064,0.016719118,0.011336936,-0.01698431,-0.016152572,0.025024433,-0.056365244,-0.011716642,-0.0027799904,-0.019431304,-0.045612935,0.039513532,-0.038742065,-0.008100394,0.014947156,0.0042641587,0.0045203096,0.020287149,-0.004547431,0.04556472,0.022035003,-0.012560433,0.0054032765,-0.0036252881,0.00061852904,-0.025506599,-0.014947156,0.023831071,-0.019696495,-0.017345935,-0.045371853,-0.005044665,0.022312248,-0.033004288,-0.006527327,-0.033004288,-0.026302174,0.036765184,0.0014223907,-0.017201284,-0.026904883,-0.0072566033,-0.002618766,0.0041797794,-0.04108057,0.018346429,0.008419829,0.00078050676,-0.014235961,-0.0027242398,0.022264032,0.030545238,0.039634075,-0.031847086,0.027893323,-0.022625655,0.020564394,0.02736294,-0.007871365,0.008672968,-0.0046529053,-0.0087694,-0.026832556,-0.005315884,0.03428203,0.01617668,-0.024674863,0.028303165,0.014296232,-0.029146956,-0.026302174,0.012512216,-0.027290614,0.019853199,0.030738104,-0.0060662553,0.023758747,0.009709625,0.0060059847,0.0005688056,-0.017237447,0.041201115,-0.02504854,-0.012017996,0.007009493,0.04110468,0.013247521,0.0054876558,-0.0052194507,-0.0049271374,0.014440882,0.03799471,0.0047282437,-0.028037973,-0.017960696,-0.009420325,0.0016001896,-0.018334376,0.028688898,0.032618552,-0.04457628,0.039320666,0.0353669,0.008022043,0.009498677,0.035487443,-0.0039326693,-0.021094777,0.002297824,0.02098629,-0.014211853,0.00031472655,-0.013090816,-0.010258089,-0.01669501,-0.006461029,-0.012656867,-0.0028056053,-0.0022104313,-0.014706073,0.05959576,-0.016948147,0.03570442,-0.02385518,-0.010806553,0.0046770135,0.021516673,0.020684937,-0.014995373,-0.052604347,-0.03452311,0.0075579574,-0.024457889,0.015369052,0.051929314,0.028857656,0.008739265,-0.012162646,-0.0023415203,0.0003079461,-0.003712681,-0.011011474,-0.02507265,0.007371118,-0.01892503,-0.017165123,0.046480834,-0.011373099,-0.03377575,0.025747683,-0.0058884565,-0.034860626,-0.0060722823,0.0040411567,0.038356334,0.02084164,0.010909013,0.029966637,-0.019226383,-0.023638206,0.007365091,0.023758747,-0.044817362,0.029267497,-0.006048174,-0.004535377,-0.0029276537,0.011210367,0.056943845,0.012265107,-0.0002928784,-0.032714985,-0.008022043,0.040501975,0.011704588,0.0073952265,0.007154143,-0.031413138,0.009432379,-0.045540612,-0.016490089,-0.005831199,-0.013994878,-0.005255613,-0.040236782,0.04038143,0.054918747,-0.054918747,-0.00020586242,-0.019696495,-7.3784635e-05,-0.0007194826,0.028688898,-0.009655381,0.0066719768,0.0015429324,-0.024168588,0.008883915,-0.0112043405,0.03379986,-0.01157802,-0.039634075,-0.042478856,-0.0010615194,0.016827606,0.008908023,-0.0353669,0.010589578,-0.01008933,0.0044720927,0.028713007,-0.03806703,-0.03753665,0.019455412,-0.004574553,-0.02307166,0.005258627,0.013705579,0.011336936,0.025844116,0.0032244874,-0.01919022,-0.045395963,0.03927245,-0.012717137,0.015453432,0.01884065,-0.015236457,-0.013452441,0.016056139,-0.049952433,-0.017104851,-0.024686918,-0.022999335,0.0049572727,-0.0074072806,0.02393956,0.014585532,-0.030255938,-0.0035409092,-0.047782686,0.0054876558,0.010432874,-0.0016152572,-0.023722583,0.0094685415,-0.016224897,-0.004981381,0.013958716,0.045203093,0.027820999,0.002276729,-0.006533354,0.007383172,0.023240417,0.012011969,0.013018492,-0.009155134,-0.012247025,-0.0038573307,-0.05747423,-0.005517791,0.0052465727,-0.032401577,-0.0012430851,0.036186583,0.00052360253,-0.026374498,0.020118391,0.008950213,0.02228814,0.017791938,0.0059728357,0.018876811,-0.0051983558,0.035005275,0.017635234,-0.029267497,-0.000510795,-0.03095508,0.041490413,0.014681965,0.024397617,0.0047493386,-0.031702437,-0.008142584,-0.005472588,-0.030400587,-0.00023806964,-0.020660827,-0.03423381,0.015067698,-0.036837507,0.02292701,0.002874917,0.041514523,-0.0003482522,0.024252968,-0.0015956692,-0.08346299,-0.016707065,-0.005086855,-0.0071842787,0.011035582,0.00038328458,0.03522225,-0.006937168,0.010595606,0.014886886,0.008058205,-0.035559766,-0.026567366,-0.009329919,0.044455737,-0.014983319,0.005792023,-0.032498013,0.010487118,0.0045323637,-0.03293196,-0.012240998,0.009818...', '2025-03-25 05:14:38.847026+00'), ('50', 'https://ai.pydantic.dev/models/', '6', 'Using Service Account Information with Pydantic AI', 'This section illustrates how to use service account information stored in memory as a dictionary to initialize a GeminiModel in the Pydantic AI library. It includes a code snippet demonstrating the import of necessary modules, loading service account data, and creating an agent with the specified model and provider.', 'Alternatively, if you already have the service account information in memory, you can pass it as a dictionary: vertexai_service_account.py
                        
                                                import json
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.gemini import GeminiModel
                        from pydantic_ai.providers.google_vertex import GoogleVertexProvider
                        
                        service_account_info = json.loads(
                            '{"type": "service_account", "project_id": "my-project-id"}'
                        )
                        model = GeminiModel(
                            'gemini-2.0-flash',
                            provider=GoogleVertexProvider(service_account_info=service_account_info),
                        )
                        agent = Agent(model)
                        ...
                        

Customising region Whichever way you authenticate, you can specify which region requests will be sent to via the [`region` argument](../api/providers/#pydantic_ai.providers.google_vertex.GoogleVertexProvider). Using a region close to your application can improve latency and might be important from a regulatory perspective. vertexai_region.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.gemini import GeminiModel
                        from pydantic_ai.providers.google_vertex import GoogleVertexProvider
                        
                        model = GeminiModel(
                            'gemini-2.0-flash', provider=GoogleVertexProvider(region='asia-east1')
                        )
                        agent = Agent(model)
                        ...
                        

You can also customize the `GoogleVertexProvider` with a custom `http_client`: vertexai_custom_provider.py
                        
                                                from httpx import AsyncClient
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.gemini import GeminiModel
                        from pydantic_ai.providers.google_vertex import GoogleVertexProvider
                        
                        custom_http_client = AsyncClient(timeout=30)
                        model = GeminiModel(
                            'gemini-2.0-flash',
                            provider=GoogleVertexProvider(region='asia-east1', http_client=custom_http_client),
                        )
                        agent = Agent(model)
                        ...
                        

Groq Install To use [`GroqModel`](../api/models/groq/#pydantic_ai.models.groq.GroqModel), you need to either install [`pydantic-ai`](../install/), or install [`pydantic-ai-slim`](../install/#slim-install) with the `groq` optional group: pipuv
                        
                                                pip install "pydantic-ai-slim[groq]"
                        
                        
                                                uv add "pydantic-ai-slim[groq]"
                        

Configuration To use [Groq](https://groq.com/) through their API, go to [console.groq.com/keys](https://console.groq.com/keys) and follow your nose until you find the place to generate an API key. [`GroqModelName`](../api/models/groq/#pydantic_ai.models.groq.GroqModelName) contains a list of available Groq models. Environment variable Once you have the API key, you can set it as an environment variable:
                        
                                                export GROQ_API_KEY='your-api-key'
                        

You can then use [`GroqModel`](../api/models/groq/#pydantic_ai.models.groq.GroqModel) by name: groq_model_by_name.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('groq:llama-3.3-70b-versatile')
                        ...
                        

Or initialise the model directly with just the model name: groq_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.groq import GroqModel
                        
                        model = GroqModel('llama-3.3-70b-versatile')
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4613, "crawled_at": "2025-03-25T05:14:36.265594+00:00"}', '[-0.051329248,0.0028535854,0.06431555,-0.033235688,0.002348313,0.006428988,0.002718846,0.023778273,0.0014107523,0.010054116,-0.020608693,-0.031079859,0.02864172,-0.034903888,-0.01565542,-0.010605905,-0.025715953,0.035648163,-0.037008386,0.05040532,0.038676586,0.045606036,0.008616897,0.02792311,-0.029052354,0.007538983,-0.017901074,-0.008122853,-0.003163165,-0.053587735,0.017490441,-0.019338293,-0.03918988,-0.04096074,-0.024727864,-0.010779141,-0.017631596,0.005395987,0.03131084,0.034672905,0.0063199135,-0.028924031,0.006239712,0.058977306,-0.029847957,0.037957978,-0.022841515,0.008424412,-0.037059717,-0.01637403,-0.009001867,0.011998211,-0.026460227,-0.03385164,-0.013011964,-0.02758947,-0.0009816719,0.002269715,0.015180625,0.021006495,-0.027640799,0.0033620656,-0.012492255,0.057642743,-0.018619685,-0.0068652867,-0.06416156,0.022495043,-0.069140494,0.0007984104,-0.012556417,0.018350206,0.02692219,-0.04047311,-0.027230166,-0.03374898,-0.026485892,0.10912598,0.015693918,-0.039472193,-0.04191033,-0.030078938,0.0048377817,-0.0056526335,-0.045862682,-0.009893713,-0.047582213,0.006047227,-0.019736096,-0.0128964735,0.03972884,0.00034707395,-0.008783718,0.033877302,0.062005732,0.052330166,0.028693048,-0.017618764,0.012780982,0.045888346,0.0047062505,-0.01892766,-0.04806984,0.025112834,0.058207367,0.002847169,0.021263141,0.03662342,-0.03208078,0.04257761,-0.07837976,-0.030771883,0.0073721632,-0.018773671,-0.06292966,0.0021686608,-0.0330817,-0.0049019433,0.004083883,-0.07699387,-0.03957485,-0.030438244,0.029873623,-0.028333744,0.027717793,0.012530752,-0.018055063,-0.03154182,-0.077301845,-0.039472193,0.0020660022,-0.019055983,0.09778222,-0.01537311,-0.0020018406,-0.018042231,-0.035648163,-0.004247495,-0.029206341,0.03269673,-0.0053639063,-0.013576586,0.0068652867,0.034903888,-0.020249387,-0.0050751795,-0.043989163,0.008924873,-0.034595914,0.032902047,-0.022110073,0.002876042,-0.03736769,0.004196166,-0.040370453,0.045580372,0.005322201,0.025561964,0.027717793,-0.03831728,-0.008116437,0.054819636,0.021891924,-0.03847127,-0.036212783,0.018196218,-0.067600615,-0.021263141,-0.056924134,-0.024009256,-0.027948774,-0.034903888,-0.014269531,-0.02925767,0.009771805,-0.03513487,-0.0052965367,0.018517027,-0.018196218,-0.022161402,-0.00020792356,0.034441926,-0.0347499,0.0067754607,-0.008187015,-0.012659076,-0.018170554,0.011356596,-0.03741902,0.045272395,0.004818533,0.015334613,0.020967998,0.0044143153,0.019248467,-0.02735849,0.059028633,-0.028564725,0.011196192,0.005277288,0.0027814035,-0.037957978,0.01038134,-0.012954218,0.020069735,-0.060619842,0.022559203,-0.020121064,-0.02031355,-0.012703989,-0.0015839884,-0.045554705,0.0038432775,0.010458334,-0.042038653,0.0030348417,-0.03274806,-0.0018446448,0.011067869,0.0030492782,-0.020878172,0.019813089,0.0038881905,-0.024727864,0.0019825923,0.0192613,-0.0036058796,-0.054973625,0.036084462,0.027538141,0.005915696,0.023521628,-0.016207209,-0.0035898392,0.006505982,-0.018286044,0.06251902,0.017220963,-0.014628835,-0.022854347,-0.0023258566,-0.0163227,-0.0024605957,-0.024894685,0.036110125,0.021519788,-0.015052302,-0.059079964,0.021019327,0.02592127,-0.018748008,-0.015976228,0.009502327,0.028000105,0.016977148,-0.009354755,0.014000053,-0.026768202,-0.050225668,-0.024458386,0.002106103,0.048865445,0.030284256,0.019517947,0.00899545,0.004610008,-0.046837937,-0.003084567,-0.033004705,0.0020034446,0.004658129,-0.02320082,0.021032158,-0.027563805,-0.010971626,0.021968918,0.015154961,0.04534939,0.0018590812,0.028744379,-0.0066471375,-0.019466616,0.019055983,0.018234715,-0.01792674,0.04491309,-0.020621525,-0.014590339,-0.016476689,0.018940492,0.038599595,0.025395146,0.023726944,-0.03418528,0.02575445,-0.013409765,0.008142102,0.030438244,0.01815772,0.01720813,0.049943358,0.04373252,-0.00741066,-0.01604039,-0.02959131,0.021019327,0.028179757,-0.009592153,0.056256853,-0.015693918,0.01687449,0.015103631,-0.018003734,-0.022584869,-0.025728785,-0.032414418,0.023239316,-0.024792027,-0.0016192773,-0.00913019,-0.04611933,-0.025074337,-0.04042178,-0.0031984537,-0.08520655,-0.027615136,0.018414367,-0.05918262,-0.012325436,-0.003378106,0.03464724,-0.03803497,-0.003907439,0.04357853,0.020069735,-0.005649425,0.0014604775,-0.015963396,0.0072951694,0.013114623,-0.10173457,-0.037624337,0.021943253,-0.014179705,-0.05589755,0.06457219,0.020069735,0.04581135,-0.011523416,0.00131852,0.024394225,0.0010859343,0.0043886504,0.017387783,0.0343136,-0.031721476,0.00913019,-0.023393305,-0.03436493,-0.006249336,-0.06631739,0.017220963,-0.007699387,0.005928528,-0.03418528,-0.00949591,0.041653685,-0.010926713,0.00093916483,0.041782007,0.015604091,-0.0039234795,-0.03798364,-0.01179931,-0.018221883,-0.0243044,-0.018491361,0.051893868,0.01648952,-0.007128349,0.058977306,-0.0038978148,0.003987641,-0.0064418204,0.029334664,0.0070256907,-0.0021109153,0.04119172,-0.020557363,0.021609614,0.008738805,-0.025459306,0.013242946,0.023521628,0.0080522755,0.003004365,0.040216465,0.0010867364,0.046966262,0.04658129,0.011253937,-0.010599489,0.0056718816,-0.023021167,0.005347866,-0.0077186357,0.013178784,0.02031355,-0.015167792,-0.014885481,0.05079029,-0.025112834,0.029565645,-0.013807568,-0.038394276,-0.05068763,0.004491309,0.012062373,0.04640164,0.03757301,-0.0072566723,-0.04596534,0.0032032658,-0.045272395,-0.03693139,0.03441626,-0.016951485,-0.016810328,-0.0057328353,-0.035006545,-0.010163191,0.013627915,0.033928633,-0.054306343,0.021506954,-0.043167897,0.0065541035,0.021506954,0.01648952,-0.0023354806,-0.030155933,-0.07026974,-0.052099187,0.012286939,0.005643009,-0.0056526335,-0.031567488,-0.021173315,0.0033235687,-0.05250982,-0.0019665519,0.015912067,0.01210087,0.024137579,0.028564725,-0.07571064,0.056205526,0.021660943,0.052150514,-0.023572957,0.07232291,-0.015822241,-0.044271477,0.037547342,0.017605932,0.009200768,0.020749848,0.007988114,-0.029052354,-0.010054116,-0.027563805,0.011914802,0.002216782,-0.013923058,-0.044861764,-0.048506137,0.019851586,-0.010066949,-0.014282363,0.0005445712,0.027076177,0.013666412,0.005100844,0.044502456,0.010618738,0.099886715,0.041037735,-0.027563805,0.02331631,0.017413447,-0.025061505,0.010073365,0.050046016,-0.014692997,0.057642743,0.0038144046,0.030669225,-0.00943175,-0.007231008,0.02014673,0.0029594519,-0.022058744,-0.028154092,0.038702253,-0.06205706,0.016207209,0.014038549,-0.018748008,-0.024933182,0.094599806,-0.02403492,0.0017516105,-0.0035481341,-0.00062677823,0.024650872,0.031208182,0.0070898524,0.041833337,-0.010785558,0.009226432,0.01648952,-0.013332772,0.0019184306,0.0024028504,-0.009335507,-0.0043084486,-0.021198979,-0.025664624,-0.04601667,-0.004715875,0.028385073,-0.033492334,0.0059958976,-0.028847037,-0.027948774,0.033954296,0.015270451,-0.022854347,-0.019979909,0.009085277,0.003987641,0.0075967284,-0.017310789,0.005944568,-0.0044271476,0.013781902,0.0019440952,0.0034069787,0.005469773,0.009168686,0.037265033,-0.0364181,0.020801177,-0.0046068,0.0368544,0.025626127,-0.019723263,0.017079808,0.0012655867,-0.008636146,-0.017246626,0.006711299,0.020891003,-0.009232848,-0.025023008,0.034698572,0.030566566,-0.022161402,-0.04858313,-0.0054986454,-0.008770885,0.0059477766,0.004998185,-0.014089879,0.014474847,0.0128964735,-0.017297957,-0.0011404717,-0.030617896,0.016605012,-0.026126586,-0.019787425,5.528922e-05,0.0121522,-0.00092713453,-0.022892844,-0.002345105,0.007782797,0.008257593,0.024881853,-0.0018366246,-0.046427306,-0.00328828,-0.020583028,0.00091911433,-0.016733335,0.026216414,0.031387836,-0.041012067,0.05728344,0.025151331,-0.007154014,-0.0028166925,0.03202945,-0.008142102,-0.029488653,0.009361171,0.0043565696,-0.034826893,0.008026611,-0.0063552023,-0.015360277,-0.020364879,-0.016617844,-0.0347499,0.0028295247,-0.047890186,0.00095279916,0.059028633,-0.020583028,0.024830524,0.0028792499,0.009335507,-0.00039278905,0.011760814,0.01256925,-0.017195297,-0.050815955,-0.019671934,0.027820451,-0.035006545,0.010791974,0.049096424,0.009957874,-0.010458334,-0.022931341,0.007205343,-0.0017195297,-0.00033925424,-0.036110125,-0.0008020195,0.0057488754,-0.0055692233,-0.025780113,0.04129438,-0.0061081806,-0.007930369,0.026229246,0.025023008,-0.03403129,-0.014911146,-0.017580267,0.024163242,0.023239316,0.0015759683,0.017836913,0.0018831417,-0.014115543,0.012248442,0.026113754,-0.064982824,0.008090773,0.0018911619,-0.009553656,0.0022280102,0.01410271,0.030463908,0.009175103,0.016130216,-0.0076031447,0.005232375,0.040601436,0.01986442,0.023547292,0.0058739907,-0.0040582186,0.013576586,-0.048095506,-0.019299798,0.017554602,-0.0029787004,-0.021173315,-0.031285178,0.04173068,0.042526282,-0.05990123,-0.0069807777,-0.009110942,-0.00938042,-0.0075133187,0.013910226,-0.03154182,0.006544479,0.0129863,-0.009098109,0.01820905,-0.001234308,0.03798364,-0.039831497,-0.062827,-0.0003707335,-0.021468457,0.022225564,3.0451678e-05,-0.034287937,0.027461147,-0.016887322,0.028718714,0.01837587,-0.01986442,-0.025549132,0.023829604,0.012023876,0.0009760577,-0.009470246,0.030001946,-0.023444634,0.031952456,0.0058226613,-0.009284178,-0.027897445,0.03202945,-0.009637066,0.019055983,0.020121064,-0.0347499,-0.012408845,0.026267743,-0.028128427,-0.011966131,-0.038496934,-0.015013805,0.015539929,-0.020275053,-0.00019208367,0.014423518,-0.048942436,-0.010926713,-0.030566566,0.007923952,0.009303426,0.0013024796,-0.027230166,0.016887322,0.0026995975,-0.0092136,0.017131137,0.031567488,-4.6642446e-05,0.016232874,-0.015745247,0.0096691465,0.0029706801,-0.014166872,-0.0009143022,0.0028279207,-0.0034005626,-0.0053639063,-0.062416364,-0.0057584997,0.0015679481,-0.047992844,0.002390018,0.04463078,-0.009681979,-0.009149439,0.026408898,-0.011035788,0.010593073,-0.009816718,0.0018061479,-0.00090548,-0.008122853,0.028821371,0.020275053,-0.033825975,0.0031022113,-0.000307775,0.03585348,0.007205343,0.018658182,-0.00057143887,0.0011605222,-0.012286939,0.013165952,-0.02630624,0.0026418522,-0.041448366,-0.0045618867,-0.009489494,-0.020121064,0.014295195,-0.00272045,0.02291851,0.002588919,0.023380471,-0.014141208,-0.08438528,-0.013538089,0.009675563,-0.010727813,0.03847127,-0.00625896,0.005517894,-0.012396013,0.020364879,0.00846291,-0.008847879,-0.0032241184,-0.018132057,-0.009925793,0.038265955,-0.03841994,0.007436325,-0.017567435,0.030925872,0.0026643088,-0.026075257,-0.014025717,0.02015956...', '2025-03-25 05:14:38.90152+00'), ('51', 'https://ai.pydantic.dev/models/', '7', 'Customizing GroqModel with Provider', 'This section explains how to customize the `GroqModel` by providing a custom `Provider` through the `provider` argument. It includes an example of initializing a `GroqModel` with a specific `GroqProvider` and an API key.', '`provider` argument You can provide a custom [`Provider`](../api/providers/#pydantic_ai.providers.Provider) via the [`provider` argument](../api/models/groq/#pydantic_ai.models.groq.GroqModel.__init__): groq_model_provider.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.groq import GroqModel
                        from pydantic_ai.providers.groq import GroqProvider
                        
                        model = GroqModel(
                            'llama-3.3-70b-versatile', provider=GroqProvider(api_key='your-api-key')
                        )
                        agent = Agent(model)
                        ...
                        

You can also customize the [`GroqProvider`](../api/providers/#pydantic_ai.providers.groq.GroqProvider) with a custom `httpx.AsyncHTTPClient`: groq_model_custom_provider.py
                        
                                                from httpx import AsyncClient
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.groq import GroqModel
                        from pydantic_ai.providers.groq import GroqProvider
                        
                        custom_http_client = AsyncClient(timeout=30)
                        model = GroqModel(
                            'llama-3.3-70b-versatile',
                            provider=GroqProvider(api_key='your-api-key', http_client=custom_http_client),
                        )
                        agent = Agent(model)
                        ...
                        

Mistral Install To use [`MistralModel`](../api/models/mistral/#pydantic_ai.models.mistral.MistralModel), you need to either install [`pydantic-ai`](../install/), or install [`pydantic-ai-slim`](../install/#slim-install) with the `mistral` optional group: pipuv
                        
                                                pip install "pydantic-ai-slim[mistral]"
                        
                        
                                                uv add "pydantic-ai-slim[mistral]"
                        

Configuration To use [Mistral](https://mistral.ai) through their API, go to [console.mistral.ai/api-keys/](https://console.mistral.ai/api-keys/) and follow your nose until you find the place to generate an API key. [`LatestMistralModelNames`](../api/models/mistral/#pydantic_ai.models.mistral.LatestMistralModelNames) contains a list of the most popular Mistral models. Environment variable Once you have the API key, you can set it as an environment variable:
                        
                                                export MISTRAL_API_KEY='your-api-key'
                        

You can then use [`MistralModel`](../api/models/mistral/#pydantic_ai.models.mistral.MistralModel) by name: mistral_model_by_name.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('mistral:mistral-large-latest')
                        ...
                        

Or initialise the model directly with just the model name: mistral_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.mistral import MistralModel
                        
                        model = MistralModel('mistral-small-latest')
                        agent = Agent(model)
                        ...
                        

`provider` argument You can provide a custom [`Provider`](../api/providers/#pydantic_ai.providers.Provider) via the [`provider` argument](../api/models/mistral/#pydantic_ai.models.mistral.MistralModel.__init__): groq_model_provider.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.mistral import MistralModel
                        from pydantic_ai.providers.mistral import MistralProvider
                        
                        model = MistralModel(
                            'mistral-large-latest', provider=MistralProvider(api_key='your-api-key')
                        )
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4427, "crawled_at": "2025-03-25T05:14:36.373969+00:00"}', '[-0.031421755,-0.008042329,0.042538736,-0.018749358,0.009314392,0.028383274,-0.0149994865,0.0023090045,-0.014348383,-0.0013052206,-0.024548998,-0.030457158,0.025031298,-0.027177526,-0.01741098,-0.00052035495,-0.022463057,0.022740379,-0.01308235,0.07750539,0.054306824,0.07002976,-0.006589405,0.030818881,-0.031011801,-0.009236018,0.0009352071,0.010809517,-9.7872704e-05,0.018737301,0.03882504,-0.011599282,-0.004394946,-0.02049769,-0.007053617,-0.0009902193,0.015240636,0.05194356,-0.010743202,0.046445355,-0.00093143916,-0.06482093,-0.02002745,0.020184197,-0.0003926212,0.027997434,-0.004452219,0.035207797,-0.0030173806,0.0040271934,-0.017350692,0.014022832,-0.030143663,-0.02724987,0.02630939,-0.042586967,0.020449461,-0.016144946,0.01841175,-0.029130835,-0.021799898,-0.0014303168,-0.009887122,0.026646998,0.016868394,-0.036799382,-0.038415086,0.009067214,-0.056670085,0.020557977,0.0020030465,-0.0068004103,-0.037088763,-0.035328373,-0.016374039,-0.03209697,0.0052600694,0.103018984,0.03962083,-0.013010005,-0.027177526,0.003885518,0.011249615,-0.0066195484,-0.04495023,-0.03581067,-0.054113902,-0.0019985249,-0.028359158,-0.013480246,0.028986147,-0.020582093,-0.009356593,0.028696766,0.070222676,-0.020666495,0.01403489,-0.0028018535,0.015240636,0.031421755,0.0010286525,-0.05199179,-0.039452028,0.02558594,0.048832733,-0.00932645,0.029492559,0.019002564,-0.02553771,0.063518725,-0.057682913,-0.04618009,0.019798357,0.011472678,-0.048832733,-0.0016322794,-0.005558491,0.02022037,-0.016796049,-0.042731658,-0.061348382,-0.044419702,0.050737813,0.003819202,0.035473064,0.03515957,-0.0007079993,-0.036727037,-0.08724782,-0.012636224,-0.045963056,0.021667264,0.04333453,-0.007885582,-0.016783992,-0.027032837,-0.010978322,0.0066617494,-0.016904566,0.0025290533,-0.0043015005,-0.0038041302,-0.021836068,0.008747691,-0.014722165,0.00485313,-0.003553938,-0.036606465,-0.010869805,0.016771933,-0.0020919703,-0.0046300665,-0.0171216,0.02330708,-0.029830169,0.038463313,0.01403489,0.0048260004,0.026188815,-0.037112877,-0.017193945,0.07601026,-0.028648537,-0.041646484,-0.019279886,0.010598511,-0.038173936,-0.007011416,-0.04010313,-0.046493586,-0.04504669,-0.014541303,-0.028865572,-0.03361621,0.028865572,-0.027056951,-0.036847614,-0.022246024,-0.02606824,-0.024090815,-0.007783094,0.050834272,-0.0587922,-0.018086197,-0.014227808,0.0030550603,-0.050351974,0.039500255,0.011116982,0.06684659,0.022366598,-0.01745921,0.026598768,0.009573627,0.016735762,0.004961647,0.013757568,-0.021631092,0.04362391,0.009193817,0.007734864,-0.007982042,0.03540072,-0.021160852,0.027394561,-0.025151873,-0.0039819777,-0.012587993,-0.0070053875,0.011954976,-0.0053776293,-0.056911234,-0.017724473,0.00044499582,-0.024235506,-0.002551661,-0.05488558,0.006215623,0.018966394,0.042514622,0.021257311,0.010664828,-0.0115811955,-0.06974038,0.012708568,0.02592355,0.034749616,-0.06448332,0.010682914,0.0021115637,0.014276039,0.055850178,-0.0112255,0.0079518985,0.060528476,-0.028190354,0.008217162,-0.003448435,0.038728576,-0.008144817,0.023415597,-0.0069993585,-0.0018236917,0.024657516,0.04290046,0.022475114,-0.013202924,-0.06597845,0.034074396,0.014577475,0.029733708,-0.017555669,0.012503591,0.023090046,-0.0029495575,-0.00032894273,-0.014203694,0.0027144367,-0.09877475,-0.050737813,-0.0021628079,0.024319908,-0.009489225,0.025634171,0.017640071,-0.030384813,-0.057489995,-0.007300795,-0.0068004103,0.010592483,0.026333503,-0.020135967,0.009501282,-0.009519368,0.026381733,-0.0011153155,0.01983453,0.023560287,-0.011695741,0.04073012,-0.027394561,-0.033206258,-0.0027702027,-0.013504361,-0.027418675,0.0545962,0.042538736,-0.011514879,-0.03282042,0.015783222,0.012696511,0.039982554,0.032651614,-0.021004105,-0.0046903538,-0.006788353,-0.0040633655,0.0058056694,0.0090310415,0.023512056,0.06781118,0.030577732,0.0108939195,-0.035690095,-0.027611595,0.010357362,0.02254746,-0.045456644,0.020473575,-0.026237044,-0.01293766,-0.0032555156,-0.0032796306,-0.009977552,-0.02325885,-0.041550025,-4.3519914e-05,-0.012274499,0.012274499,-0.023717035,-0.07302001,-0.007686634,-0.017471267,-0.0053474857,-0.06684659,-0.024488712,0.008603001,-0.043045152,-0.035473064,-0.0025079527,0.026285274,-0.027563365,-0.02963725,0.04695177,0.024669575,0.00023022223,-0.011334017,-0.006492945,0.03868035,0.033037454,-0.08232837,-0.039886095,0.0036202539,-0.021040278,-0.054403283,-0.009368651,0.021088507,0.041646484,-0.0017227103,0.009459081,0.02283684,0.033061568,0.013299384,-0.008621087,-0.05531965,0.0067521804,0.019967163,-0.0011130547,-0.044902,0.016289635,-0.068389945,0.048832733,-0.037402257,-0.012093637,-0.012624166,0.015771164,0.030891225,0.016651358,-0.022137506,-0.014830682,0.017157773,0.0002143968,-0.021076448,-0.013323499,0.0072887377,-0.044829655,-0.030047202,0.053438686,0.016325807,-0.014348383,0.04294869,-0.0019668739,0.0033580041,-0.0130944075,0.03163879,0.0008018214,-0.008789892,0.00941688,-0.014975372,0.06964392,0.017796818,-0.025610056,-0.010441765,0.018532325,0.004624038,0.022161622,0.026550539,0.02954079,0.05840636,0.03462904,0.021703437,-0.02753925,-0.009676116,0.041742943,-0.015397383,-0.027466906,0.015783222,0.0062035657,-0.024536941,-0.01888199,0.017061314,-0.036220625,0.020232426,-0.016856337,-0.06342227,-0.019689841,-0.017664187,0.027659824,0.077408925,0.0079096975,0.0039970498,-0.08184607,0.010489995,-0.011743971,-0.057972293,0.026574653,0.007777065,-0.041140072,0.00518471,-0.057393532,-0.014444843,-0.022426885,0.026936376,-0.039741404,-0.011364161,-0.030216008,-0.01641021,0.020111851,0.02211339,-0.011243586,-0.001140184,-0.011050667,-0.045938943,0.02553771,-0.03253104,0.037932787,0.006456773,-0.048543356,0.0002844808,0.003020395,-0.0186529,0.0119730625,0.01298589,0.024934838,0.031687018,-0.05483735,0.08391996,0.013154695,0.045167264,-0.011725885,0.05093073,0.0031560415,-0.0337609,0.010230759,0.011599282,0.013769625,0.018628784,-0.023861723,-0.009627886,-0.025489481,0.0074997433,-0.018194715,-0.013395844,-0.008108646,-0.037546948,-0.052570548,-0.0007603739,-0.0036443688,0.006076962,0.017905336,0.006746152,0.03742637,-0.042659312,0.050110824,-0.0009125994,0.085173935,0.03315803,-0.017869163,-0.016301693,0.010453822,0.00010879978,0.028142124,0.038366854,-0.012443304,0.05777937,-0.0128412,0.004633081,0.035352487,-0.030191893,-0.010628656,0.011141098,-0.024561057,-0.037691634,0.02078707,0.005235954,0.025103642,0.022921242,-0.0060618906,-0.013046177,0.064724475,-0.05932273,-0.0009495254,-0.015325038,0.0064808875,0.021076448,0.019328117,-0.004994805,0.030601846,0.0019548165,0.01802591,0.0047807847,-0.0261647,-0.040706,0.001743811,-0.0029239352,-0.0028696768,-0.03233812,-0.01826706,-0.013974602,-0.007144048,0.017977681,-0.031976398,-0.024187274,-0.014191637,-0.020895587,0.015771164,0.020304771,-0.020955874,-0.029902514,-0.012744741,-0.009543484,-0.0014823147,-0.0171216,0.014468959,0.0006661749,0.03834274,0.0054951897,0.015071832,0.01545767,0.028431503,0.06843817,0.014770395,0.027129296,0.008000128,0.027973318,-0.0011816316,-0.03144587,0.008880323,0.052763466,0.00808453,0.0070656748,-0.02288507,0.005998589,0.0035479092,0.002939007,0.04832632,-0.0019050795,0.010477937,-0.044829655,-0.014685992,0.025634171,0.025393022,0.0048772446,-0.0034122625,0.011912775,0.026188815,-0.019484865,-0.020533863,-0.016301693,0.005941316,-0.017290404,-0.012455362,0.013058235,0.0033278603,-0.0067943814,-0.029058492,-0.012515649,-0.008494484,-0.0024130002,0.028937917,-0.007204335,-0.021655207,-0.017820934,-0.028793227,-0.012172011,-0.02445254,0.05589841,0.02920318,-0.025513597,0.04372037,0.012744741,-0.027081067,0.015638532,0.035280142,-0.024102872,-0.020750897,0.028865572,0.0064628012,-0.03110826,0.0042080553,-0.0010580425,-0.038993843,-0.0033067598,-0.033567984,-0.014553361,-0.0067762956,-0.041260645,-0.0031711133,0.063084655,-0.020244485,-0.0014333312,-0.00077318493,0.014854797,-0.0045486786,-0.03253104,-0.01569882,-0.01641021,-0.04034428,-0.05763468,0.037619293,-0.008361852,0.0053474857,0.025368907,0.014927141,-0.0098569775,-0.00016786253,-0.011183299,0.012708568,-0.012208183,-0.05435505,0.02364469,0.018713186,-0.047217034,-0.03728168,0.06361519,-0.0018161557,-0.0063723703,0.035593636,0.05237763,-0.038246278,-0.014734223,-0.020967932,0.009953437,0.0067943814,0.008651231,0.016639302,0.00813276,0.004895331,-0.008355823,0.029613134,-0.05840636,0.0043678167,-0.01175,-0.011683684,-0.016494613,0.0305295,0.04147768,0.0022095304,0.01288943,-0.018447923,0.026622882,0.02635762,0.013432017,0.009676116,-0.017483324,-0.0026963507,0.037161108,-0.056670085,-0.03224166,0.012527706,-0.020425346,0.01592791,-0.06327758,0.008783863,0.030939456,-0.03658235,-0.0041296817,0.020967932,-0.025513597,0.020087738,0.021136736,-0.03238635,-0.012117753,-0.0067762956,0.047096457,0.0023331195,-0.026960492,0.038270395,0.017977681,-0.062602356,-0.021209082,-0.00566098,-0.013058235,0.012039379,-0.04270754,0.00894061,-0.022173679,0.004379874,0.044178553,0.020051565,-0.012949717,0.029058492,0.012853257,0.010863776,-0.02049769,0.017435094,0.0016925667,0.04904977,-0.003487622,0.008693432,-0.024681631,0.054644432,-0.027418675,0.012370959,0.030794766,-0.023439713,0.0026707286,0.05204002,-0.0018613712,-0.017483324,-0.021293484,-0.029902514,-0.010152386,-0.010616598,-0.0060920343,0.01593997,-0.01897845,-0.0021914444,-0.02088353,-0.008554772,0.0151682915,-0.00014968212,-0.03819805,0.015952026,0.026791688,0.0056187785,0.012467419,0.027008722,0.00780118,0.005275141,-0.006173422,0.0074635707,0.03291688,0.0045155208,0.00085155846,-0.014263981,0.006649692,-0.0098569775,-0.04880862,-0.0034303488,0.032193433,0.009344536,0.0022909183,0.034894302,-0.017591842,-0.0030505387,0.0029103707,0.019496921,0.028889686,-0.0149150845,9.849678e-06,-0.0049073882,0.0027430733,0.013697281,0.017531555,-0.02069061,0.0029601078,0.0090310415,0.0049104025,-0.0094651105,0.014155464,-0.007481657,-0.019111082,-0.023343252,0.0026119484,-0.00092390325,-0.02225808,-0.053004615,-0.026743457,-0.020196253,-0.032675732,-0.003951834,0.0015215013,0.0118464595,-0.00049473287,0.012684453,0.021281427,-0.077553615,-0.020823242,0.018809646,-0.014336326,0.034749616,0.00072118716,-0.0093807075,-0.0022728322,0.0038553744,0.02259569,-0.0035690097,-0.0051967674,-0.026646998,0.028118009,0.043310415,-0.049387377,-0.014155464,0.0055494485,0.04437147,0.00789764,-0.0...', '2025-03-25 05:14:38.950705+00'), ('52', 'https://ai.pydantic.dev/models/', '8', 'Custom HTTP Client for Mistral Model', 'This section describes how to customize the provider for the Mistral model using a custom `httpx.AsyncHTTPClient`. It includes an example of setting up the model with a specified API key and a client with a timeout configuration.', 'You can also customize the provider with a custom `httpx.AsyncHTTPClient`: groq_model_custom_provider.py
                        
                                                from httpx import AsyncClient
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.mistral import MistralModel
                        from pydantic_ai.providers.mistral import MistralProvider
                        
                        custom_http_client = AsyncClient(timeout=30)
                        model = MistralModel(
                            'mistral-large-latest',
                            provider=MistralProvider(api_key='your-api-key', http_client=custom_http_client),
                        )
                        agent = Agent(model)
                        ...
                        

Cohere Install To use [`CohereModel`](../api/models/cohere/#pydantic_ai.models.cohere.CohereModel), you need to either install [`pydantic-ai`](../install/), or install [`pydantic-ai-slim`](../install/#slim-install) with the `cohere` optional group: pipuv
                        
                                                pip install "pydantic-ai-slim[cohere]"
                        
                        
                                                uv add "pydantic-ai-slim[cohere]"
                        

Configuration To use [Cohere](https://cohere.com/) through their API, go to [dashboard.cohere.com/api-keys](https://dashboard.cohere.com/api-keys) and follow your nose until you find the place to generate an API key. [`CohereModelName`](../api/models/cohere/#pydantic_ai.models.cohere.CohereModelName) contains a list of the most popular Cohere models. Environment variable Once you have the API key, you can set it as an environment variable:
                        
                                                export CO_API_KEY='your-api-key'
                        

You can then use [`CohereModel`](../api/models/cohere/#pydantic_ai.models.cohere.CohereModel) by name: cohere_model_by_name.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('cohere:command')
                        ...
                        

Or initialise the model directly with just the model name: cohere_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.cohere import CohereModel
                        
                        model = CohereModel('command', api_key='your-api-key')
                        agent = Agent(model)
                        ...
                        

`api_key` argument If you don't want to or can't set the environment variable, you can pass it at runtime via the [`api_key` argument](../api/models/cohere/#pydantic_ai.models.cohere.CohereModel.__init__): cohere_model_api_key.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.cohere import CohereModel
                        
                        model = CohereModel('command', api_key='your-api-key')
                        agent = Agent(model)
                        ...
                        

Bedrock Install To use [`BedrockConverseModel`](../api/models/bedrock/#pydantic_ai.models.bedrock.BedrockConverseModel), you need to either install [`pydantic-ai`](../install/), or install [`pydantic-ai-slim`](../install/#slim-install) with the `bedrock` optional group: pipuv
                        
                                                pip install "pydantic-ai-slim[bedrock]"
                        
                        
                                                uv add "pydantic-ai-slim[bedrock]"
                        

Configuration To use [AWS Bedrock](https://aws.amazon.com/bedrock/), you'll need an AWS account with Bedrock enabled and appropriate credentials. You can use either AWS credentials directly or a pre-configured boto3 client. [`BedrockModelName`](../api/models/bedrock/#pydantic_ai.models.bedrock.BedrockModelName) contains a list of available Bedrock models, including models from Anthropic, Amazon, Cohere, Meta, and Mistral. Environment variables You can set your AWS credentials as environment variables:
                        
                                                export AWS_ACCESS_KEY_ID='your-access-key'
                        export AWS_SECRET_ACCESS_KEY='your-secret-key'
                        export AWS_REGION='us-east-1'  # or your preferred region', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4732, "crawled_at": "2025-03-25T05:14:36.380806+00:00"}', '[-0.017153388,-0.039691247,0.062100902,0.020730214,0.03094789,0.032870915,0.016230335,0.029845355,0.0036377232,-0.028076172,-0.014127827,-0.051408883,0.021717368,-0.048434604,0.0004559173,0.025294196,-0.039537404,0.04912689,-0.015897011,0.04846024,0.009358724,0.028076172,0.004397318,0.026563393,-0.009095911,0.032819636,-0.020217407,0.032845274,0.010076653,-0.026306989,0.022217354,-0.019948184,-0.034409337,-0.022332735,-0.017896958,-0.0047947434,-0.0021329557,0.004240271,0.003996688,0.049588416,-0.02935819,-0.039281,0.020807136,0.040998902,-0.04389626,0.022768622,-0.03540931,0.007461339,0.011474052,0.013153494,-0.029178707,0.014858577,-0.021973772,-0.020871237,0.007371598,-0.022845542,0.009743329,0.01207019,-0.026896717,-0.021499425,0.00048957026,0.016332896,-0.015153441,0.07035709,-0.0017130952,-0.0037338745,-0.044075746,-0.0026473652,-0.04838332,0.03264015,-0.016717501,0.029691514,-0.050614033,-0.012121471,-0.0317171,-0.041101463,0.006576747,0.102253675,-0.0017179027,0.020640474,-0.033024758,-0.02334553,0.027999252,-0.04458855,-0.020076387,-0.027640287,-0.03238375,-0.018230282,-0.03764002,0.0015568493,0.01507652,-0.03315296,-0.008871557,0.03176838,0.046896182,0.014127827,0.028383857,-0.029614592,-0.018730268,0.035178546,0.027281322,-0.042742446,-0.04297321,0.013268876,0.055536978,-0.010384338,0.05830613,-0.015153441,-0.013794503,0.036768246,-0.11374055,-0.04666542,-0.017435431,-0.003551187,-0.04674234,-0.013127854,-0.012371464,0.018486684,-0.029768435,-0.036281083,-0.054203678,-0.028640259,0.057024118,0.014550893,0.028281296,0.017255949,-0.00206565,-0.032101706,-0.06589568,-0.04838332,-0.00753826,0.008371571,0.041357867,-0.010115114,-0.0390246,-0.018371304,-0.009070271,-0.00675623,-0.0049485858,-0.0006782671,-0.00067586335,-0.009281803,0.0130317025,-0.0117240455,-0.030024838,0.030870968,0.0033140138,-0.029973557,-0.041537352,0.036665685,-0.0022210944,-0.012153521,-0.008365161,0.018704629,-0.028332576,0.023935257,0.008993349,0.032717075,0.018704629,-0.044050105,-0.007006223,0.0650239,0.0006754627,-0.015435484,-0.017717475,-0.013973985,-0.04358858,0.012313773,-0.065485425,-0.028358215,-0.051485803,0.0041986057,-0.023101946,-0.016909804,0.057690766,-0.024486525,-0.02043535,-0.006112016,-0.027717207,-0.0024422423,0.025242915,0.0062690633,-0.05522929,0.0057017705,-0.029127426,0.0048492295,-0.03238375,0.027589006,0.006576747,0.052306294,0.018320022,-0.008063887,0.01286504,0.021037899,0.050152507,-0.020845596,0.014563713,-0.044178307,0.035742633,0.008563873,-0.0039806627,-0.016422637,0.019948184,0.0153585635,0.018461045,-0.003926177,-0.02715312,-0.004589621,-0.017089287,0.0061568865,-0.0009975695,-0.046434656,-0.018730268,0.013486818,-0.022781443,-0.02633263,-0.048101276,-0.015371384,-0.01807644,0.04756283,-0.023281429,0.019627681,0.011595843,0.0074869795,-0.014012446,0.030768408,0.0034870862,-0.062254746,0.0361016,0.0028156298,0.032973476,0.053895995,-0.03092225,0.03322988,-0.0008525413,-0.012538127,0.006253038,-0.0017419406,0.008320291,-0.041280948,-0.017114926,-0.041768115,-0.015473945,0.056152344,0.04397318,0.010108704,-0.00903822,-0.0483064,-0.0027419138,0.013018883,0.044152666,-0.011499693,0.027717207,0.014858577,-0.013704762,-0.02943511,0.0044710343,-0.02347373,-0.084305435,-0.07399802,-0.022922464,0.0573318,-0.009877941,0.003528752,0.025999304,-0.038793836,-0.05507545,-0.020243049,-0.035563152,0.0020896876,0.034896504,0.01588419,0.021012258,-0.025512138,0.019832803,0.014166288,-0.008192088,0.008320291,-0.010307416,0.025460858,0.005717796,-0.011627894,0.016909804,-0.005426137,-0.028486418,0.029076146,-0.020960977,0.0041954005,-0.035819557,0.004147325,0.056408748,0.031281214,0.017730296,-0.020973798,0.02106354,-0.035383668,0.016076494,-0.024512164,0.023550652,0.03997329,0.04535776,0.01890975,-0.012358644,-0.005381266,-0.006112016,-0.004009508,0.018268742,-0.029999198,0.04807564,-0.038101546,-0.031332497,0.022012232,-0.01434577,-0.017563634,-0.052357573,-0.031870943,0.021589166,-0.048896126,0.00064301165,-0.017922597,-0.059177905,-0.038127184,-0.039537404,-0.03846051,-0.02124302,0.001263588,0.010877914,-0.052101173,-0.043357816,-0.0014110199,0.01280735,-0.05507545,0.015538046,0.021448145,0.04451163,-0.014948318,0.029101785,-0.026037766,0.019076413,0.03922972,-0.049101252,-0.03181966,-0.002490318,-0.017243128,-0.039614324,0.022717342,0.012730429,0.022063512,-0.012134291,0.013897064,0.0141534675,0.011563794,0.007019043,0.0112048285,-0.014653455,-0.008704895,0.02030715,-0.027665926,-0.019717421,0.0153585635,-0.06733153,0.032024786,-0.02797361,0.010249726,-0.012300953,0.024807028,0.007397238,0.0035736223,0.014268849,-0.014935498,0.030717127,-0.008589514,-0.038691275,-0.03535803,-0.010025373,-0.01582009,0.012640688,0.0406143,0.00049317593,-0.024768569,0.08435672,-0.0050639673,0.0007243396,-0.004429369,0.028178733,0.02039689,-0.03689645,0.014602174,-0.016935445,0.047024384,0.05512673,-0.020922517,0.010506129,0.025281375,0.021922491,0.013486818,0.05194733,0.010916375,0.051024277,0.0376913,-0.018358484,-0.036768246,0.006092786,0.034178574,0.01812772,-0.007102374,0.024704468,0.032306828,-0.01590983,-0.01434577,0.028409496,-0.021409683,0.016422637,-0.013935525,-0.042332202,-0.01894821,-0.0014903448,0.017563634,0.053178065,0.036075957,-0.0082626,-0.077126145,-0.0037210544,-0.03540931,-0.05202425,0.042665526,-0.005060762,-0.047332067,-0.008012606,-0.0362298,0.001457493,0.0040768143,0.05579338,-0.0045543653,-0.0020672523,-0.031922225,-0.01059587,0.022332735,0.020819956,-0.015499585,0.019025132,-0.016063673,-0.044639833,0.0031040837,-0.039255362,0.0046280813,0.008557463,-0.04376806,-0.041742474,0.0150893405,-0.015230362,-0.02339681,0.038922034,0.02651211,0.04212708,-0.021486605,0.038639992,0.02035843,0.05207553,-0.001700275,0.026255708,0.029742794,-0.029845355,0.004922945,0.0066280277,0.01130098,0.013948345,0.013768863,-0.0105189495,-0.04610133,0.010922785,-0.003926177,-0.013384257,-0.038357947,-0.02943511,-0.06810074,0.0029294088,-0.00014232392,-0.023768594,0.008166448,0.0023893593,0.028973585,-0.044614192,0.061229132,-0.0016858523,0.106663816,0.010025373,-0.023076305,0.0068459706,0.026665954,-0.00263775,0.042845007,0.017973877,-0.014845757,0.031281214,-0.018268742,-0.0041120695,0.0015167864,-0.007756203,-0.00752544,0.009243342,-0.020422531,0.0027467215,0.06522903,-0.0025351886,0.035255466,0.009365134,0.011172778,-0.03533239,0.0663572,-0.02646083,0.004022328,-0.001961486,0.03181966,0.012608637,0.009140781,-0.006182527,0.017204668,-0.01204455,0.006179322,-0.014627814,-0.0051761437,-0.02031997,0.02787105,0.0023412835,0.031896584,-0.058665097,-0.010948425,-0.00980743,-0.02643519,-0.01052536,-0.0138842445,-0.028768461,-0.032588873,-0.0067498195,0.005144093,0.0138842445,-0.011948398,-0.018486684,-0.019807162,-0.017589273,0.007980556,-0.037050292,0.010871504,-0.002727491,0.025691621,-0.005801127,0.004753078,0.014704735,0.014371411,0.034793943,0.0041986057,0.01351246,-0.004615261,0.026101867,0.041280948,-0.03176838,-0.00030027243,0.026947998,0.014973959,-0.0050126864,0.005217809,0.0062209875,-0.006118426,-0.008102347,0.089946315,0.0024374349,0.0165252,-0.055331852,-0.02265324,0.0020624448,0.0044934694,-0.03620416,0.016999545,0.018563606,0.020704575,-0.0042434763,0.0028556928,-0.009627948,-0.014499612,-0.009499746,-0.021781469,0.0071344245,0.0004967816,-0.037050292,-0.024691647,-0.011384311,-0.02038407,0.0055703637,0.040178414,0.003240298,-0.026947998,-0.00088619423,0.0046665417,-0.015166261,0.0025031383,0.059229184,0.032486312,-0.028332576,0.037563097,0.02416602,-0.029691514,0.020281509,0.03843487,-0.02573008,-0.0065222615,0.024537805,0.00831388,-0.0333068,0.015345744,0.00830106,-0.03153762,0.0028220399,-0.031435058,-0.025255734,-0.003099276,-0.045588523,-0.028537698,0.030640205,-0.037075933,0.011115087,0.007826714,0.035281107,0.014525252,-0.008269009,-0.027640287,-0.018961031,-0.020678934,-0.029178707,0.04589621,-0.021358402,0.006493416,0.0068844315,0.0049934564,-0.02419166,0.020063566,0.005272295,0.008044656,-0.019114874,-0.0557421,0.03099917,0.030794049,-0.026717234,-0.025422396,0.04907561,-0.012384284,0.0023380786,0.03633236,0.02403782,-0.021589166,0.010127935,-0.02419166,0.02040971,0.0058395877,0.025396757,0.023973718,-0.011557383,-0.020704575,0.002781977,0.020922517,-0.050716594,0.0052530644,-0.004897305,-0.017884137,-0.0074485186,0.036358003,0.010467669,0.047973078,0.00675623,-0.012563767,0.0166534,0.02869154,0.01955076,0.04371678,0.0004270719,-0.008153629,0.039486125,-0.04753719,-0.035101626,0.022319917,-0.02180711,0.02633263,-0.04007585,-0.010365107,0.024422424,-0.038563073,0.0034934962,0.025383936,0.0058427923,-0.00980743,0.027255682,-0.029922277,-0.015281643,0.007762613,0.031101732,-0.02417884,-0.01206378,0.015114981,0.0069036614,-0.09117705,-0.010724072,-0.016320076,0.016922625,-0.008410032,-0.033024758,-0.0053043454,0.002306028,0.006272268,0.026947998,-0.0076600513,-0.020794315,0.01592265,-0.017140567,0.0020864827,-0.01887129,0.017820036,0.013166315,0.05056275,-0.00060495175,-0.010422798,-0.023178868,0.023127588,-0.031588897,-0.0053652413,0.023448091,-0.004515905,0.006336369,0.016961085,-0.021717368,-0.009313853,-0.012249673,-0.031409416,-0.021781469,-0.019409737,-0.0077497927,0.015397024,-0.03099917,0.0066857184,-0.01734569,0.0037178493,-0.018255923,-0.011788147,-0.007672872,0.010102294,0.017038006,-0.019114874,0.01726877,0.01737133,0.0062690633,0.0024326271,-0.011140727,0.009339494,-0.008839508,-0.009499746,0.021999411,-0.0019630885,-0.00034674554,0.0037338745,-0.049716618,0.015679067,0.012749659,0.006326754,-0.016832883,0.01802516,-0.01961486,0.012480436,-0.0049998662,-0.011922758,0.017153388,-0.0062338077,0.0018765524,0.007781843,-0.013140675,0.025601879,0.04825512,-0.020743035,-0.014243209,0.015627787,-0.0013413103,-0.0525627,0.008871557,-0.00031409416,-0.003126519,0.0039518173,-0.008544643,-0.024717288,0.013191955,-0.033691406,-0.01647392,-0.022935284,-0.048485883,-0.0069805826,0.011012526,-0.0075062094,0.013986805,0.019627681,0.0141534675,-0.08302342,-0.021717368,0.02193531,0.015576507,0.02403782,0.025909564,-0.0011594241,0.04466547,-0.010134344,-0.0078074834,0.008640795,0.0028236425,-0.0043652677,0.025178814,0.01816618,-0.02940947,0.0014991587,-0.0011474052,0.038357947,-0.00085734884,-0.0022114792,-0.013230415,0.03392217,0.004429369,-0.05994711...', '2025-03-25 05:14:39.001212+00'), ('53', 'https://ai.pydantic.dev/models/', '9', 'Using BedrockConverseModel in Pydantic AI', 'This section explains how to use the `BedrockConverseModel` in Pydantic AI. It provides two methods: using the model by name with the `Agent` class, and directly initializing the model. Additionally, it mentions the option to provide a custom `BedrockProvider`.', 'You can then use [`BedrockConverseModel`](../api/models/bedrock/#pydantic_ai.models.bedrock.BedrockConverseModel) by name: bedrock_model_by_name.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('bedrock:anthropic.claude-3-sonnet-20240229-v1:0')
                        ...
                        

Or initialize the model directly with just the model name: bedrock_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.bedrock import BedrockConverseModel
                        
                        model = BedrockConverseModel('anthropic.claude-3-sonnet-20240229-v1:0')
                        agent = Agent(model)
                        ...
                        

`provider` argument You can provide a custom [`BedrockProvider`](../api/providers/#pydantic_ai.providers.bedrock.BedrockProvider) via the [`provider` argument](../api/models/bedrock/#pydantic_ai.models.bedrock.BedrockConverseModel.__init__). This is useful when you want to specify credentials directly or use a custom boto3 client: bedrock_model_provider.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.bedrock import BedrockConverseModel
                        from pydantic_ai.providers.bedrock import BedrockProvider
                        
                        # Using AWS credentials directly
                        model = BedrockConverseModel(
                            'anthropic.claude-3-sonnet-20240229-v1:0',
                            provider=BedrockProvider(
                                region_name='us-east-1',
                                aws_access_key_id='your-access-key',
                                aws_secret_access_key='your-secret-key',
                            ),
                        )
                        agent = Agent(model)
                        ...
                        

You can also pass a pre-configured boto3 client: bedrock_model_boto3.py
                        
                                                import boto3
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.bedrock import BedrockConverseModel
                        from pydantic_ai.providers.bedrock import BedrockProvider
                        
                        # Using a pre-configured boto3 client
                        bedrock_client = boto3.client('bedrock-runtime', region_name='us-east-1')
                        model = BedrockConverseModel(
                            'anthropic.claude-3-sonnet-20240229-v1:0',
                            provider=BedrockProvider(bedrock_client=bedrock_client),
                        )
                        agent = Agent(model)
                        ...
                        

OpenAI-compatible Models Many of the models are compatible with OpenAI API, and thus can be used with [`OpenAIModel`](../api/models/openai/#pydantic_ai.models.openai.OpenAIModel) in PydanticAI. Before getting started, check the OpenAI section for installation and configuration instructions. To use another OpenAI-compatible API, you can make use of the [`base_url`](../api/providers/#pydantic_ai.providers.openai.OpenAIProvider.__init__) and [`api_key`](../api/providers/#pydantic_ai.providers.openai.OpenAIProvider.__init__) arguments from `OpenAIProvider`: deepseek_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        model = OpenAIModel(
                            'model_name',
                            provider=OpenAIProvider(
                                base_url='https://<openai-compatible-api-endpoint>.com', api_key='your-api-key'
                            ),
                        )
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4320, "crawled_at": "2025-03-25T05:14:38.752157+00:00"}', '[-0.030848853,-0.0289136,0.06741131,-0.023637732,-0.018177554,0.020896124,-0.004587586,0.009538032,0.013926909,-0.025434753,-0.020919163,-0.06404766,0.018557694,-0.047068115,-0.019168219,-0.0067676255,-0.024858784,0.019721149,-0.011093146,0.017209928,0.0516989,0.042068712,0.012521547,0.020562062,0.011778548,0.010897317,-0.013247267,-0.03612472,-0.01210685,-0.030595427,0.019617474,-0.017670702,-0.069530874,-0.034650244,-0.0146756675,-0.010828201,0.008823832,-0.005272988,0.023937235,0.029074872,0.021114992,-0.023269113,0.024605358,0.0314709,-0.044349547,0.02709354,-0.034604166,-0.0070037725,0.013178151,0.020562062,-0.0058259177,0.03672373,-0.0094401175,-0.059301678,0.0031217472,-0.030226808,0.028107245,-0.0009669065,-0.022877455,-0.004933167,-0.013028399,0.024006352,-0.014249451,0.05441747,-0.037875663,-0.022001982,-0.04568579,0.0065602767,-0.066627994,0.018926313,-0.006704269,0.016864346,-0.028084205,0.010459581,-0.032761067,-0.041723132,0.01896087,0.13085996,0.0052413098,-0.015159481,-0.011029789,-0.00070268114,0.0025198606,-0.020654216,-0.03557179,0.004388877,-0.01535531,-0.01408818,-0.025204366,-0.027669508,-0.0012145728,-0.018016282,-0.0027214494,0.024121545,0.04354319,0.040018264,0.0043687182,-0.013996026,0.02007825,0.0198709,0.020539023,-0.017797414,-0.041446667,0.03181648,0.029420452,-0.007573981,0.042759873,-0.008783514,-0.008766235,0.023038724,-0.099988066,-0.01860377,0.031217473,-0.014479838,-0.07469155,-0.022635547,0.0011893741,0.021829192,-0.021253224,-0.048519555,-0.046814688,-0.017129293,0.032991454,0.016518766,0.025964644,0.013523731,0.0065314784,-0.024374971,-0.04121628,-0.068425015,-0.029535646,0.027669508,0.026724922,0.0031908634,-0.03363654,-0.04769016,-0.033682615,-0.017981725,-0.018718963,0.0017336641,-0.0077928486,-0.025895527,-0.010626612,0.02601072,-0.04462601,0.021806153,-0.025457792,-0.036055606,-0.025342597,0.06404766,-0.010229194,-0.0021627604,-0.0057884795,-0.016737634,-0.02508917,0.022865934,0.008230585,0.02529652,0.044925515,-0.041285396,0.02746216,0.05962422,-0.03181648,-0.01282105,-0.009111816,0.03561787,-0.032000788,0.012187486,-0.052804757,-0.029190065,-0.012924725,0.02095372,0.0028222438,-0.044510815,0.02276226,-0.03704627,-0.030802775,-0.010154318,-0.012763454,-0.025826411,0.010960673,0.0077928486,-0.052896913,0.031378742,-0.0006360848,-0.0008157149,-0.014364645,0.0027027305,0.012279641,0.018684406,0.010741806,0.008553127,0.017774377,0.020158885,0.0397418,-0.013085996,0.03736881,-0.03780655,0.051376358,-0.018857196,0.015055806,-0.036769804,0.0095668305,0.0026796916,-0.001771102,-0.03492671,0.009923931,0.0039309827,0.011006751,0.023591654,0.0153783485,-0.057366427,0.013880832,-0.024467126,-0.022785299,-0.046169605,-0.051238123,0.011513603,-0.008040515,0.031931672,-0.0036199596,0.010643891,-0.0011418568,0.00488133,-0.002728649,-0.0077986084,0.00795988,-0.0719269,0.036216877,0.006283812,0.022693144,0.020723334,0.0003288418,0.013708041,-0.0026897711,-0.015332271,0.022543393,-0.0069346563,0.024490165,-0.03870506,0.0016026313,-0.03582522,-0.0037178742,0.025066134,0.057550736,0.025549946,-0.013765638,-0.05262045,0.00040749746,0.012083812,0.03736881,-0.013431577,-0.0019424525,0.0038330678,0.019029986,-0.0008841111,-0.0062434943,-0.031516977,-0.083999194,-0.03342919,-0.027139619,0.06381727,0.013350941,0.00039273826,0.0010266632,-0.028107245,-0.050500885,-0.02780774,-0.020112807,-0.0169565,0.061190855,0.0340282,0.014191855,-0.041815285,-0.020170404,0.021783115,0.0180854,0.02999642,-0.013685003,0.0069692144,0.020389272,-0.01988242,0.025227403,0.0137426,-0.007931081,-0.0028999995,-0.029766032,0.0009136294,-0.04340496,0.028683214,0.04084766,0.019087583,0.0071765627,-0.043427996,0.021138031,-0.020377751,0.041999597,-0.0067330673,0.034350738,0.018442499,0.05298907,0.001354245,0.013754119,0.003360774,-0.016034953,0.004593346,0.016472688,-0.021829192,0.063863344,-0.040432964,-0.048611708,0.082063936,-0.008288181,-0.032622833,-0.029489568,-0.00560129,0.037000194,-0.03073366,0.003916583,-0.001212413,-0.08616483,-0.0135698095,-0.015470504,-0.037783507,-0.03340615,0.037460968,0.032069907,-0.03324488,-0.051975362,-0.0013866433,0.011818866,-0.036562458,0.006542998,0.0017538229,0.01770526,0.00596703,0.023361268,-0.040824622,0.024513204,0.025964644,-0.049256794,-0.014180335,-0.022289967,0.02893664,-0.049256794,0.04119324,-0.0045818263,0.051192045,-0.019847862,-0.00087979133,0.01770526,-0.017843492,0.011732471,0.029927304,-0.007873484,0.0018589371,0.005909433,-0.018177554,-0.021909827,-0.0062262155,-0.05603018,0.038359478,-0.01120258,0.0017595827,-0.03312969,0.014595033,0.015746968,-0.02294657,-0.01174399,-0.004849652,0.013051438,0.0071420046,-0.04121628,-0.008553127,-0.014053622,-0.0014831179,-0.008622243,0.0014543196,-0.014330087,0.00017585026,0.029881226,-0.0021483612,0.0043831174,-0.02040079,0.014226412,0.010401985,-0.015827604,0.011018271,-0.034143392,0.049994033,0.050408732,-0.027969012,-0.013316383,0.010874278,0.011456006,0.028245477,0.045409326,-0.013385499,0.029789072,0.028521942,-0.03202383,-0.006162859,0.0039856993,0.0059151924,0.0038157888,0.0042304858,0.051975362,0.02114955,-0.036562458,0.013062957,0.046215683,-0.041654013,0.020504465,-0.0054141004,-0.022554912,-0.014042103,0.00866832,0.018050842,0.020550543,0.03485759,0.010977953,-0.11685241,0.0015205558,-0.024858784,-0.06653584,0.02981211,0.0048122136,-0.037276655,-0.009238529,-0.015274675,0.029374374,0.039304066,0.0076891743,-0.02240516,-0.0037322734,-0.020734852,-0.008265142,0.008276662,0.013074476,0.0046394235,0.005365143,-0.019076064,-0.053956695,-0.029789072,-0.039488375,-0.027416082,-0.024374971,-0.01791261,-0.025895527,-0.0071996017,-0.030941008,-0.00560705,0.0025141009,0.018223632,0.0109088365,-0.049395025,0.02366077,0.011588478,0.030434156,0.0074530276,0.055707637,0.0022462758,-0.03847467,-0.016403573,0.006001588,0.006053425,0.022554912,0.01643813,-0.028775368,-0.04550148,0.02185223,-0.004005858,-0.017901089,-0.025596023,-0.008512809,-0.06699661,0.00026800515,0.015470504,-0.032254215,0.0029403174,0.017474873,-0.0024723432,-0.022451237,0.036769804,0.006830982,0.10127824,-0.010275272,-0.029742993,0.020988278,0.039534453,-0.009140614,0.017474873,0.045317173,-0.010828201,0.034258585,-0.034005158,-0.022209331,0.019133661,-0.03312969,-0.009054219,-0.0011944139,-0.018304268,-0.013235748,0.082063936,-0.014733264,0.005566732,-0.010580534,0.03216206,-0.03073366,0.049302872,-0.030987086,-0.005042601,0.012037734,0.023153918,0.017486392,0.008933266,0.025066134,0.014848459,-0.012026214,0.022912012,0.003991459,-0.0060073477,-0.007879244,-0.0025515389,-0.007026811,0.031701285,-0.0242137,-0.00037113947,-0.0056444877,-0.0029950342,0.023752926,0.00066056347,0.01643813,-0.018166035,-0.035548754,0.0425986,0.027254812,-0.0045242296,-0.01806236,-0.017428795,-0.041792247,0.028568018,-0.02746216,-0.0036401185,0.0001915094,0.027715586,0.0100794425,-0.015931278,0.0022448357,0.024144584,0.04805878,0.019986093,0.0017451834,-0.037507046,0.01733664,0.027922934,-0.024236739,-0.010234954,0.029927304,-0.007827407,-0.0357561,0.0032974174,0.009175172,0.008172988,0.017647663,0.04713723,0.012210525,-0.024351932,-0.052528292,-0.031010123,-0.019836342,0.005008043,-0.013201189,-0.017785896,0.0106093325,0.026494535,0.020665737,0.020297118,-0.019099103,0.001968371,-0.016380534,-0.00253138,-0.0025976163,-0.000885551,-0.021990463,-0.040041305,-0.013615887,-0.0034673281,0.02332671,0.053956695,0.002076365,-0.034903668,-0.010292551,-0.005512015,-0.038774174,0.0004589746,0.023937235,0.0448564,-0.025434753,0.033728693,0.044119157,-0.017820453,0.003542204,0.052113596,-0.005365143,-0.013719561,0.014353125,0.018004764,-0.04029473,0.0077467714,0.014514397,-0.035986487,0.00938828,-0.0057366425,-0.022704663,5.9936683e-05,-0.07584348,-0.01771678,0.05672134,-0.039073676,-0.011150743,0.011283215,0.031885594,0.01771678,-0.012314199,-0.01750943,-0.018672887,-0.014571994,-0.013039919,0.039119754,-0.019790266,-0.0049936436,0.04031777,0.012890167,-0.016737634,0.016530285,0.011473285,-0.0383134,-5.188213e-05,-0.04589314,0.0014859978,0.025688179,-0.014790862,-0.022013502,0.004849652,-0.0030497513,-0.015839124,0.0169565,0.02222085,-0.0361708,-0.010459581,-0.003288778,0.0058028786,0.011807347,0.014076661,0.029766032,-0.0054688174,-0.0010561815,0.0034846072,0.029650839,-0.044695128,0.008161468,-0.012867128,-0.024904862,0.0027243292,0.02870625,0.038290363,0.04170009,0.01174399,-0.015793046,-0.0065602767,0.018592251,-0.015447465,0.023384307,0.0047920546,-0.017440315,0.032991454,-0.02256643,-0.030848853,0.042322136,0.021610323,0.0040692147,-0.027254812,-0.0029215983,0.030226808,-0.02531956,0.003703475,0.008576165,-0.004627904,0.0053737825,0.0008459532,-0.028245477,-0.02870625,0.018465538,0.042022634,-0.0048582912,-0.0031735844,0.0031131078,-0.005183713,-0.06349473,0.0014521596,5.5391934e-05,0.018442499,-0.023199996,-0.036401186,-0.013097515,-0.014076661,0.0212993,0.0077986084,-0.019122142,-0.014917575,0.036954116,-0.0155050615,0.0005118917,0.00038373878,0.010332868,0.011651835,0.02476663,-0.014295529,-0.02476663,-0.013523731,0.015078845,-0.023534058,0.006848261,0.016668517,-0.009474676,0.008766235,0.039465334,-0.033544384,-0.00975114,-0.0057769604,-0.040571194,-0.009347963,0.008558886,0.0050713993,-0.0077467714,-0.02386812,0.0146756675,-0.033037532,0.0052701086,-0.0021426014,-0.0155050615,-0.03052631,-0.008771994,0.011168022,-0.024328893,0.015240117,0.027761664,5.1477153e-05,-0.021967424,-0.027508238,0.0061916574,-0.002455064,-0.029051833,0.019145181,0.009319164,0.010655411,0.010505659,-0.03960357,0.0046394235,0.011628796,-0.012728896,-0.006790664,0.023165438,-0.013834754,0.024697512,0.0036602775,-0.011404169,0.013765638,0.0035047662,0.0028611217,0.010425023,-0.012210525,0.02621807,0.038889367,-0.019778745,0.006122541,0.017831974,0.009601389,-0.06049969,-0.006629393,0.0112141,0.021218665,0.011070107,0.024052428,-0.013489174,-0.002656653,-0.008028995,-0.013627406,-0.01028679,-0.0444417,0.026264146,0.013857793,0.0039079436,0.022831377,0.011047069,0.009889373,-0.083722726,-0.026448457,0.009918171,0.011409929,0.049302872,-0.010522937,0.009612908,0.031701285,-0.008760476,0.006087983,-0.004466633,0.0062204557,-0.0020461269,0.019755706,0.01990546,-0.044418663,-0.013431577,-0.01935253,0.020009132,0.0050713993,-0.0003884185,0.00397706,0.004...', '2025-03-25 05:14:39.086744+00'), ('54', 'https://ai.pydantic.dev/models/', '10', 'Using Custom Providers with Pydantic AI', 'This section explains how to utilize a custom provider class, specifically the `DeepSeekProvider`, when initializing an `OpenAIModel` with Pydantic AI. It demonstrates setting up the model and agent using a specified API key, as well as customizing a provider with a custom HTTP client.', 'You can also use the `provider` argument with a custom provider class like the [`DeepSeekProvider`](../api/providers/#pydantic_ai.providers.deepseek.DeepSeekProvider): deepseek_model_init_provider_class.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.deepseek import DeepSeekProvider
                        
                        model = OpenAIModel(
                            'deepseek-chat',
                            provider=DeepSeekProvider(api_key='your-deepseek-api-key'),
                        )
                        agent = Agent(model)
                        ...
                        

You can also customize any provider with a custom `http_client`: deepseek_model_init_provider_custom.py
                        
                                                from httpx import AsyncClient
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.deepseek import DeepSeekProvider
                        
                        custom_http_client = AsyncClient(timeout=30)
                        model = OpenAIModel(
                            'deepseek-chat',
                            provider=DeepSeekProvider(
                                api_key='your-deepseek-api-key', http_client=custom_http_client
                            ),
                        )
                        agent = Agent(model)
                        ...
                        

Ollama To use [Ollama](https://ollama.com/), you must first download the Ollama client, and then download a model using the [Ollama model library](https://ollama.com/library). You must also ensure the Ollama server is running when trying to make requests to it. For more information, please see the [Ollama documentation](https://github.com/ollama/ollama/tree/main/docs). Example local usage With `ollama` installed, you can run the server with the model you want to use: terminal-run-ollama
                        
                                                ollama run llama3.2
                        

(this will pull the `llama3.2` model if you don't already have it downloaded) Then run your code, here's a minimal example: ollama_example.py
                        
                                                from pydantic import BaseModel
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        
                        class CityLocation(BaseModel):
                            city: str
                            country: str
                        
                        
                        ollama_model = OpenAIModel(
                            model_name='llama3.2', provider=OpenAIProvider(base_url='http://localhost:11434/v1')
                        )
                        agent = Agent(ollama_model, result_type=CityLocation)
                        
                        result = agent.run_sync('Where were the olympics held in 2012?')
                        print(result.data)
                        #> city='London' country='United Kingdom'
                        print(result.usage())
                        """
                        Usage(requests=1, request_tokens=57, response_tokens=8, total_tokens=65, details=None)
                        """', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 3758, "crawled_at": "2025-03-25T05:14:36.022315+00:00"}', '[-0.035756793,-0.031394552,0.048549674,-0.02250056,1.5649422e-05,-0.0016612669,-0.01722293,0.0050431313,0.023167327,-0.011719277,-0.016963003,-0.05248247,0.014714078,-0.040299848,-0.022093719,-0.0018505609,-0.0004608744,0.018398248,0.0025469933,0.060619287,0.03693211,0.052844107,-0.031281542,0.018262634,0.007600013,-0.014047311,-0.026376849,0.007933397,-0.030015815,-0.012521657,0.008882692,-0.0139908055,-0.042560074,-0.008085962,-0.01094515,-0.008634067,0.0117079755,0.0014197051,-0.0063286354,0.0020186652,0.028614474,-0.065953426,0.017279435,0.032321244,-0.008893994,0.031937007,-0.020579366,0.00577488,0.010730428,0.007600013,0.01613802,0.031417154,-0.014985305,-0.032841098,0.008944849,-0.055511177,0.029812394,0.034626678,0.006113914,0.004520454,-0.038062222,0.014273333,-0.0070236553,0.029744588,-0.005348262,-0.049860608,-0.045159336,-0.009973251,-0.082362674,0.03742936,-0.023133423,-0.006910644,-0.026467258,-0.0134031465,-0.031281542,-0.047283947,-0.023641974,0.13217807,0.009622917,-0.020183828,-0.031010315,0.0075661098,0.01334664,-0.009487303,0.006989752,-0.0071649197,-0.075717606,-0.0037661032,-0.0013978091,-0.027145326,0.011103366,0.004105137,-0.008933547,0.03444586,0.099902034,0.06916294,-0.013922999,-0.005356738,0.03426504,0.04111353,0.014002106,-0.0418142,-0.039960813,0.020658474,0.027959008,-0.01772018,0.042288847,0.002863425,0.008278081,0.032004815,-0.071242355,-0.013154522,-0.007594363,-0.033722587,-0.033180133,0.021370446,0.027371349,-0.011267232,0.004170119,-0.08186542,-0.058675494,-0.019652674,0.045068927,0.008458899,0.030400053,0.00036410845,-0.006306033,-0.027868599,-0.044571675,-0.043509368,-0.03227604,0.027303543,0.056596085,-0.020692378,-0.03711293,-0.054607086,-0.039056722,-0.033519167,-0.024817292,0.00029206372,0.009933698,-0.05266329,-0.044232644,0.03067128,-0.040955313,0.010493103,-0.029337747,-0.06550138,-0.011594964,0.019980406,0.03464928,-0.032908905,-0.0074530984,0.030942507,-0.04493331,0.03654787,0.010267081,0.00088643277,0.04072929,-0.02099751,-0.023325542,0.058991924,-0.040367655,-0.027891202,-0.025088519,0.04323814,-0.029744588,0.0028153954,-0.05447147,-0.05465229,-0.00012493052,0.016307538,-0.0040514567,-0.009018306,0.042537473,-0.04710313,0.0037321998,-0.016386645,-0.019313639,-0.054290652,-0.017087316,0.011301135,-0.05239206,-0.0077017234,-0.013030209,-0.002141565,-0.006577261,0.05844947,-0.01612672,0.06116174,0.0010736078,0.0129398,0.034897905,0.013889095,0.030829497,0.003373389,0.03225344,-0.034219835,0.041158732,-0.006193022,0.013098015,0.016804788,-0.0005173801,-0.02071498,0.002607737,-0.07183001,0.0045713093,-0.013708277,0.0065490077,-0.0050516073,0.018952003,-0.051533174,0.027891202,-0.025970008,-0.03046786,-0.024365246,-0.046379857,0.02011602,-0.004500677,0.024681678,0.026467258,0.02540495,-0.012329538,-0.043599777,0.007673471,-0.018906798,-0.00084122823,-0.06387401,0.0064981524,-0.012318237,0.042853903,0.012815487,0.0114424,0.0129398,0.07852028,-0.053929016,0.035575975,-0.014601067,-0.017505458,-0.03476229,0.019675275,-0.047419563,0.03553077,0.019765684,0.040887505,0.0031643177,-0.008018156,-0.058585085,0.022071118,0.03702252,0.030716484,-0.0219129,0.0025003762,-0.016104117,-0.004003427,-0.0085154055,-0.026512463,-0.03008362,-0.098817125,-0.022206731,0.0061986726,0.05564679,0.013708277,0.036389656,0.018081816,-0.02658027,-0.04398402,-0.007854288,-0.0026727184,0.0028394102,-0.0002055394,0.015154822,0.010210576,-0.03654787,-0.017076015,0.0036672184,0.0029891501,0.00503183,0.0013949838,-0.015878094,-0.015471254,0.0032575522,0.012397345,0.033632178,0.012770282,0.016522259,0.015120919,-0.021845095,-0.043622382,0.015505157,0.029224735,0.01583289,0.020432452,-0.035869803,0.0007423433,0.013109317,-0.012024407,0.027348747,0.024071418,0.0134031465,0.031530168,0.038514268,0.013120618,-0.030445257,-0.020093419,0.0004449822,-0.003994951,-0.0010601877,0.051713992,-0.048233245,-0.006232576,0.03892111,0.0057381513,0.015019208,-0.005125065,-0.05243727,0.028704884,0.001173199,0.0059104934,-0.024048815,-0.079695605,-0.0038169583,-0.016985606,-0.013030209,-0.07847508,0.00024632944,0.048414063,0.005215474,-0.052120835,-0.01852256,0.005206998,-0.030241838,-0.005376515,0.051171537,0.002773016,0.018194828,-0.031597972,0.008001204,0.048278447,0.058901515,-0.057093333,0.0018025311,-0.017256834,0.03715813,-0.035869803,0.044639483,0.010187973,0.06034806,-0.026037814,-0.03693211,0.0318692,-0.012532959,0.023280337,0.017268134,0.002205134,0.0014592591,0.00028994476,-0.0517592,0.007277931,0.0039808247,-0.022839595,0.01175318,0.010046709,0.019550964,-0.006130866,0.02170948,0.022059815,-0.021562565,-0.0024311566,0.018929401,0.022037214,-0.014883595,-0.03467188,-0.030603474,-0.015245231,0.0019621595,-0.030264439,0.036796495,-0.02669328,0.01384389,0.012318237,0.006503803,0.009476001,0.002986325,0.04113613,0.032931507,0.02251186,-0.019245833,-0.040661484,0.030128825,0.058313858,-0.04500112,-0.020556765,0.027755588,-0.023754986,-0.00251309,0.04398402,0.023043014,0.02619603,0.020353343,-0.0028394102,-0.015923299,0.0010354664,0.006978451,-0.035711586,-0.011775782,0.02071498,-0.013877794,-0.017200327,0.037564974,0.034830097,-0.06016724,0.03523694,-0.029631576,-0.014906197,-0.017279435,-0.010380092,0.015222629,0.049544174,0.0053623887,0.017369844,-0.07955999,-0.01583289,-0.008594513,-0.051035926,0.0428313,0.032072622,-0.01862427,-0.020421151,-0.049046926,-0.00014223538,0.017900998,0.0018095942,0.005280455,-0.026241235,-0.05008663,-0.039508767,0.0036926458,0.03833345,-0.0050911615,-0.012702475,-0.024229633,-0.06862049,0.006543357,0.0019875872,-0.015572964,-0.030287042,0.0049753245,-0.011640169,0.027823394,0.0024113797,-0.028546667,0.0022743535,0.02658027,0.03234385,-0.07974081,0.03143976,0.00078754785,0.026851498,0.0045854356,0.041362155,-0.016104117,-0.05555638,0.01364047,0.014849692,0.03105552,0.010911246,0.011866191,0.008029456,-0.01970918,0.026874099,-0.0028408228,0.012318237,-0.023845395,-0.03620884,-0.06717394,0.03367738,0.001652791,-0.022760486,-0.003715248,0.0056505674,0.024274837,-0.031801395,0.033993814,0.011566712,0.06378361,0.012431248,-0.009408195,0.016081516,0.02350636,-0.011741879,0.0152565325,0.052346855,-0.010216226,0.036525268,-0.031846598,-0.015459953,0.022670077,-0.012386044,0.0023167327,-0.011628868,-0.040480666,-0.019539662,0.06730956,-0.019539662,-0.0046052127,-0.009266931,-0.023167327,0.01383259,0.037587576,-0.026150826,0.014985305,-0.006130866,-0.014171624,0.017765384,0.00676938,0.0028775516,0.009730278,-0.009295183,0.011741879,0.01801401,-0.010272732,-0.01922323,-0.013482254,-0.0026515287,0.02149476,-0.022534464,-0.010803885,-0.022444054,0.007091462,0.017392447,-0.018036611,0.0025385174,-0.0055206046,-0.030490462,0.013154522,0.033948608,-0.009526857,-0.022839595,-0.043260746,-0.031937007,0.036615677,0.0007140905,-0.0136517715,0.023212532,0.006752428,0.02170948,0.0065546585,0.030852098,0.036728688,0.060890514,0.0076282662,0.0046419413,0.002082234,0.024704281,0.026851498,-0.038582075,-0.01760717,0.017742783,-0.01364047,-0.010001505,-0.0062495274,0.024839895,0.00955511,0.0098715415,0.018454753,0.009306485,-0.025450155,-0.05338656,-0.0024142049,0.004014728,0.007260979,-0.010815186,-0.007950349,-0.01214872,0.028524065,-0.00092033617,0.021799888,-0.029608974,0.0089618005,-0.018194828,0.01026143,-0.025359746,-0.023438554,-0.0020370295,-0.040299848,-0.0009782545,0.022432754,-0.015075714,0.023133423,0.017889697,-0.029450757,-0.018273935,-0.031507563,-0.01634144,-0.019596169,-0.0046419413,-0.00019441484,-0.0071931724,0.015222629,0.037203338,-0.013719578,-0.013369243,0.07277931,-0.023415951,-0.038740292,0.005009228,0.02251186,-0.015572964,-0.009430797,-0.0078090844,-0.013866493,0.018194828,-0.01722293,-0.008040758,0.00071762205,-0.044662084,-0.007424846,0.0418142,-0.011922698,0.012261732,0.011674073,0.006306033,0.03512393,-0.01972048,-0.014894896,-0.042085428,-0.011018607,-0.0497702,0.025947405,-0.018838992,0.021969406,0.03923754,0.008311985,0.021969406,-2.6398746e-05,-0.008351538,-0.03476229,-0.026602872,-0.03476229,-0.009911096,0.026851498,-0.023325542,-0.016522259,0.023641974,0.016262334,-0.020568065,0.004074059,0.012408646,-0.05921795,-0.019279737,-0.023212532,-0.0014225304,-0.0017799288,0.009967601,0.0022672901,0.015358242,-0.009470351,0.0024608222,0.018093117,-0.06717394,0.0039469213,-0.029292542,0.0115836635,0.0057664043,0.0016994082,0.046221644,0.012487754,0.026828894,-0.013945601,-0.037677985,0.013222328,-0.008786633,0.012284334,0.0102444785,-0.007605664,0.030603474,-0.05415504,-0.018861594,0.009204774,0.012352141,0.0058539878,-0.04687711,-0.00047288186,0.04201762,-0.021743383,-0.007317485,0.017957503,-0.031100724,0.011431098,0.010154069,-0.031733587,-0.0067185247,0.024952905,0.033699986,5.725614e-05,-0.0072327266,0.032230835,0.0014860992,-0.034830097,-0.016578766,-0.021845095,-0.0048284098,-0.01752806,-0.016590066,0.0064981524,-0.03625404,0.013798686,0.011131618,0.039802596,0.003206697,-0.0010100389,-0.02149476,0.014216828,-0.0025145025,0.0029891501,-0.00011777902,0.0046560676,0.0037265492,-0.0114424,-0.021924201,0.036276642,-0.035010915,-0.017019508,0.028885702,0.005715549,0.0047153984,0.037564974,-0.014759283,0.006842837,0.0025032014,-0.043260746,0.0073231356,-0.020884497,-0.009182172,-0.0447977,-0.049453765,-0.0061478172,-0.056596085,-0.0056731696,0.0024043166,-0.006927596,-0.020149924,-0.0018957654,0.024681678,-0.04043546,0.0064868513,0.018533861,-0.005825735,0.013945601,-0.024952905,0.005407593,0.022963906,0.0041983714,0.014228129,0.00049619045,-0.015098317,0.011357641,-0.0477812,-0.0033818646,0.024975508,0.008617115,0.014307237,0.0508099,0.0070519084,0.010724777,-0.00022743535,-0.0011647232,0.021031411,-0.0022319742,0.004511978,-0.0064416467,0.0013737943,0.024252236,0.032298643,-0.017042112,-0.005447147,0.021765986,0.010527007,-0.008735778,0.03713553,0.010442249,0.012871993,-0.00013031621,0.043667585,-0.019776987,-0.028252838,-0.05365779,-0.0048933914,0.00666767,-0.024681678,-0.0038904157,-0.002205134,0.014974004,0.012996305,0.02102011,0.020082116,-0.07020265,-0.05415504,0.030128825,0.021133123,0.018748583,-0.0057522776,0.018805088,0.0053821653,-0.01723423,0.014262033,0.0027560643,-0.03365478,-0.014827089,-0.0022701155,0.016025009,-0.050177038,0.0040655835,-0.007950349,0.019155424,0.011741879,-0.0018110069,-0.0314623...', '2025-03-25 05:14:39.144925+00'), ('55', 'https://ai.pydantic.dev/models/', '11', 'Using Pydantic AI with Remote OpenAI Model', 'This example demonstrates how to use a remote server with Pydantic AI by integrating the OpenAI model. It shows the setup of an OpenAIModel with a specified model name and provider URL, as well as defining a CityLocation model to structure the results.', 'Example using a remote server ollama_example_with_remote_server.py
                        
                                                from pydantic import BaseModel
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        ollama_model = OpenAIModel(
                            model_name='qwen2.5-coder:7b',  # (1)!
                            provider=OpenAIProvider(base_url='http://192.168.1.74:11434/v1'),  # (2)!
                        )
                        
                        
                        class CityLocation(BaseModel):
                            city: str
                            country: str
                        
                        
                        agent = Agent(model=ollama_model, result_type=CityLocation)
                        
                        result = agent.run_sync('Where were the olympics held in 2012?')
                        print(result.data)
                        #> city='London' country='United Kingdom'
                        print(result.usage())
                        """
                        Usage(requests=1, request_tokens=57, response_tokens=8, total_tokens=65, details=None)
                        """
                        

              1. The name of the model running on the remote server
              2. The url of the remote server
Azure AI Foundry If you want to use [Azure AI Foundry](https://ai.azure.com/) as your provider, you can do so by using the [`AzureProvider`](../api/providers/#pydantic_ai.providers.azure.AzureProvider) class. azure_provider_example.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.azure import AzureProvider
                        
                        model = OpenAIModel(
                            'gpt-4o',
                            provider=AzureProvider(
                                azure_endpoint='your-azure-endpoint',
                                api_version='your-api-version',
                                api_key='your-api-key',
                            ),
                        )
                        agent = Agent(model)
                        ...
                        

OpenRouter To use [OpenRouter](https://openrouter.ai), first create an API key at [openrouter.ai/keys](https://openrouter.ai/keys). Once you have the API key, you can use it with the [`OpenAIProvider`](../api/providers/#pydantic_ai.providers.openai.OpenAIProvider): openrouter_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        model = OpenAIModel(
                            'anthropic/claude-3.5-sonnet',
                            provider=OpenAIProvider(
                                base_url='https://openrouter.ai/api/v1',
                                api_key='your-openrouter-api-key',
                            ),
                        )
                        agent = Agent(model)
                        ...
                        

Grok (xAI) Go to [xAI API Console](https://console.x.ai/) and create an API key. Once you have the API key, you can use it with the [`OpenAIProvider`](../api/providers/#pydantic_ai.providers.openai.OpenAIProvider): grok_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        model = OpenAIModel(
                            'grok-2-1212',
                            provider=OpenAIProvider(base_url='https://api.x.ai/v1', api_key='your-xai-api-key'),
                        )
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4407, "crawled_at": "2025-03-25T05:14:38.748167+00:00"}', '[-0.039222658,-0.024346458,0.067449294,-0.035618696,0.030962488,-0.0139554795,-0.023320515,0.017822502,-0.003985401,0.029541949,0.0070106224,-0.07113217,0.011153861,-0.04414193,-0.036776174,-0.0025517088,-0.026306275,0.03840716,-0.020058535,0.06755452,0.046509497,0.040301215,-0.01705962,0.021097634,-0.010496204,-0.017046466,0.0056131016,0.003709185,0.012206112,-0.021650065,-0.0014040975,-0.02677979,-0.037065543,-0.03788104,-0.021597452,0.0011541878,0.00091085484,-0.012765121,0.024241233,0.01642827,0.023833485,-0.08165468,0.01832232,0.053428046,0.0030992082,0.025214566,-0.017638357,-0.00066628866,0.026766635,0.011837824,0.017888268,0.02883168,-0.004070896,-0.047298685,-0.0062510287,-0.030225912,0.0118970135,0.043405354,-0.008635035,-0.024385918,-0.0063694073,-0.005685444,0.0009626453,0.056348044,0.0009100327,-0.030673118,-0.06434515,0.011969356,-0.050218683,0.0009881295,-0.030883567,0.028726453,-0.014718361,-0.016822863,0.0074249464,-0.05158661,-0.020361058,0.11469536,-0.007977379,-0.03461906,-0.04479959,-6.304258e-05,0.0032159423,-0.035303023,0.024307,-0.01982178,-0.09312422,-0.022189343,-0.007852423,-0.04853508,-0.009943772,-0.009785934,0.013041336,0.007720892,0.115747616,0.044378687,0.020111147,0.0077603515,0.0034592752,0.030909875,0.008884945,-0.07102694,-0.020676734,0.044746976,0.02141331,-0.023241594,0.042116348,0.02070304,-0.007905036,-0.011706293,-0.10859231,0.00037506994,0.014271155,0.004310941,-0.03375095,0.020808265,0.007740622,-0.020571508,0.0005614746,-0.05066589,-0.048087873,0.0018315745,0.028437085,0.008233865,0.028279247,0.014192236,-0.006819902,-0.028700147,-0.04166914,-0.034513835,0.0048370664,0.012068004,0.02414916,-0.017875114,-0.027516365,-0.033645727,-0.032514557,-0.04040644,-0.053980477,0.034434915,-0.007812964,-0.036434192,-0.047982648,0.046719946,-0.07171091,0.006596299,-0.02649042,-0.034513835,-0.020439977,0.013692417,0.0127190845,0.0018266421,-0.0010538952,0.032435637,-0.036697254,0.020887183,0.026372042,0.030410055,0.021742137,-0.00055160973,-0.028989516,0.050613277,-0.04422085,0.0010678704,-0.014678902,0.012640166,-0.040064458,0.011811518,-0.07555162,-0.058347322,-0.03319852,0.0052875616,0.0013186021,-0.003479005,0.016375657,-0.04074842,-0.00040856935,-0.00922035,-0.03201474,-0.05624282,-0.021018716,0.012765121,-0.0184407,0.02070304,-0.027910959,-0.022018353,0.0042451755,0.03322483,0.013403048,0.0850745,0.020361058,0.012857192,0.03322483,0.049561024,0.030988794,-0.022320876,0.032435637,-0.036539417,0.034382302,0.012337644,0.028410777,0.009838548,0.021873668,-0.049061205,0.020282138,-0.08175991,0.021439616,-0.01077242,0.009016477,0.008464044,0.016901782,-0.04635166,0.03298807,-0.026477266,-0.008838909,-0.023359973,-0.056032367,0.014350073,0.022662858,0.032514557,2.9440422e-05,0.042958148,-0.006063597,-0.009358457,0.0077471985,0.032330412,0.009312422,-0.0494558,0.034224465,-0.01823025,0.033303745,0.011035482,-0.0032110098,-0.030173298,0.08197036,-0.03285654,0.054927506,-0.0096280975,-0.0083719725,-0.03582915,0.011508996,-0.023570424,0.037749507,-0.009049359,0.048614,-0.00607675,-0.011745753,-0.035224102,0.013357012,0.0098253945,0.039433107,-0.01119332,-0.009036206,0.0062773353,-0.025135648,0.0021965741,-0.04280031,-0.026595645,-0.07423631,-0.041932203,-0.0040972023,0.038801756,0.0018874753,0.043510582,0.001665516,-0.020216374,-0.015783766,0.013876561,-0.032330412,-0.02066358,0.013297822,0.031909514,0.014205389,-0.031909514,-0.053164985,0.006392425,0.023530964,-0.00559666,-0.0165598,-0.020821417,-8.6985405e-05,0.0077143153,0.026122132,0.025990602,0.008227288,0.021663219,-0.01282431,0.0044556255,-0.018927366,0.0029758974,0.033093296,0.011153861,0.019045744,-0.025990602,0.024109703,-0.014521064,0.017664665,0.008654765,0.016691333,0.011837824,0.066133976,0.033803564,-0.00016235905,-0.008608729,-0.012206112,0.010206835,-0.0074841357,0.0076814326,0.05037652,-0.009365034,-0.030699424,0.033093296,3.2009393e-05,0.0017181287,-0.021992046,-0.03919635,0.053770028,0.0020025652,0.010634312,-0.02414916,-0.076235585,-0.043694723,2.0461865e-05,0.0013325773,-0.07723523,0.019690247,0.03248825,0.006520668,-0.027753122,0.01454737,0.009365034,-0.032198884,2.7385244e-05,0.046141207,0.03164645,0.017112233,-0.011850977,0.0419059,0.03151492,0.0039031936,-0.07255271,0.010002961,-0.03638158,0.010423862,-0.03906482,0.056348044,0.025964295,0.055085342,-0.010930258,-0.00086810713,0.01815133,0.011772059,0.008792873,0.03835455,0.0069843163,-0.011916743,0.021886822,-0.0067344066,-0.019808626,-0.0026191187,-0.055558857,0.03264609,0.0052382373,0.0015972842,-0.0038571577,0.037328605,-0.0074972888,-0.023623036,-0.0031912802,-0.007365757,0.0008483774,-0.0036269778,-0.06608137,-0.010364673,-0.014744667,-0.010594852,-0.006158957,0.038538694,-0.010522511,0.035303023,0.037328605,0.023438891,-0.00053681247,-0.028621228,0.032672394,0.024556909,0.01326494,0.003801257,-0.035934374,0.019663941,0.028989516,-0.042695086,-0.010917105,0.0074380995,-0.018979978,0.017454214,0.047982648,0.015389171,0.030462667,0.030488973,-0.014521064,-0.035224102,-0.015494397,0.033961404,-0.035645004,0.012015392,0.012988724,-0.014389533,-0.021807903,0.021768443,0.020926643,-0.047930036,0.02652988,-0.013429354,-0.007872153,-0.038880676,-0.0038045452,0.00783927,0.03809149,0.026214205,0.024925197,-0.07065866,-0.024885736,-0.013902867,-0.06597614,0.064450376,0.05750552,-0.030120686,0.027674202,-0.06739668,-0.021439616,0.009555755,-0.0066752178,-0.009956925,0.0071750367,-0.047088236,-0.005672291,0.021742137,0.001698399,-0.0037387796,0.022478713,-0.050455436,-0.049297962,0.0018874753,-0.034382302,-0.032041043,-0.019295653,-0.0034987347,0.0075170184,0.022557631,-0.015994215,-0.035092574,-0.002033804,0.0220052,0.005580219,-0.047140848,0.036144823,0.008483774,0.04824571,0.0015989284,0.024491142,0.009194043,-0.0511394,0.008378549,0.012534941,0.026569339,-0.006471344,-0.004136662,0.00016461975,-0.02980501,0.014008092,-0.004324094,0.014849893,-0.035723925,-0.022610245,-0.06381903,0.04698301,-0.013396471,-0.041274548,-0.008470621,-0.0016145477,-0.0047449945,-0.034382302,0.016980702,-0.016033676,0.069290735,-0.0011122623,0.005359904,0.015468091,0.024517449,-0.01865115,0.028805373,0.0507185,-0.0156127745,0.041853286,-0.0096215205,-0.034092933,0.00037486444,-0.027647896,0.0057479213,-0.03404032,-0.029226273,-0.03893329,0.057137232,-0.012488904,-0.0028591633,-0.0042122924,-0.020321598,0.012942688,0.028147716,-0.025977448,0.001433692,-0.004324094,-0.0015356289,0.010877646,0.030146992,-0.0012084446,0.020137455,-0.017533133,0.01322548,0.014718361,-0.0038999054,-0.024635827,-0.018203944,-0.004218869,0.022741776,-0.022018353,-0.017572593,-0.020558355,-0.015547009,0.028857986,0.015415478,0.027490059,0.0114761125,-0.042011123,-0.008569269,0.03498735,-0.0121535,-0.018296015,-0.016533494,-0.0012692778,0.06513434,-0.012949265,-0.02083457,-0.010239718,0.01167341,0.001907205,-0.016323045,0.006283912,0.04464175,0.04648319,0.0020140742,0.0015520703,-0.007234226,0.022636551,0.01794088,-0.02489889,-0.01646773,0.030778343,-0.031620145,0.003571077,0.013481966,0.034145545,0.004057743,-0.0013342215,0.0444313,0.0073789107,-0.022728622,-0.030015461,-0.016783405,0.025793305,0.016586106,-0.011344582,-0.024385918,-0.012844039,0.015165568,-0.017612051,0.007076388,-0.018374935,-0.0037979686,-0.021926282,0.0013268228,-0.006543686,0.005869588,-0.0014698632,-0.04040644,0.024346458,0.018506465,-0.0017000431,0.049639944,0.041721754,-0.018296015,-0.010364673,-0.030041767,-0.008457468,0.006504227,0.021952588,0.009733322,-0.024846278,0.035434555,0.030068073,-0.0094110705,-0.03482951,0.045167875,-0.007431523,-0.03261978,0.010627735,0.010502781,-0.03601329,-0.0010925325,0.004738418,-0.012673048,0.006898821,-0.0052086427,0.008266747,0.024043936,-0.03369834,0.010305484,0.055821918,-0.013837101,0.027121771,-0.0055637774,0.034513835,0.01903259,-0.024359612,0.0102331415,-0.023754567,-0.016020522,-0.044036705,0.024083396,-0.01483674,0.0018430834,0.028200328,-0.022623397,-0.004669364,0.014192236,-0.017585745,-0.013462237,-0.00762882,-0.056190208,-0.00879945,0.024412224,0.026095826,-0.025214566,0.024399072,0.0063036415,-0.01630989,0.013718723,-0.00097251014,-0.029463029,-0.019506104,-0.030567894,0.0039327885,0.0042353105,0.02062412,-0.0028986228,0.0037815273,-0.02624051,-0.020150607,0.0085889995,-0.062451098,0.0007349316,-0.028331859,-0.00047145778,0.002829569,-0.001698399,0.02733222,0.030804649,0.034724284,0.0009503142,-0.024701593,0.019900698,0.013942326,0.015744306,-0.007720892,-0.0020765518,0.032409333,-0.042931844,-0.024925197,0.03340897,0.00017931426,0.021623759,-0.048008952,0.025451323,0.034750592,-0.018743223,0.0048337784,-0.011357735,-0.013186021,-0.0039459416,0.006379272,-0.015560162,-0.001778962,0.028174022,0.015073496,-0.0022212362,0.0043142294,0.028226634,-0.030041767,-0.06545001,-0.005202066,-0.00049159856,0.0054026516,-0.0031797711,-0.022544479,-0.01688863,-0.030962488,0.006944857,0.010496204,-0.0073986403,-0.009384764,-0.0073591806,-0.0035908066,0.004843643,-0.008944134,-0.0052086427,0.0018315745,0.013574039,-0.0013021607,-0.044378687,-0.0085889995,0.04556247,0.0030334424,-0.026714023,0.0055374713,-0.026122132,-0.017151693,0.03348789,-0.02581961,-0.0024579926,-0.003245537,-0.043273825,0.014100164,-0.0006576569,0.0070829648,-0.017375296,-0.06392425,0.0028131274,-0.042563554,-0.022070965,0.018979978,-0.021636913,-0.023965018,-0.0069382805,0.018927366,-0.009608367,0.0022228803,0.03172537,-0.028279247,-0.0045608506,-0.023925558,0.010496204,0.0039919773,-0.003916347,0.00017458736,-0.0046364814,0.007155307,0.006971163,-0.053770028,0.010667195,0.008233865,0.0038176982,0.012903228,0.033961404,0.012600706,-0.01776989,0.019506104,-0.018637996,0.01236395,-0.0059945425,-0.013639804,-0.022597091,0.017362142,0.038380858,0.02720069,-0.005997831,-0.002069975,0.01861169,0.017033314,-0.0118904365,0.033303745,0.010548817,-0.00024415512,-0.005412516,0.03264609,-0.033461582,-0.023465198,-0.050744805,-0.02925258,-0.0065469746,-0.023636188,-0.008457468,-0.0036467076,0.016967548,0.024635827,0.0156127745,0.00022278128,-0.09938511,-0.033856176,0.03906482,-0.0023527676,0.022860155,0.003837428,0.011989085,0.006441749,0.0024316865,-0.007661703,0.006724542,-0.029699786,-0.036513112,-0.00060956576,0.038906984,-0.027069159,0.01324521,-0.007753775,0.0435895,-0.00384...', '2025-03-25 05:14:39.196951+00'), ('56', 'https://ai.pydantic.dev/models/', '12', 'Integrating AI Models with Pydantic', 'This document provides instructions on how to create an API key for the Perplexity API and initialize a model using Pydantic. It includes sample code demonstrating how to set up the OpenAI model and agent for interaction with the API. Additionally, it mentions accessing Fireworks.AI for further engagement.', 'Perplexity Follow the Perplexity [getting started](https://docs.perplexity.ai/guides/getting-started) guide to create an API key. Then, you can query the Perplexity API with the following: perplexity_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        model = OpenAIModel(
                            'sonar-pro',
                            provider=OpenAIProvider(
                                base_url='https://api.perplexity.ai',
                                api_key='your-perplexity-api-key',
                            ),
                        )
                        agent = Agent(model)
                        ...
                        

Fireworks AI Go to [Fireworks.AI](https://fireworks.ai/) and create an API key in your account settings. Once you have the API key, you can use it with the [`OpenAIProvider`](../api/providers/#pydantic_ai.providers.openai.OpenAIProvider): fireworks_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        model = OpenAIModel(
                            'accounts/fireworks/models/qwq-32b',  # model library available at https://fireworks.ai/models
                            provider=OpenAIProvider(
                                base_url='https://api.fireworks.ai/inference/v1',
                                api_key='your-fireworks-api-key',
                            ),
                        )
                        agent = Agent(model)
                        ...
                        

Together AI Go to [Together.ai](https://www.together.ai/) and create an API key in your account settings. Once you have the API key, you can use it with the [`OpenAIProvider`](../api/providers/#pydantic_ai.providers.openai.OpenAIProvider): together_model_init.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.openai import OpenAIModel
                        from pydantic_ai.providers.openai import OpenAIProvider
                        
                        model = OpenAIModel(
                            'meta-llama/Llama-3.3-70B-Instruct-Turbo-Free',  # model library available at https://www.together.ai/models
                            provider=OpenAIProvider(
                                base_url='https://api.together.xyz/v1',
                                api_key='your-together-api-key',
                            ),
                        )
                        agent = Agent(model)
                        ...', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 3044, "crawled_at": "2025-03-25T05:14:36.136994+00:00"}', '[0.00391203,-0.047897544,0.058038373,-0.017091135,0.022717575,-0.016799884,-0.00084437954,0.0423373,0.008009401,-0.012695894,-4.58441e-05,-0.04850652,-0.016310053,-0.056079045,-0.008757386,0.0024144042,-0.029839983,-0.0013346244,0.0013842694,0.04863891,0.018573867,-0.0044150995,-0.0136226015,0.029442823,-0.02907214,-0.025232922,-0.019699154,0.04360821,0.012623081,-0.025047582,0.01856063,-0.014906753,-0.047315042,-0.009942248,-0.031190328,0.0034983212,-0.020996546,0.005335188,0.007095932,0.015158288,0.006596172,-0.040457405,-0.008148408,0.051683806,0.004752686,0.030157711,-0.05533768,-0.015118572,-0.012298733,-0.0032054153,-0.021486377,0.030925555,0.0061824634,0.0023680688,-0.019672677,-0.007095932,-0.020519953,-0.010405602,-0.02705986,0.0059905024,0.008479374,0.024147352,0.02024194,0.040245585,-0.0006573832,-0.039186493,-0.048559476,0.029495778,-0.01996393,0.025616845,-0.003319599,0.044455487,-0.010173925,-0.0022687786,0.023366269,0.011319071,-0.031719875,0.09526554,0.00952523,-0.010835859,-0.013927091,-0.0036406368,-0.011736089,-0.04493208,-0.037942056,-0.0010913636,-0.053881425,-0.003458605,-0.031216806,-0.052504603,0.0025236232,-0.04358173,-0.05144551,0.021195127,0.07540752,0.0017160638,0.01996393,0.025934573,0.036432847,0.04400537,0.0040245587,-0.025696278,-0.037359554,0.015979087,0.02194973,-0.0109152915,-0.011378645,-0.042866845,-0.019354949,0.010902053,-0.09049961,-0.011716232,-0.008353607,-0.02678185,-0.020466998,-0.027509976,-0.018825402,-0.027748272,0.011398503,-0.070165,-0.083085954,-0.018335572,0.046679582,0.020400805,0.040166155,-0.021962969,0.0059507866,-0.019937452,-0.010200403,-0.025815425,-0.031852264,0.02968112,0.054384496,0.010948388,0.011961147,-0.05306063,-0.04461435,-0.003349386,-0.005606581,0.0032054153,0.021526093,-0.018626822,-0.041172292,0.016164428,-0.072547965,-0.016746929,-0.00024594984,-0.049883343,-0.022386607,-0.018163469,-0.015224481,-0.042655025,-0.03238181,-0.0044184094,-0.0070562162,-0.0011046024,0.015052378,0.029336914,0.013285015,-0.011385265,-0.0256698,0.052213352,-0.020639101,0.00792335,0.005907761,0.0505188,-0.03931888,0.0036108498,-0.06285725,-0.040033765,-0.035214886,-0.011477935,-0.038656943,0.0044779833,0.022518994,-0.046255946,-0.00611627,-0.019354949,-0.06275134,-0.07948503,-0.01012759,0.04029854,-0.031640444,0.038630467,-0.01363584,-0.0025302425,-0.010518131,0.010359267,-0.014602263,0.06343975,0.021115694,0.017077897,0.0406957,0.033440903,0.047579814,-0.046732537,0.038921718,-0.017806023,0.022002686,0.014999424,-0.0030002159,-0.03500307,0.018401764,-0.02446508,0.018904835,-0.02867498,0.010789524,-0.042257864,-0.019712394,0.022823483,0.04900959,-0.06158634,0.04371412,-0.024041442,-0.043528777,-0.030131234,-0.019805064,0.019434381,0.011742709,0.049141977,-0.034632385,0.035506137,0.010597563,0.008254317,0.008194743,0.016455678,0.04212548,-0.07328933,0.038365692,0.027245203,0.0074401377,0.030766692,-0.043634687,0.014999424,0.016905794,-0.008730909,0.07069455,0.00038516283,0.019646201,-0.00812193,0.035532616,-0.022916155,0.015105333,0.03179931,0.060474288,0.002675868,-0.031243283,-0.018467957,0.027457021,-0.003157425,0.066934764,0.006990023,0.011789044,0.040642746,0.01433749,-0.018785687,-0.0147081725,-0.002917474,-0.06836454,0.008863296,-0.0040841326,0.040669225,-0.013073196,-0.0029191289,-0.016124712,-0.040351495,-0.040060245,0.0048585953,-0.05904451,0.006543217,0.020665579,0.021380467,0.014377206,-0.043449346,-0.053881425,0.015621642,0.027721794,0.0071753645,-0.0012113391,0.030316576,-0.020480238,-0.022479277,0.0014347419,-0.00090850436,0.009280315,0.004123849,0.012484075,-0.0005245827,-0.03230238,-0.0154363,0.01223254,0.02846316,0.0032434764,-0.014575786,0.0178325,-0.009631139,0.050492324,-0.011358787,0.022677857,0.010114351,0.05655564,0.00037378585,-0.014377206,-0.033599768,-0.0042959517,-0.013126151,0.020480238,0.011160207,0.056608595,-0.01975211,0.02065234,0.053696085,0.016693976,-0.015171527,-0.020599386,-0.0030366222,0.025312355,-0.013046719,0.023988487,-0.030952033,-0.06137452,-0.034552954,-0.011736089,0.00070744194,-0.04289332,0.013953568,0.023776669,-0.03471182,0.013702033,-0.013165867,0.013000383,-0.02445184,0.020572908,0.014284535,-0.004891692,-0.015118572,0.024412125,-0.0034751534,-0.024901956,0.053087104,-0.056767456,-0.036326937,-0.031958174,0.008677955,-0.020572908,0.06587567,0.022518994,0.038047966,0.017329432,0.008499232,-0.0031557702,0.023551611,0.0034221986,-0.01292757,0.016760169,0.0073938025,0.0049413373,-0.016680736,0.023551611,0.00025649942,-0.041410588,-0.0009209156,0.00015545105,0.019672677,-0.001995731,-0.012470836,0.0128150415,-0.06317498,-0.013218822,-0.021115694,0.016363008,-0.024928434,-0.0042661643,0.003749856,-0.026556792,0.008294033,-0.009869436,0.024835763,0.0147081725,0.026914235,0.059997696,-0.0027817776,-0.019328471,-0.028992709,0.018229662,-0.014906753,0.023167688,-0.012417882,-0.034844205,0.043661166,0.042760935,-0.050068688,-0.02657003,-0.0049976017,-0.0038160493,0.001018551,0.013390925,0.03418227,0.0067087007,0.029839983,-0.013874136,0.014430161,-0.022307174,0.021499615,-0.02938987,0.0074732346,0.07424252,0.00016465607,0.009015541,0.007837298,0.04890368,-0.018388527,0.032540675,-0.025127014,-0.0006780686,-0.016839601,0.037544895,0.0033775182,0.015409823,0.024385648,-0.006477024,-0.08737528,-0.011789044,-0.020096315,-0.098707594,0.018136991,0.028727934,-0.028833844,0.038842287,-0.054914042,0.0011468006,0.022704335,0.02115541,0.0018798925,-0.026265541,-0.011041059,-0.024796046,-0.00041164018,-0.001097983,-0.020109555,0.030131234,-0.07424252,-0.043343436,-0.004441577,-0.03275249,-0.011279355,-0.038233306,-0.036406368,0.0074732346,0.0012452633,-0.0058912123,-0.017395625,0.012179585,0.03770376,0.021075977,-0.044084802,0.030369531,-0.028039522,0.07048273,0.0018980957,0.05073062,0.02907214,-0.047765154,0.02716577,0.03206408,0.009551708,0.0056793937,-0.008346988,-0.012311972,0.01253703,0.0014479805,-0.009094973,-0.002826458,-0.029654643,-0.041940138,-0.06592862,0.02405468,0.038683422,-0.0063744243,-0.012265637,-0.0075659053,0.025683038,0.00020488925,0.06015656,-0.02957521,0.109722175,0.0063810437,-0.030899078,0.011067536,0.03068726,-0.026225824,0.029601688,0.051074825,-0.016018802,0.047288563,-0.03418227,3.8888622e-05,-0.014986185,-0.006956926,-0.010557847,0.02124808,-0.047685724,0.0040146294,0.05565541,-0.025391787,-0.0021761078,0.0033411118,-0.015992325,0.021737913,0.07466615,0.018481197,-0.0012692584,-0.014681696,0.038656943,0.018256139,0.039160013,0.006430689,0.032646585,0.0013189034,0.00016734518,0.01333135,-0.018335572,-0.034632385,0.0373066,-0.0057886126,-0.010293073,-0.030554872,0.019805064,-0.042866845,-0.001313939,0.029734075,0.0018368668,-0.020784726,-0.012457597,-0.016998464,0.01653511,0.009955487,-0.0058183996,-0.044640828,-0.0071753645,-0.021910015,0.05734996,-0.017183807,0.010253358,-0.009743668,0.03058135,0.028066,-0.013966807,-0.009002302,0.013152628,0.055178817,-0.0053219493,0.011841998,-0.016508633,0.036035687,0.014853799,-0.03555909,-0.04021911,0.016257098,-0.024504796,-0.021420183,-0.0014173661,0.015780507,-0.008684574,0.003177283,0.039768994,0.017766308,-0.010061396,-0.045673445,-0.007638718,-0.0029571902,0.0066325786,-0.026119914,-0.06915886,-0.02106274,0.011795663,-0.014986185,0.01755449,0.014549308,0.0008038361,-0.014363967,-0.03079317,-0.0021363918,0.022413084,-0.025127014,0.011411741,-0.004074204,0.00170448,-0.018229662,0.05994474,0.015979087,-0.007857156,-0.0071819834,-0.026265541,-0.019090176,0.002154595,0.014072716,0.003799501,-0.02284996,0.022744052,0.026212586,-0.003448676,-0.00021450798,0.024438603,-0.025947811,-0.011094013,-0.0022125144,0.05202801,0.004481293,-0.0019477407,0.0048188795,-0.033546813,0.011736089,-0.02565656,-0.017620683,0.015979087,-0.04540867,0.04008672,0.05181619,-0.021115694,0.028622026,-0.019778587,0.009233979,0.01613795,0.001599398,-0.007208461,-0.030237144,-0.025908096,-0.027298158,0.026900997,-0.013794704,0.009465656,0.009372985,-0.009134688,-0.003006835,0.013205583,0.013675556,0.005533768,-0.006506811,-0.00079266593,0.0019427763,0.044376053,0.0006118752,-0.026993668,0.033414427,-0.018017843,-0.030766692,0.01564812,-0.0012593294,-0.03587682,0.01133231,0.0013859243,0.017514773,0.0017789475,0.026053721,-0.004173494,-0.02115541,-0.024981389,-0.015105333,0.006556456,-0.054199155,0.030607827,-0.020705294,-0.022068879,-0.0011542473,0.033811588,0.01845472,-0.0019626343,0.018534152,0.009743668,-0.0147081725,0.03608864,-0.019010743,0.024729853,-0.01032617,-0.015992325,0.051154256,-0.047103222,-0.0104254605,0.025709515,0.009664236,0.026848042,-0.06412816,-0.0048619052,0.02506082,-0.03150806,0.027562931,0.007837298,-0.015727552,-0.010749808,-0.008174885,0.0082146,0.0045474865,0.025484458,-0.026755372,-0.008049117,-6.0504903e-05,0.014721411,-0.01975211,-0.02997237,-0.026689177,0.0025583748,-0.013424021,-0.029416345,-0.016905794,-0.009975345,0.0064704046,0.049909823,0.071806595,-0.003620779,-0.0062618954,0.012239159,-0.00641745,0.014483116,-0.013715272,0.0070032612,-0.0050406274,0.014906753,-0.009147927,-0.02416059,-0.02184382,0.050201073,-0.0021529403,0.0016597995,0.022744052,-0.036777053,0.0178325,0.010955008,-0.013913852,0.00315908,-0.03439409,-0.019606484,0.009366366,0.017091135,0.00792335,-0.03963661,-0.033732157,0.03148158,-0.049486183,-0.022148311,-0.0003892999,-0.027430544,-0.0052987817,0.048294704,-0.01624386,-0.011616942,-0.003981533,0.04371412,-0.016892554,-0.012000863,-0.008433039,0.010312932,0.0078042015,-0.0036869722,0.011173446,0.004282713,-0.00016858631,-0.00041391558,-0.008227839,0.0055503165,0.01804432,0.0154363,-0.016680736,0.027721794,-0.00031007468,0.012252398,0.026450882,0.011736089,0.008466136,-0.020639101,-0.04389946,-0.011875096,-0.009551708,0.013192344,0.028833844,-0.046785492,-0.007658576,0.002616294,-0.008538948,-0.015687834,-0.014602263,-0.007499712,-0.020466998,-0.015859937,0.016521873,0.008068975,-0.005920999,-0.038445126,-0.011570605,-0.0073540863,-0.044455487,0.011716232,0.01423158,0.0067616557,0.021195127,-0.0057985415,0.00631485,-0.11152264,-0.025338832,-0.0070098806,-0.006956926,0.016257098,0.0070760744,0.018309094,0.028489638,-0.029416345,0.01714409,0.0067914426,-0.03701535,-0.037041824,1.8526394e-05,0.033202607,-0.028251342,-0.0047692345,-0.009339889,-0.02527264,-0.00861838,0.020069838,-...', '2025-03-25 05:14:39.32588+00'), ('57', 'https://ai.pydantic.dev/models/', '13', 'Implementing Custom Models in PydanticAI', 'To implement new models in PydanticAI, subclass the Model abstract base class and, for streaming support, also implement the StreamedResponse class. Review existing models like OpenAIModel for guidance. Use FallbackModel to attempt multiple models in sequence until a successful result is achieved.', 'Implementing Custom Models To implement support for models not already supported, you will need to subclass the [`Model`](../api/models/base/#pydantic_ai.models.Model) abstract base class. For streaming, you'll also need to implement the following abstract base class:
              * [`StreamedResponse`](../api/models/base/#pydantic_ai.models.StreamedResponse)
The best place to start is to review the source code for existing implementations, e.g. [`OpenAIModel`](https://github.com/pydantic/pydantic-ai/blob/main/pydantic_ai_slim/pydantic_ai/models/openai.py). For details on when we'll accept contributions adding new models to PydanticAI, see the [contributing guidelines](../contributing/#new-model-rules). Fallback You can use [`FallbackModel`](../api/models/fallback/#pydantic_ai.models.fallback.FallbackModel) to attempt multiple models in sequence until one returns a successful result. Under the hood, PydanticAI automatically switches from one model to the next if the current model returns a 4xx or 5xx status code. In the following example, the agent first makes a request to the OpenAI model (which fails due to an invalid API key), and then falls back to the Anthropic model. fallback_model.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.models.anthropic import AnthropicModel
                        from pydantic_ai.models.fallback import FallbackModel
                        from pydantic_ai.models.openai import OpenAIModel
                        
                        openai_model = OpenAIModel('gpt-4o', api_key='not-valid')
                        anthropic_model = AnthropicModel('claude-3-5-sonnet-latest')
                        fallback_model = FallbackModel(openai_model, anthropic_model)
                        
                        agent = Agent(fallback_model)
                        response = agent.run_sync('What is the capital of France?')
                        print(response.data)
                        #> Paris
                        
                        print(response.all_messages())
                        """
                        [
                            ModelRequest(
                                parts=[
                                    UserPromptPart(
                                        content='What is the capital of France?',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    )
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[TextPart(content='Paris', part_kind='text')],
                                model_name='claude-3-5-sonnet-latest',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                        ]
                        """
                        

The `ModelResponse` message above indicates in the `model_name` field that the result was returned by the Anthropic model, which is the second model specified in the `FallbackModel`. Note Each model's options should be configured individually. For example, `base_url`, `api_key`, and custom clients should be set on each model itself, not on the `FallbackModel`. In this next example, we demonstrate the exception-handling capabilities of `FallbackModel`. If all models fail, a [`FallbackExceptionGroup`](../api/exceptions/#pydantic_ai.exceptions.FallbackExceptionGroup) is raised, which contains all the exceptions encountered during the `run` execution. Python >=3.11Python <3.11 fallback_model_failure.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.exceptions import ModelHTTPError
                        from pydantic_ai.models.anthropic import AnthropicModel
                        from pydantic_ai.models.fallback import FallbackModel
                        from pydantic_ai.models.openai import OpenAIModel
                        
                        openai_model = OpenAIModel('gpt-4o', api_key='not-valid')
                        anthropic_model = AnthropicModel('claude-3-5-sonnet-latest', api_key='not-valid')
                        fallback_model = FallbackModel(openai_model, anthropic_model)
                        
                        agent = Agent(fallback_model)
                        try:
                            response = agent.run_sync('What is the capital of France?')
                        except* ModelHTTPError as exc_group:
                            for exc in exc_group.exceptions:
                                print(exc)', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 4907, "crawled_at": "2025-03-25T05:14:36.261650+00:00"}', '[-0.006979906,0.019748027,0.0567472,-0.045574307,-0.005936388,0.009810961,-0.02625504,0.003530937,0.025220979,-0.0002569387,-0.020138951,-0.101640545,-0.044742018,-0.011053094,-0.040126577,-0.0063935183,0.011689924,0.00076096423,-0.011437714,0.025712788,0.030744374,0.04706235,0.0065070125,-0.0048708017,0.01931927,-0.0033165587,-0.045750856,0.04073188,-0.006270566,-0.016935887,0.011374662,-0.007515852,-0.07984962,-0.01904184,0.00059742195,-0.0029587361,-0.0145146735,0.0047951387,0.025561463,0.032585505,0.050013203,-0.019344492,0.03455274,0.05331715,-0.036166884,0.0530145,0.039445613,-0.009905539,-0.034678847,0.027112553,-0.017364644,0.034905836,-0.017011551,-0.0664825,-0.0004078705,-0.006639423,-0.00016699047,0.00773023,-0.023745552,-0.047365,-0.02600283,-0.013480613,-0.027692635,-0.0076860934,0.012377195,-0.029180672,-0.051148146,0.009470478,-0.02580106,0.040807545,-0.029760756,0.0058890986,-0.008669712,0.009174131,-0.031501003,-0.03583901,0.035939895,0.09442735,0.027970066,-0.025120094,-0.017478138,0.02422475,0.014691221,-0.016027933,0.016368415,-0.013253625,-0.061438303,0.014867767,-0.050795052,-0.08670972,-0.001631482,0.021185622,-0.036620863,0.050568063,0.05175345,0.009331762,0.032030642,-0.0016346347,0.03936995,0.034603182,0.03273683,-0.019142723,-0.048399057,0.026078492,0.026910786,-0.03195498,0.027213436,0.021992695,-0.028524928,0.007988745,-0.056595877,-0.009287626,-0.015132587,-0.0055549205,-0.084641606,-0.019495817,-0.0520561,0.027894404,0.003338627,-0.0069420743,-0.0057724514,0.026885564,0.01095221,0.014476842,0.014867767,0.0018773866,0.026658574,-0.03064349,-0.06910548,-0.058361344,0.01752858,0.020946024,0.019659754,-0.021954862,0.0019530496,-0.019748027,-0.024136476,-0.030012965,-0.042396467,0.034931056,-0.00017359127,-0.038235005,-0.030063407,0.017806012,-0.030315617,0.015649617,-0.014287685,-0.024514792,-0.017087214,0.027768297,0.009199352,0.03740271,-0.0105486745,0.015157809,-0.06633118,0.0005182123,-0.00965333,0.030693932,0.02060554,-0.036671303,-0.02343029,0.04849994,-0.03651998,-0.015536123,-0.028726695,0.00097021955,-0.040277902,-0.018777018,-0.034325752,-0.047037125,0.013152741,0.021198234,-0.026759459,0.005744078,0.026053272,-0.053670242,-0.069458574,-0.04872693,0.002998144,-0.04638138,-0.014048086,0.013959812,-0.019962406,-0.0062327343,-0.030492164,0.005264879,-0.002391264,0.021790925,0.0033260167,0.053569358,-0.004230819,0.019268828,0.041337185,-0.0034804952,-0.010372127,-0.005665262,0.03768014,-0.018159105,0.06986211,0.02963465,-0.0031116384,0.022181852,0.028398823,-0.034653626,0.037074838,-0.015637007,-0.032156747,0.02708733,-0.039319508,0.02495616,0.026456807,-0.034376193,0.029483324,-0.04300177,-0.029382441,-0.02628026,-0.056091458,-0.0048235124,-0.037301827,0.029004127,0.015775722,0.035864234,0.006204361,-0.0074969362,-0.013846317,0.008789511,0.0050631114,-0.050038423,0.0019940336,0.012635711,0.01752858,0.009842487,0.004675339,-0.01906706,0.016519742,-0.06401084,0.031400118,-0.0048991754,-0.008600354,-0.04093365,0.020983854,-0.007522157,0.01650713,0.016393637,0.026330702,0.011778197,0.0021295964,-0.0407571,-3.9925006e-05,0.030870479,0.05694897,-0.033367354,-0.0030123307,-0.0072132,-0.014918209,0.0008449028,0.01390937,-0.007667178,-0.08292658,0.00021102866,-0.053367592,0.040151797,0.003043857,0.041589394,-0.030038185,-0.03936995,-0.02446435,-0.028802358,0.0033670007,-0.047743313,0.026229817,0.037982795,0.012711373,-0.03170277,-0.031223573,0.015006483,0.016797172,0.029609429,1.958074e-05,-0.038714204,0.030466942,-0.00322198,0.034199648,-0.0051639955,-0.008707543,0.00033417798,0.007944608,-0.041538954,0.0007136749,0.0032755747,-0.008121155,-0.019874131,-0.013001415,-0.06658339,0.0027096788,-0.0048960224,0.014275074,0.022862818,0.006677254,0.011034179,-0.009817266,-0.0066898647,-0.046532705,0.008322923,0.02422475,-0.020706424,-0.015082145,0.019684974,0.0107063055,-0.0376297,-0.0047037126,0.045422982,-0.0365452,-0.004432587,-0.011015262,-0.050946377,0.05533483,-0.028146613,0.06466659,0.0003363454,-0.06582676,-0.014048086,-0.0121375965,0.009552446,-0.03170277,0.0110215675,0.006377755,-0.021311728,-0.03036606,0.015082145,-0.023884267,-0.026078492,0.0062800236,0.015056925,0.015573954,-0.002274617,-0.062699355,0.03995003,0.07636912,0.033392575,-0.06436394,-0.021803537,-0.030189512,0.0045523867,-0.0221188,0.011639481,-0.014615557,0.033543903,-0.009268709,-0.00322198,0.022333177,-0.010794579,0.016053153,0.029987745,-0.017452918,0.009186742,6.487506e-05,0.0052617267,-0.008638185,-0.005583294,-0.05437643,0.030088628,-0.0148299355,-0.00073574326,-0.0089660585,-0.0018931497,-0.006097172,-0.058764882,0.0005390984,0.009262404,-0.011362051,0.0022793459,-0.036393873,0.011034179,-0.025258811,0.0058890986,-0.04025268,0.014350737,0.005059959,0.022005305,0.07984962,0.007061874,-0.0018726577,-0.038008016,0.01042257,0.05382157,0.004858191,-0.024514792,-0.033619564,0.03223241,0.02317808,-0.038789865,-0.0073329997,0.027188215,0.0013477461,0.02907979,0.010195581,0.0014667576,0.038966414,0.040404007,0.02034072,0.0072699473,-0.012200649,0.051703006,0.0021910726,0.016179258,0.05437643,0.015573954,3.5023666e-05,0.025170537,0.052409194,-0.039319508,0.042194698,-0.048146848,-0.006254803,0.0023014143,0.02857537,0.00747802,0.04355663,0.036847852,0.014048086,-0.10774402,-0.01133683,0.015523513,-0.08691149,0.047818977,0.030769594,-0.03455274,0.01776818,-0.045372542,-0.022043135,0.02319069,0.031778432,-0.023859046,0.00046028287,-0.0077995877,0.043153096,-0.013745434,0.01650713,-0.0060751033,0.036671303,-0.0031841486,-0.004284414,0.011525988,0.006402976,0.005069417,-0.029458104,0.03372045,0.00075702346,0.007238421,-0.016671067,0.0054950207,-0.025220979,-0.021450443,-0.02706211,-0.04950878,0.059017092,0.016923277,0.09720165,0.00034324176,0.034073543,0.016292753,-0.033644788,-0.018524809,-0.035712905,-0.0071753687,0.062699355,0.022017915,-0.008480554,-0.0019325576,0.013152741,-0.00077475695,-0.010296465,-0.013669771,0.008606659,-0.037226167,0.03218197,0.013543665,-0.019407544,-0.0020066442,0.008726459,-0.010517148,-0.0040385094,-0.007805893,-0.04274956,0.08161509,-0.0100694755,-0.017188096,-0.009218268,0.012654626,-0.0017008397,-0.002780613,0.048802596,-0.013972422,0.026633354,-0.043430526,-0.030820036,0.008808427,-0.04020224,-0.01518303,-0.03843677,-0.02137478,-0.014968651,0.05977372,0.00977313,-0.008335534,-0.004908633,0.028651033,-0.0039092517,0.034678847,-0.006853801,0.010082087,0.0043474664,0.015447849,0.0100757815,0.009899234,-0.012591573,0.0137202125,-0.012383501,0.0037200944,0.006163377,-0.015649617,0.0005091485,-0.00017644833,0.008285091,0.012717679,-0.0092813205,-0.017188096,-0.010258634,-0.006715086,0.034098763,0.017352033,0.0216396,-0.011160283,-0.018903123,0.0062957867,0.023089806,-0.009319152,-0.026179377,-0.03581379,-0.015750501,0.032787275,-0.03296382,0.010857631,-0.008594048,0.008512081,0.01467861,-0.00021083163,-0.008707543,0.01043518,0.01650713,0.011355746,-2.3090495e-05,-0.050795052,0.008360755,0.018486978,-0.033922218,-0.001686653,-0.0065448442,-0.002659237,0.0012287346,0.010737832,0.032106306,0.032787275,-0.0050631114,0.03599034,0.009924456,-0.0011112994,-0.025309252,-0.007705009,-0.0019893048,-0.010006423,-0.011223336,0.006822275,0.011135062,0.00052372937,0.03326647,-0.0080076605,-0.010756748,0.03248462,-0.007389747,-0.006481792,-0.0032235563,0.02650725,-0.035662465,-0.02834838,-0.03016429,0.0034710371,-0.0056621097,0.021790925,0.023493342,-0.045170773,-0.0027664262,0.0018269446,-0.012654626,0.019647142,0.02165221,-0.0048392755,-0.033115145,0.00977313,0.043153096,-0.026835121,0.013253625,0.034729287,-0.0010293312,0.014098527,0.019773247,0.008587743,-0.032030642,-0.013026636,0.029382441,-0.024767002,0.0031699617,-0.030517384,-0.011147672,-0.02602805,-0.06950902,0.0071564526,0.04330442,-0.009527225,-0.018739188,0.018600471,0.032787275,0.007547378,-0.0007318025,-0.007187979,0.0018931497,0.009079552,-0.022560166,0.0140354745,0.015006483,0.028701475,0.02422475,0.015346966,-0.026936006,-3.0270101e-05,-0.0070492635,-0.036444314,-0.0029918386,-0.04053011,0.004334856,0.01055498,0.0046721864,-0.027894404,0.0050725695,-0.0032535063,-0.008190513,0.026608134,0.001297304,-0.025410136,0.0010261786,-0.014136359,-0.0035340898,0.04224514,0.020012846,-0.016898056,0.024073424,0.0005004788,-0.008442723,0.030845258,-0.05715074,0.025183147,-0.016166648,0.00030206062,0.0013966117,0.008518386,0.022888038,0.032888155,0.03291338,-0.031904537,-0.04665881,-0.024035593,-0.0014446892,0.018688746,-0.017490748,0.0015510903,0.0060152034,-0.04141285,-0.031072246,0.05563748,-0.042421687,0.015397408,-0.0730904,0.0060908664,0.043380085,-0.013871538,-0.018310431,-0.0075032413,-0.0070429584,0.035864234,-0.0018316736,-0.043405306,-0.0062737186,0.00019536407,0.024628285,0.0011168165,-0.03881509,0.024905717,-0.028424043,-0.05417466,-0.009211963,0.0054288157,-0.0071942843,0.0012846936,-0.010725222,0.0025142164,0.0048235124,0.03911774,0.009293931,-0.023795994,-0.0520561,0.006103477,0.003210946,0.03228285,-0.04658315,0.0035183267,0.010781969,0.027869182,-0.0037011786,-0.019256217,-0.019634532,0.014615557,-0.026961226,0.019357102,0.004984296,-0.024287803,-0.010517148,0.06925681,-0.016444078,0.019975016,-0.009085857,-0.013278846,-0.005286948,-0.007295168,-0.0011152402,-0.03301426,-0.011267472,0.016633235,-0.015838776,0.024376076,0.017364644,-0.010000118,-0.020719035,-0.00708079,0.03530937,-0.026355924,-0.0012823292,0.063102886,-0.004079493,-0.010769358,-0.018310431,0.009104773,0.013518445,-0.015334356,0.007623041,-0.008436417,0.02834838,0.032358516,-0.06002593,-0.014464231,0.028978905,0.0097542135,-0.00028885904,0.042497348,-0.00954614,-0.004949617,0.0024480112,0.00694838,0.003981762,-0.021412611,0.0008259871,-0.030719152,-0.022623219,0.029836418,0.056545436,-0.04325398,0.027238658,0.027894404,0.04017702,-0.016027933,0.013316677,-0.006314703,0.008411197,0.0013650855,0.013745434,-0.01145663,-0.0075662937,-0.019142723,-0.04870171,-0.031274013,-0.017465528,0.0011578006,-0.0034458162,-0.0001559563,0.013228403,-0.006746612,0.024376076,-0.101438776,-0.019193165,0.013468003,0.0012949397,0.011847555,-0.016090985,-0.006377755,0.009760519,-0.002061815,-0.022257514,0.005460342,0.008568828,-0.018474367,-0.012560047,0.053922452,-0.001945168,0.0012894225,-0.028651033,0.014867767,-0.022560166,-0....', '2025-03-25 05:14:39.375956+00'), ('58', 'https://ai.pydantic.dev/models/', '14', 'Error Handling in Pydantic AI Models', 'This section discusses the use of the `exceptiongroup` backport for error handling in Pydantic AI models, especially for Python versions earlier than 3.11. It provides an example of importing necessary components and defines a function to handle model status errors.', 'Since [`except*`](https://docs.python.org/3/reference/compound_stmts.html#except-star) is only supported in Python 3.11+, we use the [`exceptiongroup`](https://github.com/agronholm/exceptiongroup) backport package for earlier Python versions: fallback_model_failure.py
                        
                                                from exceptiongroup import catch
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.exceptions import ModelHTTPError
                        from pydantic_ai.models.anthropic import AnthropicModel
                        from pydantic_ai.models.fallback import FallbackModel
                        from pydantic_ai.models.openai import OpenAIModel
                        
                        
                        def model_status_error_handler(exc_group: BaseExceptionGroup) -> None:
                            for exc in exc_group.exceptions:
                                print(exc)
                        
                        
                        openai_model = OpenAIModel('gpt-4o', api_key='not-valid')
                        anthropic_model = AnthropicModel('claude-3-5-sonnet-latest', api_key='not-valid')
                        fallback_model = FallbackModel(openai_model, anthropic_model)
                        
                        agent = Agent(fallback_model)
                        with catch({ModelHTTPError: model_status_error_handler}):
                            response = agent.run_sync('What is the capital of France?')
                        

By default, the `FallbackModel` only moves on to the next model if the current model raises a [`ModelHTTPError`](../api/exceptions/#pydantic_ai.exceptions.ModelHTTPError). You can customize this behavior by passing a custom `fallback_on` argument to the `FallbackModel` constructor.  Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/models/", "chunk_size": 1932, "crawled_at": "2025-03-25T05:14:36.226404+00:00"}', '[-0.027914202,0.009818192,0.037531476,-0.024659332,-0.010514706,0.03169146,-0.02456557,0.030405585,0.036031287,0.015939493,-0.021190148,-0.10747772,-0.021216936,0.02402979,-0.03911203,0.025556765,0.015658207,-0.0073268083,-0.0033352382,0.018323718,0.025596948,-0.00013928219,0.024940617,0.003737074,-0.0022268407,-0.021672351,-0.028155304,0.05936456,0.015202792,0.018819315,0.02551658,-0.012463612,-0.072384045,-0.02684264,-0.036406334,0.016984265,-0.0034156055,-0.0037504686,0.0012975952,0.041442677,0.02968228,-0.027887413,0.0409069,0.06327576,-0.035602663,0.06300788,0.025824655,-0.005297537,-0.025931813,0.016502062,-0.01770757,-0.0055419873,-0.028664296,0.0062016677,0.010836176,-0.042165983,-0.006117952,0.02143125,0.007092404,-0.038683407,-0.009650759,-0.027070347,-0.025181718,0.013622238,-0.00048722606,0.004795242,-0.04224635,-0.00030786492,-0.04880967,0.043264337,-0.04079974,0.005518547,0.011546086,-0.0048287283,-0.011793884,-0.022181343,0.025931813,0.068901464,0.040772952,-0.03230761,-0.018899683,0.0137829725,-0.030110905,0.00069191126,-0.011894343,-0.009068098,-0.056042716,0.013287375,-0.054462165,-0.079027735,0.0043532224,0.022770703,-0.05089922,0.053819224,0.04704159,0.009623971,0.0140910465,-0.04564856,0.037906524,0.017573625,-0.0070455233,-0.036138445,-0.013823156,0.017319128,0.01386334,-0.03889772,0.021498222,-0.00011259778,0.0069986423,0.026306858,-0.049774077,-0.047068384,-0.03287018,0.0023557632,-0.075330846,-0.042942867,-0.038978085,0.009068098,0.0055754734,0.015671602,0.016970871,0.016354723,0.0025700757,-0.028905397,0.012999392,0.02157859,0.047791686,-0.025945207,-0.038174413,-0.059846766,0.036058076,0.033325594,0.03340596,0.006057677,0.010541496,-0.0052807936,-0.008344793,0.00661355,-0.031048523,0.039540656,0.003413931,-0.032977335,-0.020118585,0.023400245,-0.013026182,0.023614557,-0.008492133,-0.008907363,0.010628561,0.065151,0.024163734,0.011700123,-0.02544961,0.022542996,-0.06547247,0.016917292,-0.020788312,0.027860625,0.044952046,0.0029400995,-0.055346202,0.057275016,-0.039754968,-0.002307208,0.013066365,0.03370064,-0.055560514,-0.028664296,-0.03994249,-0.034718625,0.010481221,0.017064633,-0.02698998,0.0022904647,0.040371116,-0.057435747,-0.04428232,-0.03704927,-0.034691837,-0.04337149,-0.014613434,0.0330577,0.008257728,0.022931438,-0.023252906,-0.0134280175,0.03458468,0.04363938,-0.021511616,0.03289697,0.016368117,0.030352008,0.025020983,0.028771453,-0.0012322968,-0.005016252,0.008117085,-0.021082992,0.094886854,0.011787187,-0.036058076,0.020788312,0.020065008,0.0024947315,0.039808545,0.005444877,-0.019047024,0.05103316,-0.023252906,-0.010394156,-0.012952511,-0.036406334,0.020908862,0.013970496,0.010467826,-0.035254404,-0.027592734,-0.034048896,-0.0062619434,0.045300305,-0.0030171182,0.017064633,-0.0025483095,-0.010655349,-0.024203917,0.009898558,0.019649778,-0.048434623,-0.01129159,0.038522672,0.0038911114,0.01525637,0.022944832,-0.014492882,0.015899308,-0.019716749,0.016180594,-0.028932188,-0.0020577349,0.002128056,-7.738481e-05,-0.001709477,-0.0045173056,-0.0045273514,0.012651134,0.012537281,0.011030396,-0.046103977,-0.012289482,0.05711428,0.041442677,-0.010367367,0.037611842,-0.011298287,-0.010447734,0.022770703,0.011874252,0.0002965633,-0.08856464,-0.012162234,-0.046693336,0.0018166333,0.05572125,-0.0048186826,-0.027780257,-0.078384794,-0.010936635,-0.018953262,0.0017848213,-0.038147625,0.035307985,0.052935187,0.010956726,-0.06402586,-0.046773702,0.020587394,0.025838051,0.02169914,-0.03222724,-0.042969655,-0.0046813884,-0.011284892,0.03573661,-0.0030606503,0.03645991,0.019756934,-0.023226116,-0.011371957,0.016341329,0.014881324,-0.003482578,-0.040371116,0.0007731156,-0.019006839,0.009818192,-0.0058031804,0.037102852,0.030887788,0.04878288,0.0017228716,-0.008592592,-0.010253513,-0.03621881,0.00053578126,0.029092921,-0.06627614,-0.018256746,0.030968156,0.0027659705,-0.0011067231,-0.030485952,0.03996928,0.0014650269,-0.010333881,0.008030022,-0.05625703,0.0116934255,-0.050604537,0.06349008,-0.01981051,-0.040960476,-0.030619897,-0.035816975,0.021096386,-0.042487454,-0.0075545153,-0.011452324,0.00031267857,-0.020252531,0.019703355,-0.049586553,-0.031771827,-0.011097369,0.025020983,0.035924133,0.023694925,-0.058025107,0.04278213,0.028583929,0.012825264,-0.06273998,-0.006084466,-0.025476398,-0.010447734,-0.026802456,0.0065097422,-0.015792152,0.02356098,0.020734735,-0.0107290195,0.008418463,0.00163497,0.012209115,0.03994249,-0.009791402,0.011934527,-0.011767096,0.0037337255,0.010708927,0.0023992953,-0.054917578,-0.005826621,-0.023909237,0.013441412,-0.026789062,0.0065499255,0.008304609,-0.06300788,0.0011887646,0.016810136,-0.02069455,-0.026146125,-0.03027164,0.0132271,0.006111255,-0.020386476,-0.009583787,0.009168557,0.035093673,0.020935653,0.06027539,-0.018832712,-0.013716,-0.045085993,0.019221151,0.046479024,-0.012322969,-0.018015644,-0.045273516,0.011418838,0.020922257,-0.018203167,0.00021389392,0.010454431,-0.0006257757,0.004631159,0.0039982675,0.01687711,0.046961226,0.015644813,0.0011192805,-0.001254063,-0.006255246,0.011251406,0.012684621,-0.006640339,0.051327843,0.049854446,-0.018430874,-0.019663172,0.049023982,-0.037611842,0.039326344,-0.0707767,0.0003386305,-0.010836176,0.022275105,0.0018534682,0.028048148,0.01290563,-0.020828495,-0.10844212,0.0017697524,0.015564445,-0.03833515,0.013729394,0.002466268,-0.061561264,0.056685656,-0.05170289,0.009865072,0.010099476,0.0085858945,0.008050113,0.018497847,-0.01800225,0.02711053,-0.011258103,-0.004021708,-0.007695158,0.019542621,-0.021176754,-0.0021129872,-0.015336738,-0.020587394,0.014439304,-0.049345452,0.007735342,0.0031142284,0.029253656,-0.008753326,-0.019609593,-0.006312173,-0.018377297,-0.016863715,-0.033030912,0.046666548,-0.0022184693,0.12826602,0.017774543,0.05483721,0.023239512,-0.034852568,-0.012336363,-0.033272017,0.03889772,0.034932937,0.034397155,-0.0005546173,0.005471666,0.024873644,0.023828872,0.046425443,0.013488293,0.0036901932,-0.013957101,0.004895701,0.041817725,-0.0056324005,-0.008411765,0.0025014286,0.009041308,0.03678138,-0.0067441463,-0.03080742,0.05371207,-0.015564445,-0.02828925,0.0012674575,0.039888915,-0.016944082,0.004296296,0.03742432,-0.01623417,0.016475273,-0.028610718,-0.001900349,0.033030912,-0.027365027,-0.01687711,-0.03316486,-0.006385843,-0.048381045,0.059257407,-0.023936028,-0.002317254,-0.016421694,0.0049827653,0.023333274,0.034986515,0.007266533,-0.01685032,-0.00942975,0.00013216634,0.022034004,0.0057194647,0.007259836,0.026186308,-0.03822799,-0.008050113,0.023333274,-0.014921508,0.0015319994,0.012597556,-0.006774284,-0.011030396,0.013508384,-0.016542247,-0.014921508,-0.004734967,0.017104816,0.019649778,-0.0010171472,-0.011325076,-0.012363152,0.007889379,0.007038826,-0.004128864,-0.03887093,-0.048622146,0.003810744,0.020373082,-0.004386709,0.01939528,-0.005843364,0.021324093,-0.0016759906,0.026802456,-0.023306483,0.003423977,-0.0068914862,-0.017720964,-0.016756559,-0.055346202,0.0070053395,0.017051239,-0.0031309717,-0.023989605,-0.025503187,0.020507026,0.0080836,0.00891406,0.016475273,0.0004746687,0.0034490917,0.022395656,-0.01915418,-0.0012900608,-0.006556623,-0.04479131,0.000688144,0.02187327,-0.019730143,0.013454806,0.008532316,-0.02187327,0.00082167075,-0.01915418,0.020667762,0.04830068,0.0015721831,-0.004778499,0.0127114095,0.057435747,-0.047014803,-0.02184648,0.00025784472,0.018404085,-0.031878985,0.028958976,0.011874252,-0.04540746,-0.016676191,0.012014895,-0.037290376,0.015484078,0.018765738,0.0044369386,-0.034343578,0.029521545,0.038013678,-0.066383295,0.034986515,0.040130015,0.00935608,-0.004239369,0.001180393,0.0058868965,-0.014908113,-0.0135820545,0.008552408,-0.007474148,0.0052372618,-0.039299555,-0.00080702046,-0.022301894,-0.06766917,-0.009362777,0.044389475,-0.019609593,0.027940992,0.010688836,0.025851445,-0.0115929665,0.0013402903,-0.0045541404,0.0124569135,0.0132271,0.0019673218,0.0080836,-0.00056173315,0.02052042,0.0029133104,-0.011673334,-0.0039513865,0.007119193,0.010909845,-0.023614557,-0.017667387,-0.020118585,-0.0065432284,0.00842516,-0.006492999,-0.028583929,0.02297162,-0.0032280819,-0.018645188,0.019328307,-0.0062485486,-0.011157644,0.01685032,-0.021270515,-0.0029350766,0.023159144,0.014238386,-0.03080742,0.016689586,0.007742039,0.0025951904,0.019087207,-0.028744664,0.005424785,0.016394906,0.061239794,0.038951296,-0.004915793,0.035200827,0.029039344,0.024498597,-0.036968905,-0.01729234,0.013401228,0.014064258,0.01800225,-0.019837301,-0.030432375,0.03115568,-0.026628328,-0.024927223,0.03549551,-0.040960476,0.0071057985,-0.065151,0.032655865,0.061882734,-0.024069972,-0.022422444,0.02074813,0.018189773,0.029253656,0.014533066,-0.013615541,0.021458039,0.006837908,0.035897344,-0.02110978,-0.013106548,0.032655865,-0.022074187,-0.024712909,-0.009798099,-0.01903363,-0.008096994,0.024525385,-0.038120836,-0.016193988,-0.0146000385,0.030968156,0.027458789,-0.032093298,-0.055881985,0.030914577,-0.006352356,0.019890878,-0.02503438,-0.005508501,0.027860625,0.04805958,0.0085858945,-0.045005623,-0.016743165,0.034665044,-0.018779133,-0.001566323,-0.017506652,-0.043210756,-0.024351258,0.047523797,-0.030727055,0.003609826,0.016341329,-0.038013678,-0.0025298921,-0.012945814,-0.003867671,-0.014760773,-0.017573625,0.018779133,-0.0029166592,0.00061782275,0.0110839745,-0.0073535973,-0.022248317,0.018055828,0.03423642,0.0024160384,0.006198319,0.060757592,0.00053536263,-0.015952887,0.003857625,0.010608468,0.0006609364,0.0020342944,0.005136803,-0.009744521,0.0042192773,0.025931813,-0.05081885,-0.009965531,0.019207757,0.0060007498,0.011124158,0.0448181,-0.002444502,0.00771525,-0.0018400737,-0.0068914862,0.013039576,-0.0012214138,0.016676191,-0.03313807,-0.01170682,0.008599289,0.03739753,-0.007266533,0.020292714,0.012215813,0.037451107,-0.018605003,-0.013247191,0.005156894,0.02329309,0.013823156,0.00059982383,-0.0026487685,0.007032129,0.002317254,-0.05888236,-0.031530727,0.020319503,-0.02297162,-0.001932161,-0.009443144,0.026681906,-0.03142357,0.0030522787,-0.0840105,-0.0135820545,0.017787937,0.011827371,-0.0038509276,0.011659939,0.02885182,0.03150394,-0.027244477,-0.024659332,0.0109299375,0.01501527,-0.013186916,-0.009396263,0.04420195,-0.019475648,0.01687711,-0.0024897084,0.0015010246,-0.00984498,-0.0013930312,0.00084134395,-0.022342078,-0.0...', '2025-03-25 05:14:39.424333+00'), ('59', 'https://ai.pydantic.dev/multi-agent-applications/', '0', 'Multi-agent Applications', 'This document serves as a hub for PydanticAI, focusing on multi-agent applications and providing links to various sections including installation, getting help, contributing, troubleshooting, and specific tools related to agents, models, and dependencies.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Multi-agent Applications  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * Multi-agent Applications  [ Multi-agent Applications  ](./) Table of contents 
                  * Agent delegation 
                    * Agent delegation and dependencies 
                  * Programmatic agent hand-off 
                  * Pydantic Graphs 
                  * Examples 
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Agent delegation 
                * Agent delegation and dependencies 
              * Programmatic agent hand-off 
              * Pydantic Graphs 
              * Examples 
Multi-agent Applications There are roughly four levels of complexity when building applications with PydanticAI:
              1.', '{"source": "pydantic_ai_docs", "url_path": "/multi-agent-applications/", "chunk_size": 4965, "crawled_at": "2025-03-25T05:14:41.971672+00:00"}', '[-0.012320831,0.0096016545,0.048268918,-0.0064281067,0.0067451093,0.02271147,-0.011658649,0.031249406,-0.006498552,0.021358926,0.018710194,-0.09608699,-0.024233082,-0.0434223,0.008171621,-0.0078193955,-0.03133394,-0.0006375273,0.014074912,0.051960237,0.04770536,0.0307422,0.027614443,0.031559363,0.007572838,-0.0040364987,0.0010399444,0.043675903,0.005026251,-0.041139882,0.048888836,-0.017568985,-0.043929506,0.010461084,0.027374929,0.0027086106,-0.011729093,0.029671436,-0.018118456,0.03398267,0.017611252,-0.026346432,0.024007658,0.029136054,-0.048607055,0.024233082,-0.024965711,0.01804801,-0.002391608,0.012116541,-0.082561545,0.005022729,-0.026600035,0.0063224393,-0.02734675,0.0053115534,-0.032348346,-0.013849488,-0.02047132,-0.02257058,0.0026399267,-0.0037230186,0.010425861,0.075009845,-0.03851933,-0.012201075,-0.060188215,-0.0068296436,-0.0586666,-0.01903424,0.019865492,0.041280773,-0.028910631,-0.04370408,-0.03316551,-0.0318975,0.004015365,0.086788245,-0.02526158,-0.027389018,-0.012525123,0.034743477,-0.0096721,-0.006259039,-0.034123562,-0.04206976,-0.028417516,-0.029925039,-0.027558086,-0.03274284,-0.023866769,0.016892713,-0.031108515,0.016709555,0.09636877,0.006459807,0.017146315,0.03654687,0.00020219918,0.02283827,0.018400235,-0.039702807,-0.0652039,0.022373334,0.031108515,-0.019301932,0.0015832515,0.0134479515,-0.02454304,0.0029639737,-0.13762136,-0.021175768,-0.02073901,0.03570153,-0.05996279,-0.010827398,0.0072981026,0.0038462973,0.011806583,-0.055341598,-0.031164872,0.018287525,0.012968926,0.012419455,0.020922167,-0.0020006383,0.0014564506,-0.017329471,-0.046690952,-0.011243023,0.0063506174,-0.015864216,0.026050564,-0.024345795,-0.010996466,-0.004966373,-0.023444097,-0.02340183,-0.03356,0.024176726,0.048015315,-0.042971455,-0.0047796937,0.03981552,-0.028403427,0.037025895,-0.037871234,0.006333006,-0.03795577,0.008509757,0.023063695,0.005022729,-0.058610246,-0.044633955,-0.03626509,0.0123490095,0.0018174811,0.028685207,0.017385827,-0.045620188,-0.021809774,0.0572577,-0.03936467,-0.01945691,-0.039251957,-0.005783535,-0.05049498,0.003613829,-0.039251957,-0.029023342,-0.03285555,-0.061315335,-0.0277976,-0.0017893031,0.029023342,-0.04119624,-0.0391956,-0.034602586,-0.033080976,-0.035729706,-0.013786088,0.00023533036,-0.037589457,-0.015596525,-0.0022137344,-0.0127646355,0.0041773887,0.025529271,-0.031953856,0.061709825,0.026656391,0.034095384,0.031953856,0.03454623,0.036913183,-0.023725878,0.058610246,-0.0011685066,0.002532498,-0.009742544,0.010869664,0.0011922817,0.042830564,0.023120051,0.006843732,-0.042238828,0.01821708,-0.010052502,0.0011817149,-0.009911613,0.038265727,-0.06604924,0.015216121,-0.009305785,-0.051875703,-0.025472915,-0.03936467,0.018963795,-0.017695786,0.04697273,-0.046662774,0.023683611,0.016765911,-0.029699614,-0.0013631108,-0.002617032,0.03088309,-0.06948695,0.027896222,0.030685846,0.02893881,0.020908078,-0.009326919,-0.0064245844,0.0034870277,-0.041139882,0.03598331,-0.008101176,0.008601335,-0.006752154,0.00995388,0.004628237,0.0029199456,0.0072558355,-0.0017021275,0.0077700843,-0.010165215,-0.039111067,0.03482801,0.033447288,0.052833755,-0.0008475415,0.0034799834,0.010087725,0.0044204243,-0.02596603,-0.012511034,-0.017414005,-0.018738372,0.021682974,-0.02555745,0.050241377,-0.026811369,-0.0042795343,0.0068754326,-0.0039061757,-0.024021747,0.029164232,-0.038406618,-0.028234359,0.031869322,0.03482801,0.05145303,-0.002673388,-0.051143076,0.017540807,-0.0049558063,0.02454304,-0.0066957977,0.009277607,-0.014751185,0.004501436,0.06469669,0.014032645,0.019724602,0.038462974,0.010256793,-0.025275668,-0.005628556,0.0018914484,0.026487323,0.041562553,0.04032272,-0.037983947,0.0293333,-0.009164895,0.038716577,-0.0009967969,0.027487641,-0.009679144,0.053143714,0.020358607,-0.014976609,-0.01663911,0.020245895,0.024768464,-0.010883753,-0.019541444,0.047141798,-0.04091446,-0.033785425,0.00068287627,-0.016963158,-0.05080494,-0.025064334,-0.027403107,0.07422086,-0.023232764,0.04674731,-0.022950983,-0.06063906,-0.042689674,0.029136054,-0.013469085,-0.05613058,-0.027205862,0.031362116,0.004540181,-0.015427456,-0.018752461,0.021499816,-0.025881495,-0.011736138,0.026543679,-0.002447964,-0.020372696,-0.018822907,0.041731622,-0.011715004,0.029389657,-0.044324,-0.032207455,-0.058046684,-0.023458187,-0.016892713,0.019795047,0.019287843,0.041111708,0.012461722,0.0033021097,-0.0077348617,-0.018682016,-0.002462053,0.03981552,-0.017047692,-0.008016642,-0.016117817,-0.022697382,-0.01975278,0.024486685,-0.0858302,0.0019812658,0.0014687784,0.002447964,-0.02554336,0.031023981,-0.009503031,-0.029981395,-0.0034377163,0.0020076826,0.048860658,-0.00036543346,-0.010616062,-0.019132864,-0.013229572,-0.022063376,-0.02736084,0.0064774184,-0.0154979015,0.0071396013,0.03370089,0.013666331,0.008699958,0.0149484305,0.04159073,0.02652959,-0.0039308313,0.018907439,-0.016103728,0.061202623,0.046662774,-0.024951622,0.009580521,0.007939152,0.007960286,-0.0042830566,0.00047242182,-0.00571309,0.070050515,-0.002673388,-0.007076201,0.017414005,-0.037814878,0.0044098576,-0.031672075,0.028910631,0.076080605,0.026205542,-0.0057201344,-0.012990059,0.033954494,-0.05446808,0.020865811,-0.0051847524,-0.026135098,-0.04373226,-0.020978523,0.02145755,0.039449204,0.04006912,-0.0065689967,-0.0661056,-0.019428734,-0.0076151052,-0.059286516,0.051678456,0.06830348,-0.0263887,0.0010100052,-0.03947738,0.0063224393,0.027628532,0.048297096,-0.0043429346,0.006611264,-0.015864216,0.00910854,0.014708918,0.011271201,0.016977247,0.01606146,-0.061033554,-0.03640598,0.03437716,-0.01382131,-0.03541975,-0.015991017,-0.05401723,0.005131919,-0.028149825,-0.011369824,-0.01635733,-0.0016862773,0.02765671,-0.024373973,-0.04500027,0.0736573,-0.013229572,0.043225057,0.0060723596,0.05122761,0.017836675,-0.033644535,0.02848796,-0.019203309,-0.00021408677,0.024458507,-0.018794728,-0.015469723,0.0030749245,0.064020425,-0.014779363,-0.009643922,-0.036772292,-0.017554896,-0.035588816,0.05660961,0.022528313,-0.008678825,0.010827398,0.025515182,-0.029079698,-0.0011500147,0.023232764,0.018822907,0.05697592,-0.02130257,0.00026681047,-0.0077066836,0.021978842,-0.01552608,0.008523846,0.051143076,-0.016850445,0.016906802,-0.028572494,-0.024218993,-0.016681377,-0.03226381,-0.012292653,0.022218356,-0.013948111,-0.019625979,0.025980119,0.008044819,-0.031108515,0.015850127,-0.012539211,-0.003575084,0.026036475,-0.053763628,-0.020090915,-0.0013419774,0.035729706,-0.00062079664,0.030911269,0.0019742213,0.019978205,-0.0003326325,-0.013764954,0.019470999,-0.038124837,-0.023768146,0.015427456,0.01692089,-0.027741244,-0.023923125,0.00082993024,-0.021612529,-0.017738054,0.018935617,-0.0050473846,0.027022704,-0.005262242,-0.057680372,0.03356,0.0076151052,-0.0014617338,-0.039843697,-0.020668564,-0.0046775485,-0.0074671707,-0.012736457,-0.0016501743,-0.016484132,-0.0020112048,0.011954518,-0.011461402,-0.0008140801,0.029248767,0.064640336,-0.012363099,0.030375887,-0.027529908,0.025134778,0.017456273,0.0016334436,-0.01651231,0.03130576,-0.0017540806,-0.003951965,-0.029389657,0.026430966,-0.005318598,-0.01862566,0.03339093,0.02806529,-0.015934661,-0.03327822,-0.008805626,0.006896566,-0.0025800483,-0.018583393,-0.006163938,0.0008378553,-0.0048430944,0.0028900064,-0.021401193,-0.019541444,-0.010263838,-0.029558726,-0.020119093,0.0075164824,0.018907439,-0.02031634,-0.0149484305,-0.028586583,-0.0008633916,0.008094131,0.028149825,0.005308031,-0.0074249036,-0.022824181,-0.02016136,-0.018512947,0.009975013,0.036687758,0.00037137727,-0.042379715,0.012370143,0.014159447,-0.04711362,-0.016610933,0.00047418295,0.0015462679,0.004364068,-0.02227471,0.012327876,-0.015751503,-0.004924106,-0.0033144376,0.0034394774,0.007333325,-0.028403427,-0.013504308,0.022457868,-0.022922805,0.02554336,0.049762353,-0.033334576,-0.0014441226,0.0096721,0.023796324,0.019879581,0.012151764,-0.0006960847,0.004360546,-0.04643735,-0.01707587,0.0037265408,-0.02059812,0.04116806,0.035363395,0.011982695,0.0020164882,0.0080870865,-0.015610614,-0.021175768,0.0222888,-0.032658305,0.017273115,0.029446013,-0.016188262,-0.0307422,0.024641663,-0.018977884,-0.019217398,0.0037899413,0.019358288,-0.022105644,0.0051706634,-0.009636877,0.0123349205,0.00874927,0.025627894,0.003937876,-0.0063400506,-0.026825458,-0.022063376,0.027050883,-0.057624016,0.026402788,0.024162637,-0.011996784,-0.011468447,0.023937214,0.03192568,0.049734175,0.005617989,-0.0040329765,-0.01297597,0.010947154,0.035222504,0.03031953,-0.012792814,-0.015554258,0.010489262,-0.030347709,-0.015976928,0.030516777,-0.030122286,-0.0032246201,-0.076531455,0.04345048,0.05122761,-0.02878383,0.014582116,0.017878942,0.018273436,0.026332343,0.01347613,-0.023021428,0.009481898,0.0010461083,0.010918976,-0.0030062406,-0.00915785,0.032094747,-0.014976609,-0.12939338,-0.029840505,0.014427138,0.0019249098,0.0058152354,-0.028023023,-0.023218675,-0.005153052,0.016244618,0.027459463,-0.02258467,-0.019414645,-0.0011456119,-0.007019845,0.0058187577,-0.0109682875,0.0037124518,-0.013201394,0.012891436,-0.0066218306,-0.021373015,-0.0265155,0.028135736,-0.008601335,0.0016334436,-0.00234758,-0.03417992,-0.027219951,0.025458826,-0.0124899,-0.0017822586,0.0032334258,0.002180273,0.0018932095,-0.023951301,0.007650328,-0.012933703,-0.046916373,0.022683293,-0.03933649,-0.0003775412,-0.0031189527,-0.009629833,-0.014751185,-0.011905206,-0.03147483,-0.025317935,0.018400235,0.04274603,-0.015582436,0.010355416,-0.002787861,0.013694509,-0.0054383543,-0.014201714,0.015920572,0.019921849,-0.009087406,0.0055933334,-0.021950664,-0.0097989,-0.0035099224,0.0089183375,-0.042971455,0.036687758,-0.0020922166,-0.02807938,0.02667048,-0.023444097,-0.012644879,0.005318598,-0.008439312,-0.013497263,0.0056743454,0.017667608,0.015991017,-0.036744114,6.395086e-05,-0.02736084,0.011595248,0.0021186336,-0.0055228886,-0.009552343,-0.009150807,-0.0009012558,0.0012257431,-0.003980143,0.014286247,-0.02905152,-0.03640598,-0.044521242,-0.05528524,0.012243343,-0.0032316647,-0.018935617,0.00021309615,-0.016329153,0.01177136,-0.11507896,-0.012736457,-0.002631121,-0.012299698,0.025853317,-0.015737414,0.031643897,0.03206657,-0.018667927,-0.024247171,0.019851403,-0.009939791,-0.027839867,0.004744471,0.016089639,-0.017428095,0.027431285,0.00030687606,0.03415174,0.012250387,-0.02555745,-0.0140...', '2025-03-25 05:14:42.401602+00'), ('60', 'https://ai.pydantic.dev/multi-agent-applications/', '1', 'Multi-Agent Applications Overview', 'This document outlines various workflows for multi-agent applications using `pydantic_ai`, including single agent workflows, agent delegation, programmatic agent hand-off, and graph-based control flow. It emphasizes the potential to combine different strategies and explains agent delegation, where one agent can delegate tasks to another and regain control afterward.', 'Single agent workflows  what most of the `pydantic_ai` documentation covers
              2. Agent delegation  agents using another agent via tools
              3. Programmatic agent hand-off  one agent runs, then application code calls another agent
              4. [Graph based control flow](../graph/)  for the most complex cases, a graph-based state machine can be used to control the execution of multiple agents
Of course, you can combine multiple strategies in a single application. Agent delegation "Agent delegation" refers to the scenario where an agent delegates work to another agent, then takes back control when the delegate agent (the agent called from within a tool) finishes. Since agents are stateless and designed to be global, you do not need to include the agent itself in agent [dependencies](../dependencies/). You'll generally want to pass [`ctx.usage`](../api/tools/#pydantic_ai.tools.RunContext.usage) to the [`usage`](../api/agent/#pydantic_ai.agent.Agent.run) keyword argument of the delegate agent run so usage within that run counts towards the total usage of the parent agent run. Multiple models Agent delegation doesn't need to use the same model for each agent. If you choose to use different models within a run, calculating the monetary cost from the final [`result.usage()`](../api/agent/#pydantic_ai.agent.AgentRunResult.usage) of the run will not be possible, but you can still use [`UsageLimits`](../api/usage/#pydantic_ai.usage.UsageLimits) to avoid unexpected costs. agent_delegation_simple.py
                        
                                                from pydantic_ai import Agent, RunContext
                        from pydantic_ai.usage import UsageLimits
                        
                        joke_selection_agent = Agent(  # (1)!
                            'openai:gpt-4o',
                            system_prompt=(
                                'Use the `joke_factory` to generate some jokes, then choose the best. '
                                'You must return just a single joke.'
                            ),
                        )
                        joke_generation_agent = Agent(  # (2)!
                            'google-gla:gemini-1.5-flash', result_type=list[str]
                        )
                        
                        
                        @joke_selection_agent.tool
                        async def joke_factory(ctx: RunContext[None], count: int) -> list[str]:
                            r = await joke_generation_agent.run(  # (3)!
                                f'Please generate {count} jokes.',
                                usage=ctx.usage,  # (4)!
                            )
                            return r.data  # (5)!
                        
                        
                        result = joke_selection_agent.run_sync(
                            'Tell me a joke.',
                            usage_limits=UsageLimits(request_limit=5, total_tokens_limit=300),
                        )
                        print(result.data)
                        #> Did you hear about the toothpaste scandal? They called it Colgate.
                        print(result.usage())
                        """
                        Usage(
                            requests=3, request_tokens=204, response_tokens=24, total_tokens=228, details=None
                        )
                        """
                        

              1. The "parent" or controlling agent.
              2. The "delegate" agent, which is called from within a tool of the parent agent.
              3. Call the delegate agent from within a tool of the parent agent.
              4. Pass the usage from the parent agent to the delegate agent so the final [`result.usage()`](../api/agent/#pydantic_ai.agent.AgentRunResult.usage) includes the usage from both agents.
              5. Since the function returns `list[str]`, and the `result_type` of `joke_generation_agent` is also `list[str]`, we can simply return `r.data` from the tool.
_(This example is complete, it can be run "as is")_ The control flow for this example is pretty simple and can be summarised as follows:
                        
                                                graph TD
                          START --> joke_selection_agent
                          joke_selection_agent --> joke_factory["joke_factory (tool)"]
                          joke_factory --> joke_generation_agent
                          joke_generation_agent --> joke_factory
                          joke_factory --> joke_selection_agent
                          joke_selection_agent --> END', '{"source": "pydantic_ai_docs", "url_path": "/multi-agent-applications/", "chunk_size": 4707, "crawled_at": "2025-03-25T05:14:42.435486+00:00"}', '[-0.0059859008,0.028327642,0.03362346,-0.03417303,-0.01318959,0.03869446,-0.015550227,0.006675981,-0.010791482,0.01940968,0.031250335,-0.03352354,0.004502696,-0.016536947,-0.010092035,-0.050385233,-0.039918493,-0.001402799,0.007743888,0.04224166,0.039219048,0.042866167,0.030201163,0.026204318,-0.0057360977,-0.0034347891,-0.0016533826,0.03070077,-0.0060670865,-0.016799241,0.014051409,-0.013027218,-0.05275836,-0.007213057,0.0040967665,0.021233242,0.013601765,0.024780441,-0.016112283,0.052808322,0.016524458,-0.018285569,-0.008618198,0.041417312,0.0007888305,0.042741265,-0.0137516465,-0.00061826204,-0.0019906163,-0.009885947,-0.021845259,0.0473876,0.0087118745,0.008355905,-0.029576655,0.01407639,0.009042863,4.9789804e-05,-0.018785173,-0.048761513,0.014488565,-0.01839798,0.03242441,0.05710493,-0.026104396,-0.0064574033,-0.02022154,0.027478313,-0.03454773,-0.03317382,-0.0012310597,0.048012108,-0.040393118,0.014725878,-0.03312386,-0.011559626,0.008480807,0.037045762,-0.0034628918,0.010323103,-0.004390285,-0.021170791,0.009648635,0.020871028,-0.02288194,-0.041966878,-0.019834345,-0.02650408,-0.04483961,-0.060052603,-0.03152512,0.003394196,-0.01323955,0.02541744,0.086931385,0.037270583,-0.0092614405,0.0066385106,0.02285696,0.0174862,0.059203275,-0.018622803,-0.053957414,0.050709978,0.028577445,0.0022997474,0.00037528973,0.024368268,-0.045314234,0.021495534,-0.06330004,-0.028902188,-0.011134962,0.028102819,-0.058303982,-0.020696165,0.010735277,0.021820279,0.010928874,-0.011097491,-0.042116757,-0.004799337,0.023069292,-0.0037345525,0.019022487,0.024905343,-0.0031303419,-0.051659226,-0.000353432,-0.017261377,0.03337366,-0.0091865,-0.01834802,-0.020683676,-0.03352354,-0.03140022,0.010953855,-0.017398767,-0.03264923,0.023593878,0.035671845,-0.024006054,-0.029751519,0.03702078,-0.023006842,0.08977914,-0.04049304,0.005230247,-0.012852356,0.017711021,0.000483993,-0.018797664,-0.044190124,-0.02107087,-0.045289256,0.019659484,-0.04571392,0.036471214,0.04831187,-0.022194982,-0.034722596,0.031125434,-0.034023147,-0.0126650045,-0.0509348,-0.021058379,-0.018323038,0.0045557795,-0.040817786,0.0011170871,-0.013539314,-0.05255852,-0.03242441,0.0020124742,0.025729693,-0.07079413,-0.060901932,-0.038244814,0.0014301213,-0.027952937,-0.015088092,0.0039812326,-0.06529846,-0.026604002,-0.018872604,-0.020383911,0.032674212,0.033673424,-0.021745337,0.06809626,0.048037086,0.03604655,-0.005882857,0.029176971,0.019609524,-0.012296545,0.036446236,0.0013153681,-0.0068071275,-0.028902188,0.051609267,0.0020671184,0.031425197,0.0059921457,-0.018772684,-0.044315025,0.022369845,-0.024368268,0.024193404,-0.0042653834,0.010241916,-0.059303194,0.0065573244,-0.054906666,-0.06300028,-0.06679728,-0.03971865,0.054806743,-0.015625168,0.08163557,0.009323891,0.01275868,-0.005305188,-0.04486459,-0.020421382,-0.0018438572,-0.0129397875,-0.06235079,-0.009398832,0.032998957,-0.015212993,0.0060795764,0.004321589,-0.05265844,0.038294777,-0.0546069,0.031375237,-0.04126743,-0.015088092,-0.038069952,-0.0013949927,-0.009036617,-0.006110802,0.0019437784,-0.01923482,0.025804633,-0.019084938,-0.0076189865,0.05715489,0.0037689004,0.06175126,-0.0064698937,-0.014263743,0.006682226,-0.011097491,-0.02296937,0.006932029,-0.023518937,-0.01857284,0.03627137,0.012034252,0.010866423,-0.028352622,0.03502236,-0.022694588,0.037270583,0.043340795,0.014413624,0.00481495,-0.007800094,0.008330924,0.033023935,0.008231004,-0.01834802,-0.038094934,-0.0053332904,0.033048917,0.008686894,-0.035596903,-0.008099857,0.0013317614,0.026579022,0.042716287,0.0066072852,0.016087303,0.006138905,-0.033098876,0.008168553,-0.00929891,0.00880555,-0.015487776,0.055506192,0.024792932,-0.038844343,0.034947418,0.00041334564,0.0125213675,-0.00038446218,-0.0073566935,-0.030051282,0.01754865,-0.015100582,-0.018647783,-0.022444785,0.0077251527,-0.006419933,-0.011753224,-0.013714176,0.0202715,-0.0030335432,-0.017136475,0.050510135,-0.006788392,-0.009099068,-0.02817776,-0.002699432,0.056705244,-0.045189332,0.041142527,-0.03172496,-0.01492572,-0.044389963,0.03339864,-0.017923353,-0.011259863,-0.017835923,0.01846043,0.013914018,-0.061951105,-0.010191956,-0.0009172448,0.0009562765,0.006501119,0.060002644,0.032724172,-0.028777286,-0.012215359,0.040792804,0.039244026,0.043340795,-0.056855127,0.0145884855,-0.03169998,-0.06444913,-0.034647655,0.051659226,0.017211415,0.04289115,-0.02360637,0.021870239,0.04294111,0.0067509217,-0.01656193,0.05175915,0.009748556,-0.002676013,0.0014402695,-0.0055487454,-0.043340795,0.0010663458,-0.075190656,0.012121683,0.008099857,0.024318306,-0.054057334,0.019784385,0.008112348,-0.039918493,0.0046557006,0.03334868,0.03869446,0.025954515,-0.032349467,-0.008118592,-0.020283991,-0.0022997474,-0.014838289,0.030550888,-0.018697742,-0.0017033431,0.018410468,0.0010124821,-0.04481463,-0.013726667,0.012046742,0.04224166,-0.0087431,0.0145759955,-0.023294115,-0.0014535403,0.06429925,-0.041767035,-0.0029835827,-0.0016096671,-0.036446236,-0.0089866575,0.01411386,0.013426903,0.027828036,-0.014201292,-0.0070257047,0.0065385895,-0.03427295,-0.025379969,-0.01315212,0.025167637,0.041692093,0.016549438,0.019272288,0.03609651,0.057754416,0.0076627024,0.008168553,-0.014713387,-0.037220623,-0.021620436,-0.029451756,0.015500266,0.0334486,0.0758901,0.015637659,-0.07169341,0.026978707,-0.004793092,-0.043365773,0.036621097,0.04389036,-0.0071755867,0.022569686,-0.03409809,0.032074686,0.051559307,0.02015909,-0.02557981,-0.01759861,-0.018198136,0.075390495,0.0022872572,-0.00793124,0.0076064966,0.014600976,-0.020059168,-0.0059609204,0.056855127,-0.04673811,-0.011547136,-0.062200908,-0.07224298,0.039693672,-0.03627137,-0.011946821,-0.011053775,-0.023081783,0.032099664,-0.023256645,-0.032124646,0.08308443,0.01933474,0.027678154,0.0349724,0.044464905,0.017785963,-0.039094146,0.018860115,-0.024942813,0.017760983,0.029201953,-0.015188013,-0.012046742,0.034522753,0.027703134,-0.03604655,-0.01851039,-0.052408636,0.02118328,-0.034897458,0.053158045,-0.017760983,0.023256645,-0.010660336,0.013326982,-0.0024699257,-0.012271564,0.023319095,-0.00014266084,0.05895347,0.012159153,-0.0034129312,-0.0035971608,0.01937221,0.012334015,0.008343415,0.07708915,-0.013077179,0.010185711,0.0070194597,0.017835923,-0.00917401,-0.025979495,-0.024293326,-0.004056174,0.0014363664,-0.020059168,0.044140164,0.0023684432,-0.033898246,0.03067579,-0.0006159201,0.002705677,0.021620436,-0.044389963,-0.01676177,0.01676177,0.02104589,-0.020796087,-0.023618858,-0.0032849074,-0.0072317924,-0.011116226,-0.025030244,0.03427295,-0.015512756,-0.013826587,0.011690773,0.029451756,-0.038894303,0.026254278,-0.010391798,-0.008237248,0.003550323,-0.0016362086,0.0029773377,-0.0041841976,0.0011319191,-0.03259927,0.0148507785,0.021870239,0.016886672,-0.016087303,0.007000725,-0.016499478,0.027453333,-0.023006842,-0.017973315,-0.015287934,0.010953855,0.031075474,-0.014476075,0.013501843,-0.0005433212,0.028102819,-0.006307522,0.017798452,-0.013851567,-0.015987381,0.00016432343,-0.0024870995,-0.004424633,0.018947545,-0.030001322,-0.012627534,-0.01847292,-0.008056141,-0.02720353,0.005842264,0.03869446,-0.0009414445,-0.0013184906,-0.0281278,0.021220751,0.030226143,0.026004476,-0.017498689,-0.031974763,0.0041998103,-0.015600188,0.053407848,0.01407639,-0.019497111,0.02368131,-0.008056141,-0.022657117,0.00438404,-0.020446362,0.021408103,-0.028502503,-0.032149624,0.010747767,-0.03237445,-0.0049710767,0.0068758233,-0.02360637,-0.0028258946,-0.0049991794,-0.047762305,0.015063112,0.0076689473,0.01584999,-0.028427564,0.0129397875,0.041916918,-0.023506448,-0.044414945,-0.0137641365,-0.017973315,-0.009142784,-0.008630688,0.014688407,-0.02112083,0.008586973,0.024393247,-0.032674212,-0.024455698,-0.008936697,0.0019984227,0.008899226,-0.026928747,0.0063168895,0.049086258,-0.03609651,0.017473709,0.02195767,0.009929663,-0.007806339,0.005083488,0.034747574,-0.017698532,-0.013651725,-0.014426114,0.020896008,-0.061101776,0.005970288,0.0095362235,0.012071722,-0.025754673,-0.017736001,-0.03702078,0.014638446,0.008561992,-0.019622013,0.007269263,0.012334015,0.015200503,-0.017261377,-0.009042863,0.027603215,-0.023581387,-0.017798452,0.011278599,-0.020846047,-4.3813077e-05,-0.044065222,0.026653964,0.0004055393,0.013639235,0.033873264,-0.005982778,-0.017148966,-0.014451094,0.02281949,-0.029301872,0.012977257,-0.018710233,-0.011378519,0.026803846,0.021445574,0.033723384,0.025042735,0.024505658,-0.006320012,-0.049361043,0.018273078,0.029751519,-0.0041779527,-0.029676577,0.007631477,-0.004449613,-0.03454773,-0.03352354,0.03140022,-0.017186435,-0.022657117,-0.009567449,0.03607153,0.057754416,-0.056605324,0.028352622,-0.00529582,0.029251913,0.016324615,0.0010749329,-0.01183441,5.0838782e-05,0.014338683,0.021832768,0.0075128204,-0.0047087837,0.0052115116,-0.016087303,-0.054806743,-0.019497111,-0.0071943216,-0.004799337,-0.0015456551,-0.010547925,-0.04846175,-0.018947545,0.030475946,0.0009812568,-0.0115783615,0.014600976,0.023568898,-0.019622013,-0.011147452,-0.023568898,-0.015150542,-0.0349724,-0.0017158333,0.0140389195,-0.016636869,-0.021820279,0.0049460963,-0.030575868,-0.0064948737,0.00022091939,-0.029826459,-0.032899033,0.024268346,0.005298943,-0.006407443,-0.00917401,0.004967954,-0.00919899,-0.031050494,-0.03692086,-0.018810155,-0.0421917,0.005511275,-0.057704456,-0.00662602,0.027453333,0.00040710057,-0.01756114,0.00021838232,-0.026154358,0.011035041,0.032749154,0.04301605,-0.009036617,0.019821856,-0.03956877,0.00927393,-0.004811827,0.01496319,-0.0083059445,0.025929535,-0.032049704,-0.04289115,-0.024380757,-0.014326193,0.02285696,-0.008074877,-0.012159153,0.04394032,-0.010866423,-0.03082567,0.008237248,-0.009748556,-0.008062387,-0.0040905215,-0.037520386,0.00657606,-0.012234095,0.021745337,0.013027218,-0.022719568,0.019009996,-0.017636081,0.006694716,-0.01756114,0.024780441,0.0015971769,0.00082591065,0.015974892,0.015400345,-0.024205895,-2.9151797e-05,0.013589274,-0.005083488,-0.0335735,-0.032224566,-0.014675917,0.008549502,0.016949123,0.01928478,0.01410137,0.036246393,-0.080036834,-0.020109128,0.028252702,-0.032099664,-0.0007747791,-0.010560415,0.034697615,0.035422042,-0.033073895,0.0076627024,-0.0071318713,-0.012446427,-0.012490142,-0.044115182,0.027453333,-0.008942942,-0.0005187312,0.0008118592,0.03577177,-0.0067446767,-0.020608734,-0.004705661...', '2025-03-25 05:14:42.653067+00'), ('61', 'https://ai.pydantic.dev/multi-agent-applications/', '2', 'Agent Delegation and Dependencies in Multi-Agent Applications', 'This section discusses the initialization and management of dependencies in agent delegation, emphasizing that delegate agents should generally share the same or a subset of dependencies as the calling agent. It warns against initializing new dependencies within tool calls due to potential performance issues and inefficiencies.', 'Agent delegation and dependencies Generally the delegate agent needs to either have the same [dependencies](../dependencies/) as the calling agent, or dependencies which are a subset of the calling agent's dependencies. Initializing dependencies We say "generally" above since there's nothing to stop you initializing dependencies within a tool call and therefore using interdependencies in a delegate agent that are not available on the parent, this should often be avoided since it can be significantly slower than reusing connections etc. from the parent agent. agent_delegation_deps.py
                        
                                                from dataclasses import dataclass
                        
                        import httpx
                        
                        from pydantic_ai import Agent, RunContext
                        
                        
                        @dataclass
                        class ClientAndKey:  # (1)!
                            http_client: httpx.AsyncClient
                            api_key: str
                        
                        
                        joke_selection_agent = Agent(
                            'openai:gpt-4o',
                            deps_type=ClientAndKey,  # (2)!
                            system_prompt=(
                                'Use the `joke_factory` tool to generate some jokes on the given subject, '
                                'then choose the best. You must return just a single joke.'
                            ),
                        )
                        joke_generation_agent = Agent(
                            'gemini-1.5-flash',
                            deps_type=ClientAndKey,  # (4)!
                            result_type=list[str],
                            system_prompt=(
                                'Use the "get_jokes" tool to get some jokes on the given subject, '
                                'then extract each joke into a list.'
                            ),
                        )
                        
                        
                        @joke_selection_agent.tool
                        async def joke_factory(ctx: RunContext[ClientAndKey], count: int) -> list[str]:
                            r = await joke_generation_agent.run(
                                f'Please generate {count} jokes.',
                                deps=ctx.deps,  # (3)!
                                usage=ctx.usage,
                            )
                            return r.data
                        
                        
                        @joke_generation_agent.tool  # (5)!
                        async def get_jokes(ctx: RunContext[ClientAndKey], count: int) -> str:
                            response = await ctx.deps.http_client.get(
                                'https://example.com',
                                params={'count': count},
                                headers={'Authorization': f'Bearer {ctx.deps.api_key}'},
                            )
                            response.raise_for_status()
                            return response.text
                        
                        
                        async def main():
                            async with httpx.AsyncClient() as client:
                                deps = ClientAndKey(client, 'foobar')
                                result = await joke_selection_agent.run('Tell me a joke.', deps=deps)
                                print(result.data)
                                #> Did you hear about the toothpaste scandal? They called it Colgate.
                                print(result.usage())  # (6)!
                                """
                                Usage(
                                    requests=4,
                                    request_tokens=309,
                                    response_tokens=32,
                                    total_tokens=341,
                                    details=None,
                                )
                                """', '{"source": "pydantic_ai_docs", "url_path": "/multi-agent-applications/", "chunk_size": 4164, "crawled_at": "2025-03-25T05:14:42.434585+00:00"}', '[-0.027226264,0.015682118,0.062306765,-0.011326706,0.01709219,0.064836994,0.018963503,0.013547241,-0.01325073,0.0075445483,-0.0005324837,-0.05226494,0.016393743,-0.03178594,-0.024300693,-0.06494242,-0.018976681,-0.008460437,-0.006394746,0.05993468,0.054030824,0.03840142,0.06789435,0.01905575,-0.02070303,0.0031117143,0.024327049,0.009422448,0.039824672,-0.02809603,0.056666475,-0.01671002,-0.039376613,0.042750243,0.011781355,0.052818425,0.025368132,0.03020455,-0.043778148,0.02266659,0.010404228,-0.028570445,0.012104223,0.03834871,-0.036398325,0.026330143,-0.03418438,-0.007893772,0.003969948,-0.006384862,-0.033261903,0.011082908,0.025552627,0.03613476,-0.015827078,0.020373575,0.011807712,-0.010654615,-0.033604536,-0.023615424,-0.0041742106,-0.011386008,-0.010707328,0.058458716,-0.014970492,-0.02349682,-0.019332493,0.0009957815,-0.048996735,0.012822437,-0.024985962,0.045148686,-0.03797972,-0.022007678,-0.049576577,-0.006687962,0.00978485,0.04991921,-0.01099725,-0.017882885,-0.052212227,-0.013692202,-0.021585973,-0.007584083,-0.026303787,-0.065785825,-0.033182833,-0.021137914,-0.03787429,-0.004803472,-0.04941844,0.003098536,-0.04172234,0.030942531,0.06199049,0.048759524,0.024682863,-0.0016736378,-0.010476708,0.006038933,0.05376726,0.0015270297,-0.069686584,0.022113103,0.03877041,0.031759582,-0.028886724,-0.0024676274,-0.054716095,0.0304154,-0.057088178,-0.012624764,-0.006147654,0.012011975,-0.04346187,-0.037109952,-0.0037854523,0.02296969,0.013112359,-0.0076104393,-0.050868046,0.028438663,-0.002459391,0.022561165,0.027674325,0.024933249,0.00084505527,-0.04796883,-0.029809201,-0.015879791,0.033446398,-0.01739529,0.012203059,-0.017658856,-0.04127428,-0.021177448,-0.010384461,-0.04886495,-0.024603793,-0.0011629806,0.043013807,-0.020584427,-0.0030771215,0.043857217,-0.012558872,0.11765542,-0.03705724,0.020979773,-0.040193662,0.028122386,0.004885836,-0.016248783,-0.04082622,-0.013758093,-0.02266659,0.017289864,-0.0468355,0.021796826,0.080387324,-0.01506274,-0.03247121,0.024234802,0.0021216983,0.0023407866,-0.043013807,-0.021559617,0.0025153984,0.024076663,-0.027463473,0.0011432132,-0.008974388,-0.04783705,-0.009198419,0.037109952,0.04211769,-0.050314557,-0.022772016,-0.029176645,-0.014219332,-0.046519224,0.007953074,-0.0019026098,0.0048364177,-0.025012318,-0.062095914,-0.020979773,0.027252622,0.045596745,-0.009666246,0.06262305,0.029914627,0.03255028,-0.001487495,0.022244886,0.04185412,0.0027608434,0.034026243,-0.0053800205,-0.013092591,-0.04878588,0.02996734,-0.0064804046,0.035054144,0.018251875,0.0021233456,-0.054030824,-0.003848049,-0.03500143,0.01806738,-0.014667393,0.051184323,-0.041695982,-0.0059829256,-0.017909242,-0.049075805,-0.041300636,-0.0117286425,0.047520768,-0.035265,0.052765712,-0.013534063,0.012631353,0.026725492,-0.061410647,-0.030257262,0.0037228556,-0.010951126,-0.0502882,-0.010489887,0.031390592,-0.007926717,-0.01784335,-0.0032715006,-0.026172005,0.0067933877,-0.051843237,0.027832463,-0.024340227,-0.03268206,-0.021954965,-0.002998052,-0.015194522,-0.028043317,-0.011965851,-0.023602245,0.011735232,-0.041748695,-0.017131725,0.06383544,0.0029025096,0.031654157,-0.01656506,0.022495274,0.0024099725,-0.026646422,-0.029492924,0.01219647,-0.071426116,-0.037478942,0.001200868,0.017830173,0.02907122,-0.003946886,0.017896064,-0.008256174,0.007221681,0.03357818,-0.017039478,-0.027068125,0.026316965,0.04269753,0.003946886,0.025394488,-0.040720794,-0.042223115,-0.004714519,0.017448002,-0.010740274,-0.022350311,-0.019912336,-0.018541798,0.040694438,0.026870452,0.012960809,-0.0036339024,0.018080559,-0.017606143,0.0073402855,-0.018963503,0.022165816,0.015141809,0.06399358,0.0368991,-0.03255028,0.004365295,-0.013310033,0.00632556,0.006674784,-0.013171661,-0.045359537,0.009508108,0.0061871884,-0.023628602,0.0027097776,-0.003373632,0.0006132004,0.02748983,0.025816191,0.04477969,-0.004510256,0.012782902,0.04812697,-0.02341775,0.005897267,-0.03855956,-0.016222427,0.05189595,-0.059091274,0.06378273,-0.025289062,-0.048812237,-0.02485418,0.02455108,-0.016736377,0.00079769595,-0.017065834,0.024221623,0.016578238,-0.05603392,0.0031545437,0.020663496,0.002601057,0.042091332,0.050657194,0.046018448,-0.021151092,-0.026106114,0.02801696,0.056139346,0.031153383,-0.05300292,0.0052910675,-0.0077224546,-0.0502882,-0.008763536,0.052238584,-0.003765685,0.042144045,-0.026554175,0.018462729,0.023154186,-0.008124392,-0.01935885,0.03183865,-0.017737925,-0.02221853,-0.007366642,0.02100613,-0.021928608,-0.012591818,-0.053029276,0.022916976,-0.0073139286,0.013138715,-0.021954965,0.0071426113,0.012512748,-0.034843292,0.0021974733,0.035739414,0.03276113,0.048074257,-0.068210624,-0.01859451,-0.01656506,-0.0007824586,-0.029624706,0.033920817,0.012591818,0.008249585,0.032260355,-0.022574343,-0.007050364,-0.01717126,0.036266543,0.065416835,-0.019543344,-0.004062196,-0.017961955,0.0007009182,0.05814244,-0.05656105,-0.00963989,0.013072824,-0.03434252,-0.013850341,0.0058610267,-0.0028382656,0.011484845,0.012861972,-0.0056435857,0.009896866,-0.002741076,-0.028781299,-0.04625566,0.031680513,0.033947174,0.0018762534,0.033446398,-0.019477453,0.071057126,0.010885235,0.00632556,-0.0016703432,-0.03418438,-0.03697817,-0.0492603,-0.011768177,0.026435569,0.04862774,0.024985962,-0.02598751,-0.0050703315,-0.010074772,-0.0115375575,-0.007742222,0.016657308,-0.0026735375,0.007794935,-0.030916175,0.0019124935,0.0304154,0.0064046294,-0.0038183979,-0.033261903,-0.033314615,0.046782788,0.02070303,-0.004006188,-0.010582135,0.0019059044,-0.03803243,-0.020979773,0.04699364,-0.044305276,-0.020070475,-0.06267576,-0.06494242,0.03012548,-0.013020111,-0.026475104,-0.027120838,0.0013672435,0.034975074,0.011432132,-0.014575144,0.048021544,0.040536296,0.012710422,0.02928207,0.02598751,-0.0040654903,-0.044331633,0.065574974,-0.0043488224,0.01731622,0.016011573,-0.011530968,-0.015708474,0.013613132,0.03803243,0.005264711,-0.016551882,-0.055295937,0.0067274966,-0.054663382,0.06457342,-0.009119349,-0.004872658,0.016802268,0.021520082,0.009020512,0.0131584825,-0.00033975177,-0.02011001,0.06004011,0.0068131555,-0.017909242,-0.029730132,0.0055315704,0.008499972,0.009877099,0.07975477,-0.014878244,0.02213946,0.027147194,0.0038216924,-0.014324758,-0.028148742,-0.018871253,0.024221623,-0.03215493,-0.023233255,0.01898986,-0.005225176,-0.005669942,0.013165072,0.0016118647,-0.019978227,0.0032451442,-0.026198361,-0.0018004784,0.0003405754,0.0026208244,-0.029993698,-0.011227869,0.013151893,0.002026156,-0.03117974,-0.009323612,0.014996849,-0.031944077,-0.0060521113,-0.0064474586,0.023430929,-0.040457226,0.0027970835,-0.019714663,-0.017500715,0.012717011,0.017408468,-0.013665846,0.011438721,-0.008480204,-0.03276113,0.0350805,0.030468114,-0.009975935,-0.0070371856,0.00843408,-0.023365038,0.016472813,-0.013916232,-0.023654958,-0.03637197,-0.0084274905,0.015550335,0.00971237,0.011715464,-0.015036384,0.052660286,0.0049879677,-0.0005419555,-0.0040720794,0.012835615,0.0073073395,0.0066550164,-0.0031528964,-0.0042203343,-0.020518536,0.0011358004,-0.016854981,-0.015234057,-0.016354209,0.00062967325,0.012703833,-0.01182089,0.0018630751,-0.016986765,-0.006964705,0.025592161,-0.0014496075,-0.019398384,-0.02928207,0.0069449376,0.025223171,0.034948718,0.0009801324,-0.0067933877,-0.007867415,0.003286326,-0.013079413,0.018765828,0.002647181,0.012763135,-0.02379992,-0.01400848,0.0070898985,-8.303327e-05,-0.00037207967,0.014061193,0.0072480375,0.0075445483,-0.006911992,-0.03650375,-0.0089282645,-0.015682118,0.019003037,-0.026527816,0.026685957,0.03215493,-0.022916976,-0.037162665,-0.019965049,-0.017685212,-0.010674383,0.014667393,-0.0036932046,-0.020913882,0.0041379705,0.03199679,-0.001317825,-0.0049319603,-0.034896005,-0.010371283,-0.010634848,-0.0068263337,-0.004872658,0.031812295,-0.015655762,0.033314615,0.019516988,-0.0044114194,0.022099925,-0.009626712,0.013534063,0.0004801825,-0.010931359,-0.020465823,0.028359594,-0.060145535,0.028201455,0.015392196,-0.0062926146,-0.020623961,-0.0004017307,-0.011491434,0.007597261,-0.02183636,-0.046492867,0.0023226666,0.018844897,0.016459635,0.010707328,0.018225519,0.044226207,-0.013573597,-0.022758838,0.044858765,-0.01498367,0.0021842949,-0.029466568,0.014377471,-0.004193978,0.020465823,0.024880536,-0.0035581274,-0.02003094,-0.021572795,0.028201455,-0.038506847,-0.004408125,0.003068885,0.014179797,0.013797628,0.005452501,0.04375179,0.008203461,0.0046716896,-0.011366241,-0.054399814,0.024353405,0.019938692,0.0012601701,-0.019187532,-0.0014586676,-0.00926431,0.0005184818,-0.030784393,0.012552283,-0.010713917,-0.010450352,-0.01574801,0.02228442,0.059354838,-0.051368818,0.028201455,0.016749555,-0.0007231565,0.0504727,-0.0033835156,-0.00014969669,0.008499972,0.02236349,0.029387498,0.005745717,-0.015827078,0.0082429955,-0.019213889,-0.0039337077,-0.024089841,-0.014496075,0.004035839,0.023114651,-0.02567123,-0.065943964,-0.019213889,0.026198361,0.021823183,-0.015642583,0.008084856,0.02538131,-0.018963503,-0.019240245,-0.018423194,-0.021177448,-0.04058901,0.013310033,0.052133158,-0.016393743,-0.047652554,0.011208102,-0.032444853,0.007748811,-0.017223973,-0.043251015,-0.032813843,0.0068592792,0.00056254654,0.0023753797,-0.011590271,0.002255128,-0.013942588,-0.017988311,-0.027041769,-0.023378216,-0.05413625,0.021889074,-0.050367273,-0.0077092764,0.026791383,-0.030968888,0.003525182,0.0024478598,-0.0068856357,0.0148387095,0.044753335,0.028570445,-0.01506274,0.030309975,-0.071426116,0.010852288,0.001464433,0.007696098,0.013494528,0.01746118,-0.010516244,-0.04849596,-0.045438606,-0.01062167,0.029097576,-0.0036207242,-0.02312783,0.032602992,-0.00028477373,-0.029545637,-0.006272847,-0.0375053,0.0004097612,-0.004457543,0.010259268,-0.012591818,0.001489966,0.021783648,0.021928608,-0.013982124,-0.028544089,-0.020162722,-0.006348622,-0.024129376,0.0073205177,0.010470119,-0.021559617,0.019213889,0.012914685,-0.007215092,-0.013349568,-0.006905403,-0.006355211,-0.046809144,-0.04406807,0.014087549,0.004773821,0.013679024,0.020083653,0.018541798,0.028359594,-0.09150977,-0.032234,0.020623961,-0.008901908,0.026857274,0.0021529966,0.0456231,0.039745603,-0.0071953246,0.007590672,-0.010740274,0.0013524179,-0.013692202,-0.020373575,0.023602245,0.007808113,-0.01686816,0.0012576992,0.034816936,0.003712972,-0.014206153,0.013059646,-0.05413...', '2025-03-25 05:14:42.72306+00'), ('62', 'https://ai.pydantic.dev/multi-agent-applications/', '3', 'Multi-Agent Applications: Delegation and Dependency Management', 'This section outlines the steps to set up multi-agent applications using dataclasses for client and API key dependencies. It details the configuration of two agents, `joke_selection_agent` and `joke_generation_agent`, including passing dependencies and defining tools for HTTP requests. The example demonstrates a complete workflow with multi-layered requests, illustrating the complexity of agent delegation.', '1. Define a dataclass to hold the client and API key dependencies.
              2. Set the `deps_type` of the calling agent  `joke_selection_agent` here.
              3. Pass the dependencies to the delegate agent's run method within the tool call.
              4. Also set the `deps_type` of the delegate agent  `joke_generation_agent` here.
              5. Define a tool on the delegate agent that uses the dependencies to make an HTTP request.
              6. Usage now includes 4 requests  2 from the calling agent and 2 from the delegate agent.
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ This example shows how even a fairly simple agent delegation can lead to a complex control flow:
                        
                                                graph TD
                          START --> joke_selection_agent
                          joke_selection_agent --> joke_factory["joke_factory (tool)"]
                          joke_factory --> joke_generation_agent
                          joke_generation_agent --> get_jokes["get_jokes (tool)"]
                          get_jokes --> http_request["HTTP request"]
                          http_request --> get_jokes
                          get_jokes --> joke_generation_agent
                          joke_generation_agent --> joke_factory
                          joke_factory --> joke_selection_agent
                          joke_selection_agent --> END', '{"source": "pydantic_ai_docs", "url_path": "/multi-agent-applications/", "chunk_size": 1511, "crawled_at": "2025-03-25T05:14:42.757418+00:00"}', '[-0.026643427,0.015194294,0.050723054,-0.02812641,-0.008564856,0.036496468,-0.01467902,0.010204935,-0.016413357,0.0028732799,0.053186312,-0.05373929,0.014641318,-0.032977525,0.003597491,-0.06937345,-0.019303916,0.0089670215,0.015571323,0.065804236,0.026643427,0.033203743,0.07661242,0.010845886,-0.020233924,0.0053412532,0.01912797,0.049390882,0.02063609,-0.024129895,0.020057976,-0.013749014,-0.032047518,0.033731584,0.03642106,0.02490909,0.022986239,0.012705899,-0.021302175,0.025989909,0.00074424077,-0.02860398,0.031796165,0.03503862,-0.019316485,0.0094445925,-0.03144427,-0.012869278,-0.019731218,-0.014653885,-0.020812035,0.031117512,0.024896523,0.03968865,-0.017318228,0.013057793,-0.0007736962,0.01098413,-0.027070727,-0.023312999,0.0110344,-0.016375653,-0.010808183,0.036345657,-0.015257132,-0.01725539,-0.038004585,0.011511971,-0.034912944,0.047556005,-0.010757912,0.028277222,-0.039764058,-0.010720209,-0.024243005,-0.033027794,-0.019806623,0.009425741,0.018411614,-0.0062586917,-0.010468856,-0.022295019,-0.022119071,-0.0136359045,-0.002438125,-0.061078798,-0.04350922,-0.012498532,-0.059218787,-0.028277222,-0.024041923,0.00085931335,-0.051778734,0.045721125,0.08938116,0.038758647,0.02362719,0.012159205,-0.00028591414,0.0014554914,0.07812054,-0.006861939,-0.06846858,0.013698743,0.06947399,0.03101697,-0.025813961,0.010003853,-0.07314375,0.015759839,-0.056604713,-0.02438125,0.022483533,-0.0014609898,-0.007747959,-0.0074023483,0.033228878,-0.00029848178,0.021528391,-0.031042106,-0.047078434,0.028377764,0.030137235,0.0030005274,0.0152696995,0.030690212,-0.010399734,-0.0504717,0.00038665175,-0.0040153656,0.016249977,-0.01676525,0.0018552999,-0.017418768,-0.027623704,-0.025210714,-0.012460829,-0.009513714,-0.031645354,0.008150124,0.05223117,-0.035692137,-0.008162691,0.028905604,-0.020874873,0.09903312,-0.041598935,0.019354187,-0.03433483,0.0229234,-0.0009394322,0.011279469,-0.027950464,-0.008696817,-0.018160261,-0.000617386,-0.044213008,0.02893074,0.05705715,0.012781304,-0.015244565,0.019693514,0.021176497,0.030262912,-0.05564957,-0.020987982,0.027900193,0.02421787,-0.0078485,0.017104577,-0.010211219,-0.05099954,0.0058313916,0.028629117,0.048310064,-0.03589322,-0.025223281,-0.022734886,0.0045589167,-0.061229613,0.0079930285,-0.016777819,-0.021578662,-0.025788827,-0.07942758,-0.03247482,0.041975964,0.046852216,-0.0005298052,0.029709935,-0.0009197952,0.026743969,0.0055391937,0.033781856,0.029081551,0.0038017153,0.046827078,0.006318388,0.016589304,-0.0049265204,0.04109623,0.006497477,0.029408311,-0.000582825,0.020183653,-0.04999413,0.015621594,-0.03546592,0.037401337,-0.016677277,0.008929319,-0.023715163,0.0047097285,0.0212142,-0.07319402,-0.04190056,-0.022898266,0.039839465,-0.042202182,0.0708313,0.0036226264,0.0029958147,0.04104596,-0.04569599,-0.019542702,0.003666613,-0.01768269,-0.05444308,-0.019052563,0.04323273,0.013397119,-0.02737235,0.015420511,-0.027498027,-0.0050427713,-0.052331712,0.0322486,-0.031268325,-0.010833318,-0.0125299515,-0.014289423,-0.027849922,-0.037702963,0.0011326598,-0.0326759,0.010318045,-0.03968865,-0.009903312,0.07238969,-0.00047364348,0.064748555,-0.02149069,0.019856894,-0.009306348,-0.0057874047,-0.032550223,0.024456656,-0.034485642,-0.031318594,0.017117145,0.0008106137,0.0034246857,-0.0060796025,0.027673975,-0.0030398013,0.011681635,0.02019622,-0.019329052,-0.027447756,0.022646913,0.0043829693,0.025713421,0.0233507,-0.032927252,-0.0072075496,-0.020761766,0.011832447,-0.00031870787,-0.024192734,-0.014352261,-0.00902986,0.022244748,0.020560682,0.025487203,-0.0108144665,0.015772406,-0.00806215,0.007301807,-0.018273368,0.018436749,-0.009941014,0.08138813,0.029106688,-0.06359233,-0.005294124,0.0028952733,-0.006318388,0.02390368,0.013786716,-0.013799285,0.025160443,-0.005268989,-0.03689863,0.010242638,0.021201633,0.0044583753,0.023275295,0.011273186,0.040266763,-0.010594533,0.026216127,0.04484139,-0.0043704016,0.0182231,-0.025311256,-0.013686175,0.042528942,-0.05115035,0.035239704,-0.040291898,-0.045620587,-0.008558572,0.023614623,-0.010651087,0.0066357213,-0.0039022567,-0.013271443,0.009142969,-0.071987525,-0.013221173,0.019278781,-0.027246675,0.044238143,0.063391246,0.054141454,-0.020171085,-0.032223467,0.022093937,0.06253665,0.07223888,-0.050446562,-0.0054700715,-0.016941197,-0.049893588,-0.0041347584,0.02845317,0.0024899666,0.043031648,-0.034535915,0.01073906,0.0075468766,-0.00037251314,-0.015948353,0.039663516,0.014766994,-0.035868086,-0.02518558,-0.008608843,-0.012994954,-0.017004035,-0.05957068,0.048083846,-0.0070818732,0.028553711,-0.041825153,0.029257499,-0.0026674846,-0.03091643,-0.02175461,0.017318228,0.052834418,0.052583065,-0.06816696,-0.0063780844,-0.025110174,4.6662324e-05,-0.008219246,0.024997065,0.01009811,-0.024871388,0.01671498,-0.023099348,-0.025813961,-0.010028988,0.034837537,0.046525456,-0.015420511,0.018285938,-0.0073143747,0.025989909,0.049491424,-0.06882048,-0.00515588,0.01794661,-0.021666637,-0.0077291075,0.015345106,0.00945716,0.030112099,-0.0048385467,0.011813595,-0.0040216492,0.0025528048,-0.044816256,-0.034586184,0.0133719845,0.04858655,-0.017770663,0.019479863,0.007641134,0.06379341,0.02464517,0.009551417,-0.007333226,-0.04393652,-0.0022229038,-0.07138427,-0.009249793,-0.0019841185,0.050496835,0.01543308,-0.06670911,0.015596459,-0.0038048574,0.014063205,9.955939e-05,0.02052298,-0.008841345,0.006220989,-0.0057371343,0.017431336,0.02518558,-0.0030586529,0.0071886983,-0.023375837,-0.016476195,0.041875426,-0.018700669,-0.0005101682,0.026693698,-0.006073319,-0.005777979,-0.006249266,0.044238143,-0.04212678,0.004172461,-0.07686377,-0.075456195,0.020585818,-0.010933859,-0.03707458,-0.015671864,-0.014754426,0.031067241,0.0067739654,-0.050245482,0.055900928,0.016916063,0.0034089761,0.0220688,0.026015045,-0.003930534,-0.040844876,0.06530153,-0.0023124483,0.03830621,0.037527017,-0.01216549,-0.0072201174,0.011235483,0.03526484,0.00916182,-0.039236218,-0.05104981,-0.002224475,-0.0055014906,0.069574535,0.0039525274,0.02346381,0.03820567,0.023488946,0.0142140165,-0.019002292,0.005891088,-0.026316669,0.05223117,0.0015583892,-0.028955875,0.015458215,0.0025323823,0.010990414,0.016513897,0.07525511,-0.013560499,0.014603614,-0.01141143,0.0020202503,-0.04104596,-0.014276856,-0.01366104,0.035013486,-0.0048291213,-0.02528612,0.025160443,-0.009985001,-0.014138611,0.021289606,0.022533804,0.0057277083,0.031218054,-0.011694202,0.0011648644,0.006541464,0.0042730025,-0.030841023,-0.036772955,-0.0054323687,-0.001784607,-0.027196404,0.00015257917,-0.0086214105,-0.013711311,-0.0029141249,-0.014239152,0.027246675,-0.029131822,0.014151178,-0.060777176,-0.0073897806,0.017066874,0.024783414,-0.0058942297,0.025524905,0.011631364,-0.025361527,0.018600129,0.020925144,0.014804697,-0.0022763163,0.00771654,-0.04162407,0.022156775,-0.009369186,-0.04408733,-0.019492432,0.010374598,0.02433098,-0.024582332,-0.002401993,-0.022207046,0.048184387,-0.0098404735,0.0041221906,-0.011323457,0.012328869,0.02893074,0.00058400317,-0.025248418,0.0023187322,-0.0355916,0.0075028897,-0.0021365013,-0.0120523805,-0.011819879,8.173884e-05,0.0063058203,0.0077982293,-0.0005745774,-0.020686358,-0.02619099,0.010795615,0.010638519,-0.009300064,0.0058753784,-0.0023297288,0.027447756,0.017921476,0.00536953,-0.022332722,-0.00545122,-0.0057654115,-0.03745161,0.0065351804,-0.019354187,0.007019035,-0.021792313,0.00040000488,-0.003968237,-0.032927252,-0.032399412,0.008916751,0.0038739794,0.0068556555,-0.00081925397,-0.067815065,-0.0049202368,0.0088350605,0.029182093,-0.02009568,0.008030731,0.03518943,-0.02239556,-0.034787267,0.0019432736,-0.043207597,-0.032499954,0.020171085,0.005595748,-0.0047882763,-0.0052752728,0.014126044,-0.00075916486,-0.014817264,-0.023526648,-0.011587378,0.015081185,-0.005850243,0.013472525,0.03177103,-0.021302175,0.013648473,0.026844509,-0.006497477,0.03192184,0.018725805,0.018411614,-0.004408105,-0.024280708,-0.020447573,0.030137235,-0.056654986,0.014503073,-0.0023155904,-0.0011287325,-0.023023942,-0.0141637465,-0.0027837355,-0.0033681314,-0.025386661,-0.054091185,0.0033712732,0.008558572,0.01917824,-0.006692276,0.022910833,0.036999173,-0.006943629,-0.015030915,0.038381618,-0.023162186,0.001344739,-0.02930777,0.01090244,-0.0309667,0.025788827,0.03300266,-0.004354692,-0.0083889095,-0.022370424,0.066558294,-0.024180166,0.014779561,-0.018009448,0.013774149,0.013774149,0.0411465,0.021830015,0.023501514,-0.005784263,0.017582148,-0.03642106,0.027523164,0.012919549,0.018411614,-0.01704174,0.001237914,-0.0034435373,-0.030790754,-0.021729475,0.020849738,-0.011782176,-0.01773296,-0.0075028897,0.00025331677,0.041699477,-0.053839833,0.028051004,0.021830015,0.012705899,0.04408733,0.008181543,-0.0016777818,0.006349807,0.022734886,0.034787267,0.02646748,-0.025147876,0.017242821,-0.020133382,-0.029659664,-0.0088350605,-0.016463626,0.01751931,0.0041598934,-0.010864737,-0.06967507,-0.039135676,0.0177958,0.033354554,-0.012630492,0.016513897,0.018612696,-0.012705899,-0.013145766,-0.022584075,-0.014842399,-0.023149619,0.006579167,0.038884323,0.0094445925,-0.019706082,0.023325566,-0.03048913,-0.01875094,-0.0019982571,-0.040317036,-0.025575176,0.015772406,0.015005779,0.01875094,-0.023099348,0.03295239,-0.0058628106,-0.018901752,-0.023162186,-0.02260921,-0.045821667,0.0044897944,-0.061430693,-0.004656316,0.027447756,-0.04431355,-0.008118705,0.03257536,0.0033241445,0.006981332,0.031544812,0.020120814,-0.020987982,0.035139162,-0.067111276,0.00937547,-0.008137556,0.028478304,-0.004979933,0.01451564,-0.011750757,-0.032223467,-0.047178973,-0.012944683,0.011945555,-0.008282084,-0.015056049,0.037627555,-0.0035409366,-0.041448124,0.012316301,-0.03423429,0.02196826,0.006170718,0.0046029035,-0.0062806853,-0.002032818,0.0022810292,0.030313183,-0.010424869,-0.002434983,-0.014578479,-0.0042321575,-0.011662783,0.016375653,-0.013987799,-0.0245949,0.018260801,0.008319787,0.013937528,0.009953582,0.019856894,-0.0028968444,-0.028729657,-0.037250526,-0.0072515365,-0.0025056761,0.007446335,0.0212142,0.0030822172,0.02930777,-0.108785614,-0.033404823,0.012498532,-0.012994954,0.0035849235,-0.0027695969,0.030363454,0.018449316,-0.021201633,0.0059382166,-0.021830015,-0.009859324,-0.011882717,-0.012850426,0.02390368,0.005218718,-0.007088157,0.004653174,-0.0037357353,0.015998624,0.0015654585,-0.011222...', '2025-03-25 05:14:42.832968+00'), ('63', 'https://ai.pydantic.dev/multi-agent-applications/', '4', 'Programmatic Agent Hand-Off in Multi-Agent Applications', 'This section discusses the concept of programmatic agent hand-off, which involves multiple agents working in succession based on decisions made by application code or a human. It illustrates the process with an example of two agents: one for finding a flight and another for extracting the user's seat preference.', 'Programmatic agent hand-off "Programmatic agent hand-off" refers to the scenario where multiple agents are called in succession, with application code and/or a human in the loop responsible for deciding which agent to call next. Here agents don't need to use the same deps. Here we show two agents used in succession, the first to find a flight and the second to extract the user's seat preference. programmatic_handoff.py
                        
                                                from typing import Literal, Union
                        
                        from pydantic import BaseModel, Field
                        from rich.prompt import Prompt
                        
                        from pydantic_ai import Agent, RunContext
                        from pydantic_ai.messages import ModelMessage
                        from pydantic_ai.usage import Usage, UsageLimits
                        
                        
                        class FlightDetails(BaseModel):
                            flight_number: str
                        
                        
                        class Failed(BaseModel):
                            """Unable to find a satisfactory choice."""
                        
                        
                        flight_search_agent = Agent[None, Union[FlightDetails, Failed]](  # (1)!
                            'openai:gpt-4o',
                            result_type=Union[FlightDetails, Failed],  # type: ignore
                            system_prompt=(
                                'Use the "flight_search" tool to find a flight '
                                'from the given origin to the given destination.'
                            ),
                        )
                        
                        
                        @flight_search_agent.tool  # (2)!
                        async def flight_search(
                            ctx: RunContext[None], origin: str, destination: str
                        ) -> Union[FlightDetails, None]:
                            # in reality, this would call a flight search API or
                            # use a browser to scrape a flight search website
                            return FlightDetails(flight_number='AK456')
                        
                        
                        usage_limits = UsageLimits(request_limit=15)  # (3)!
                        
                        
                        async def find_flight(usage: Usage) -> Union[FlightDetails, None]:  # (4)!
                            message_history: Union[list[ModelMessage], None] = None
                            for _ in range(3):
                                prompt = Prompt.ask(
                                    'Where would you like to fly from and to?',
                                )
                                result = await flight_search_agent.run(
                                    prompt,
                                    message_history=message_history,
                                    usage=usage,
                                    usage_limits=usage_limits,
                                )
                                if isinstance(result.data, FlightDetails):
                                    return result.data
                                else:
                                    message_history = result.all_messages(
                                        result_tool_return_content='Please try again.'
                                    )
                        
                        
                        class SeatPreference(BaseModel):
                            row: int = Field(ge=1, le=30)
                            seat: Literal['A', 'B', 'C', 'D', 'E', 'F']
                        
                        
                        # This agent is responsible for extracting the user's seat selection
                        seat_preference_agent = Agent[None, Union[SeatPreference, Failed]](  # (5)!
                            'openai:gpt-4o',
                            result_type=Union[SeatPreference, Failed],  # type: ignore
                            system_prompt=(
                                "Extract the user's seat preference. "
                                'Seats A and F are window seats. '
                                'Row 1 is the front row and has extra leg room. '
                                'Rows 14, and 20 also have extra leg room. '
                            ),
                        )
                        
                        
                        async def find_seat(usage: Usage) -> SeatPreference:  # (6)!
                            message_history: Union[list[ModelMessage], None] = None
                            while True:
                                answer = Prompt.ask('What seat would you like?')
                        
                                result = await seat_', '{"source": "pydantic_ai_docs", "url_path": "/multi-agent-applications/", "chunk_size": 4998, "crawled_at": "2025-03-25T05:14:42.605708+00:00"}', '[-0.042936783,-0.026222106,0.03192378,-0.022472108,0.006785545,-0.013731406,0.00085472775,0.04583641,0.058884732,0.0033317828,0.008294606,-0.07946093,-0.010657523,0.0030703982,-0.046254624,-0.022318762,0.027309466,-0.014637539,-0.02197025,0.04368957,0.042462803,0.013278339,0.028382886,0.02414497,-0.024075268,0.01412174,0.01571096,0.023977684,-0.012664957,-0.028605934,0.08135684,-0.020297388,0.016170995,0.0016763468,-0.046170983,-0.024646828,-0.00894284,0.07087357,-0.011298787,-0.0016815745,0.012316444,-0.014038097,0.03521374,-0.014428432,-0.03387545,0.062286217,0.014888469,0.007130573,0.02032527,0.0041542733,-0.03192378,-0.008287636,-0.0026521827,-0.027532514,0.0027427962,0.0027410535,-0.018861515,-0.013403804,0.0013243489,-0.026891252,0.027295526,-0.017843857,0.025720248,0.080408886,-0.016714675,0.005827135,-0.018345715,0.019656125,-0.008859197,-0.028940506,-0.009779271,0.020297388,-0.032425635,-0.0006356003,-0.033986975,0.014428432,0.08537171,0.068587326,-0.010922393,-0.051942356,-0.0011204688,0.0025563417,0.0043982323,0.030697012,-0.034879167,-0.03278809,-0.06579923,-0.0608364,-0.010915423,-0.08682152,-0.03775091,0.04285314,-0.014275086,0.03518586,0.06591075,0.03736058,0.029079912,-0.029972104,-0.01329228,0.021482332,0.020408912,-0.00922165,-0.06501856,0.03830853,0.016993487,-0.060167257,-0.0057330364,0.051830832,-0.049572468,0.007646372,-0.06825276,-0.004823418,-0.020018578,0.032732327,-0.03666355,-0.013410774,0.010329921,-0.021733262,0.022723038,-0.0036280188,-0.06211893,-0.02521839,-0.0002557213,-0.016770437,0.014254175,0.01898698,-0.02605482,-0.06903342,-0.0558457,0.0062279245,0.047035296,-0.0041054813,0.01219795,-0.008190052,-0.03627322,0.0054611964,-0.02358735,-0.023406122,-0.010281129,-0.013208637,-0.030362438,-0.011974901,-0.034265783,-0.0021468392,-0.06150555,0.04803901,-0.025720248,0.021900548,-0.05749068,0.03995351,0.002998953,-0.0407063,-0.03554831,-0.009298323,-0.03635686,-0.018819693,-0.012455849,0.018345715,0.023963744,-0.007057385,-0.037304815,0.0038440968,0.0030878237,-0.020185864,-0.010002319,-0.012016723,-0.03387545,-0.0027706772,-0.06078064,-0.01842936,-0.013487447,-0.029414484,-0.032453515,0.025441438,0.026514858,-0.046784364,-0.00044065094,-0.043104067,-0.029972104,-0.0282156,-0.008043677,0.022430288,-0.014268116,-0.054061312,-0.026431214,-0.005234663,0.024786234,0.02171932,-0.0073396806,0.02930296,0.052778784,0.021022296,0.03387545,0.028006492,-0.025469318,-0.010281129,0.059219304,-0.0017199109,0.019335493,-0.031366155,-0.015027874,-0.005478622,0.0162407,-0.021914488,0.0054333154,-0.03607805,-0.007276948,0.0024936094,0.018094787,0.0034537623,0.05372674,-0.022458168,0.03387545,-0.028996268,-0.05860592,-0.044609644,-0.015906127,0.01600371,-0.026152404,0.050827112,-0.0038928885,-0.0055413544,-0.0018262073,-0.017774155,0.008998602,0.01706319,0.02170538,-0.05553901,0.0055483244,0.006489309,0.00072229287,0.0043459553,0.007165424,-0.004959338,0.05049254,-0.01872211,0.023406122,-0.021315046,-0.010239308,-0.020255568,0.006694932,-0.0049488824,0.042379163,-0.0077509256,0.022890324,0.007625461,-0.018317835,-0.05258362,0.018052965,0.022053894,0.022555752,-0.0062802015,0.0071723945,-0.020408912,-0.026765786,0.0048617544,0.0056249974,-0.023141254,-0.023210956,-0.02930296,-0.01438661,0.05749068,-0.019419136,0.053252764,-0.017551107,-0.023782516,0.027644038,-0.01816449,-0.016212817,-0.0028438647,-0.027072478,0.015669137,0.009047394,0.022053894,-0.06027878,-0.015223041,0.0073675616,0.026988834,-0.011891258,-0.016394045,-0.053559456,0.03342935,0.041598495,0.0070085935,0.015306684,0.017857797,-0.0036558998,-0.0046805274,-0.019112445,0.043828975,0.03064125,-0.0031505562,0.022012072,-0.018066905,0.0124907,0.0043564104,0.019725828,-0.013738376,0.01573884,0.005335732,0.031505562,-0.035855003,-0.011493954,-0.02466077,0.010092932,-0.0052416334,0.015432149,-0.0025929357,0.014149621,-0.025915416,-0.029609652,0.09401482,-0.02224906,-0.051775068,-0.032397754,-0.04210035,0.06356874,-0.04039961,0.01058085,-0.014539956,-0.021928428,-0.042964663,0.02792285,0.01625464,-0.0056877295,-0.04338288,0.022332704,0.0053043654,-0.017523225,0.02574813,-0.02792285,-0.039786227,-0.011375459,0.017411701,0.019920994,-0.006485824,-0.04968399,0.032620803,0.013543209,0.015585494,-0.038169127,-0.002551114,-0.03956318,-0.020450734,-0.03719329,0.021356868,0.029107792,0.03250928,-0.0008647475,0.007813658,-0.0010420535,0.023670992,-0.012511611,0.074163534,-0.049600348,-0.046812244,0.010748136,0.031366155,-0.034907047,0.012957708,-0.070539,0.013647763,-0.026696084,-0.0008142131,0.0007967875,0.022290882,-0.018540883,-0.01704925,-0.011912169,0.031672847,0.028661696,0.011263935,-0.03443307,0.020297388,-0.028396826,-0.035882883,-0.040901467,0.021998132,-0.037667267,0.04993492,0.044414476,-0.007437264,-0.014846647,-0.032453515,0.036245335,0.022360584,-0.020464674,-0.0038719778,-0.045195147,0.022736978,0.045752767,-0.03939589,0.025274152,-0.010169605,-0.010762077,0.004722349,0.02302973,0.05534384,-0.005419375,-0.00610943,-0.0021085027,-0.017118951,0.027881028,0.029804818,-0.07126391,-0.000816827,0.004283223,0.013961425,-0.0058933524,0.012448879,0.06490703,-0.039200723,0.023113372,-0.0077160746,0.020185864,-0.01650557,0.00048443285,-0.0010490237,0.051440496,0.066245325,0.016463747,-0.023197016,0.029358722,0.023559468,-0.033206303,0.037053887,0.04692377,-0.022569692,0.052806668,-0.03959106,-0.011340608,0.019363374,0.033847567,0.0005253831,-0.054925624,0.005206782,0.023670992,0.0254972,-0.031589203,-0.014581777,-0.010831779,-0.05322488,0.033150543,0.02687731,-0.03281597,-0.007897301,-0.010922393,-0.00237163,-0.0047815964,0.01759293,-0.038336415,-0.02496746,-0.0034572475,0.047369868,-0.013815049,-0.048736036,0.04391262,1.3715887e-05,0.075111486,0.009416817,0.022332704,0.035074335,-0.04179366,0.020785306,-0.023127312,0.0189591,0.017565047,-0.014512075,-0.0243959,0.023183074,0.024841996,-0.026821548,0.011236054,-0.056208152,-0.038029723,-0.017230475,0.023657052,0.027170062,-0.029888462,-0.019042742,0.032453515,0.0012851411,0.025873594,0.030864298,0.012874065,0.05693306,0.009437728,-0.027797384,-0.04098511,0.018526943,0.013459566,0.023475826,0.0015264862,-0.01704925,0.010629642,-0.024326196,0.034934927,0.0069598015,-0.038615223,-0.029693294,0.020255568,-0.047118936,0.0054368004,0.00032542387,0.036775075,-0.016198877,0.0012781709,0.005042981,-0.0024901242,0.01926579,-0.028145898,0.00093314314,-0.030780654,0.009347115,-0.009660776,0.0363011,-0.0061965585,0.0041821543,-0.029079912,0.017509285,0.006670536,-0.032899614,-0.021091998,0.0055762054,-0.013041351,-0.006105945,0.0014776945,-0.03234199,-0.010685404,-0.016296461,0.021552034,-0.009897765,-0.02493958,0.02767192,-0.04374533,0.016352223,0.025594784,0.009242561,-0.058438633,-0.02661244,-0.012637076,-0.0035077818,-0.03175649,0.015320625,-0.009312264,-0.009577133,0.02493958,0.009368026,0.00515799,-0.009521371,0.015264863,0.007409383,0.032732327,-0.003746513,-0.003162754,0.031338274,-0.00011239539,-0.032118943,0.025274152,-0.023754636,0.0052764844,-0.008691911,0.011284846,-0.014017187,-0.026668202,0.05698882,0.003035547,0.0051126834,-0.0049488824,-0.010511148,-0.003366634,-0.013801109,0.034210023,-0.03989775,0.02824348,-0.008071558,0.027267646,-0.016644973,-0.008190052,0.009925646,-0.008050647,-0.026417274,0.02631969,0.0048094774,0.009158918,-0.052416332,-0.04062266,0.002111988,-0.027839206,0.027532514,-0.0003130081,-0.028884744,0.017648691,0.0017364653,-0.020952592,0.024479542,-0.013961425,0.019893114,0.005562265,0.0043773213,0.032230467,-0.022876384,-0.017425641,0.0047537154,-0.014212354,5.077941e-05,0.0034101983,0.014052038,-0.017453523,0.018917277,0.022151476,0.01679832,0.0025580842,-0.031840134,-0.0054124044,-0.0053043654,-0.06680294,-0.028327124,0.06591075,-0.023489766,0.0044052023,0.018833634,0.014707242,0.01004414,0.0002100879,-0.025260212,0.00047136363,-0.012058545,0.010720255,0.005750462,-0.020520436,0.028034374,0.010957244,0.020994414,-0.015432149,0.010378713,0.025608724,0.0010307267,-0.00894284,-0.018039025,0.0014872786,0.005799254,1.2238791e-05,-0.018331775,0.004412173,0.009333174,-0.015669137,0.009535312,0.03716541,-0.017746273,-0.006353389,-0.040204443,0.010120813,0.012504641,0.03552043,0.0012868837,-0.013501388,-0.01438661,-0.0013853386,0.018889396,-0.060724877,0.032760207,0.0015752781,0.00057983823,-0.006757664,-0.004858269,0.03278809,0.027211882,0.02333642,-0.015264863,-0.031059464,-0.011605478,0.011842467,-0.019056682,-0.015167279,0.021356868,0.00056284823,-0.014149621,-0.02035315,0.040901467,-0.03092006,0.004175184,-0.032927494,0.054033432,0.062230453,-0.015529732,-0.014707242,-0.03178437,0.0030599427,0.024312256,-0.001717297,0.019711887,0.008845256,0.015571554,0.025887534,0.00949349,-0.027086418,0.03574348,-0.004474905,-0.021008354,-0.03443307,0.016575271,0.021315046,0.009047394,-0.035074335,-0.049265776,-0.011417281,0.017105011,-0.0020858494,-0.0075557586,-0.013529269,0.0015282289,-0.013863841,0.008852227,-0.01900092,0.021105938,-0.027894968,0.010225367,0.02874534,0.000405364,-0.0363011,0.01787174,-0.013257429,0.0063603595,-0.034684,-0.03521374,-0.025873594,0.02765798,-0.0043494403,0.02171932,0.025078984,-0.008203993,0.0010124298,-0.011298787,0.025664486,0.010364772,-0.059609637,0.01817843,-0.034934927,-0.0054611964,0.035464667,-0.03234199,0.022918206,-0.0013025667,-0.008259755,0.0075278776,0.0059491144,0.067527846,-0.016644973,0.0043250443,-0.030836416,0.012386147,0.030864298,-0.021259284,0.027602218,0.013550179,-0.0008072429,-0.015557613,-0.040204443,0.013041351,0.010762077,0.023684934,-0.007918212,-0.0028421222,-0.010650553,-0.0052242074,0.017732333,-0.0368866,-0.00947955,-0.0010141723,-0.008817375,-0.017941441,-0.0020649387,0.029079912,0.05043678,-0.05096652,0.0031801797,-0.019028801,0.013194696,-0.0034729305,-0.005119654,0.0330669,-0.013334101,-0.016644973,0.007709104,-0.023991624,-0.007057385,0.016059471,0.010601761,-0.030697012,-0.009521371,0.0018488606,0.012999529,-0.0019690976,0.006081549,0.02224906,0.024493482,-0.10762077,-0.019460957,0.008629178,0.010092932,0.02304367,-0.010176575,0.043550164,0.01736988,-0.025817832,-0.041933067,0.007249067,-0.0031540412,-0.014456313,-0.0407063,0.041375443,0.009507431,0.014024157,0.030362438,0.005475137,-0.02552508,-0.05127321,-0.002084107,-0.06457246,0.005778343,-0.053197,-0....', '2025-03-25 05:14:42.92256+00'), ('64', 'https://ai.pydantic.dev/multi-agent-applications/', '5', 'Multi-Agent Application Example', 'The snippet demonstrates the use of a preference agent to handle seat preference queries, updating message history, and managing usage limits. It outlines an asynchronous main function that searches for flight details and handles scenarios where seat preferences are not understood.', 'preference_agent.run(
                                    answer,
                                    message_history=message_history,
                                    usage=usage,
                                    usage_limits=usage_limits,
                                )
                                if isinstance(result.data, SeatPreference):
                                    return result.data
                                else:
                                    print('Could not understand seat preference. Please try again.')
                                    message_history = result.all_messages()
                        
                        
                        async def main():  # (7)!
                            usage: Usage = Usage()
                        
                            opt_flight_details = await find_flight(usage)
                            if opt_flight_details is not None:
                                print(f'Flight found: {opt_flight_details.flight_number}')
                                #> Flight found: AK456
                                seat_preference = await find_seat(usage)
                                print(f'Seat preference: {seat_preference}')
                                #> Seat preference: row=1 seat='A'
                        

              1. Define the first agent, which finds a flight. We use an explicit type annotation until [PEP-747](https://peps.python.org/pep-0747/) lands, see [structured results](../results/#structured-result-validation). We use a union as the result type so the model can communicate if it's unable to find a satisfactory choice; internally, each member of the union will be registered as a separate tool.
              2. Define a tool on the agent to find a flight. In this simple case we could dispense with the tool and just define the agent to return structured data, then search for a flight, but in more complex scenarios the tool would be necessary.
              3. Define usage limits for the entire app.
              4. Define a function to find a flight, which asks the user for their preferences and then calls the agent to find a flight.
              5. As with `flight_search_agent` above, we use an explicit type annotation to define the agent.
              6. Define a function to find the user's seat preference, which asks the user for their seat preference and then calls the agent to extract the seat preference.
              7. Now that we've put our logic for running each agent into separate functions, our main app becomes very simple.
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ The control flow for this example can be summarised as follows:
                        
                                                graph TB
                          START --> ask_user_flight["ask user for flight"]
                        
                          subgraph find_flight
                            flight_search_agent --> ask_user_flight
                            ask_user_flight --> flight_search_agent
                          end
                        
                          flight_search_agent --> ask_user_seat["ask user for seat"]
                          flight_search_agent --> END
                        
                          subgraph find_seat
                            seat_preference_agent --> ask_user_seat
                            ask_user_seat --> seat_preference_agent
                          end
                        
                          seat_preference_agent --> END

Pydantic Graphs See the [graph](../graph/) documentation on when and how to use graphs. Examples The following examples demonstrate how to use dependencies in PydanticAI:
              * [Flight booking](../examples/flight-booking/)
 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/multi-agent-applications/", "chunk_size": 3922, "crawled_at": "2025-03-25T05:14:42.437844+00:00"}', '[-0.033807207,0.003566634,0.033886317,-0.029034114,0.004268753,0.0031100914,0.0034347805,0.029086854,0.017681537,0.03011531,-0.0014182478,-0.05387529,0.022942487,-0.031064656,-0.015149953,-0.049128566,-0.007080526,0.014938988,0.02134706,0.051712893,0.039582383,0.023403974,0.019949416,0.039635126,-0.048627526,-0.009249514,0.0011215778,0.04562127,-0.00073508255,-0.029218707,0.037762806,-0.019422002,0.0039193416,0.024353318,-0.0007029433,-0.040347133,-0.008735286,0.035494927,0.0010037338,0.0017470572,0.024841176,-0.008827584,0.02855944,0.00069140614,-0.06603217,0.022863375,-0.011886582,0.05150193,0.0031381103,0.016217966,-0.047388103,-0.0011182814,-0.011313019,0.011616282,-0.03565315,0.0023717126,-0.031776663,-0.016046556,0.014372018,-0.00842543,0.0025282884,0.0004297596,0.0051785414,0.09377412,-0.029561527,0.0096912235,-0.023140267,0.02200633,-0.050605327,-0.029060485,0.030959172,0.0097769275,-0.04997243,-0.015624625,-0.025315847,-0.02389183,0.06413348,0.06413348,-0.0053400616,-0.052978687,0.014754393,-0.0046478314,-0.011860211,0.028374847,-0.03327979,-0.05938676,-0.046992544,-0.055220194,-0.028981373,-0.076633185,-0.027267277,0.020740535,-0.02932419,0.03554767,0.08755064,0.07420708,0.030748207,-0.014635725,-0.01578285,0.0045720157,0.033306163,-0.03757821,-0.07315225,0.002691457,0.05160741,-0.038896747,-0.021848105,0.055536643,-0.023166638,-0.0014751096,-0.091875434,0.01173495,0.0017668352,0.05558938,-0.02112291,0.0008430375,0.0018113358,-0.04332702,0.048733007,-0.029482415,-0.047730923,-0.017773835,0.0016811305,0.012657924,0.019778006,0.0122821415,-0.027715579,-0.05896483,-0.0067410036,0.030563612,0.027451873,-0.001251783,0.0034248915,-0.0039951573,-0.014108311,-0.00010239238,-0.019975787,-0.0049939468,-0.007700237,0.010614197,0.014912616,-0.019778006,-0.01998897,0.015466401,-0.038131997,0.03836933,-0.013541342,0.03865941,-0.047968257,0.03251504,0.01660034,0.011655838,-0.04722988,-0.029034114,-0.0348884,0.0072189723,-0.0022266738,-0.009420924,0.016086113,-0.012776592,-0.03517848,0.02186129,-0.014675281,-0.013482007,-0.021914031,-0.008352911,-0.046781577,0.010607604,-0.045357563,-0.032356817,-0.03275238,-0.05437633,0.0028908853,0.008352911,0.059914175,-0.03127562,-0.03834296,-0.026252007,-0.00532358,-0.03351713,-0.02134706,-0.0026271786,-0.05980869,-0.040769063,-0.015479586,-0.001695964,0.024353318,0.021623954,-0.023483086,0.03467744,0.022190923,0.028638553,0.016415745,0.028796777,-0.015387289,-0.022691965,0.08396423,0.0034281877,0.006536631,0.022916116,-0.0013547934,0.0025216958,0.0285067,-0.004080862,0.005956476,-0.055114713,0.008168316,-0.020252679,0.014596169,-0.012367846,0.014372018,-0.06566298,0.06218205,-0.040795434,-0.05885935,-0.03792103,-0.052583124,0.0073706037,-0.015057655,0.049919687,-0.0129611865,-0.04174478,0.02129432,-0.030932803,-0.0014256646,-0.0014998321,0.0006876978,-0.0464915,-0.0031924997,0.02497303,-0.011629468,0.008517728,0.0068761534,-0.012519478,0.046544243,-0.04841656,0.02477525,-0.029587897,0.0090583265,-0.0054949895,-0.02259967,-0.004947798,0.042535897,0.008089204,0.022045884,0.0027952916,-0.014002829,-0.04177115,0.044751037,0.04269412,0.04171841,-0.020595497,0.0035633375,-0.012150289,-0.012268957,-0.01203162,0.0089924,-0.025434516,0.016059741,0.008656174,3.5744626e-05,0.045542154,0.01240081,0.026449786,-0.022520557,-0.021927217,0.028348476,0.006144367,-0.009137439,-0.015848776,-0.01662671,0.048970345,0.01425335,0.020463644,-0.047862776,0.003566634,-0.014596169,0.009651667,0.009823076,-0.021927217,-0.022771077,0.025157625,0.060336106,0.01855177,0.021597583,0.015229065,0.007482679,0.008873732,-0.006111404,0.047071654,0.02134706,0.013442452,0.015756479,-0.02932419,0.037551843,0.0048884638,0.02737276,0.015281806,0.010601011,-0.006803634,0.022190923,-0.05007791,-0.01422698,-0.0058246227,0.012367846,0.015703738,-0.0021080058,0.018367175,0.026884904,0.003579819,-0.024946658,0.06481912,-0.009961522,-0.0348884,-0.025685038,-0.024274206,0.06956584,-0.047308993,-0.00071159616,-0.02070098,-0.045884974,-0.05071081,0.05078992,0.010706494,-0.03879126,-0.04533119,0.020318605,-0.010587826,-0.036813464,0.01988349,0.0029749419,-0.029376931,0.002267878,0.022678781,0.007838683,-0.0022365628,-0.013712751,0.033095196,0.02855944,0.075420134,-0.05432359,-0.03351713,-0.058384676,-0.012143696,-0.02047683,0.05245127,0.023496272,0.020094454,0.0012212918,0.024577469,0.011688801,0.026489343,-0.005913624,0.05827919,-0.005511471,-0.036945317,-0.013323784,-0.0007874119,-0.042641383,0.016864046,-0.074048854,-0.020397717,-0.013620454,0.00010630678,-0.038079254,0.012334883,-0.047124397,-0.0147412075,-0.0355213,0.034202766,0.047098026,0.0046873875,-0.0344401,0.0020519681,-0.019356076,-0.030220794,-0.01257222,-0.0015196102,-0.034070913,0.011372354,0.033385273,-0.02089876,-0.008451802,-0.011220722,0.03396543,0.025777334,-0.0219404,0.0011108647,-0.0031067953,0.029772492,0.05081629,-0.05616954,0.017431017,-0.021571212,-0.012578812,-0.024722507,0.026238821,0.036576126,0.030721836,-0.015993815,-0.011088869,-0.024696138,0.003540263,0.013910531,-0.051290963,0.011827248,0.014793948,-0.0022645816,-0.005096133,0.022520557,0.050104283,-0.026634382,0.0022233776,-0.011649245,-0.016705822,-0.025671853,-0.02151847,0.009915374,0.040083427,0.056064054,0.009078105,-0.053163283,0.018485844,0.015360918,-0.04018891,0.05664421,0.024630211,-0.024814805,0.012044806,-0.045436673,0.029192338,0.027029943,0.02403687,0.022863375,-0.039951574,0.020028528,0.007898017,-0.0010498825,-0.031776663,0.013739122,0.00033437193,-0.07874284,0.037367247,0.032277707,-0.028612182,-0.02324575,-0.04258864,-0.009678038,0.02366768,0.009473665,-0.02344353,-0.014042385,-0.04174478,0.028427588,-0.052055713,-0.04290509,0.040689953,-0.0048456118,0.032594156,0.00839906,0.03478292,0.03467744,-0.043485243,0.04659698,-0.009368182,0.024748879,0.033859946,-0.042641383,-0.0245511,0.021927217,0.022744708,-0.04422362,0.00024372272,-0.046544243,-0.032172225,-0.01200525,0.009341812,0.029614268,0.0020058195,-0.0021821733,0.030616354,-0.005442248,0.017866133,0.034571957,0.008820991,0.03710354,0.012453551,-0.019975787,-0.021320691,0.017773835,-0.014582983,0.031592067,0.048706636,-0.0151631385,0.015519142,-0.0179848,-0.0062564425,-0.023285307,-0.024577469,-0.03008894,0.016666267,0.009763743,-0.012123918,0.014345647,0.02890226,-0.034835663,0.013402896,-0.009124254,0.0043017166,0.01973845,-0.0364179,-0.03871215,-0.0079112025,0.0315657,-0.0064838897,0.024696138,-0.0028546255,-0.0032370004,-0.030484501,-0.03829022,0.009598926,-0.032224964,-0.018683624,0.011662431,0.00704097,-0.017417831,0.01990986,-0.039635126,-0.0030705354,-0.021452544,-0.0025513628,0.0020453755,-0.000739203,0.004192937,-0.043537986,0.02383909,0.0025678445,-0.0025859743,-0.031460214,-0.015769664,-0.012763407,-0.006328962,-0.012882074,-0.02695083,-0.0016737138,0.0033128161,0.0143588325,-0.0185254,6.5102606e-05,0.0014915913,0.03752547,0.013442452,0.036022343,-0.0013333673,0.00631248,0.03665524,-0.018644067,-0.0049148346,0.02514444,-0.024617026,-0.0027441983,-0.003530374,0.012420588,-0.021703066,-0.020885576,0.051211853,0.019843932,-0.023311676,-0.014016014,-0.010607604,-0.0045060893,0.0048357225,-0.0013135893,-0.022375518,0.011787692,0.009809891,-0.020569127,-0.022322776,-0.045594897,0.016336633,-0.012394217,-0.026634382,0.028796777,0.0013102929,0.0028546255,-0.042377673,-0.028796777,0.009605519,-0.013178745,0.019501114,0.000197162,-0.03639153,-0.009935152,-0.004555534,-0.032699637,0.019369261,-0.009038549,0.026647568,-0.008141946,0.032778747,0.03478292,-0.02205907,-0.034914773,0.004987354,-0.0030738318,-0.014596169,0.003981972,0.015730107,-0.02304797,0.014569798,0.0022860079,-0.0179848,-0.0195143,-0.019329704,-0.02242826,0.0037380431,-0.057171624,-0.016732194,0.047414474,-0.021162467,0.005175245,0.00274255,0.0068761534,0.0093088485,-0.016481671,-0.0080035,0.004562127,-0.019276964,0.0036556348,0.004407199,-0.016560784,0.040716324,0.011181166,0.0016160279,-0.016613524,-0.00849795,0.017035456,-0.0070014144,-0.02211181,-0.018512214,0.021281134,0.011543763,-0.012163474,-0.010996572,0.0025497146,0.010798791,-0.031407475,0.017826576,0.04812648,-0.029825233,-0.004957687,-0.020371346,0.03718265,0.0004289355,0.0259883,0.00059704855,-0.014411574,-0.0025381774,0.0071991943,0.013594083,-0.049075827,0.04248316,0.016468486,-0.00029131354,-0.021056984,0.028612182,0.040900916,0.036576126,0.04171841,-0.0028727555,-0.02737276,0.0067278184,0.02929782,-0.00790461,-0.018433101,0.0119854715,0.013831419,-0.033016086,-0.018775921,0.04841656,-0.011932731,-0.014675281,-0.02855944,0.036998056,0.06023062,-0.03739362,-0.028348476,-0.015321362,0.019329704,0.033464387,-0.00027421382,0.020938316,0.007970536,0.0219404,0.0049214275,0.0054949895,-0.02927145,0.047045283,0.0027919952,-0.05558938,-0.03599597,0.021558028,0.02027905,-0.00031686015,-0.031908516,-0.03206674,-0.0039687864,0.011906359,0.022586484,-0.0059597725,-0.0054191737,0.019593412,0.005913624,-0.004229197,-0.026845347,0.013271042,-0.022217294,0.0031677773,0.028664924,-0.015598254,-0.0359696,0.04148107,-0.017417831,0.004258864,-0.014319276,-0.057699036,-0.024485173,0.022032699,0.011662431,0.019791191,-0.006862968,-0.0021014132,0.010429602,-0.0030326277,0.013620454,-0.005765289,-0.067772634,0.023812719,-0.046016827,-0.005096133,0.008313355,-0.034308247,-0.011669024,-0.016639896,-0.030379018,-0.0054818043,0.021426173,0.042825975,-0.036602497,0.009809891,-0.017325534,0.010482343,0.021333877,-0.008919881,0.017061826,0.035046626,0.001676186,-0.015400474,-0.027056312,0.005076355,0.0018179284,0.010146117,-0.023733608,0.00013030822,-0.0118140625,-0.009981301,0.020410903,-0.034914773,0.025038956,0.014569798,-0.02420828,-0.018011171,0.008840769,0.02443243,0.03683983,-0.02887589,0.0104559725,-0.01445113,0.020134011,-0.01598063,0.0069157095,0.011754729,0.0035336704,-0.0034380767,0.004225901,0.009467073,0.0075749764,0.000354974,-0.009130846,-0.01702227,-0.032620527,-0.015387289,-0.007166231,0.0021145984,-0.018077098,-0.0027128833,0.028242992,-0.10606285,-0.023825904,-0.0099878935,-0.012967779,0.012710665,-0.030563612,0.047546327,0.0021244874,-0.0071530454,-0.024537914,-0.0032501856,0.004763203,-0.014424759,-0.04337976,0.037762806,0.005040095,0.0125326635,0.007008007,0.029508786,-0.005646621,-0.036101453,-0.017101383,-0.05859564,0.011840433,-0.01...', '2025-03-25 05:14:42.974261+00'), ('65', 'https://ai.pydantic.dev/results/', '0', 'PydanticAI Documentation - Results', 'This section provides access to various results related to PydanticAI, including links to documentation, installation instructions, troubleshooting, and contributing guidelines, as well as detailed information on agents, models, dependencies, and tools.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Results  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * Results  [ Results  ](./) Table of contents 
                  * Result data 
                    * Result validators functions 
                  * Streamed Results 
                    * Streaming Text 
                    * Streaming Structured Responses 
                  * Examples 
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Result data 
                * Result validators functions 
              * Streamed Results 
                * Streaming Text 
                * Streaming Structured Responses 
              * Examples 
Results Results are the final values returned from [running an agent](../agents/#running-agents).', '{"source": "pydantic_ai_docs", "url_path": "/results/", "chunk_size": 4978, "crawled_at": "2025-03-25T05:14:42.758412+00:00"}', '[0.017238734,0.013016115,0.05470541,-0.011993109,0.010621847,0.0072444766,-0.004770399,0.025887124,0.007937363,0.02401524,0.008619367,-0.064833894,-0.054328132,-0.035725392,0.016817924,-0.0034807588,-0.023870133,-0.0047740266,0.0006026483,0.071450785,0.048872102,-0.023304215,0.021693526,0.033316612,-0.011325616,0.009954354,-0.025538865,0.06744582,0.00026572755,-0.034622576,0.012450198,-0.017427374,-0.019255726,-0.009221562,0.039991543,-0.0010520272,-0.013030626,0.02376856,-0.017601503,0.00093684834,0.00017016086,-0.018501168,-0.0014701172,0.011877024,-0.053399447,0.011826237,0.0065697283,-0.005724479,0.027541345,0.011216786,-0.086599976,0.022462593,-0.011811726,0.012965328,0.00065661006,0.0031361294,-0.024523117,-0.01139817,-0.0021040544,-0.058158964,0.012014876,-0.0023579919,0.01108619,0.050671432,-0.028905353,0.0032213798,-0.070812315,0.018617254,-0.04170381,0.0012270627,0.043706287,0.050381217,-0.03685723,-0.033606827,-0.040310778,-0.038656555,0.0705221,0.06744582,-0.013059648,-0.060945023,-0.0069651455,0.02077935,0.011688384,0.0072227106,0.0025865356,-0.03308444,-0.0296454,-0.025103545,-0.01188428,-0.030414468,-0.044257693,-0.0075383186,-9.397958e-05,0.02600321,0.069709495,-0.008379941,-0.012130962,0.014176973,-0.003888873,0.030124255,0.026902873,-0.024305455,-0.0439965,-0.0042734067,0.017006563,-0.008931348,-0.00023489227,-0.016034344,-0.020489136,-0.028760247,-0.092114046,-0.0066930694,-0.043212924,0.038598515,-0.07359837,0.02056169,-0.012704135,-0.007828533,0.013777928,-0.022680255,-0.020634243,0.031372175,-0.009577075,0.020895436,0.019879686,0.022912426,0.0049808044,-0.04338705,-0.004853836,-0.035783436,0.035754412,0.0049590385,0.009032923,-0.017993292,-0.0362768,-0.0032123106,-0.026641682,-0.0091344975,-0.022854384,0.0226077,0.008133259,-0.026888363,-0.004204481,0.016759882,-0.024682734,0.008691921,-0.026540106,0.010019652,-0.053138256,-0.012043897,0.035464197,0.03653799,-0.075107485,-0.009954354,-0.039991543,0.023652473,0.021896675,0.031081961,0.009707672,-0.039266005,-0.017195202,0.060364593,-0.044838123,-0.0015227186,-0.023347748,-0.018196443,-0.02864416,-0.0056410423,-0.048843082,-0.047304947,-0.020837393,-0.001982527,-0.034854747,-0.00655159,-0.0057027126,-0.038975794,-0.07058014,-0.01896551,-0.020111857,-0.0693032,-0.04016567,-0.015178213,-0.06071285,-0.0222014,0.006232354,-0.0076616597,-0.0033410932,-0.0009930774,-0.030124255,0.049336445,0.023144597,0.0326201,0.050032962,0.019981261,-0.0097584585,-0.011993109,0.042400323,0.0021330758,0.00509689,0.029674422,0.0054814243,0.013611055,0.05966808,0.016658306,0.012435687,-0.026293423,0.011267574,-0.00040312592,-0.0059131184,-0.03949818,0.049046233,-0.044054545,0.018196443,-0.0060727363,-0.038047105,-0.009816501,-0.062163923,0.0097584585,-0.008670155,0.029616378,-0.0021911187,0.040571973,0.029892081,-0.009279605,-0.011499745,0.025176099,0.04373531,-0.04138457,0.016469667,0.017209712,0.016034344,0.015192723,-0.025030991,-0.019270236,0.024697244,-0.056823976,0.015671577,0.017833674,0.013161222,-0.017572481,-0.016019834,-0.009519032,0.030704683,0.021098586,0.008147769,0.0017403794,0.002198374,-0.04356118,0.054879542,0.027439771,0.032184776,-0.010172014,0.03067566,-0.025538865,-0.02299949,-0.029427739,-0.03404215,-0.018109377,-0.03404215,0.000974939,-0.015555492,0.033780955,-0.037234508,-0.011993109,-0.03404215,-0.021562928,-0.0007640801,0.0036040999,-0.047072776,-0.048697975,0.026888363,0.02497295,0.07806767,-0.017804652,-0.04779831,0.03386802,0.0072009447,0.030733705,0.014815445,0.012994349,-0.0065661008,0.01956045,0.056098443,0.024261924,0.001042958,0.007639894,0.0017966084,-0.025292184,0.010716166,0.042748578,0.030211318,-0.00018444484,0.03549322,-0.038772643,0.012370388,-0.02478431,0.0774292,-0.0009005715,0.03502888,0.012900029,0.036799185,0.0020714053,-0.013153967,-0.0049554105,0.0052274866,0.014873488,-0.006127151,-0.0122035155,0.028136285,-0.021432333,-0.022839872,0.0222014,-0.012907285,-0.0407461,-0.02357992,-0.03563833,0.07493336,-0.014568763,0.0399335,-0.020895436,-0.06918711,-0.041442614,0.057404406,0.03163337,-0.061989795,-0.0020351284,0.00786481,-0.0002911213,-0.01593277,-0.011216786,0.02539376,-0.027729984,-0.022636723,0.027164066,-0.016600262,-0.031807497,-0.04495421,0.02783156,-0.014837211,0.020315008,-0.028324924,-0.042661514,-0.037553743,-0.025292184,0.0049227616,0.020822883,0.03746668,0.03630582,-0.003899756,-0.005495935,0.013001605,-0.012950817,0.016266517,0.025030991,-0.0044148862,0.011390915,-0.0140681425,0.00111007,-0.011013636,0.025103545,-0.070347965,0.000736419,-0.0005019802,0.00096586975,-0.0068272934,0.022709277,-0.057984836,-0.016687328,0.019125128,0.015062127,0.05061339,-0.023536388,-0.0097584585,0.010309867,-0.019647514,-0.0134369265,-0.029775996,0.001021192,-0.008394451,0.028179817,0.021896675,0.02561142,-0.023275195,0.007288009,0.06616888,0.03288129,-0.009642373,0.008169536,0.0070231883,0.057056148,0.040252738,-0.02236102,0.010476739,-0.013553012,0.0070739756,0.025756527,-0.012276068,0.021969229,0.062280007,-0.003468062,-0.004926389,0.010447718,-0.033345632,-0.0003478038,0.007436744,0.014235016,0.06233805,-0.008720943,0.033171505,-0.029268121,0.022114336,-0.02722211,0.02262221,-0.048726995,-0.019226704,-0.04997492,0.016832436,0.0374957,0.03529007,0.043445095,-0.028876333,-0.06013242,-0.046695497,0.02199825,-0.059610035,0.06732974,0.059348844,-0.049887855,-0.0061090128,-0.03145924,-0.020677775,0.035348114,0.0452154,-0.016846946,-0.0059965546,-0.027759006,0.009243328,0.014873488,-0.010578315,-0.0023307842,0.054270092,-0.026786787,-0.0058079157,0.047043752,-0.055605076,-0.0037800425,-0.0045599937,-0.048959166,0.009453733,-0.054299112,0.008184046,-0.0050025703,-0.03143022,0.012261558,-0.039643284,-0.064891934,0.07075427,0.010534782,0.039643284,0.0040956507,0.021345269,-0.0019226703,-0.03732157,0.030965876,-0.027526835,-0.014568763,0.03990448,-0.01443091,-0.01533783,-0.0001386454,0.04138457,-0.02459567,-0.008358174,-0.01593277,-0.0181384,-0.020648753,0.056591805,0.008655644,-0.016716348,0.0070848586,0.0370894,-0.04678256,-0.016150432,0.003069017,-0.00806796,0.071450785,-0.028107263,-0.046753537,-0.013277308,0.020344028,0.029863061,0.004748633,0.022462593,-0.01796427,0.019618493,-0.015236256,-0.032591075,0.010309867,-0.012479219,-0.00684906,0.009780225,0.00013694492,-0.005169444,0.046666473,0.04254543,-0.0067075803,-0.0014601412,0.010890295,0.0018038638,0.050091002,-0.04655039,0.023260683,0.0106581235,0.014742891,-0.002153028,0.018486656,-0.0153088095,-0.008031683,0.0012189004,0.0037074888,0.030936854,-0.032736182,0.0027969412,0.010549293,0.0029329793,-0.01693401,-0.026307935,-0.009649629,-0.019836154,-0.022868894,0.0146921035,-0.0051259114,0.027106024,0.01673086,-0.038598515,-0.0017304033,0.021722548,0.017586991,-0.04176185,-0.035783436,0.0022400923,0.014024611,-0.04048491,-0.007175551,-0.0016714535,0.015845705,0.043241944,-0.0134369265,-0.010092205,0.006355695,0.060596764,-0.019009043,0.04753712,-0.015802173,0.021925697,0.00875722,-0.0064754086,-0.008350919,0.030124255,0.007726958,0.020213433,0.0028840054,0.027178578,0.010578315,-0.018907467,0.028513564,0.045273446,-0.003761904,-0.032707162,0.0006525289,0.0075165527,0.0050243367,-0.016295537,0.00867741,-0.016106898,-0.0015644369,0.0063194185,0.002561142,-0.028121775,0.016701838,-0.016005324,-0.045882896,0.008938603,0.017282266,-0.007763235,0.012544517,-0.019633003,-0.00691073,0.026975427,0.0016179453,0.015686087,-0.0146993585,-0.017282266,-0.018820403,-0.0280202,0.0073460517,0.034013126,-0.01957496,-0.05101969,0.0035496848,0.0027679198,-0.016614774,0.0040194695,0.021214671,0.02340579,0.026917385,-0.029587356,0.008561324,-0.020431094,-0.010121227,-0.014293059,-0.015831195,-0.0057498724,-0.020706797,-0.0045273444,0.031110983,-0.052731954,0.03647995,0.05206446,-0.03470964,-0.0067438567,0.026554616,0.002085916,0.014902509,0.016890477,-0.012109196,-0.0067184633,-0.020489136,-0.026554616,0.0059131184,-0.02217238,0.053341404,0.027671942,0.009685906,-0.014757401,0.0009803805,0.0023217152,-0.031169025,-0.0137634175,-0.021795101,0.063556954,0.04257445,-0.020460114,-0.024029752,0.006867198,-0.021084076,-0.013872248,0.01260256,0.010440462,-0.008895071,-0.012319601,-0.019429853,0.012283324,-0.015671577,0.011993109,-0.027091512,-0.020851905,-0.008176791,-0.02944225,0.004723239,-0.05606942,0.026569128,0.011753683,-0.028702203,-0.03674114,0.05000394,0.033432696,0.04518638,0.023188129,0.0069760284,-0.030414468,-0.011202276,0.026162827,0.0074657653,0.016005324,-0.004585387,-0.008249344,-0.04660843,-0.025335716,0.04776929,-0.0157006,0.015744131,-0.07562987,0.026902873,0.042980753,-0.020227943,0.0111007,0.018805893,0.02823786,0.05162914,-0.0026355095,-0.0047014733,-0.0038707345,0.006355695,0.008670155,-0.016222984,-0.0021004267,0.016774392,-0.008169536,-0.094725974,-0.018863935,0.017050095,-0.003081714,-0.019662024,-0.04353216,0.0072335936,-0.005307296,0.007690681,0.034825727,-0.02825237,-0.024319965,0.004215364,-0.027541345,0.020445604,-0.03369389,0.002096799,-0.005782522,0.021693526,-0.0013304516,-0.03224282,-0.02018441,0.0346516,-0.016469667,-0.0063049076,0.01993773,-0.02481333,-0.0112893395,0.021214671,-0.011064423,0.0011925998,0.02722211,-0.006482664,0.004302428,-0.021345269,0.0017394725,-0.01382146,-0.035957564,0.0403398,-0.018210953,0.0014819072,-0.025669463,-0.021940207,-0.0016351767,-0.023463834,-0.009105477,-0.019197682,0.0019136012,0.038453408,-0.020518158,-0.014459932,0.011340127,0.014162462,0.0018664413,0.009656884,0.042632494,-0.010266334,0.012276068,-0.011136977,-0.0125154955,-0.004745005,-0.013567523,0.021142118,-0.011325616,0.03793102,0.01715167,-0.009823757,0.036596034,-0.0153088095,-0.01078872,0.004008586,-0.023014002,-0.020837393,0.010266334,0.025089035,0.024450563,-0.018588232,0.006152545,-0.041877937,0.00022049491,0.004951783,0.0076253833,-0.010367909,-0.012036642,0.015918259,0.0016950334,0.0015100217,0.020416582,-0.02844101,-0.031807497,-0.03647995,-0.041500658,0.0039142664,-0.007288009,-0.024523117,0.019241214,-0.012921796,-0.0018501168,-0.08584542,-0.0015354155,-0.0091199875,-0.025843592,0.039207965,-0.036073647,0.0052274866,0.026177337,-0.030530553,-0.022535147,0.014053632,-0.021562928,-0.029137526,-0.014815445,0.022114336,-0.0064101103,0.024421541,-0.014046377,0.02360894,-0.035986584,-0.026177337,-0.023...', '2025-03-25 05:14:43.07554+00'), ('66', 'https://ai.pydantic.dev/results/', '1', 'AgentRunResult and StreamedRunResult Overview', 'This section explains how result values are encapsulated in `AgentRunResult` and `StreamedRunResult`, allowing access to additional data such as usage statistics and message history. It highlights the generic nature of both types, ensuring that typing information is maintained for data returned by the agent.', 'The result values are wrapped in [`AgentRunResult`](../api/agent/#pydantic_ai.agent.AgentRunResult) and [`StreamedRunResult`](../api/result/#pydantic_ai.result.StreamedRunResult) so you can access other data like [usage](../api/usage/#pydantic_ai.usage.Usage) of the run and [message history](../message-history/#accessing-messages-from-results) Both `RunResult` and `StreamedRunResult` are generic in the data they wrap, so typing information about the data returned by the agent is preserved. olympics.py
                        
                                                from pydantic import BaseModel
                        
                        from pydantic_ai import Agent
                        
                        
                        class CityLocation(BaseModel):
                            city: str
                            country: str
                        
                        
                        agent = Agent('google-gla:gemini-1.5-flash', result_type=CityLocation)
                        result = agent.run_sync('Where were the olympics held in 2012?')
                        print(result.data)
                        #> city='London' country='United Kingdom'
                        print(result.usage())
                        """
                        Usage(requests=1, request_tokens=57, response_tokens=8, total_tokens=65, details=None)
                        """
                        

_(This example is complete, it can be run "as is")_ Runs end when either a plain text response is received or the model calls a tool associated with one of the structured result types. We will add limits to make sure a run doesn't go on indefinitely, see [#70](https://github.com/pydantic/pydantic-ai/issues/70). Result data When the result type is `str`, or a union including `str`, plain text responses are enabled on the model, and the raw text response from the model is used as the response data. If the result type is a union with multiple members (after remove `str` from the members), each member is registered as a separate tool with the model in order to reduce the complexity of the tool schemas and maximise the chances a model will respond correctly. If the result type schema is not of type `"object"`, the result type is wrapped in a single element object, so the schema of all tools registered with the model are object schemas. Structured results (like tools) use Pydantic to build the JSON schema used for the tool, and to validate the data returned by the model. Bring on PEP-747 Until [PEP-747](https://peps.python.org/pep-0747/) "Annotating Type Forms" lands, unions are not valid as `type`s in Python. When creating the agent we need to `# type: ignore` the `result_type` argument, and add a type hint to tell type checkers about the type of the agent. Here's an example of returning either text or a structured value box_or_error.py
                        
                                                from typing import Union
                        
                        from pydantic import BaseModel
                        
                        from pydantic_ai import Agent
                        
                        
                        class Box(BaseModel):
                            width: int
                            height: int
                            depth: int
                            units: str
                        
                        
                        agent: Agent[None, Union[Box, str]] = Agent(
                            'openai:gpt-4o-mini',
                            result_type=Union[Box, str],  # type: ignore
                            system_prompt=(
                                "Extract me the dimensions of a box, "
                                "if you can't extract all data, ask the user to try again."
                            ),
                        )
                        
                        result = agent.run_sync('The box is 10x20x30')
                        print(result.data)
                        #> Please provide the units for the dimensions (e.g., cm, in, m).
                        
                        result = agent.run_sync('The box is 10x20x30 cm')
                        print(result.data)
                        #> width=10 height=20 depth=30 units='cm'', '{"source": "pydantic_ai_docs", "url_path": "/results/", "chunk_size": 4364, "crawled_at": "2025-03-25T05:14:42.422879+00:00"}', '[-0.004303472,0.06027385,0.021252338,-0.019460276,0.005609658,0.023788989,-0.011086804,-0.012923037,0.007016805,0.00662558,-0.021025175,-0.03134846,-0.015371346,-0.017769175,0.0038239062,-0.008020107,-0.020495128,0.014525795,0.002935763,0.046719804,0.03806238,0.0017226508,0.0057674097,-0.007792944,0.0012833118,0.020835873,-0.029127313,0.06052625,0.0023741662,0.002814294,-0.022097887,-0.01568685,-0.0129861375,-0.040990256,0.014462695,-0.026123716,0.009029719,0.02715857,0.040106844,0.02565677,0.029127313,-0.020495128,0.03210567,0.04394337,-0.023801608,0.031928986,0.009376774,0.007363859,0.01157899,0.012317269,-0.027057607,0.05366089,-0.0015790967,-0.063807495,0.027638134,0.0015948717,-0.00831037,0.031449422,-0.00155149,-0.05795174,-0.0063731773,-0.022653174,0.0075720917,0.037507094,-0.044751063,-0.011206696,-0.05386281,0.025972275,-0.024369515,-0.015838291,0.017441051,0.008972929,-0.04025829,0.011112045,-0.028647747,-0.044321977,0.036800366,0.079052635,-0.0049155494,-0.021252338,-0.013642385,-0.0062943012,0.018501144,0.026830444,0.0054645264,-0.018677825,-0.066735364,-0.0346297,-0.019624338,-0.046669323,-0.042681355,0.0071430067,0.018122539,0.040283527,0.048284706,0.034200612,-0.011364448,-0.019258354,0.022943437,0.0072376574,0.04366573,-0.01481606,-0.033493884,0.031247498,0.024584057,-0.01574995,0.01983888,0.01651978,-0.038289543,-0.029278755,-0.0760238,0.029404955,-0.035210226,0.038541947,-0.0893002,0.004369728,-0.04192415,0.019801019,0.0029704685,-0.00037860457,-0.010878571,-2.8691129e-05,-0.014715098,-0.0033191002,0.041974626,-0.00022164143,-0.019359315,-0.040031124,-0.016873144,-0.026174197,0.022514353,0.004297162,0.009654417,-0.014538416,-0.032660954,-0.012689563,-0.043489046,-0.012298339,-0.03372105,0.028445825,-0.017693454,-0.013314261,-0.005956712,0.027007127,-0.04459962,0.049496237,-0.04056117,0.034225855,-0.020230105,0.0031771234,0.03816334,0.03372105,-0.051692147,-0.019561237,-0.029026352,-0.011496959,0.045583993,0.035033543,0.02887491,-0.029556397,-0.011030014,0.06476662,-0.062444516,-0.010853332,-0.0137054855,-0.023423003,-0.024268555,-0.021858105,-0.04144458,-0.052701756,-0.024243314,-0.0053761853,-0.0045117047,0.018513763,0.014311253,-0.04293376,-0.09036029,-0.025442228,-0.027865298,-0.04717413,-0.021315439,-0.013339502,-0.06552383,-0.03637128,-0.014412214,0.008979239,0.007363859,0.030717451,-0.0012391412,0.045937356,0.010544138,0.030010723,0.027688615,0.025215065,-0.036169358,-0.017125547,0.03823906,0.0088214865,0.008676355,0.032761917,0.042782318,0.036800366,0.021277577,-0.012676943,-0.008985548,-0.069309875,-0.005543402,0.0007998022,-0.022375531,-0.025265547,0.015611129,-0.036093637,0.011364448,-0.019548617,-0.009799548,-0.016292617,-0.05941568,0.016746942,-0.003309635,0.016645981,0.02647708,0.037456613,0.015876152,-0.03369581,-0.034301575,0.024142353,-0.01813516,-0.0132133,-0.0015081082,0.0107145095,0.020040803,-0.0037292552,0.013667625,-0.03134846,0.04053593,-0.057093572,0.034301575,-0.0008542266,0.0066382005,-0.0464674,-0.01992722,-0.0027196428,0.0313737,0.011156215,0.008449192,0.015939252,-0.0005698788,-0.03210567,0.046517882,0.035765514,0.031928986,-0.04444818,-0.027739096,-0.032559995,-0.038314782,-0.03637128,-0.010632479,-0.0046599912,-0.026350878,-0.010159223,0.029556397,-0.008998169,-0.055831555,0.0108154705,-0.020898974,-0.014134571,0.0098942,-0.012740044,0.019977702,-0.07153103,0.008897208,0.04889047,0.03372105,-0.03147466,-0.013188059,0.043236643,0.0040321387,0.024520956,0.003549418,-0.008392402,0.005126937,0.035058785,0.029455436,0.039198194,-0.0042466815,-0.0055528674,-0.014664617,-0.022564834,0.021820243,0.01988936,0.045129668,0.009502975,0.02897587,-0.022602694,-0.01737795,-0.031020336,0.029253514,-0.023574445,0.00227636,-0.00743958,-0.020154383,0.0092000915,0.012777905,-0.030843653,-0.013768586,-0.0030840498,-0.017983718,-0.0075026806,0.02733525,-0.0033064801,-0.018425424,0.06597816,-0.034251094,-0.025151964,-0.02890015,-0.02394043,0.07057189,-0.013276401,0.030767933,-0.0080642775,-0.037658535,-0.030263126,0.0596176,0.011869254,-0.01577519,0.0076478124,-0.015017982,0.016191656,0.008045347,0.011004773,-0.022627933,-0.034023933,-0.036901325,0.039046753,0.02396567,-0.003625139,-0.068047866,0.03950108,0.01651978,0.055629633,-0.030439809,-0.003142418,-0.02804198,-0.025480088,0.0034421466,0.025517948,0.021290198,0.050758254,-0.03664892,-0.02228719,0.03871863,-0.005716929,0.004111015,0.07299496,-0.004445449,0.006467828,0.005035441,-0.00412679,-0.013490943,0.004035294,-0.08198051,0.0058336654,0.011017393,0.0139452685,-0.027562413,0.025833452,-0.06653345,0.0007130386,-0.009155921,0.026855685,0.040207807,0.0060103475,-0.01581305,0.015232524,0.008505983,0.00662558,-0.017289609,0.04235323,-0.00993837,0.020734912,0.053206563,0.06517047,0.019245733,-0.010159223,0.044246256,0.056487802,0.017163407,0.029354475,-0.018261362,0.02472288,0.04694697,-0.010209704,-0.011288727,0.013642385,-0.0034358366,0.018639965,0.03054077,0.016141176,0.012184758,-0.011490649,-0.028471064,-0.02973308,0.00903603,0.01832446,-0.002503523,0.020192245,0.049269076,-0.048991434,0.022426011,0.013415222,0.04371621,-0.039803963,0.032837637,-0.06572576,-0.02468502,-0.05361041,0.0026202593,0.024255933,0.027840057,0.05462002,-0.0013124959,-0.05684117,-0.0020570848,0.020861112,-0.032686196,0.041646503,0.03808762,-0.046568364,-0.023688026,-0.027032368,-0.0048587588,0.033418164,0.054216176,-0.017605113,-0.027688615,0.0014410637,0.015585888,0.002935763,-0.013402603,0.027840057,0.03796142,-0.030767933,0.018097298,0.07031949,-0.054216176,-0.011761982,-0.0021012553,-0.0033601157,0.038693387,-0.033822007,0.017264368,0.019535996,-0.057093572,-0.0008345076,-0.033645328,-0.045811154,0.072944485,-0.008430262,0.017466292,0.0047357124,0.0058178906,0.022905577,-0.030010723,0.027890537,-0.054922905,0.004458069,0.018425424,-0.015838291,-0.012487642,-0.011295036,0.012140587,-0.036194596,0.025782973,-0.00620596,0.0053951154,-0.01644406,0.05608396,0.012109037,-0.004893464,-0.00660034,0.05870895,-0.051793106,-0.0039911233,0.026047995,-0.031878505,0.048486628,0.01908167,-0.05123782,-0.023839468,0.01316282,0.016406199,-0.00247986,0.044145294,-0.0142229125,0.043085203,0.018753547,-0.02060871,0.030894134,0.013326881,-0.012544432,0.002535073,-0.018236121,0.008386091,0.05111162,0.039324395,-0.015396587,0.009118061,-0.013995749,0.012134277,0.051843587,-0.029556397,0.004445449,0.030717451,0.017024586,-0.0070420452,0.00020369716,-0.0046473714,-0.00830406,-0.017642973,0.012733734,0.0011397576,-0.018778788,0.009648107,-0.0051900377,0.004401278,-0.009831099,0.015295625,0.008632184,0.00539196,-0.019106911,0.011648401,0.018930228,0.023069639,0.037860457,-0.03902151,-0.010802851,0.021353299,0.025719872,0.009118061,-0.016204275,-0.007016805,0.0047451775,-0.043514285,-0.012355129,-0.0069158436,0.019523377,0.040359247,-0.02315798,0.01890499,0.003789201,0.022918198,-0.009881579,0.034528736,-0.034377296,0.022855097,0.028647747,-0.01731485,0.0058336654,-0.01563637,-0.006130239,0.0019340384,-0.0018283447,0.044397697,0.015055842,-0.010588308,0.056639247,0.0463412,-0.025038384,-0.013112338,0.016166415,0.023359902,0.012159517,0.0070925257,-0.03649748,-0.026199438,-0.0058746813,0.019510755,-0.017819656,-0.05355993,0.020974694,-0.010253874,-0.03490734,0.030136924,-0.007508991,-0.008808866,-0.007748774,0.0026612747,0.0059093866,0.0057484796,-4.2075393e-05,0.020848492,-0.022426011,-0.005697999,-0.006347937,-0.02715857,0.031146538,0.012191067,-0.014210292,-0.042681355,0.01655764,0.04470058,-0.0071303863,0.0002557553,0.049773883,-0.007710913,-0.010922742,0.00824727,0.026148956,-0.07748774,0.0037103249,0.0015104745,0.0060734483,-0.012102727,-0.0062217354,-0.0027369957,0.027890537,-0.06910796,0.02159308,0.05300464,-0.028294383,-0.008714216,0.031777546,-0.0002301206,0.015068462,-0.00071264425,0.008846727,-0.025227685,0.0027433056,-0.0042750766,0.04861283,-0.03808762,0.017630354,0.020116523,0.02309488,-0.013541424,-0.0019009105,2.0976075e-05,-0.020772772,-0.021744523,-0.010178153,0.038264304,0.035210226,0.022993919,0.0051521775,-0.013402603,-0.008076898,-0.019233113,0.025215065,0.020911593,-0.0264266,-0.001564899,-0.04048545,0.004218286,-0.0071303863,-0.0012927769,-0.03225711,-0.00742696,-0.018400183,-0.019447654,-0.009641796,-0.051742624,0.02069705,-0.006518309,-0.00910544,-0.017693454,0.022123128,0.034276336,0.013099719,0.054014254,0.02640136,-0.035765514,-0.0047357124,0.017125547,0.0057327044,0.023448244,0.017466292,-0.0026928252,-0.026350878,-0.04033401,0.045583993,-0.016772183,-0.0048398287,-0.050177727,0.017971097,0.031070815,-0.021340678,-0.01577519,0.015358726,0.019573856,0.07728582,-0.010966913,-0.015421826,-0.016343098,0.022438632,0.025846073,-0.010853332,0.015876152,0.019700058,-0.012790524,-0.069158435,-0.014967501,0.0051521775,0.0064930688,-0.0330648,-0.0050890767,-0.0044801543,-0.029834041,-0.005612813,0.020280585,0.003558883,-0.0040132087,0.005638053,-0.0182235,0.034023933,-0.012462401,-0.014576277,-0.0027433056,0.012045936,0.024117112,-0.0069915648,-0.013932649,0.004278232,-0.0445239,0.0053320145,0.025757732,-0.022918198,-0.002610794,0.045987837,-0.022779375,0.0009536103,0.02308226,-0.020318447,-0.001987674,-0.021933826,-0.008752076,-0.026376119,-0.043993853,0.04038449,-0.03321624,0.002309488,-0.017087687,-0.015144183,-0.005114317,-0.014954881,0.0055276267,-0.002860042,-0.022754135,0.03321624,-0.031979468,0.025782973,0.0004152819,0.008916138,0.003735565,0.014298633,0.048284706,-0.007893906,0.013263781,0.021315439,-0.039374877,-0.013768586,-0.008468122,-0.00012344087,-0.0070925257,0.033569608,0.027991498,-0.03147466,0.006524619,0.0049029295,-0.008657425,-0.0019087981,-0.040308766,-0.011862944,-0.006884293,0.017466292,0.054216176,-0.041469824,0.012531811,-0.03286288,0.011130975,0.01648192,0.028647747,0.00052334194,0.003628294,0.023675406,0.0065750997,-0.010556757,-0.0008423952,-0.018791407,-0.008859348,-0.023347283,-0.020217484,0.00021138755,0.0073890993,-0.0037387202,-0.0068211923,0.020318447,0.006385797,-0.08935068,-0.016709082,0.039046753,-0.03139894,-0.0007035735,-0.024445236,0.011250867,0.025454847,-0.046492644,-0.013339502,0.002929453,-0.018753547,-0.027587654,-0.02731001,0.020230105,0.0069158436,0.02404139,-0.019674819,0.029909762,-0.031525142,-0.011459099,-0.008783626,-0.042403713,0.002503523,-...', '2025-03-25 05:14:43.125048+00'), ('67', 'https://ai.pydantic.dev/results/', '2', 'Example of Using Union Return Type in Pydantic AI', 'This documentation chunk provides an example of implementing a union return type with the Pydantic AI library. It demonstrates how to create an agent that can extract colors or sizes from given shapes, using the `Agent` class and a system prompt to guide extraction.', '_(This example is complete, it can be run "as is")_ Here's an example of using a union return type which registered multiple tools, and wraps non-object schemas in an object: colors_or_sizes.py
                        
                                                from typing import Union
                        
                        from pydantic_ai import Agent
                        
                        agent: Agent[None, Union[list[str], list[int]]] = Agent(
                            'openai:gpt-4o-mini',
                            result_type=Union[list[str], list[int]],  # type: ignore
                            system_prompt='Extract either colors or sizes from the shapes provided.',
                        )
                        
                        result = agent.run_sync('red square, blue circle, green triangle')
                        print(result.data)
                        #> ['red', 'blue', 'green']
                        
                        result = agent.run_sync('square size 10, circle size 20, triangle size 30')
                        print(result.data)
                        #> [10, 20, 30]
                        

_(This example is complete, it can be run "as is")_ Result validators functions Some validation is inconvenient or impossible to do in Pydantic validators, in particular when the validation requires IO and is asynchronous. PydanticAI provides a way to add validation functions via the [`agent.result_validator`](../api/agent/#pydantic_ai.agent.Agent.result_validator) decorator. Here's a simplified variant of the [SQL Generation example](../examples/sql-gen/): sql_gen.py
                        
                                                from typing import Union
                        
                        from fake_database import DatabaseConn, QueryError
                        from pydantic import BaseModel
                        
                        from pydantic_ai import Agent, RunContext, ModelRetry
                        
                        
                        class Success(BaseModel):
                            sql_query: str
                        
                        
                        class InvalidRequest(BaseModel):
                            error_message: str
                        
                        
                        Response = Union[Success, InvalidRequest]
                        agent: Agent[DatabaseConn, Response] = Agent(
                            'google-gla:gemini-1.5-flash',
                            result_type=Response,  # type: ignore
                            deps_type=DatabaseConn,
                            system_prompt='Generate PostgreSQL flavored SQL queries based on user input.',
                        )
                        
                        
                        @agent.result_validator
                        async def validate_result(ctx: RunContext[DatabaseConn], result: Response) -> Response:
                            if isinstance(result, InvalidRequest):
                                return result
                            try:
                                await ctx.deps.execute(f'EXPLAIN {result.sql_query}')
                            except QueryError as e:
                                raise ModelRetry(f'Invalid query: {e}') from e
                            else:
                                return result
                        
                        
                        result = agent.run_sync(
                            'get me users who were last active yesterday.', deps=DatabaseConn()
                        )
                        print(result.data)
                        #> sql_query='SELECT * FROM users WHERE last_active::date = today() - interval 1 day'', '{"source": "pydantic_ai_docs", "url_path": "/results/", "chunk_size": 3833, "crawled_at": "2025-03-25T05:14:42.332054+00:00"}', '[-0.005007589,0.051251862,0.026246225,-0.0074499995,0.008193061,0.01950052,0.012812966,0.012980962,0.011843755,0.032229487,-0.0075792274,-0.061719336,0.006926626,-0.0043452946,-0.011404379,0.012470511,-0.023286903,0.019578056,-0.02672437,0.045875974,0.039802253,-0.015429834,0.027344665,0.016024284,0.008516131,0.010771162,-0.019035298,0.064045444,0.025871465,-0.031841803,0.012031135,-0.012761274,-0.01692888,-0.023454899,-0.022614917,0.014512314,0.0548444,0.067457065,-0.009769644,0.032229487,0.019474674,-0.026853599,0.04034501,0.033134084,-0.011378533,0.06523434,0.010473937,0.01356895,-0.013400953,-0.006057567,-0.051458627,0.02138725,0.016618732,-0.028921247,-0.0300843,-0.020534344,-0.04696149,0.031014742,-0.022408152,-0.032668862,-0.019616824,-0.028404335,0.0015434681,0.06414883,-0.036132175,0.011410841,-0.037243538,0.0016121204,-0.032332867,0.0016735038,0.03602879,0.033004854,0.010144405,0.018376235,0.01356895,-0.018647613,0.05192385,0.094026364,0.013879097,-0.0073853857,-0.015119687,-0.025083173,0.031040588,0.03496912,-0.01007333,-0.04300711,-0.078312226,-0.03403868,0.0059929527,-0.012102211,0.0040642237,0.03763122,0.0010225173,0.037450302,0.07216097,0.03763122,0.0036926928,-0.011559453,0.0147836935,0.0286111,0.002452103,-0.0037379225,-0.018841457,0.026336685,0.030032609,-0.026207458,0.0067973975,0.00088602013,-0.049623586,-0.019771898,-0.09242393,-0.019009452,-0.0075792274,0.0096598,-0.061719336,-0.023661664,-0.041146226,0.0045455983,0.028869556,-0.025509626,-0.012825889,-0.04088777,-0.0018818841,-0.027887423,0.012761274,0.017859323,-0.0045100604,-0.02046973,-0.028042497,-0.013943711,0.022162618,0.02819757,0.036364786,0.023545358,-0.018415004,-0.03486574,-0.02925724,-0.04088777,-0.016954726,0.0020805723,-0.0315575,-0.021464786,-0.005753881,0.0077343015,-0.026207458,0.013620641,-0.029722461,0.037786294,-0.04512645,0.0327464,0.017613789,0.035951257,-0.054120727,-0.0033243927,-0.05192385,-0.0002661291,0.0011162077,0.046522114,0.033470076,-0.037269384,-0.007469384,0.06182272,-0.050709102,-0.011753296,-0.025264092,-0.03770876,-0.014447701,-0.021128794,-0.04954605,-0.024553338,-0.005821726,-0.023467822,-0.014331396,0.028895402,0.021090025,-0.037760448,-0.036313094,-0.018376235,-0.015029227,-0.066371545,-0.034684822,0.011320381,-0.03315993,-0.01743287,-0.0027654811,-0.036649086,0.018440848,-0.0038316129,-0.029308932,0.018182393,0.023984734,0.054224107,0.027732348,0.038096443,0.029541543,-0.056084994,0.0584111,0.01646366,0.015429834,-0.0059218775,0.011527146,0.01743287,0.029825844,-0.006642324,0.01752333,-0.04006071,0.01237359,-0.032100257,-0.031764265,-0.036261402,0.03822567,-0.038897656,0.02097372,1.9971042e-06,0.025910232,-0.019939896,-0.027525583,0.019901127,-0.004642519,0.030161837,0.012476972,0.035408497,0.04153391,-0.035486035,-0.019410059,0.025225325,-0.0013940481,-0.03887181,0.009963486,0.05344874,-0.00524343,-0.0033405463,-0.0065163267,-0.019112835,0.040525932,-0.07004163,0.022614917,0.017497484,0.0017171183,-0.012082826,-0.009969948,0.01471908,0.0059444923,0.00091428874,-0.0070687765,0.031066434,-0.0004886437,0.006383868,0.06823243,0.064252205,0.050838333,-0.005805572,-0.010958542,-0.026905289,-0.045100603,-0.009071812,-0.004710364,-0.032358713,-0.026517605,-0.0019335754,-0.017213183,0.019035298,-0.049287595,0.025212402,0.0092010405,-0.013930788,0.0069589326,-0.029515697,0.015184301,-0.037915524,0.030730441,0.04047424,0.033470076,-0.05303521,0.0062158713,-0.0075921505,0.01389202,0.06952471,-0.0020999566,0.011229921,-0.018427925,0.016308585,0.0016420045,0.012709583,0.021736166,0.030161837,-0.010480398,-0.03357346,-0.004332372,-0.016941803,0.021904161,-0.0051271245,0.008361057,-0.027809886,0.008865047,-0.03251379,0.007947528,0.015791673,0.018234083,0.015907979,-0.015998438,0.016890112,-0.019513441,-0.005770034,-0.025793927,-0.014887077,-0.00841921,0.0018011165,0.024204422,0.014085862,0.005553577,0.039259493,-0.039724715,-0.0315575,-0.050114654,-0.040422548,0.017174413,-0.020069122,0.065751255,-0.006490481,-0.044428617,-0.02032758,0.039492104,0.01356895,-0.029128011,0.0016525042,-0.02088326,-0.035589416,0.0015668906,0.0015216608,0.0014796617,-0.05567146,-0.014240935,0.051070943,0.0011162077,-0.037941366,-0.030161837,0.030239373,0.017536253,0.025561316,-0.055619773,-0.00064815965,-0.011494839,-0.02603946,0.016114743,0.01200529,0.016657501,0.056240067,0.004755594,0.0067133997,0.013607718,-0.009924717,0.0028866325,0.06802567,0.022330614,0.016347354,-0.035951257,-0.0035311577,-0.012812966,-0.016890112,-0.051717084,0.011100694,0.0068297046,0.018686382,-0.04292957,0.026595142,-0.015959669,-0.011488377,-0.012399436,0.02749974,-0.01315542,0.022576148,-0.02019835,0.04683226,-0.017419947,-0.005715112,-0.029412314,0.038923502,0.021723242,0.008871509,0.049520206,0.049235903,0.009905334,-0.0017348871,0.029567387,0.0696281,0.011533608,-0.008974891,-0.010932697,0.026982825,0.044919685,-0.061460882,-0.01407294,-0.0033405463,0.0059186467,0.026246225,-0.009918256,0.021632783,0.017885169,0.012451127,-0.014047094,-0.0049946657,-0.032358713,0.010887467,-0.0008302905,0.028120033,0.028688638,0.006477558,-0.002810711,-0.0066035558,0.03132489,-0.026956981,0.014228013,-0.034581438,0.008884432,-0.045048915,0.008167216,0.007889375,0.018738074,0.05468933,-0.054120727,-0.05179462,0.030239373,-0.018311622,-0.021891238,0.008567822,0.052208148,-0.023131829,-0.0017106569,-0.03132489,-0.0076696873,0.009259193,0.0044551385,-0.017988551,-0.019655593,0.0050851256,0.044092625,-0.0019061144,0.00657771,-0.015701214,0.019526364,-0.026091153,-0.0044648307,0.056550212,-0.047659323,0.01687719,-0.045824282,-0.027603121,0.05696374,-0.013698178,0.014228013,0.016592886,-0.059134774,-0.0020482652,-0.015313529,-0.04724579,0.050062962,0.019513441,0.046211965,0.0114819165,0.042128358,0.031841803,-0.04398924,0.030523676,0.0040416084,0.0099893315,-0.017781785,0.021154638,0.0021678014,-0.04047424,-0.00542758,-0.0068620117,0.033702686,0.016864266,0.005175585,-0.022653684,0.056550212,-0.0006917741,-0.0024488724,-0.012948655,0.029386468,-0.038897656,0.029593233,0.042154204,-0.00088602013,0.084670246,0.016722115,-0.050709102,-0.014408932,0.037837986,0.032307025,0.0026976364,0.029515697,-0.015481526,0.010713009,0.045617517,0.016683348,0.0007652726,-0.01117823,-0.007088161,0.02167155,-0.043911707,-0.006771552,0.06228794,0.022408152,-0.012632046,0.03721769,-0.010596704,0.030963052,0.05096756,-0.060478747,0.014228013,-0.004984974,0.014615698,0.0019384214,0.025625931,-0.006206179,0.011423764,-0.022666607,7.677966e-05,-0.029360622,-0.034142062,0.0047459016,-0.0024682565,0.020495575,-0.031247353,0.022343537,0.036804162,-0.02061188,-0.022963833,-0.0150679955,0.008109063,0.032591324,0.001028171,-0.04877068,-0.007437077,0.027086208,0.02497979,-0.010370554,-0.0026944058,-0.014357241,0.026233302,0.001147707,-0.0074629225,-0.012896963,0.0025441782,0.047349174,0.026931135,0.003744384,0.026595142,0.052776754,-0.024139808,0.01269666,-0.016618732,0.0047814394,0.021115871,-0.02424319,0.021839548,-0.026272072,-0.004212836,-0.013556027,-0.006416175,0.024217345,-0.006293408,-0.02392012,0.03667493,0.043911707,0.0020967259,-0.046289504,0.028275106,-0.018130701,0.04236097,0.005004358,-0.027267128,0.013491413,-0.0023697203,0.010965004,-0.016024284,-0.032668862,0.047116563,-0.026272072,-0.032048568,0.035330962,0.016037207,-0.030291066,0.010816392,-0.0072626187,0.0052175843,0.01586921,0.010525628,-0.0010160559,0.027680658,-0.0356928,0.009504726,-0.023183519,0.027292972,-0.006726322,0.010829315,-0.046211965,0.017781785,0.03969887,-0.006477558,0.04983035,0.016179357,0.0003856651,-0.0030352448,0.011850216,0.027577275,-0.033780225,0.01407294,-0.0021823393,0.00093771133,-0.01669627,-0.018557154,-0.0074306154,-0.012845272,-0.05249245,0.03546019,0.06911118,-0.032358713,0.003744384,0.026853599,0.030756285,0.00010550262,0.018195316,0.018686382,0.0064969426,-0.005492194,-0.031014742,0.033315003,-0.03905273,0.01950052,0.026982825,0.024191499,0.022459842,0.020107891,-0.0028252492,-0.026646832,-0.002557101,-0.026388377,0.033082392,0.019410059,0.00045149066,0.009666261,-0.010545013,-0.0047814394,-0.0021629552,0.024075193,0.023622895,-0.023622895,-0.033728532,-0.009814873,0.0058508017,-0.02920555,-0.013297571,-0.021762012,-0.02364874,-0.022214308,-0.03137658,0.0063774064,-0.0589797,0.0064484817,-0.00075921504,-0.015300606,0.005786188,0.01899653,0.041921593,0.022976754,0.037166,-0.017096877,-0.027267128,-0.030006763,-0.0027315589,-0.019293753,0.030988896,-0.00050843175,-0.0102607105,-0.015093842,-0.031583346,0.035201732,0.0006655247,-0.017639635,-0.055929918,0.014176322,0.04383417,-0.013045576,-0.017820554,0.018725151,0.014874154,0.059444923,0.020689419,-0.022899218,-0.0034310059,0.020004509,0.022782912,0.0031951645,0.0023519513,0.0330307,-0.037837986,-0.026853599,-0.010370554,-0.0024456417,0.010228404,-0.02612992,-0.013530182,-0.009537034,-0.01854423,0.01881561,0.01987528,-0.04093946,-0.031221507,0.026905289,-0.018298699,0.0066294014,-0.030135991,-0.041275453,1.7276685e-05,-0.010125021,0.036468167,-0.025613008,-0.027163746,-0.012793581,-0.009388421,-0.0327464,-0.003518235,-0.025561316,0.011229921,0.035486035,-0.022149695,-0.023519512,-0.008089678,-0.026853599,0.0014909691,-0.028275106,0.014512314,-0.021904161,-0.028300952,0.041378837,-0.04406678,-0.008936123,-0.0038509972,-0.006089874,-0.035201732,-0.0064194053,0.001844731,0.035201732,-0.0009756721,0.048512228,0.005883109,0.02433365,-0.013801561,0.009233347,-0.0058540325,-0.0018043473,0.039569642,-0.008574284,-0.007366001,-0.002033727,-0.045307368,-0.00032206063,0.006849089,0.008109063,-0.01757502,0.02814588,0.018479617,0.020586036,0.033289157,-0.0076696873,-0.03186765,-0.0028882478,-0.009588725,-0.005857263,-0.02065065,0.019371292,0.021736166,-0.00076769566,0.002350336,-0.024579184,0.02819757,0.008761665,0.025574239,0.018621769,-0.01959098,0.028714482,0.010473937,-0.02442411,-0.011262229,-0.00031600308,-0.009898872,-0.050398957,-0.040138245,-0.001959421,0.021852471,0.017096877,0.02438534,0.014357241,-0.015158455,-0.10607042,0.00565696,0.019035298,-0.019655593,-0.00031802227,-0.019629747,0.014887077,0.026440067,-0.041585602,-0.027060363,0.008289983,0.0007192351,-0.049752817,0.004057762,0.064924195,-0.00805091,0.014408932,-0.0050883563,0.051717084,-0.022963833,-0.007824761,-0.018027319,-0.0583...', '2025-03-25 05:14:43.314712+00'), ('68', 'https://ai.pydantic.dev/results/', '3', 'Challenges and Implementation of Streamed Results in Pydantic', 'This section discusses the two main challenges when dealing with streamed results in Pydantic: validating structured responses through partial validation and identifying the finality of a response during streaming. It highlights the recent addition of partial validation and describes how PydanticAI handles streaming responses to differentiate between tool calls and results.', '_(This example is complete, it can be run "as is")_ Streamed Results There two main challenges with streamed results:
              1. Validating structured responses before they're complete, this is achieved by "partial validation" which was recently added to Pydantic in [pydantic/pydantic#10748](https://github.com/pydantic/pydantic/pull/10748).
              2. When receiving a response, we don't know if it's the final response without starting to stream it and peeking at the content. PydanticAI streams just enough of the response to sniff out if it's a tool call or a result, then streams the whole thing and calls tools, or returns the stream as a [`StreamedRunResult`](../api/result/#pydantic_ai.result.StreamedRunResult).
Streaming Text Example of streamed text result: streamed_hello_world.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('google-gla:gemini-1.5-flash')  # (1)!
                        
                        
                        async def main():
                            async with agent.run_stream('Where does "hello world" come from?') as result:  # (2)!
                                async for message in result.stream_text():  # (3)!
                                    print(message)
                                    #> The first known
                                    #> The first known use of "hello,
                                    #> The first known use of "hello, world" was in
                                    #> The first known use of "hello, world" was in a 1974 textbook
                                    #> The first known use of "hello, world" was in a 1974 textbook about the C
                                    #> The first known use of "hello, world" was in a 1974 textbook about the C programming language.
                        

              1. Streaming works with the standard [`Agent`](../api/agent/#pydantic_ai.agent.Agent) class, and doesn't require any special setup, just a model that supports streaming (currently all models support streaming).
              2. The [`Agent.run_stream()`](../api/agent/#pydantic_ai.agent.Agent.run_stream) method is used to start a streamed run, this method returns a context manager so the connection can be closed when the stream completes.
              3. Each item yield by [`StreamedRunResult.stream_text()`](../api/result/#pydantic_ai.result.StreamedRunResult.stream_text) is the complete text response, extended as new data is received.
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ We can also stream text as deltas rather than the entire text in each item: streamed_delta_hello_world.py
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('google-gla:gemini-1.5-flash')
                        
                        
                        async def main():
                            async with agent.run_stream('Where does "hello world" come from?') as result:
                                async for message in result.stream_text(delta=True):  # (1)!
                                    print(message)
                                    #> The first known
                                    #> use of "hello,
                                    #> world" was in
                                    #> a 1974 textbook
                                    #> about the C
                                    #> programming language.', '{"source": "pydantic_ai_docs", "url_path": "/results/", "chunk_size": 3673, "crawled_at": "2025-03-25T05:14:42.437203+00:00"}', '[0.030363783,0.033874195,0.022100221,0.0057908986,0.02409885,0.01004439,0.024419144,0.007270653,0.006751778,0.024201345,-0.0018528954,-0.020959979,-0.023009853,-0.03220867,0.00665569,0.014246636,-0.04709589,0.00492931,-0.005589114,0.034899134,0.03064564,-0.011428056,-0.009570356,0.02892887,-0.00567239,-0.022945795,-0.034847885,0.074461736,-0.010287813,-0.04069003,0.0030844223,0.00077070517,-0.035206612,-0.038588908,-0.0015069789,0.013029522,-0.003372686,0.04366235,0.010857935,-0.017436754,0.029133858,-0.02268956,0.010550453,0.037282113,-0.01375979,0.032311164,-0.008468549,0.0032205468,0.04507164,0.06031759,-0.03971634,0.05309178,-0.011959743,-0.05509041,0.005999089,-0.006063148,-0.012062237,0.03428417,-0.026225597,-0.07302682,-0.007558916,0.011722727,-0.020806238,0.018551374,-0.03154246,0.0037538349,-0.06180375,0.015028151,-0.017295826,0.016719298,0.0037250083,0.019499442,-0.03318236,-0.006549993,-0.046506554,-0.047992714,0.010159696,0.050913785,-0.00033150334,-0.018871667,0.0076550045,-0.020703744,-0.008154661,-0.011146199,-0.023612006,0.005220777,-0.04040817,-0.00978175,-0.024598507,-0.027955178,-0.026264032,0.048992027,0.011011676,0.012536271,0.04909452,0.018897291,0.009762533,0.0018416852,0.02818579,0.02482912,0.03807644,-0.021600565,-0.060727566,-0.0047083083,0.05601285,-0.005906204,0.017885165,0.00970488,-0.05011946,-0.023086725,-0.06564727,-0.009153976,0.0019505848,0.017910788,-0.029979432,0.0195635,-0.007334711,-0.032311164,0.013234509,0.013913531,-0.03182432,-0.0047883815,-0.031388722,0.0106017,0.0076421928,-0.01145368,0.0062585264,-0.06892707,-0.012670794,-0.031029992,0.05652532,0.004208651,0.0020530785,-0.009288499,-0.027186476,0.0049645426,-0.025341587,-0.018807609,-0.021075284,0.03846079,-0.034232922,-0.055961605,-0.01134478,0.010396713,-0.0054674027,0.0036737614,-0.038614534,0.00676459,-0.016027465,-0.010620918,0.027596451,0.048838288,-0.080508865,0.008981017,-0.05831896,0.041304994,0.014028836,0.040536292,0.013939154,-0.04268866,-0.041561227,0.05560288,-0.039383236,0.0063962527,-0.031849943,-0.025277529,0.006101583,-0.007757498,-0.041074384,-0.038537662,-0.016706487,-0.019217584,-0.011094952,0.023624817,0.036308423,-0.03249053,-0.07492296,-0.056269087,0.0009993144,-0.09260313,-0.012363313,0.004618626,-0.033566713,-0.028851999,0.012984681,-0.01023016,0.027212098,-0.021164967,-0.031798694,0.042663038,0.0042342744,0.06441734,0.0068670833,0.0018849247,-0.039050132,-0.009326934,0.08399365,0.0044712913,-0.0019233599,0.015258762,0.056166593,0.052374322,-0.017270202,-0.0068094307,0.016565558,-0.048530806,-0.0006742169,0.018769173,-0.04945325,-0.019153526,0.032644268,-0.038563285,0.021088095,-0.026264032,-0.036872137,-0.028313907,-0.049120147,0.048607677,-0.008045762,0.0006053539,-0.00041958393,0.046532176,0.020140028,-0.011665073,-0.031363096,-0.010659353,0.009929085,-0.007219406,0.0068094307,0.021638999,0.02445758,-0.0056563755,0.017308637,-0.03100437,0.04092064,-0.08214877,0.03115811,0.014848786,-0.016770545,-0.019051032,-0.041023135,-0.027340217,0.03443791,0.020050347,-0.0034463534,-0.0008423708,-0.0017471986,-0.045712225,0.048966404,0.043611106,0.024329461,-0.044789784,-0.022215527,-0.036410917,-0.017372696,-0.05534664,-0.017821107,-0.036052186,-0.019281643,0.023599193,0.0072322176,0.022523008,-0.07195064,-0.017154897,0.022779243,-0.022715185,0.018307952,-0.008045762,0.033387348,-0.039690718,0.037282113,0.045635357,0.01776986,-0.014618176,-0.05954889,0.024214156,0.0016511107,0.014182577,0.023919486,0.017923601,0.0181414,0.0461222,0.02402198,0.037512723,-0.041971203,-0.00985862,-0.000946466,-0.012856564,0.02320203,0.009493487,0.022766432,0.017923601,0.0386914,-0.021549318,0.005095863,-0.0021667825,0.054270457,0.049350757,-0.024598507,-0.0011570588,0.0031821115,-0.018436069,-0.0054674027,0.0237145,0.011741944,0.038998883,-0.0362828,-0.009025859,0.022484573,-0.027340217,0.0146437995,0.078561485,-0.04061316,-0.020050347,-0.017885165,-0.06047133,0.07666535,-0.030466277,0.04594284,-0.045251004,-0.030953122,-0.0043591885,0.05309178,-0.0048236134,-0.04988885,-0.0085069835,0.03466852,-0.0034911945,-0.009499893,0.008500578,-0.023586381,-0.02007597,-0.010576077,0.018781986,-0.021741493,-0.019166337,-0.044200443,0.0048748604,0.01821827,0.05101628,-0.05117002,0.0012883788,-0.02654589,-0.016334947,-0.007033636,0.011780379,0.02662276,0.020729367,-0.0033470625,-0.023701686,0.016027465,0.00080553704,0.015233139,0.014823163,0.026340902,-0.015412502,-0.024329461,0.0066749076,-0.0015029752,-0.013183263,-0.060573824,-0.0028586157,-0.00052528066,0.042329933,-0.03325923,0.0061208005,-0.050221954,-0.026520265,-0.01933289,0.01612996,0.033079866,0.038307052,0.024367897,0.020345015,-0.021408388,0.001153055,-0.045097265,0.015796853,-0.0032429674,0.057191532,0.009166787,0.0593439,-0.031439967,-0.019537877,0.020729367,0.06954203,-0.018333575,0.010460772,0.002464655,0.038178932,0.05214371,-0.043995455,-0.032669894,0.048428312,0.001827272,0.02669963,-0.016027465,0.012561894,0.040715653,0.006835054,0.02208741,0.012177543,-0.026674006,-0.01301671,0.0030539944,0.049504496,0.021626187,-0.0017199737,0.030825004,0.026366526,0.037384607,-0.011517739,0.038563285,-0.058165222,-0.033643585,-0.012818129,-0.016475875,0.033207987,0.03392544,0.08194378,0.012747664,-0.073078066,-0.01495128,0.012933434,-0.019576313,0.11192321,0.028954493,-0.04537912,0.010684976,-0.008609477,-0.0021908046,0.00899383,0.042996142,-0.0055730995,-0.016117148,0.03026129,0.0010425539,0.015924972,0.0025207065,1.265533e-05,0.017462378,-0.017321449,-0.040331304,0.022151468,-0.040356927,0.005342488,-0.030799381,-0.009544733,0.037615217,-0.020332204,0.0076357867,-0.006899113,-0.026392149,0.0053168647,-0.0026824544,-0.04929951,0.044226065,0.014605364,0.025085352,-0.023394207,-0.0018240691,-0.025277529,-0.041381866,0.0048300195,-0.033489842,-0.005765275,0.045276627,0.020011911,-0.02111372,0.0197813,-0.0033374538,-0.0027817453,-0.017142085,-0.009749721,-0.018102964,-0.01524595,0.049735107,0.020421887,-0.021972105,-0.005188748,0.035642214,3.925467e-06,-0.016911473,0.03202931,-0.027135229,0.03771771,-0.011709915,-0.027596451,0.0026760485,-0.0049677454,0.0158481,0.012408153,0.037538346,-0.014490059,0.0067261546,-0.0134138735,-0.043559857,0.03251615,0.000489648,-0.0014941671,-0.014861599,-0.019640371,-0.030620018,0.035744708,0.043559857,-0.016488688,0.003166097,0.004154201,0.0025046917,0.05063193,-0.016309323,-0.008635101,0.047710855,0.009993143,-0.00017746238,0.0049965717,0.014259447,-0.0044008265,-0.020639686,-0.0028714275,0.00373782,0.0064058616,0.009583169,-0.007443611,-0.024508826,-0.00981378,-0.013087175,-0.018436069,0.01776986,-0.028108919,-0.005448185,0.005509041,0.02179274,0.025046919,-0.035001628,-0.016078712,0.03131185,-0.0036417323,-0.021869611,-0.0052912417,-0.015271573,0.0028522098,-0.04878704,0.003568065,-0.00048244142,0.007872804,0.037897076,-0.025623446,-0.018717926,0.0012275232,0.04092064,0.011524145,0.0040773307,-0.013208886,0.016296512,0.008673537,0.004794787,0.023791369,-0.02521347,0.0014405181,-0.013657296,-0.0050478186,0.013695732,0.022753619,0.0039043725,0.020485945,0.04314988,0.0073731462,-0.015130645,0.018756362,-0.0034111212,0.00948708,0.0011938924,0.0144259995,0.0065019494,-0.01052483,0.010921993,0.013260133,-0.05852395,0.036077812,-0.015092209,-0.034771014,0.030005055,0.032131802,0.00527843,0.017757047,0.0011994975,0.0070400415,0.007917644,0.004794787,0.042868026,-0.018487316,-0.007251435,0.026417771,-0.04445668,0.011876467,0.041843086,-0.021293083,-0.05035007,0.014310694,0.04835144,-0.0108002825,-0.022266774,0.038793895,0.019947853,0.0038851548,-0.019601936,0.0013884704,-0.021728681,-0.0010849928,-0.0150153395,-0.039741963,-0.00114745,-0.027263345,-0.007578134,0.0035456442,-0.06703094,0.03466852,0.049350757,-0.02394511,-0.02468819,0.014925657,-0.0092820935,0.010114855,0.0059862775,-0.010140479,-0.0059446394,0.0153356325,-0.03115811,0.027596451,-0.015450938,0.03228554,0.016399005,0.030671265,0.003214141,-0.020639686,-0.010319843,-0.010467177,-0.025841245,-0.033387348,0.03992133,0.017974846,0.008974612,-0.010268596,0.012324877,-0.021357141,-0.011645856,0.01375979,0.016117148,-0.030927498,0.014861599,-0.0061592357,0.03302862,0.014221013,-0.0007434803,-0.021459635,-0.04617345,-0.014092895,-0.026264032,-0.009576763,-0.04097189,0.01673211,-0.00925647,-0.009570356,-0.053962976,0.03548847,0.03392544,0.017295826,0.028134543,0.0009088316,-0.031260602,-0.04038255,0.04537912,-0.00033230404,0.010723412,-0.007392364,-0.0034847886,-0.035334732,-0.02892887,0.0386914,-0.00825075,0.026750877,-0.034617275,-0.010063608,0.0063866437,-0.030107548,0.0042855213,0.015681548,0.0011674683,0.043073013,-0.018487316,-0.02892887,-0.0045930026,0.028647011,0.04069003,0.00030167605,-0.008340431,-0.0035328325,-0.012132701,-0.06636472,-0.012062237,-0.005963857,-0.011959743,-0.0055154464,-0.006598037,-0.02341983,-0.011415245,0.01888448,0.034156054,0.009326934,-0.0076421928,-0.001144247,-0.0032013291,0.013913531,-0.05534664,-0.020345015,-0.0042951303,-0.019140713,0.0022244353,-0.017359884,-0.006476326,-0.008679942,-0.029492585,-0.01821827,0.0034335416,-0.05560288,-0.007827963,0.018384822,-0.010345466,0.02365044,0.0054898234,-0.0061688446,0.0039011696,-0.030466277,0.00713613,-0.013061551,-0.063341156,0.021626187,-0.032695517,0.008205908,-0.027340217,-0.014707858,0.0040356927,0.012702823,-0.013477933,0.0023893863,-0.005185545,0.029313222,-0.0134138735,0.00479799,-0.025610633,0.009493487,0.0055314614,0.0039524166,0.036539033,0.00031648958,0.011998178,0.010966835,-0.022125846,-0.033438597,-0.023496699,-0.010627324,-0.0076357867,0.036410917,0.007155347,-0.019896606,0.0072322176,-0.0019121496,0.014592553,-0.003785864,-0.0304919,-0.011107763,-0.017539248,0.035667837,0.045763474,-0.023330146,0.003744226,0.0057684784,0.02877513,-0.0108002825,0.018538563,-0.0037634436,-0.030620018,0.02476506,0.018487316,-0.013401062,-0.0017920397,-0.024726626,-0.016578369,-0.032234296,-0.042586166,-0.025021294,0.0037922699,0.0044296533,0.00286342,-0.011248693,0.014605364,-0.096549146,-0.004147795,0.0010433546,-0.022189904,-0.0033854977,-0.04617345,-0.003382295,0.014887222,-0.031644955,-0.011415245,0.023893863,0.00043319637,-0.036026563,-0.03400231,0.027929556,0.0035424414,0.0074179876,-0.04796709,0.028211413,-0.048966404,-0.047505867,-0.002866623,-0....', '2025-03-25 05:14:43.370376+00'), ('69', 'https://ai.pydantic.dev/results/', '4', 'Streaming Text and Structured Responses in Pydantic AI', 'This section addresses the behavior of the `stream_text` method in Pydantic AI, noting that it will raise an error if the response is not text. It emphasizes that the final result message will not be included if `.stream_text(delta=True)` is used. Additionally, it mentions the limitations of partial validation with certain types in Pydantic, suggesting the use of `TypeDict` for model-like structures and includes a reference to an example script for streaming a user profile.', '1. [`stream_text`](../api/result/#pydantic_ai.result.StreamedRunResult.stream_text) will error if the response is not text
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ Result message not included in `messages` The final result message will **NOT** be added to result messages if you use `.stream_text(delta=True)`, see [Messages and chat history](../message-history/) for more information. Streaming Structured Responses Not all types are supported with partial validation in Pydantic, see [pydantic/pydantic#10748](https://github.com/pydantic/pydantic/pull/10748), generally for model-like structures it's currently best to use `TypeDict`. Here's an example of streaming a use profile as it's built: streamed_user_profile.py
                        
                                                from datetime import date
                        
                        from typing_extensions import TypedDict
                        
                        from pydantic_ai import Agent
                        
                        
                        class UserProfile(TypedDict, total=False):
                            name: str
                            dob: date
                            bio: str
                        
                        
                        agent = Agent(
                            'openai:gpt-4o',
                            result_type=UserProfile,
                            system_prompt='Extract a user profile from the input',
                        )
                        
                        
                        async def main():
                            user_input = 'My name is Ben, I was born on January 28th 1990, I like the chain the dog and the pyramid.'
                            async with agent.run_stream(user_input) as result:
                                async for profile in result.stream():
                                    print(profile)
                                    #> {'name': 'Ben'}
                                    #> {'name': 'Ben'}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes'}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes the chain the '}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes the chain the dog and the pyr'}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes the chain the dog and the pyramid'}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes the chain the dog and the pyramid'}', '{"source": "pydantic_ai_docs", "url_path": "/results/", "chunk_size": 2717, "crawled_at": "2025-03-25T05:14:42.435048+00:00"}', '[0.016442925,0.02842592,0.024137529,-0.0022299646,0.0025071786,0.004352719,0.024541862,-0.0076884767,0.013955657,0.01020025,-0.012754907,-0.017361866,-0.00048857054,-0.0030233173,-0.017888727,0.033253428,-0.029602166,-0.008166326,-0.0077926232,0.055430546,0.042540863,-0.014654052,0.0029666491,0.015009376,0.005498333,0.012803917,-0.038424004,0.055626586,-0.014911356,8.648579e-05,-0.019040465,0.00031990648,-0.011468389,-0.049745362,-0.01886893,-0.03974728,0.007290269,0.03658612,0.02179729,-0.015977329,0.044280723,-0.039110146,0.015082892,0.020314733,-0.018587122,0.052440923,0.006297812,0.02237316,0.040506937,0.066751905,-0.05405826,0.048838675,-0.010157366,-0.027788788,0.019885892,-0.026220461,-0.01339204,-0.004576328,-0.034111105,-0.037762366,0.0001709614,-0.021723775,-0.005479954,0.0015775161,-0.028523942,-0.017986747,-0.052538943,0.021503229,-0.011425505,0.026122442,0.021282684,-0.008460388,-0.0131837465,0.008080558,-0.04119308,-0.020633299,0.05680283,0.057488974,0.01910173,-0.0436926,0.0049898517,0.008282726,-0.012852928,0.025950905,-0.027421212,0.005841404,-0.08424855,-0.016283643,0.0014121067,-0.038718063,-0.016675724,0.02943063,-0.015781287,0.017729443,0.0465597,0.010531069,-6.6766836e-05,-0.027543737,-0.0018608564,-0.0019849134,0.018648384,-0.0070268386,-0.04930427,0.003926943,0.02275299,-0.008938237,0.034895267,0.016675724,-0.061409794,-0.029553156,-0.038129944,0.033351447,-0.010181871,0.035409875,-0.03523834,0.0051399455,-0.014200708,-0.035115816,-0.0004805298,0.024737904,-0.027347697,0.024835924,-0.029308105,0.0129509475,-0.0101879975,0.006303938,0.0034184621,-0.06743805,-0.035679433,-0.026024422,0.024186539,-0.0057341945,0.019003708,-0.014225213,-0.031219503,-0.005314545,-0.024223296,-0.024027254,-0.00034709185,-0.0035103562,-0.062291976,-0.03293486,-0.027298687,0.010635216,-0.008858595,0.030778412,-0.035581414,0.029112063,-0.031464554,-0.027347697,0.04195274,0.06341921,-0.064350404,0.012754907,-0.030067764,0.0052226502,0.011731819,0.009587622,-0.005146072,-0.04450127,-0.023537153,0.03173411,-0.064007334,0.0064203376,-0.0015484163,-0.05621471,0.0177662,-0.011437758,-0.04053144,-0.03754182,-0.018097019,-0.0066470094,-0.02798483,0.007541446,0.043227006,-0.03678216,-0.08228814,-0.086159945,-0.016344905,-0.06464446,-0.010500438,0.020988623,-0.012791664,-0.04119308,-0.0244806,-0.0065796208,0.0163204,-0.023463638,-0.0009089862,0.03700271,0.017484393,0.05170577,0.021331694,-0.030851927,-0.03548339,-0.031072473,0.054793414,0.011027297,-0.009661137,0.015634257,0.043790624,0.038227964,-0.009079142,-0.01949381,-0.00809281,-0.05386222,-0.019751115,0.0077374866,-0.06356624,-0.04229581,0.032126192,-0.04114407,0.009109773,-0.023145072,0.013477808,-0.01886893,-0.064301394,-0.0039024379,-0.0057586995,-0.025509814,-0.00809281,0.029773703,0.004018837,-0.0388896,-0.024946196,0.024100771,0.0030983642,0.012093269,-0.009740779,0.04680475,0.020890601,-0.012362826,0.03298387,-0.032812335,0.03705172,-0.06748706,0.0259264,0.013747363,0.004659033,-0.0012107054,-0.05190181,-0.0021886122,0.043937653,0.06459545,0.01161542,0.00028716918,-0.009495728,-0.048618127,0.03653711,0.056361742,0.019506063,-0.030410836,-0.015242175,-0.0073699104,-0.03222421,-0.031807628,-0.006726651,-0.018930193,-0.00993682,-0.0028655657,0.05141171,0.011217211,-0.041021544,0.020461762,-0.0038748696,-0.0340866,0.024639882,-0.006055824,0.030998956,-0.0566558,0.03058237,0.04641267,-0.022495685,0.007786497,-0.057636008,0.036708646,0.0014810272,0.019738862,-0.011229464,0.003727839,0.0062488015,0.020584287,0.0259264,0.019800125,0.0024137527,0.013857637,0.038276974,-0.03538537,0.020339238,0.013061221,0.029038548,0.023194082,0.00035283522,-0.0283279,0.03232223,-0.0204005,0.04469731,0.027690768,-0.014984871,0.007780371,-0.005170577,-0.01901596,-0.0036328817,0.001684726,-0.0030662012,0.018023504,-0.013367535,-0.0040801,0.019224254,-0.030876432,0.0037891017,0.066114776,-0.0436926,-0.027641758,-0.039918814,-0.06253703,0.059498396,-0.033228923,0.050823588,-0.013955657,-0.050235465,-0.019934902,0.035826463,-0.0051399455,-0.041732192,0.016406167,0.0048642633,-0.019763367,0.015450468,0.01526668,-0.04761342,-0.055381536,-0.027911315,0.043325026,-0.0042761406,-0.02054753,-0.040727485,0.048716146,0.020951865,0.07175095,-0.043006457,-0.006371327,-0.022152614,-0.0054554488,-0.014972619,-0.01862388,0.017325109,0.03815445,-0.039306186,-0.024909439,0.001507064,-0.0013998541,-0.00565149,0.0026557406,0.036708646,-0.009079142,-0.010616836,0.009330318,-0.03369452,0.0005590227,-0.039526735,-0.008693186,-0.0046682223,0.030802917,-0.019506063,0.027053636,-0.043619085,-0.0355324,-0.030018752,-0.009189414,0.019420296,0.01192786,0.0037554072,0.016295895,-0.022079099,-0.011076307,-0.037664346,0.04195274,-0.003369452,0.041634172,0.013747363,0.064203374,0.008895353,-0.032126192,0.011964617,0.07037866,0.0006922692,0.010904771,-0.009385455,0.04641267,0.06493853,-0.0350423,-0.015732277,0.033179913,-0.020204458,0.031268515,-0.012032006,-0.0038411752,0.03700271,-0.020964118,0.0041628047,0.012105522,0.0017031048,0.007602709,0.021307189,0.04714782,-0.00031052562,-0.019738862,0.02237316,0.022360908,0.031611584,-0.030116774,0.03038633,-0.060576618,-0.018856678,-0.030557865,-0.006922692,0.021674765,0.035556905,0.07635791,-0.0050541777,-0.08111189,-0.015033882,0.0014480986,-0.015009376,0.063615255,0.040506937,-0.0652816,0.0075843297,0.0029666491,-0.013355282,0.024247801,0.057881057,-0.00858904,0.010273765,0.022005584,-0.0218463,-0.0010552511,-0.023157325,0.002583757,0.03254278,0.014899104,-0.028254386,0.047270346,-0.048030004,0.0025699728,-0.01881992,0.027249677,0.040555947,-0.022287393,0.0122280475,0.008760575,-0.019567326,-0.025338277,0.0007520004,-0.048324067,0.057783037,0.04766243,0.013796374,-0.0051338193,-0.010347281,0.0070635965,-0.04584905,-0.0015017034,-0.052587956,-0.028842509,0.04719683,0.01569552,-0.0074311728,0.014960366,0.0064816,0.0022054594,0.0008913732,0.011407126,-0.027004626,-0.011627672,0.038914107,0.012791664,-0.012332194,0.023402374,0.036659636,-0.007780371,-0.026073432,0.036047008,-0.037443798,0.055381536,0.010537195,-0.052882016,-0.010089977,0.020192206,0.009030131,-0.0075108144,0.04854461,-0.013134736,-0.012528235,-0.010892519,-0.046388164,0.004389477,0.041266598,-0.021760533,-0.011964617,-0.010696478,-0.028523942,0.03389056,0.05361717,-0.003813607,-0.015597499,-0.015058387,0.0129509475,0.045285434,0.008411377,0.004257762,0.037811376,-0.0021166285,0.015940571,0.0011042613,0.010371786,-0.02400275,-0.033155408,0.010255386,0.010475933,0.002608262,0.021858552,0.0006616378,-0.00883409,-0.023010293,0.001862388,-0.031415544,0.02439483,-0.043227006,0.020326985,0.011321358,0.026318483,0.016001834,-0.040335402,-0.01857487,0.00059654616,0.00046712856,0.012050386,0.006175286,-0.02693111,-0.007075849,-0.05435232,0.017913232,0.0059149195,0.0012704366,0.034527693,-0.005415628,-0.010433048,-0.0023662741,0.03288585,0.0021687017,0.017055552,-0.00022590643,0.007909022,0.018256303,-0.016663471,0.023475891,-0.013514565,-0.0048030005,-0.00049890863,0.00092659926,0.030165784,0.019947154,-0.01334303,0.032175202,0.0446483,0.00957537,-0.0067756614,0.03903663,0.001641842,-0.0048305686,-0.015989581,0.018856678,0.009244551,-0.0024321317,-0.013294019,0.02501971,-0.03673315,0.016161116,-0.0070023336,-0.014421254,0.039257176,0.011229464,-0.002747635,-0.0041382997,0.0030524172,0.0041199205,0.0136738485,0.01020025,0.04604509,-0.011113065,-0.009501854,0.005130756,-0.027641758,0.010580079,0.028523942,-0.010800625,-0.048838675,0.0006133934,0.063958324,-0.0058934777,-0.036194038,0.039477725,0.017067805,0.0045181285,0.00512463,0.01564651,-0.028867014,-0.006019066,-0.019077225,-0.01349006,-0.009048509,-0.040359907,-0.0064387163,0.00350423,-0.06807518,0.029920733,0.063713275,-0.008754449,-0.033400457,0.020755824,0.014801083,0.019787872,0.019224254,-0.0071983743,-0.024382578,0.015854802,-0.03964926,0.025485309,0.002810429,0.02318183,0.025632339,0.04690277,0.017165827,-0.03227322,0.004175057,-0.024211043,-0.03989431,-0.03009227,0.036096018,0.012424088,0.015156407,-0.010959908,-0.0076639713,-0.021184662,-0.02054753,0.016099853,0.025031965,-0.036880184,0.004239383,-0.009538612,0.040825505,0.0036481975,-0.0110395495,-0.028891519,-0.02693111,-0.009630506,-0.020780329,-0.016602209,-0.028523942,0.023243092,0.0016678787,-0.005351302,-0.03974728,0.0355324,-0.008337862,0.00040203688,0.02462763,0.013735111,-0.027715273,-0.014286476,0.019506063,-0.0088708475,0.01613661,-0.026539028,0.0054033757,-0.03945322,-0.02457862,0.02668606,-0.012234174,0.022128109,-0.041315608,0.01959183,0.01186047,-0.027519232,0.008840216,0.015572994,0.0059118564,0.055528566,-0.005746447,-0.027004626,0.01627139,0.010016462,0.04739287,0.011394873,-0.006457095,0.014935861,0.025142238,-0.035556905,-0.01186047,-0.01877091,-0.0037400916,0.006567368,-0.0029758387,0.0010315117,-0.01694528,0.0021258178,0.036120523,-0.0129754525,-0.03523834,-0.015254428,0.012448593,0.02712715,-0.026048927,-0.027666263,-0.008711564,-0.009808168,0.01349006,-0.0041566784,0.01531569,0.002654209,-0.010959908,-0.0066898935,0.005369681,-0.045138404,0.004012711,0.04330052,-0.014347739,0.006273307,-0.02188306,-0.015205418,0.019628588,-0.01771719,0.0041199205,-0.019212002,-0.038227964,0.035311855,-0.017288351,-0.006058887,-0.025362784,-0.027568243,-0.006126276,-0.016614461,0.000842363,0.00763334,-0.005038862,0.03514032,-0.026171451,0.016479682,-0.01396791,0.007841634,0.005372744,-0.014899104,0.03585097,0.0032898104,0.034429673,0.03528735,-0.040114857,-0.024517357,-0.007075849,0.020768076,-0.021625755,0.027494727,-0.015364701,-0.00016320782,0.03178312,0.021356199,0.020572035,-0.023316607,-0.031979162,-0.015830297,-0.0045242547,0.04886318,0.057979077,-0.041879226,-0.010077724,0.0052073346,0.044207208,-0.012050386,0.01421296,0.0025041155,-0.0035379245,0.013330777,0.004110731,0.0024428526,-0.015989581,-0.026024422,-0.01406593,-0.016173368,-0.036316566,-0.00019412638,0.00998583,-0.0019741924,0.013318525,-0.0235249,0.024284558,-0.0945897,-0.008007043,0.021515481,-0.02808285,0.023586163,-0.034160115,0.010102229,-0.0040494683,-0.024517357,-0.031047968,0.024786914,0.013294019,-0.018231798,-0.035017796,0.0080438005,0.018562617,0.036145028,-0.037958406,0.028107354,-0.032028172,-0.03923267,-0.005921046,-0.058959283,0.035826463,0.009446718,-0...', '2025-03-25 05:14:43.428985+00'), ('70', 'https://ai.pydantic.dev/results/', '5', 'Fine-Grained Control of Validation with Pydantic', 'This chunk provides a complete example of using Pydantic for validation, specifically showcasing a pattern for catching validation errors. It includes the definition of a `UserProfile` TypedDict and demonstrates initializing an `Agent` with OpenAI's GPT-4o model.', '_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ If you want fine-grained control of validation, particularly catching validation errors, you can use the following pattern: streamed_user_profile.py
                        
                                                from datetime import date
                        
                        from pydantic import ValidationError
                        from typing_extensions import TypedDict
                        
                        from pydantic_ai import Agent
                        
                        
                        class UserProfile(TypedDict, total=False):
                            name: str
                            dob: date
                            bio: str
                        
                        
                        agent = Agent('openai:gpt-4o', result_type=UserProfile)
                        
                        
                        async def main():
                            user_input = 'My name is Ben, I was born on January 28th 1990, I like the chain the dog and the pyramid.'
                            async with agent.run_stream(user_input) as result:
                                async for message, last in result.stream_structured(debounce_by=0.01):  # (1)!
                                    try:
                                        profile = await result.validate_structured_result(  # (2)!
                                            message,
                                            allow_partial=not last,
                                        )
                                    except ValidationError:
                                        continue
                                    print(profile)
                                    #> {'name': 'Ben'}
                                    #> {'name': 'Ben'}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes'}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes the chain the '}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes the chain the dog and the pyr'}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes the chain the dog and the pyramid'}
                                    #> {'name': 'Ben', 'dob': date(1990, 1, 28), 'bio': 'Likes the chain the dog and the pyramid'}
                        

              1. [`stream_structured`](../api/result/#pydantic_ai.result.StreamedRunResult.stream_structured) streams the data as [`ModelResponse`](../api/messages/#pydantic_ai.messages.ModelResponse) objects, thus iteration can't fail with a `ValidationError`.
              2. [`validate_structured_result`](../api/result/#pydantic_ai.result.StreamedRunResult.validate_structured_result) validates the data, `allow_partial=True` enables pydantic's [`experimental_allow_partial` flag on `TypeAdapter`](https://docs.pydantic.dev/latest/api/type_adapter/#pydantic.type_adapter.TypeAdapter.validate_json).
_(This example is complete, it can be run "as is"  you'll need to add`asyncio.run(main())` to run `main`)_ Examples The following examples demonstrate how to use streamed responses in PydanticAI:
              * [Stream markdown](../examples/stream-markdown/)
              * [Stream Whales](../examples/stream-whales/)
 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/results/", "chunk_size": 3528, "crawled_at": "2025-03-25T05:14:42.426408+00:00"}', '[0.028280376,0.038939487,0.027322404,-0.012730217,0.021385685,0.0013264859,0.017715711,0.029089928,0.024219118,0.03929029,0.024448492,-0.015314039,0.006361735,-0.016245024,-0.02666127,0.029116914,-0.049517643,0.011394454,-0.010922216,0.05969102,0.037671186,0.012595291,0.017783174,0.0476017,0.0015364636,-0.011320245,-0.05656075,0.05183836,0.0003931812,-0.024502462,-0.016298994,-0.014774337,-0.03356945,-0.027376374,-0.0024050463,-0.037401337,0.028793091,0.032517035,0.028010525,-0.015489442,0.028037509,-0.0685961,0.023153208,0.023153208,-0.013168724,0.05216218,0.01748634,0.0501383,0.02608109,0.042042773,-0.050678,0.015084665,-0.0025905687,-0.024259597,-0.011684544,-0.009687647,-0.030843958,0.010537678,-0.039829995,-0.030520137,-0.003909465,-0.017837144,-0.019739594,0.039856978,-0.03721244,-0.011279768,-0.046306416,0.005069824,-0.02555488,0.02210079,0.026539836,-0.0032702556,-0.019888012,0.01956419,-0.021925386,-0.052405044,0.041530054,0.07679957,0.0004975376,-0.049382716,-0.0066417055,0.0013855158,-0.021021387,0.026094582,-0.018903056,-0.011846455,-0.07652972,-0.008426094,-0.019172907,-0.036564797,-0.013161978,0.052351076,-0.046333402,0.016987115,0.069837414,0.01436956,0.016919652,-0.033839304,0.017877623,0.0013998516,0.019375294,-0.018053025,-0.039344262,0.025784254,0.034594886,-0.023787357,0.018741146,0.011893678,-0.048168387,-0.032517035,-0.0711327,0.021911893,-0.00019353369,-0.006193078,-0.042069755,0.013924307,0.0036935844,-0.033623423,0.008250692,-0.022289684,-0.04320313,0.02454294,-0.012426634,-0.002858733,-0.015098158,-0.006769885,0.020184848,-0.05747824,-0.07010727,-0.031410646,0.015880726,0.008574513,0.0476017,-0.0320313,0.00091496325,-0.00800108,-0.02253255,-0.0064224517,-0.002003643,-0.0045436146,-0.019631654,-0.046657223,-0.030466167,0.014639412,-0.008527288,-0.0063145114,-0.026863657,0.050758954,-0.032193214,0.017149026,0.013209202,0.072535925,-0.06665318,0.011785738,-0.033947244,0.005919854,0.011488902,0.028118465,0.0031454496,-0.036915604,-0.031572558,0.021250758,-0.05151454,-0.0041118534,-0.016919652,-0.046927072,-0.009107468,-0.014990218,-0.04573973,-0.027376374,0.005619645,0.0032196587,-0.029197868,-0.0016030831,0.047035012,-0.04528098,-0.07469473,-0.04409364,-0.018673683,-0.06897389,-0.021412669,0.012973082,-0.03297578,-0.030655064,-0.05100182,-0.03189638,0.026634285,-0.009842812,-0.010234096,0.024623895,0.01579977,0.0655198,0.022559537,-0.0051980033,0.0020761655,-0.042015787,0.053079672,0.02253255,0.024003237,0.018080011,0.031032855,0.037347365,0.0026158672,-0.033704378,0.015705323,-0.060770426,-0.023274641,-0.014882278,-0.08743169,-0.03497268,0.027538285,-0.025406463,0.025190582,-0.0054071373,0.0151926065,-0.027794644,-0.050920866,-0.016798219,0.003034136,0.010308305,-0.020076908,0.06665318,0.031869393,-0.03211226,-0.022613507,0.003636241,0.0038217634,-0.013236187,0.029494705,0.020697564,0.027848614,-0.014882278,0.009168184,-0.03896647,0.035134587,-0.079066314,0.016811712,0.016406935,0.025838224,0.010645619,-0.026620792,0.0076772585,0.028550226,0.03578223,0.0117250215,0.015300547,-0.0088443635,-0.025028672,0.040747486,0.054105107,0.043931726,-0.04908588,-0.016649801,-0.014747352,-0.033515483,-0.010679349,-0.007812184,-0.016852189,-0.0340282,-0.004998988,0.019118937,0.034621872,-0.038453754,0.013148486,0.0036294947,-0.031410646,0.0191864,0.02809148,0.049004924,-0.061310127,0.0017228294,0.05726236,-0.04865412,0.008041557,-0.03748229,0.020603117,0.020630103,0.021830939,-0.030870944,-0.0040680026,0.008655468,0.007616542,0.02432706,0.0144100385,0.015529919,0.058017947,0.03572826,-0.025136612,-0.008183229,0.0044019427,0.014774337,0.0004713958,-0.007218512,-0.026094582,0.06033866,-0.015408487,0.055535316,0.048950955,-0.022883357,0.0027811509,0.004874182,0.0048876745,-0.019280847,-0.01431559,-0.0035822708,0.01272347,-0.011441679,0.0037947784,0.021021387,-0.019820549,0.0013568441,0.060824394,-0.018687176,-0.019172907,-0.024502462,-0.06001484,0.0320313,-0.030142346,0.02713351,-0.0040646293,-0.045011133,0.0008631013,0.0111650815,-0.010348782,-0.0476017,-0.006901437,-0.0008896647,-0.044660326,-0.013458814,0.014059233,-0.034594886,-0.030223303,-0.02868515,0.030385213,0.0078661535,-0.015287054,-0.020630103,0.026391419,0.0104972,0.08629832,-0.05205424,-0.03610605,-0.047250893,0.0032955543,-0.014450517,-0.008979289,0.048087433,0.037887067,-0.017783174,-0.014706874,-0.0016376576,0.017081562,0.0029177628,0.042582475,0.013188963,-0.016838696,-0.00803481,0.008756662,-0.018363355,-0.0036969574,-0.044471428,-0.017634757,-0.021844432,0.021372192,-0.029008973,0.01924037,-0.03556635,-0.055373408,-0.0419888,-0.008291169,0.008608244,0.014612427,3.228197e-05,0.010207111,-0.025419956,-0.012170276,-0.02544694,0.026283478,-0.003862241,-0.005073197,0.026310464,0.062119678,0.00707684,-0.027066046,0.02088646,0.05909735,-0.005079943,-0.00866896,-0.01605613,0.039937936,0.06271335,-0.038615666,0.0013247993,0.009869797,-0.0011983067,-0.00874317,0.010611887,0.010780544,0.0439857,-0.019577684,0.009404304,0.015610875,-0.03159954,0.027929569,0.026701747,0.041044325,0.017270459,-0.016258517,-0.009707887,0.011117857,0.014086218,-0.05666869,0.03804898,-0.037185457,-0.013924307,-0.023396073,-0.02417864,0.01770222,0.033515483,0.0649801,-0.03947919,-0.085434794,0.011394454,-0.0001603294,-0.008979289,0.067624636,0.066383325,-0.058287796,0.0023105985,-0.013033799,-0.0009073737,0.017931594,0.010348782,-0.011138096,-0.009451528,-0.011583351,0.0031083452,0.0008394893,-0.0010591648,0.002858733,0.0052789585,0.003784659,-0.036133036,0.031545572,-0.05650678,0.0059434664,-0.03313769,0.016784726,0.01637995,0.00044483235,0.03297578,0.012386156,-0.010234096,-0.022707954,-0.008291169,-0.041368145,0.052405044,0.021277744,0.054833703,0.0007066721,-0.002464076,0.031545572,-0.03759023,0.023274641,-0.010011469,0.016150577,0.01637995,0.036672737,-0.012878635,-0.018106995,0.016501384,0.013242933,0.015597383,0.015813263,-0.048222356,-0.031194765,0.03132969,0.026040612,-0.007906632,0.008695945,0.009734872,0.014666397,-0.024205627,0.03392026,-0.009201916,0.06292923,-0.0062672873,-0.02740336,0.0034034946,0.034729812,-0.0062672873,0.010274573,0.063307025,-0.016150577,-0.0017354786,-0.03497268,-0.03672671,-0.008567766,0.020899953,-0.019213384,-0.008088781,-0.0017287324,-0.007960602,0.053889226,0.016393442,-0.033164676,0.007157795,-0.021304728,0.022937328,0.03640289,-0.04123322,-0.018687176,0.033488497,0.002831748,-0.0029987183,0.019753087,0.00049795926,0.014963233,-0.022937328,0.01945625,0.00690481,-0.0048337043,-0.010598394,-0.006803616,0.00029008972,-0.025096135,0.003101599,-0.051865343,0.019631654,-0.038345814,0.014868785,0.0090400055,0.01494974,0.00895905,-0.06476422,0.004428928,-0.016838696,-0.010112663,-0.0003261401,-0.005272212,-0.009377319,-0.0075558256,-0.018390339,-0.0026141806,0.0053868988,0.0052823317,0.019699117,-0.015921203,-0.011522634,0.0005165115,0.045038115,-0.012224246,0.0018687175,-0.023733387,0.013796127,0.031626526,-0.007974095,0.018835593,-0.00064342574,-0.023234162,-0.019537205,-0.0016637995,0.031734467,-0.005113675,0.005717466,0.026000135,0.040477637,-0.00856102,-0.04552385,0.021156311,-0.009653917,0.010834514,-0.027578764,-0.008399109,0.016676785,-0.0029970317,-0.022667477,0.004938272,-0.029413749,0.015287054,-0.030223303,-0.030034406,0.010146394,0.01621804,-0.029062944,0.022734938,0.02199285,0.029278824,-0.013870337,0.027308911,0.018849086,0.00462457,-0.004253525,0.0144100385,-0.017162519,0.017945085,0.013924307,0.018390339,-0.05634487,-0.0051541524,0.060716454,-0.01717601,-0.030034406,0.014598934,0.014990218,0.01505768,0.018511772,0.010449977,-0.0002519311,-0.0014765904,-0.017405383,-0.021007894,-0.006236929,-0.014585442,-0.009802334,0.006014302,-0.056992512,0.03885853,0.07345342,-0.008095527,-0.03775214,0.0038757336,0.016393442,0.026377926,0.013384605,-0.0125075895,-0.040936384,0.018120488,-0.072320044,0.0033781962,-0.011596843,0.02030628,0.030547123,0.019591175,0.019577684,-0.023396073,0.012979829,-0.03875059,-0.038426768,-0.032409094,0.027848614,0.02369291,0.01436956,0.010989678,0.013458814,-0.011940903,-0.026175538,0.0140187545,0.019280847,-0.037023544,-0.035647307,-0.01431559,0.021520609,-0.0028739122,-0.0036733455,-0.026323956,-0.018444309,-0.02162855,-0.033704378,0.0037475545,-0.016973622,0.017904608,0.011913918,-0.007994333,-0.018619712,0.035593335,0.025676314,0.008540781,0.026458882,0.024205627,-0.026755717,-0.01351953,0.014113203,-0.005390272,0.012210754,-0.038507726,0.018862579,-0.055373408,-0.010632126,0.05726236,-0.006982392,0.0043749576,-0.052243136,0.011536126,0.028226405,-0.044120625,0.018187951,0.018862579,0.009174931,0.045604803,0.011495649,-0.022384133,0.012062335,0.016245024,0.028496256,0.018106995,-0.029764555,0.01902449,0.006354989,-0.04061256,-0.013910814,-0.027012076,-0.015988667,0.0027440465,-0.01301356,-0.008871349,-0.016501384,0.01589422,0.030816974,-0.023072252,-0.02655333,0.014072725,-0.0036025096,0.02846927,-0.040531605,-0.045577817,-0.009930514,-0.007845915,-0.0075153476,0.007825676,0.008358632,0.008473318,0.002389867,-0.012676246,-0.0069149295,-0.05210821,0.012763948,0.038237873,-0.0045975847,0.002722121,-0.012878635,-0.026108075,-0.00010298607,-0.014464009,0.0074209,-0.009404304,-0.029332794,0.049841464,-0.024826283,0.0026226135,-0.016798219,-0.029008973,-0.01216353,-0.014167173,0.01420765,-0.0040949876,0.0035822708,0.0539432,-0.020913444,0.005123794,-0.02025231,0.011279768,0.010483707,0.0078796465,0.03000742,-0.008223707,0.021817446,0.04034271,-0.059960872,-0.012284962,-0.003906092,0.034621872,-0.0062537948,0.009734872,-0.016352965,0.0004473622,0.030951899,0.030385213,0.034540918,-0.024745328,-0.016879175,-0.025365986,-0.003007151,0.0501383,0.045361936,-0.016690278,0.011374216,0.0020964043,0.02512312,-0.012709978,0.0075423326,0.0018585981,-0.0014302098,-0.016730756,0.027484315,-0.0072792284,-0.008351886,-0.014437024,0.003562032,-0.030709034,-0.043958712,-0.002261688,-0.003734062,0.0066653173,0.011084126,-0.022613507,0.012629023,-0.090993725,-0.0035215544,0.0035519125,-0.0314916,0.010315051,-0.02740336,0.008729677,0.014072725,-0.021763476,-0.03880456,0.020346759,0.008230452,-0.030870944,-0.031302705,0.026189031,-0.014383053,0.010861499,-0.046630237,0.032085273,-0.015826756,-0.028712137,-0.034702826,-0.0680564,0.03213924,0.004654928,-0.0251...', '2025-03-25 05:14:43.621329+00'), ('71', 'https://ai.pydantic.dev/testing-evals/', '0', 'Testing and Evals Documentation', 'This section of the PydanticAI documentation focuses on testing and evaluation processes related to the platform, including links to various resources such as agent information, model details, and common tools for user support.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Testing and Evals  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * Testing and Evals  [ Testing and Evals  ](./) Table of contents 
                  * Unit tests 
                    * Unit testing with TestModel 
                    * Unit testing with FunctionModel 
                    * Overriding model via pytest fixtures 
                  * Evals 
                    * Measuring performance 
                    * System prompt customization 
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Unit tests 
                * Unit testing with TestModel 
                * Unit testing with FunctionModel 
                * Overriding model via pytest fixtures 
              * Evals 
                * Measuring performance', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 4996, "crawled_at": "2025-03-25T05:14:42.436536+00:00"}', '[-0.017439375,-0.006045836,0.04392656,-0.018277135,0.0016257784,0.0139347445,-0.021711953,0.025230546,-0.007860984,0.0118822325,0.023652764,-0.07584523,-0.029656712,-0.019673401,0.040491745,0.004502961,-0.033845514,0.0023614366,-0.0024120512,0.07629203,0.050265614,0.017634852,0.028414033,0.016461989,0.0007792915,-0.0046914574,-0.00087179424,0.051103372,0.012119598,-0.04861802,0.049427852,-0.0184028,-0.041273654,0.0069673723,0.0069778445,0.0025604046,-0.00089317455,0.012049784,-0.003455761,0.018793754,-0.005113828,-0.051410552,0.033650037,0.0102067115,-0.06746762,-0.004537868,0.006311127,0.027101543,0.008203069,-0.009194418,-0.07556597,0.0064437725,-0.021460624,0.0019251031,-0.017341636,-0.004991655,-0.04657947,0.0012688576,-0.005525727,-0.023010481,0.020455312,-0.0047193826,-0.011616942,0.05400761,-0.032868125,-0.016797092,-0.06238521,-0.003361513,-0.058363963,-0.0327285,0.033035677,0.048059512,-0.03247717,-0.0514664,-0.030773725,-0.024672039,0.03926303,0.08718291,-0.013215668,-0.053253625,-0.023834279,0.048394613,0.0028414035,0.006468207,-0.021111557,-0.040380042,-0.04230689,-0.008140237,-0.004429657,-0.028525734,-0.022759153,-0.00077841885,-0.04247444,0.0035465183,0.08288241,-0.008321752,0.005026561,0.024336934,0.009627261,0.008977997,0.021139482,-0.038927924,-0.05009806,0.015093646,0.03744788,-0.003570953,0.018291097,-0.013103966,-0.027017767,0.006583399,-0.12253639,-0.007819096,-0.026054343,0.022675376,-0.05652089,0.018891493,0.013473976,-0.011896195,0.003148582,-0.069254845,-0.03954228,0.012433758,0.03655427,-0.011979971,0.031220531,-0.015121572,-0.008901202,-0.031639412,-0.055068772,0.0004699311,0.02948916,-0.01202884,0.043368053,-0.020120207,-0.009473672,0.0016746478,-0.038006388,-0.010451059,-0.036610123,0.044568844,0.028330257,-0.016503876,-0.0024487032,0.01725786,-0.034013063,-0.0027995154,-0.034320243,0.00334755,-0.027618162,-0.00013460887,0.030494472,0.019073008,-0.04445714,-0.042362742,-0.033035677,0.008950071,0.007826077,0.039765686,0.017969957,-0.048227064,-0.0071768123,0.061770853,-0.026543036,-0.0075328606,-0.021739878,0.005424497,-0.047864035,-0.01255244,-0.05490122,-0.03775506,-0.010318413,-0.033398706,-0.016475951,0.0010969422,0.017313711,-0.03535348,-0.028064966,-0.024546374,-0.03853697,-0.034068916,-0.035744436,0.0038257716,-0.038285643,-0.016643504,-0.013550771,-0.023457285,0.0033807114,0.034124766,-0.033705886,0.04627229,0.015805742,0.03744788,0.062552765,0.03917925,0.0184028,-0.02379239,0.06981335,-0.010304451,0.016517838,0.01704842,-0.016825018,0.0100182155,0.05202491,0.012063747,0.0061365934,-0.03392929,0.01521931,0.01438155,-0.01087692,-0.03473912,0.048199136,-0.06439584,0.025970567,0.013460014,-0.0267804,0.0068626525,-0.051996984,0.008580061,0.005452423,0.05358873,-0.030103518,0.04093855,0.03487875,-0.025439985,-0.0023893618,0.009082717,0.031220531,-0.0742814,0.020720603,0.016126884,0.018682053,0.0026284726,-0.023499174,0.012126579,-0.003864169,-0.044373367,0.022787077,-0.0047857054,-0.0034854314,-0.010311432,0.011421464,0.0053930813,-0.0019896806,0.02148855,0.018640164,0.005913191,-0.0048450464,-0.04657947,0.027394759,0.0411061,0.04800366,-0.008077404,0.024811665,0.0047403267,-0.0047403267,-0.03473912,-0.0071244524,-0.02013417,-0.024755815,0.008028535,-0.03138808,0.040910624,-0.022940667,-0.024434673,0.008482322,-0.031443935,-0.024085606,0.026026417,-0.04093855,-0.049735032,0.04649569,0.028386109,0.058475662,0.0072745513,-0.032588873,0.021921393,-0.004227198,0.042083487,0.012859619,0.00042760678,-0.0204972,0.0024487032,0.051745657,0.013920782,0.00038506425,0.041385353,0.005871303,-0.027687974,-0.014283812,0.0133902,0.017579002,0.015414787,0.040407967,-0.03993324,0.022996517,-0.019380186,0.06389318,-0.009920477,0.023750503,-0.004471545,0.054845367,0.012140541,0.0032341036,-0.02342936,0.004621644,0.018863568,0.005585068,-0.005742148,0.03853697,-0.03423647,-0.034990452,0.013557753,-0.0042481422,-0.03613539,0.00014660804,-0.04051967,0.06484264,-0.011582035,0.048813496,-0.02807893,-0.06562455,-0.04219519,0.027129468,0.019533776,-0.061156496,0.0058468683,0.028260445,0.0018552898,-0.006677647,-0.015344975,0.011219005,-0.04183216,-0.01845865,0.011986952,-0.008279864,-0.019170746,-0.022982555,0.030410696,-0.018374873,0.04074307,-0.03649842,-0.050768267,-0.06082139,-0.026347559,0.004852028,0.011372595,0.021851579,0.028190631,0.017453337,0.020902118,-0.003523829,0.0033859476,0.019184709,0.033454556,-0.029433308,-0.017704666,-0.008817426,-0.013620584,-0.010074067,0.03342663,-0.06428413,-0.0044331476,0.007026714,0.007812114,-0.0009869862,0.022340272,-0.021181371,-0.015051759,-0.014367588,-0.007127943,0.0348229,-0.0008656855,-0.009012904,-0.013941726,-0.028958578,-0.014186073,-0.020371536,-0.008545154,-0.0044122036,0.017146159,0.026892103,0.016545763,0.016559727,0.02076249,0.05129885,0.014179092,0.0042865397,0.006939447,-0.020511162,0.0575262,0.06506604,-0.033287007,-0.011337688,-0.0059166816,0.0371407,0.015428751,-0.007337383,0.027422683,0.07886116,0.0065589645,-0.014437401,0.008538173,-0.03822979,0.0061051776,-0.00978085,0.021502512,0.06344637,0.02190743,-0.005302324,-0.027757788,0.017327674,-0.043954484,0.0120707285,-0.02106967,-0.032505095,-0.06277616,0.022507824,0.014053428,0.025453947,0.027436648,-0.036023688,-0.07629203,-0.04920445,0.004262105,-0.07299684,0.060430437,0.06897559,-0.0368056,0.0076585244,-0.05328155,-0.0054140254,0.014451364,0.031639412,0.010541816,0.010430114,-0.016224623,-0.004328428,0.012266206,0.015903482,0.016852943,0.03236547,-0.05853151,-0.027799677,0.046607394,-0.024043718,-0.021921393,0.0063565057,-0.047361378,-0.008028535,-0.033175305,0.012545459,-0.011693737,-0.0029339062,-0.0023073312,-0.020455312,-0.041497055,0.05747035,-0.0046146624,0.056241635,0.0061121588,0.051243,0.020957967,-0.04998636,0.038062237,-0.020944005,-0.0118194,0.018165434,0.0018657618,-0.009662168,-0.0060423454,0.04378693,-0.030019742,-0.0032480662,-0.025439985,-0.031779036,-0.03189074,0.00580498,0.014165129,-0.03811809,-0.0046007,0.0307458,-0.03540933,0.00050832843,0.0307458,-0.0007291132,0.06813783,-0.020022469,-0.030131442,-0.025174694,0.020427387,-0.018556388,0.010081048,0.036051616,-0.016964644,0.008349677,-0.017243898,-0.024853554,0.0067788763,-0.023778427,-0.021195333,-0.0042376705,0.0114633525,-0.010478984,0.04409411,0.014074371,-0.00925725,0.017397488,-0.017313711,0.0064716977,0.03183489,-0.065847956,0.0008203069,-0.013117929,0.044931874,0.008866295,0.0257332,0.005026561,0.017229935,0.018486576,-0.0100182155,0.023876166,-0.038788296,-0.015442713,0.01480043,-0.00810533,-0.02426712,-0.023987867,-0.005763092,-0.026207931,-0.034068916,-0.004579756,-0.010639555,0.024434673,-0.022828966,-0.06299957,0.032337543,0.011072397,-0.008607986,-0.03219792,-0.02400183,0.008140237,0.010074067,-0.019910768,-0.0035849155,-0.007867965,0.015400825,0.0022514805,-0.001954774,-0.0029059807,0.020567013,0.07863776,-0.028986502,0.019268485,-0.02097193,0.017383525,0.022144794,-0.01480043,-0.021558363,0.030047666,0.0015655644,0.0050021266,-0.023848241,0.035018377,0.013236611,-0.014367588,0.02834422,0.033007752,-0.016238585,-0.025453947,-0.009229325,0.0055606333,-0.01767674,-0.024951292,0.0053477027,-0.010136899,-0.0028222047,-0.0113097625,-0.020622864,-0.023122182,-0.0057072416,-0.029768413,-0.02583094,0.010060104,0.023806352,-0.0492603,0.0136694545,-0.011142211,0.006227351,0.020818342,0.020957967,0.009138567,-0.002803006,-0.01516346,-0.017858256,-0.0038920944,0.006764914,0.04093855,-0.014688729,-0.045881335,0.023862204,0.010304451,-0.036749747,0.00071689585,0.02070664,-0.0056583723,0.0123011125,-0.010513891,0.0094108395,-0.027478535,-0.0125664035,-0.014995907,-0.005302324,0.0009817502,-0.036358792,-0.004220217,0.030243143,-0.025747163,0.025858864,0.052304164,-0.043954484,-0.012859619,-0.008824407,0.012740936,0.014423438,-0.003874641,-0.025495837,0.005679316,-0.04596511,-0.015512527,-0.0037769023,-0.022061018,0.049399927,0.032616798,0.010513891,-1.8598714e-05,0.005197604,0.004021249,-0.025481872,0.00011257403,-0.024923366,0.030243143,0.04261407,-0.016643504,-0.011414483,0.022996517,-0.034906674,-0.014730617,0.011316745,0.0111980615,-0.015721967,0.008964034,0.001267985,0.021097595,0.0018989232,0.024364859,-0.0057910173,-0.014856281,-0.035939913,-0.029684637,0.020539088,-0.050014284,0.035018377,0.012203374,-0.012370925,-0.021446662,0.03518593,0.027674012,0.033119455,0.007923815,0.0073094578,-0.0076375804,0.018472612,0.022982555,0.014262867,-0.0006104305,-0.004045684,0.016866906,-0.051857356,-0.020874191,0.04247444,-0.017243898,-0.015805742,-0.07551012,0.01741145,0.05668844,-0.025076956,0.019477924,0.026347559,0.009718019,0.033705886,0.008691763,-0.024281083,0.012517534,-0.0077423006,0.0009154276,-0.020203983,-0.015331012,0.013152835,-0.0073653087,-0.1562702,-0.021055706,0.010688424,-0.007316439,0.0045727743,-0.028064966,-0.012126579,-0.013494921,0.0030264088,0.032812275,-0.02756231,-0.035688587,0.008977997,-0.01720201,0.00648566,-0.020832304,-0.005026561,0.0061575375,0.011742606,-0.00029256157,-0.013655491,-0.018961307,0.033957213,0.00030434257,-0.00024761923,-0.0015341484,-0.032225844,0.0019757177,0.020106245,-0.009417821,-0.011700718,0.00041189877,0.010074067,0.0050125984,-0.009117624,0.0056304466,-0.009208381,-0.04350768,0.040128715,-0.02901443,0.008077404,-0.025663387,0.00023169306,-0.0032236315,-0.026235858,-0.025062993,-0.033650037,0.009473672,0.053253625,-0.020455312,-0.008984978,0.017215973,0.013041134,-0.011219005,-0.008405527,0.009969346,-0.0062832017,-0.0034417983,0.010960696,-0.0245743,-0.0019879353,-0.009718019,0.003253302,-0.040826846,0.026193969,-0.00622386,-0.021083632,0.03979361,-0.0114633525,-0.016434062,-0.0107791815,-0.0055501615,-0.012719993,0.014786468,0.02055305,0.021935355,-0.03451572,-0.00862893,-0.03591199,0.010555779,0.011351651,-0.0052534547,0.0008848842,-0.0027890434,-0.013117929,0.0101718055,-0.013062078,0.0053511932,-0.019408112,-0.045713782,-0.04345183,-0.052639265,0.012859619,-0.0006488278,-0.020511162,0.013871913,-0.026892103,-0.0009939676,-0.1023743,-0.01558234,-0.01996662,-0.0007413305,0.036470495,-0.0143257,0.009250269,0.030103518,-0.019184709,-0.024602225,0.014158147,-0.0039723795,-0.028623473,-0.0075956928,0.03325908,-0.018654127,0.03183489,-0.0033492956,0.030019742,0.021167409,-0.018668089,0.0008194342,-0.007728...', '2025-03-25 05:14:48.381119+00'), ('72', 'https://ai.pydantic.dev/testing-evals/', '1', 'Testing and Evaluations with PydanticAI', 'This document outlines the two primary types of tests in PydanticAI: unit tests for application code and evaluations (evals) for assessing the responses of language models (LLMs). It emphasizes the use of established Python testing tools like pytest for unit testing and suggests practices for efficient assertions.', '* System prompt customization 
Testing and Evals With PydanticAI and LLM integrations in general, there are two distinct kinds of test:
              1. **Unit tests**  tests of your application code, and whether it's behaving correctly
              2. **Evals**  tests of the LLM, and how good or bad its responses are
For the most part, these two kinds of tests have pretty separate goals and considerations. Unit tests Unit tests for PydanticAI code are just like unit tests for any other Python code. Because for the most part they're nothing new, we have pretty well established tools and patterns for writing and running these kinds of tests. Unless you're really sure you know better, you'll probably want to follow roughly this strategy:
              * Use [`pytest`](https://docs.pytest.org/en/stable/) as your test harness
              * If you find yourself typing out long assertions, use [inline-snapshot](https://15r10nk.github.io/inline-snapshot/latest/)
              * Similarly, [dirty-equals](https://dirty-equals.helpmanual.io/latest/) can be useful for comparing large data structures
              * Use [`TestModel`](../api/models/test/#pydantic_ai.models.test.TestModel) or [`FunctionModel`](../api/models/function/#pydantic_ai.models.function.FunctionModel) in place of your actual model to avoid the usage, latency and variability of real LLM calls
              * Use [`Agent.override`](../api/agent/#pydantic_ai.agent.Agent.override) to replace your model inside your application logic
              * Set [`ALLOW_MODEL_REQUESTS=False`](../api/models/base/#pydantic_ai.models.ALLOW_MODEL_REQUESTS) globally to block any requests from being made to non-test models accidentally
Unit testing with `TestModel` The simplest and fastest way to exercise most of your application code is using [`TestModel`](../api/models/test/#pydantic_ai.models.test.TestModel), this will (by default) call all tools in the agent, then return either plain text or a structured response depending on the return type of the agent. `TestModel` is not magic The "clever" (but not too clever) part of `TestModel` is that it will attempt to generate valid structured data for [function tools](../tools/) and [result types](../results/#structured-result-validation) based on the schema of the registered tools. There's no ML or AI in `TestModel`, it's just plain old procedural Python code that tries to generate data that satisfies the JSON schema of a tool. The resulting data won't look pretty or relevant, but it should pass Pydantic's validation in most cases. If you want something more sophisticated, use [`FunctionModel`](../api/models/function/#pydantic_ai.models.function.FunctionModel) and write your own data generation logic.', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 2746, "crawled_at": "2025-03-25T05:14:48.100921+00:00"}', '[-0.03895814,0.010383471,0.045048703,-0.018513165,0.007901634,0.015441054,0.0070296368,0.0029463435,0.04142656,0.057149336,-0.010289564,-0.06369602,-0.016661849,-0.011832328,-0.019814454,-0.0068250527,0.0063320394,0.0128250625,-0.02480496,0.05806158,0.046739034,0.0154947145,0.015870344,0.015467884,0.0135629065,-0.066969365,-0.011483529,0.030801615,0.0047490294,-0.037267808,0.049636748,0.00013824087,-0.05682737,-0.0049066595,-0.020981587,0.022484105,0.013737305,0.032679763,0.022564597,0.02581111,-0.015722776,-0.01032981,0.00089966605,0.018231444,-0.038233712,0.02747461,0.032330964,0.0010304656,-0.019411992,-0.006798222,-0.042177822,0.048295215,0.016380128,-0.017131386,0.005057582,0.010095041,-0.046148762,0.0033102345,-0.0011595882,-0.005607611,-0.011986604,-0.004266077,-0.013341553,0.042392466,-0.046229254,-0.060261697,-0.05409064,0.017614339,-0.032062657,-0.00016339462,0.028547838,-0.0017322554,0.0059765326,0.010980453,-0.009880396,-0.02626723,0.04091678,0.07845289,-0.0068954835,-0.015521545,-0.02324878,0.016983816,-0.023704901,-0.00425937,-0.0015637253,-0.01965347,-0.06391067,-0.023369517,-0.013301307,-0.04904647,-0.0074991737,0.031284567,-0.03386031,0.02862833,0.038823985,0.03018451,0.0074656354,-0.013636691,0.005788718,0.033538345,-0.006664069,-0.0068451758,-0.058812838,0.009135845,0.046309743,0.00078898954,0.0067546223,-0.0017976552,-0.04413646,0.028064886,-0.066701055,-0.007894926,-0.045880456,-0.02045839,-0.03259927,-0.0077473572,0.0011076038,-0.03987038,0.0042426004,-0.07668207,-0.0028977129,-0.003602018,0.029513743,-0.023973208,0.016983816,-0.04145339,0.005872564,-0.05999339,-0.0309626,0.0046215835,0.0033924035,0.018150952,0.06621811,0.008552277,-0.029191773,-0.022215798,-0.009665751,-0.034853045,-0.02689775,0.043599848,0.022980472,0.004500846,-0.048670843,0.020042514,-0.041077763,-0.012234787,-0.038555678,-0.010168825,-0.013884874,0.023034135,0.00845837,0.037321467,-0.03780442,-0.015602037,-0.046819527,0.016098404,-0.014180012,0.02051205,0.033216376,-0.06546684,0.007881511,0.053124737,-0.007794311,0.025287911,-0.034504246,0.011423159,-0.020847434,-0.03616775,-0.04376083,0.0040547857,0.017050894,-0.025167173,0.008491908,-0.012067096,0.041829024,-0.03343102,-0.009571843,-0.045129195,-0.036838517,-0.003521526,-0.05250763,-0.013710475,-0.0642863,-0.01004138,-0.035550643,-0.008800461,-0.002329238,0.037455622,-0.05087096,-0.006033548,0.028011225,0.019613223,0.04778543,0.0153069,0.036489718,-0.014837363,0.06782795,0.026870921,-0.005745118,0.0053829043,-0.0018932394,0.02523425,0.03300173,-0.0061844704,0.04486089,0.010296271,-0.016903326,-0.0029647895,-0.061388582,-0.036784854,0.0136165675,-0.028145378,0.041855853,0.007847972,-0.022135306,0.005101182,-0.05811524,0.021209648,0.011174976,0.03860934,0.0154947145,0.003809956,0.05323206,-0.034262773,-0.06643275,0.03780442,0.012650663,-0.070081726,0.011993311,-0.02937959,-0.026683105,-0.011101192,-0.02106208,0.00607044,0.0153069,-0.048429366,0.011892697,-0.005285643,-0.0033773112,-0.020216914,0.03305539,0.005751826,-0.009833442,-0.019264424,-0.006942437,0.016219143,-0.008491908,-0.024362253,0.049126964,0.012509802,0.046336576,-0.048268385,0.025824524,-0.038716663,-0.018057045,-0.00546675,0.013140323,-0.022725582,-0.027769748,0.01234211,-0.04099727,0.07915049,0.009082183,0.010175534,0.00412857,-0.028869806,-0.042043667,-0.016997233,-0.0058457335,-0.02468422,0.027461195,0.03847519,0.0008418124,-0.014555641,0.0033471268,-0.02123648,0.005272228,0.008109571,0.025354987,0.02264509,-0.036382396,-0.0068753604,0.021223065,0.007043052,0.00517832,0.03420911,-0.02747461,-0.038448356,-0.018204613,-0.006422593,-0.009370613,0.015441054,0.03815322,-0.029621065,0.013576321,-0.023704901,0.020404728,0.011329252,-0.018566826,-0.0056981645,0.002122977,0.010262733,-0.002126331,-0.048724506,0.012093927,0.0022453922,0.017399693,-0.0037797713,-0.00038569095,-0.005386258,0.028494177,0.036784854,0.012355526,-0.007572958,-0.016420374,-0.06621811,0.0037093407,-0.014837363,0.06342772,-0.04300957,-0.05328572,-0.009947472,0.014542226,-0.028011225,-0.042660773,-0.024482992,0.0080559105,-0.012858601,-0.008371171,-0.008371171,-0.007391851,-0.0060872096,-0.031526044,0.012362233,-0.0031022967,0.01628622,-0.023463424,0.013817797,-0.037938572,0.083711706,-0.05291009,0.013348261,-0.047409803,-0.027742919,0.0052554584,0.023329271,0.0092163365,0.0309626,0.05366135,0.043787662,0.018164366,-0.02184017,0.0017909475,0.014662963,-0.00060285174,-0.02224263,-0.02088768,-0.020646203,-0.004380108,-0.017869228,-0.012583586,-0.036436055,0.015977668,0.021893831,-0.033243205,0.030935768,-0.023302441,-0.029218605,-0.048322044,0.012556756,0.015964251,0.0087468,-0.0061677014,0.0033588652,-0.019868115,0.0019955314,-0.01202685,0.012536633,-0.009585259,0.021330386,0.048778165,-0.00063429395,0.04099727,0.009243167,0.03850202,0.04496821,0.025757447,-0.008317509,-0.02978205,0.038770325,0.054224793,-0.066915706,-0.042016838,0.0020693159,0.032813914,0.03820688,-0.012234787,0.037214145,0.06208618,-0.00039239862,-0.02123648,-0.024322007,-0.038770325,-0.0010774193,0.010698732,0.014636133,0.019264424,0.011631098,0.016165482,-0.008297387,0.05618343,-0.018419258,0.04926112,-0.03407496,-0.015052008,-0.061495908,0.045451164,0.035523813,0.045504823,0.034021296,-0.06557417,-0.08156525,0.00020405986,-0.025368404,-0.038394697,0.029272266,0.0369995,0.0058893333,-0.013200692,-0.04335837,-0.0023745147,0.03748245,0.031230906,-0.013623275,-0.014676379,0.0019804393,-0.0017574092,-0.014072689,0.012469556,0.016742341,0.023946377,-0.018647319,-0.023302441,0.05570048,-0.0460951,-0.02390613,-0.061817873,-0.021947492,0.008364463,-0.03847519,0.021477954,0.0022001152,-0.009491351,-0.00022219152,0.0047691525,-0.09240484,0.03466523,-0.031606536,0.05999339,0.012925678,0.047168326,0.0050273975,-0.012335403,0.040621642,0.0047255526,0.023087796,-0.0033773112,-4.896467e-06,-0.004500846,-0.007861388,-0.0140592735,-0.030104017,0.030345494,-0.0020911158,-0.017064309,-0.003179435,0.0021112387,-0.0047825677,-0.052936923,-0.02226946,0.037294637,-0.017413108,0.026106246,0.006707669,0.0198547,0.07415999,-0.029325927,-0.050790466,-0.04888549,0.010665193,-0.037589774,-0.024093946,0.060530003,-0.015132501,0.017158216,-0.0046282914,0.019988853,0.02905762,-0.01271774,-0.0038367864,-0.02304755,0.011617682,0.0013448875,0.048670843,0.008901076,0.03614092,0.041560717,-0.030157678,0.017104555,0.040058196,-0.04859035,0.008290678,0.0006955014,0.016742341,-0.01930467,0.009679166,-0.0057753026,0.020351067,0.0045913993,-0.0061609936,0.003923986,-0.041104592,-0.024295175,0.015830098,-0.010913377,-0.032035824,-0.017185047,0.009645628,-0.02603917,-0.010839593,-0.022202384,-0.005570719,0.013583029,-0.034504246,-0.063481376,0.023946377,0.015078839,0.011215222,-0.033189546,-0.017024063,0.013328138,0.027152643,0.014622718,-0.011476821,-0.0037730637,0.025918432,0.008263848,0.016876495,0.012496387,-0.01993519,0.07813092,-0.026079416,-0.0046920143,5.1617608e-05,0.033484682,0.014193427,-0.023517087,-0.006942437,-0.01409952,0.01925101,-0.007090006,-0.021182818,0.028762484,-0.013375091,-0.008136402,0.039977707,0.036462888,-0.012731155,-0.019277839,0.017131386,-0.017520431,0.010705439,-0.03265293,0.022121891,0.00020102045,-0.0055371807,-0.0010757424,-0.019626638,-0.01211405,0.018110706,-0.012650663,-0.038233712,-0.0005772787,0.039172783,-0.037160486,0.026226984,-0.00030016818,0.005523765,-0.016044743,0.008237017,-0.00077934726,-0.01568253,-0.028950298,-0.014193427,-0.00814311,0.0141129345,0.03101626,-0.0069156066,-0.04384132,-0.014864194,0.02701849,-0.013777551,-0.01510567,0.015360561,-0.017828984,0.0072308667,-0.0064393617,0.052292984,-0.024563482,-0.006637238,-0.002911128,-0.021974323,0.011349375,-0.06627177,0.009196213,-0.00021422617,-0.01688991,0.018459504,0.06530586,-0.03616775,-0.029701557,0.010296271,0.008371171,0.005238689,0.024308592,-0.032035824,0.015333731,-0.0036959255,-0.047087833,0.00992735,-0.050200194,0.05763229,0.030372323,0.011382914,0.01913027,0.010001134,0.0105243325,-0.017480185,0.009021814,-0.03308222,0.015065424,0.032545608,-0.0016240943,-0.026481876,-0.01591059,-0.03748245,-0.017587507,0.008002249,0.0070296368,-0.018513165,-0.016058158,-0.014569056,0.029513743,0.02626723,0.020954756,0.01847292,-0.013777551,-0.0244025,-0.012563463,0.020203497,-0.045236517,-0.025301326,0.008874246,0.0019469009,0.004715491,0.057471305,0.013938536,0.015534961,0.0027467904,0.002325884,-0.03418228,0.018607073,-0.013569614,-0.007847972,0.0018093936,0.0009466197,0.01061824,-0.063159406,-0.04802691,0.033270035,-0.020042514,-0.024657391,-0.056773707,-0.009310245,0.021477954,-0.015602037,0.04800008,0.030908937,0.004852998,0.025945263,0.011369498,-0.037187316,-0.032223642,-0.013267769,-0.00086528924,-0.017238708,-0.030694291,0.033538345,-0.0019787622,-0.06482291,-0.0107591,-0.012811647,0.004292908,-0.008927907,-0.011034115,-0.007868095,-0.015038593,0.003870325,0.059456777,0.005138074,-0.04405597,0.027555102,-0.021223065,0.0002276415,-0.04016552,-0.0052185664,0.01430075,-0.002062608,0.014944686,-0.019009532,-0.049958717,0.035148185,-0.008270555,-0.011530482,-0.010738977,-0.03976306,0.0026461752,0.02508668,-0.009705996,-0.022256045,-0.0007248474,-0.015427638,0.01096033,-0.037294637,-0.007834557,-0.035040863,-0.03182118,0.017520431,-0.042419296,0.011584144,-0.020605959,0.021625524,-0.01450198,-0.013965366,-0.005936287,-0.006053671,0.005272228,0.059295792,-0.003159312,-0.008082741,-0.002996651,0.011798789,0.0036120797,0.004537738,0.003806602,-0.014971516,-0.002651206,-0.010088334,-0.0373483,0.03487988,-0.0046215835,0.0007722204,-0.025247665,0.013160446,-0.015454468,-0.029325927,0.028467346,0.009283413,0.022940228,0.0017842399,-0.017225293,-0.019988853,0.013220815,0.012120757,0.038341034,-0.03614092,-0.01392512,-0.001822809,0.024389083,0.009679166,-0.0089949835,0.01585693,0.0025522679,-0.02905762,0.013804382,-0.005785364,-0.011919527,0.0037831252,-0.014609302,-0.03458474,-0.03375299,0.0216926,0.0072778207,0.005527119,0.022229213,-1.0978567e-05,0.011771958,-0.10313711,-0.015830098,-0.014247089,-0.032465115,0.008384586,-0.011644512,0.028172208,0.03383348,-0.029245436,-0.004816106,0.0068753604,-0.0040983856,-0.012348818,-0.008398001,0.039602075,-0.06471559,0.012288449,-0.012013434,0.047597617,-0.0038200172,-0.008049202,0.02025716,-0.021424294,0.0...', '2025-03-25 05:14:48.434886+00'), ('73', 'https://ai.pydantic.dev/testing-evals/', '2', 'Writing Unit Tests for Weather Application Code', 'This document outlines the process of writing unit tests for a weather application. It includes code snippets for defining a weather agent using the Pydantic AI library, and sets the context for creating tools for forecasting weather based on user-provided locations.', 'Let's write unit tests for the following application code: weather_app.py
                        
                                                import asyncio
                        from datetime import date
                        
                        from pydantic_ai import Agent, RunContext
                        
                        from fake_database import DatabaseConn  # (1)!
                        from weather_service import WeatherService  # (2)!
                        
                        weather_agent = Agent(
                            'openai:gpt-4o',
                            deps_type=WeatherService,
                            system_prompt='Providing a weather forecast at the locations the user provides.',
                        )
                        
                        
                        @weather_agent.tool
                        def weather_forecast(
                            ctx: RunContext[WeatherService], location: str, forecast_date: date
                        ) -> str:
                            if forecast_date < date.today():  # (3)!
                                return ctx.deps.get_historic_weather(location, forecast_date)
                            else:
                                return ctx.deps.get_forecast(location, forecast_date)
                        
                        
                        async def run_weather_forecast(  # (4)!
                            user_prompts: list[tuple[str, int]], conn: DatabaseConn
                        ):
                            """Run weather forecast for a list of user prompts and save."""
                            async with WeatherService() as weather_service:
                        
                                async def run_forecast(prompt: str, user_id: int):
                                    result = await weather_agent.run(prompt, deps=weather_service)
                                    await conn.store_forecast(user_id, result.data)
                        
                                # run all prompts in parallel
                                await asyncio.gather(
                                    *(run_forecast(prompt, user_id) for (prompt, user_id) in user_prompts)
                                )', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 2299, "crawled_at": "2025-03-25T05:14:42.533936+00:00"}', '[-0.04075806,-0.018617878,0.057123583,-0.03627731,0.0116631305,0.011555305,0.039368305,-0.003144912,0.029592123,0.011932694,-0.0063077947,-0.007715517,-0.025279101,-0.06181998,-0.045765955,0.0075897207,0.012363996,0.044184513,-0.049216375,0.013574039,0.019180968,-0.016617116,0.0027196,-0.029927582,-0.019911785,-0.01398138,-0.031197526,0.04624518,0.01067473,-0.043633405,0.03589393,-0.003088004,-0.0015350166,0.0018884448,-0.006810981,-0.0044418136,-0.005052825,0.03299462,0.017467739,-0.012399939,0.020666564,-0.07595711,0.013598,-0.022631384,-0.053769007,0.04813812,-0.023098629,0.04080598,0.027435612,-0.045526344,-0.019300774,0.017767254,-0.007733488,-0.03342592,0.010015796,0.0038308022,-0.032755006,0.007709527,-0.011357625,-0.0233023,0.021972451,-0.011675111,-0.04411263,0.04193216,-0.028058605,-0.011932694,0.032683123,0.042051964,-0.010764584,-0.0059783277,0.010081689,0.025374947,0.06407234,-0.048042275,-0.01570659,-0.01671296,0.03987149,0.017036438,-0.008494257,-0.035246976,-0.03826609,0.011243809,-0.030406805,0.03862551,0.0007682571,-0.04540654,-0.07964714,0.007026632,-0.0024560264,-0.06181998,0.017000495,0.06503079,0.0108903805,0.038960967,0.05539837,0.040518448,0.006071178,-0.024608187,-0.0053283796,-0.01377771,0.005984318,-0.039200578,-0.06038231,0.03301858,0.047610972,-0.0015058138,0.0057057687,0.0006140066,-0.057027735,0.021289555,-0.062299207,-0.0015514899,-0.014700217,0.0023137566,0.013346408,0.021061925,0.014400701,-0.07883246,0.014149109,-0.051324964,-0.014065244,0.013873555,-0.0056728222,0.0033935097,0.0029457342,0.014065244,-0.0050588152,-0.046293102,0.01921691,0.024212826,0.029831735,0.0008895608,0.038361937,0.0024245773,-0.027483536,-0.005627895,-0.0477787,0.0050438396,-0.009967873,0.022224044,0.01515548,0.026764698,0.013082834,-0.0047293487,-0.027219962,-0.0137537485,-0.067043535,0.0051366896,-0.00427109,0.016209774,0.013586019,0.021457285,-0.028322179,0.013430271,0.024200846,0.00017802448,0.009207104,0.031197526,-0.0105728945,-0.060574,-0.03500736,-0.015610743,-0.011309702,-0.008128849,-0.015215384,-0.017994886,-0.01904918,-0.026165668,-0.06737899,-0.028849326,-0.012495783,-0.03869739,0.0007233297,0.016401464,0.05185211,-0.021445304,0.020618642,-0.030071348,-0.035989773,-0.046700444,-0.025327023,0.002021729,0.0041662594,-0.020702505,-0.02738769,0.008428364,0.08410393,0.028441984,-0.0146163525,0.0248478,0.033929106,0.0061700176,0.02604586,0.0056997784,-0.012352016,-0.041500855,0.047059864,-0.006253882,0.024356594,0.017515661,0.01067473,0.013322446,-0.015419054,-0.019648211,0.035103206,-0.06642054,0.0032497423,-0.029735891,-0.05281056,-0.013609981,0.044615816,-0.036636725,0.02757938,0.0003465019,-0.0357262,-0.029807774,-0.04701194,0.0060831583,-0.026477164,0.044064708,-0.027076194,0.009842076,0.009536571,-0.01670098,0.026596969,-0.00044590357,0.016952572,-0.034216642,0.016760884,0.0059693423,-0.020906176,-0.027483536,-0.010375214,0.024751954,0.038865123,-0.032563318,0.03354573,-0.009692319,-0.02817841,0.020930137,0.006888855,0.040350717,-0.00063684466,0.0048221983,0.036061656,0.029831735,-0.0062838336,-0.028418023,0.06958342,0.019827921,0.05511084,-0.047107786,0.016089968,-0.015095578,-0.019480484,-0.029424395,0.02604586,0.012328055,-0.017192185,-0.022631384,-0.03982357,0.011944675,-0.013897516,0.023829447,0.048809033,-0.037379526,0.04720363,-0.029831735,-0.007613682,-0.0155029185,0.025327023,0.023386164,0.0072303023,-0.027028272,-0.034216642,-0.010009806,0.002950227,0.022295928,0.014424663,0.023853408,-0.031197526,-0.0052894424,0.013382349,0.0137297865,0.01825846,0.031365257,-0.011950665,0.0050977524,0.0012197766,0.015167461,-0.002213419,0.014053264,0.012328055,-0.027196,0.011806898,-0.0155029185,-0.0077993814,0.008170781,0.010333282,0.017515661,0.01673692,-0.0015215384,-0.013226601,0.0017716337,-0.020498835,-0.001515548,0.03261124,0.010914342,0.015754512,-0.030766224,-0.005741711,0.08578122,0.023266358,-0.019157005,0.018378267,-0.031724673,0.014496546,-0.0040524434,0.02585417,-0.015610743,-0.054871224,-0.026668854,0.033258192,0.01399336,-0.032539356,-0.017048419,0.034288526,-0.007026632,-0.0054871226,0.007008661,-0.033881184,-0.027651263,-0.009979853,0.028370101,0.01612591,0.011465451,0.0038128314,-0.03713991,0.016209774,0.036349192,-0.063449346,0.005849536,-0.025782287,-0.029400434,-0.004675436,0.021253614,0.048832994,-0.015299248,0.041021634,0.025350986,0.020127436,0.03318631,0.015347171,0.016042046,-0.004624518,-0.021996412,-0.010309321,0.056644358,-0.026333395,0.007865275,-0.00699069,0.0057027736,-0.002117574,0.011842839,-0.0042830706,0.012555687,0.008194742,-0.020690525,-0.050941583,-0.0006645498,0.0035312867,-0.018893432,-0.035031322,0.0148439845,-0.0066312714,0.00660132,0.0014683744,0.018797588,0.0068049906,0.059711393,0.022236025,-0.0067510777,0.026716776,0.012795298,0.030239077,0.048305847,0.003459403,0.017156243,-0.007056583,-0.035989773,0.072219156,-0.08539784,0.0061191,-0.014891907,-0.017803196,0.021217672,-0.01962425,0.06479117,0.047682855,0.013274523,-0.022415735,-0.021025982,-0.005028864,0.03198825,0.007745469,0.030023426,0.014101186,0.00057506963,-0.0072722347,-0.029807774,0.018905414,-0.043633405,0.03773894,0.027076194,-0.0010685213,-0.026525086,-0.016006105,0.014544469,0.012100423,0.050462358,-0.05338563,-0.04701194,0.04118936,-0.022799114,-0.029735891,0.010590865,0.05300225,-0.019157005,0.046173297,-0.06694768,-0.029735891,-0.028370101,-0.0032617229,0.04540654,0.007302186,0.001912406,0.0361575,0.04118936,0.023745583,-0.006071178,0.022283947,-0.012316074,-0.003749933,0.07178786,0.0046125376,-0.02544683,-0.016796825,-0.0054511805,-0.017407836,-0.008266626,-0.007008661,-0.033977028,-0.011213858,0.006391659,0.01904918,-0.017276049,0.037978556,-0.009764203,0.047323436,0.054152388,0.012316074,0.036397114,-0.04348964,0.0010977241,-0.0033126406,0.0143887205,0.03495944,0.042746842,-0.012507764,0.0144126825,0.06158037,0.02678866,0.029807774,-0.0016158856,-0.055781752,-0.031844478,0.02741165,0.035438664,-0.012262162,-0.015994124,0.035103206,-0.014987752,0.018941356,0.026860543,-0.024632148,0.04679629,-0.0010655262,-0.023422105,-0.013214621,0.016748901,0.016569193,0.02544683,0.015658665,-0.01184883,0.0073081763,1.9374904e-05,-0.0023706646,0.031173564,0.023098629,-0.013214621,-0.030550573,-0.011639169,-0.022056315,0.025806248,0.019168988,-0.011381586,-0.021589072,-0.022379791,0.04214781,0.005750696,-0.031509023,0.018665802,-0.022295928,-0.013118776,-0.029184783,-0.008757831,0.0012991482,0.029975504,-0.0056997784,0.003746938,-0.03771498,0.014017322,-0.034456253,0.021025982,-0.009638406,-0.009452707,-0.0021340474,-0.03613354,0.033713456,0.0007023637,-0.0081887515,0.014029303,0.0040943758,0.012747376,-0.024608187,0.020822313,-0.002730083,-0.02348201,-0.011884772,-0.053673163,-0.0019318744,0.017383875,-0.013873555,-0.047251552,-0.008871647,0.02059468,0.001873469,0.02057072,-0.01842619,-0.020043572,0.052379258,-0.024164904,0.015622725,0.0074219923,0.042627037,0.017743293,-0.0007899719,-0.027938798,-7.913759e-05,-0.033042543,0.014209012,-0.008212713,0.029184783,-0.008590102,0.009782174,0.050941583,0.031796556,-0.035822045,-0.02971193,0.025734365,-0.0053163986,0.0056488607,-0.05324186,-0.01806677,0.015682628,-0.018689763,0.027483536,-0.04873715,-0.026069822,0.032946695,0.011878782,-0.0008895608,0.019252852,0.03383326,-0.012747376,0.013598,-0.00757774,0.017743293,0.0040045213,-0.012375977,-0.009530581,-0.0016907646,-0.031125642,0.004897077,-0.0009299954,0.014005342,-0.0074878857,0.03186844,-0.03090999,0.0159462,0.017599527,-0.0010954776,-0.01747972,0.0021100861,0.022283947,0.007128467,0.019408599,0.04293853,-0.06349727,-0.046293102,-0.0007319408,-0.031509023,-0.012879163,-0.01649731,-0.008332519,0.026740737,-0.018713724,0.022475637,0.05688397,-0.027507497,-0.001582939,0.023038726,0.017563585,0.0026252526,0.010974245,-0.04174047,-0.01203453,0.0070985155,-0.0017896047,0.021085886,-0.030814147,0.002216414,0.008913579,0.0026147696,-0.021972451,-0.015838375,0.006044221,-0.0025294076,0.0054092486,-0.034456253,-0.0021400377,0.019288793,0.0058764927,0.017192185,0.018210538,0.0016832766,-0.021409363,0.009650387,0.02427273,-0.017060399,-0.010986226,-0.036349192,0.014903887,0.048210002,0.0150476545,-0.0137297865,0.001922889,-0.020235261,-0.022643365,0.032179937,-0.039512075,-0.021577092,-0.0072542634,-0.021625014,0.02741165,0.013430271,-0.0059753326,0.022044335,0.038721353,0.0080749355,-0.049743522,0.0028693578,0.009536571,0.037379526,-0.017311992,0.03280293,0.03265916,-0.03843382,-0.02544683,0.038505703,-0.023649737,-0.0018719714,-0.030574534,0.02100202,0.027148077,-0.007655614,0.0030700332,0.0037199815,-0.04056637,0.023254378,-0.003420466,-0.010926323,-0.013897516,0.059519704,-0.012651531,0.015598763,-0.01842619,0.0036181463,0.011489412,-0.04507108,-0.024356594,0.015478957,0.03479171,0.008853676,-0.026285473,-0.025686443,0.008140829,0.014101186,0.020870235,-0.023242397,0.0072063413,0.022080276,-0.03165279,-0.0027330783,-0.057746574,-0.024404516,-0.005415239,-0.00582857,0.0008266626,-0.03654088,-0.010836468,0.027267884,-0.0033845243,0.002885831,-0.023637757,-0.05242718,-0.001785112,0.015574802,-0.0017925998,-0.026884504,-0.009590484,-0.02738769,0.059280094,-0.0003465019,-0.02446442,-0.028657636,-0.03840986,0.0045945668,-0.0045316685,0.00042755826,0.008236674,0.0030325938,-0.03162883,0.005475142,-0.009386813,0.008518219,0.013813651,0.050031055,-0.054296155,0.0032527375,-0.04483147,0.007817352,-0.019121064,-0.026309434,0.008715899,0.0022224043,-0.0032377618,0.014975771,-0.061628293,0.035438664,-0.008614063,-0.022391774,-0.017144263,-0.01339433,-0.034240603,-0.014328818,0.039128695,-0.024775915,-0.0028873286,0.0028064596,-0.025950016,-0.029687969,0.023158532,0.016473347,-0.004762295,-0.04873715,-0.027938798,0.04907261,0.038960967,0.03206013,0.0028064596,0.011764966,-0.018510053,-0.010381204,0.0061400663,-0.025926055,0.004214182,0.032419547,-0.020127436,-0.048210002,-0.01672494,-0.017216146,-0.00021508952,0.02741165,0.046341024,-0.010207485,0.014340798,-0.08295379,-0.03845778,-0.026453203,-0.016832767,-0.016617116,0.0023167518,-0.024823839,-0.00010726396,-0.0069008353,0.013909496,0.02254752,-0.005741711,-0.06852913,-0.029831735,0.038601547,0.003995536,0.009644397,0.022224044,0.04931222,-0.0075298175,-0.0027495516,-0.017383875,-0.04313022,0.04926...', '2025-03-25 05:14:48.531938+00'), ('74', 'https://ai.pydantic.dev/testing-evals/', '3', 'Testing Database and Weather Service Functionality', 'This section discusses the `DatabaseConn` class for database connections and the `WeatherService` class for retrieving weather data. It highlights the importance of calling different endpoints based on date context and outlines a testing approach using `TestModel` to evaluate a function that fetches weather forecasts for user prompts without needing to mock objects or modify code.', '1. `DatabaseConn` is a class that holds a database connection
              2. `WeatherService` has methods to get weather forecasts and historic data about the weather
              3. We need to call a different endpoint depending on whether the date is in the past or the future, you'll see why this nuance is important below
              4. This function is the code we want to test, together with the agent it uses
Here we have a function that takes a list of `(user_prompt, user_id)` tuples, gets a weather forecast for each prompt, and stores the result in the database. **We want to test this code without having to mock certain objects or modify our code so we can pass test objects in.** Here's how we would write tests using [`TestModel`](../api/models/test/#pydantic_ai.models.test.TestModel): test_weather_app.py
                        
                                                from datetime import timezone
                        import pytest
                        
                        from dirty_equals import IsNow
                        
                        from pydantic_ai import models, capture_run_messages
                        from pydantic_ai.models.test import TestModel
                        from pydantic_ai.messages import (
                            ModelResponse,
                            SystemPromptPart,
                            TextPart,
                            ToolCallPart,
                            ToolReturnPart,
                            UserPromptPart,
                            ModelRequest,
                        )
                        
                        from fake_database import DatabaseConn
                        from weather_app import run_weather_forecast, weather_agent
                        
                        pytestmark = pytest.mark.anyio  # (1)!
                        models.ALLOW_MODEL_REQUESTS = False  # (2)!
                        
                        
                        async def test_forecast():
                            conn = DatabaseConn()
                            user_id = 1
                            with capture_run_messages() as messages:
                                with weather_agent.override(model=TestModel()):  # (3)!
                                    prompt = 'What will the weather be like in London on 2024-11-28?'
                                    await run_weather_forecast([(prompt, user_id)], conn)  # (4)!
                        
                            forecast = await conn.get_forecast(user_id)
                            assert forecast == '{"weather_forecast":"Sunny with a chance of rain"}'  # (5)!
                        
                            assert messages == [  # (6)!
                                ModelRequest(
                                    parts=[
                                        SystemPromptPart(
                                            content='Providing a weather forecast at the locations the user provides.',
                                            timestamp=IsNow(tz=timezone.utc),
                                        ),
                                        UserPromptPart(
                                            content='What will the weather be like in London on 2024-11-28?',
                                            timestamp=IsNow(tz=timezone.utc),  # (7)!
                                        ),
                                    ]
                                ),
                                ModelResponse(
                                    parts=[
                                        ToolCallPart(
                                            tool_name='weather_forecast',
                                            args={
                                                'location': 'a',
                                                'forecast_date': '2024-01-01',  # (8)!
                                            },
                                            tool_call_id=None,
                                        )
                                    ],
                                    model_name='test',
                                    timestamp=IsNow(tz=timezone.utc),
                                ),
                                ModelRequest(
                                    parts=[
                                        ToolReturnPart(
                                            tool_name='weather_forecast',
                                            content='Sunny with a chance of rain',
                                            tool_call_id=None,
                                            timestamp=IsNow(tz=timezone.utc),
                                        ),
                                    ],
                                ),
                                ModelResponse(
                                    parts=[', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 4948, "crawled_at": "2025-03-25T05:14:48.736755+00:00"}', '[-0.058517456,-0.0440602,0.019927898,-0.04563378,0.011635876,-0.0026769277,0.053993415,-0.009724224,0.02086221,0.013043491,0.018403495,-0.0053384886,0.003245506,-0.04339635,-0.05836993,0.005320048,-0.008494866,0.049002223,-0.031274874,0.014690831,0.018440375,0.002613923,0.0143957855,-0.05812406,-0.00670615,-0.0069520213,-0.037175797,0.05802571,0.002019221,-0.043445524,0.034422033,-0.0031471574,-0.013965511,-0.0063865166,0.019165697,-0.0056028003,-0.010050004,0.020923678,0.0059716078,-0.003875552,-0.024833038,-0.05064956,0.0060761035,-0.013830281,-0.033536896,0.034815427,-0.011334684,0.043863505,0.028939094,-0.0068844063,-0.03808552,0.031864967,0.006128351,-0.028398177,0.015477621,-0.027635975,-0.040568825,0.022362027,0.012557895,0.008230554,0.01199239,-0.017063493,-0.03599561,0.045215797,-0.028422764,-0.032430474,0.041060567,0.02827524,-0.020284412,-0.0048651854,0.033635244,0.047944974,0.02525102,-0.010461839,-0.025693588,-0.015207162,0.054042593,0.033684418,-0.011961657,-0.049592312,-0.029775059,0.010246702,-0.032479648,0.006337342,-0.0057749106,-0.036634877,-0.082563706,0.0005267032,-0.0111625735,-0.052075617,0.009447618,0.044035614,0.016706979,0.02655414,0.069778375,0.007751104,-0.0358235,-0.053747546,-0.0043734424,-0.02576735,0.057484794,-0.012441106,-0.06825397,0.03235671,0.055468645,0.027783498,0.038134694,-0.0010872137,-0.067122966,0.046518918,-0.0664837,4.11787e-05,-0.016608631,0.007173306,-0.021624412,0.04007708,0.004450277,-0.07563012,0.023197992,-0.032774694,-0.0124103725,-0.013068079,0.014334318,0.0008375003,0.025472304,-1.596725e-05,0.004139864,-0.053059105,-0.0016565603,-0.007167159,0.026947534,0.003153304,0.009920921,0.020813037,-0.037938,0.0019270191,-0.055714518,-0.0134368865,-0.009699637,0.048510477,-0.011795693,0.0058148648,-0.0029274095,0.003952387,-0.01496129,-0.011844867,-0.031717446,0.030463498,-0.023050468,0.020776154,0.0110949585,0.026382029,-0.023284046,0.00474225,-0.0017994732,-0.005295461,0.012060005,0.027906433,-0.01095973,-0.042683322,-0.017862577,-0.010006976,-0.027881846,-0.0028982123,-0.029480012,-0.015317804,-0.003866332,-0.02346845,-0.07563012,-0.032995977,-0.023259459,0.0127238585,0.011605143,0.0028152305,0.02810313,-0.003408396,0.008132205,-0.03929029,-0.0011217894,-0.036585703,-0.029357076,0.020665513,-0.027881846,-0.033881117,-0.036659464,-0.010535601,0.04051965,0.04337176,-0.018403495,0.005479865,-0.008236701,0.0012623973,0.05084626,0.01247184,-0.026922947,-0.06289397,0.03599561,0.012496428,0.024279827,0.03702827,0.008802205,0.030758545,0.030414324,-0.00969349,0.04145396,-0.03661029,0.0013131084,0.014076153,-0.05836993,-0.009834866,0.03471708,-0.029430838,0.028226066,-0.02044423,-0.03375818,-0.006921287,-0.08359636,-0.0011663537,-0.044035614,0.05596039,-0.0063865166,0.022743128,0.040396713,-0.05630461,-0.033561483,0.006577067,0.016510282,-0.041847356,0.016559456,-0.013768813,-0.02099744,-0.032209188,0.00054744864,0.009275508,0.008599361,-0.060631953,0.02398478,-0.030979829,-0.0128345005,-0.0035098179,-0.0071855993,0.028865334,-0.026357442,-0.0050434424,0.027095057,0.04356846,0.007640462,-0.050944608,0.06200883,0.048559655,0.06943416,-0.04755158,0.0035559188,-0.04804332,-0.021083495,-0.023689734,0.0077019297,0.00030599497,-0.009976243,-0.028865334,-0.036389004,0.013498354,-0.043961853,0.036241483,-0.0071425717,-0.019583678,0.04796956,-0.03842974,-0.015772667,-0.026947534,0.01567432,0.05822241,0.03289763,-0.032873042,-0.03611855,-0.0005278557,-0.022767715,0.036069375,0.025300194,-0.003174818,-0.010424959,-0.03825763,-0.01118716,0.016276704,0.008666976,0.037249558,-0.020628633,0.0043211943,0.005535186,0.013904043,-0.017235603,-0.008427251,0.02264478,-0.033561483,-0.00023108095,0.0053630755,0.01691597,-0.01787487,-0.0031102765,-0.017211016,0.028939094,-0.0014514112,-0.0031901847,0.009595142,0.012994317,0.00672459,0.027168818,-0.016596338,-0.03316809,-0.026775423,-0.029553773,0.06299232,0.005233993,-0.033954877,-0.004106057,-0.028939094,0.032332122,-0.017075786,0.012158354,-0.0063004615,-0.07430241,-0.0010572481,-0.00043296462,0.018624779,-0.042953778,-0.01894441,0.00044410568,-0.019940192,-0.022103863,0.0072040395,-0.043765157,-0.037765887,0.009982389,0.016805328,0.01612918,0.002039198,-0.02861946,-0.013510648,-0.005009635,0.074892506,-0.045412496,0.010597069,-0.030906068,-0.03653653,0.005080323,0.0043980293,0.04319965,-0.009570555,0.027340928,0.03887231,0.03358607,0.010080738,0.020493403,0.03393029,-0.008144499,-0.021341661,-0.005003488,0.051829748,0.005433764,-0.0071118376,0.0072900946,0.019706614,-0.0050926167,0.009115692,-0.0012777643,0.016215237,-0.023025881,-0.02367744,-0.05674718,-0.017161842,-0.026308268,-0.009576702,-0.034249924,0.012994317,-0.0047729835,-0.013559822,-0.003844818,0.011439179,0.026603313,0.05197727,0.039732862,-0.007253214,0.027267167,-0.01883377,0.042978365,0.030955242,-0.030414324,0.013215601,-0.027217994,-0.02191946,0.06604113,-0.09028407,-0.01592019,-0.031520747,-0.020923678,0.01674386,-0.005630461,0.051042955,0.05178057,0.0010057688,-0.026037809,-0.018846063,-0.05015782,0.03791341,0.0073454157,0.03661029,0.002908969,-0.015477621,0.022288267,-0.04182277,-0.0026830744,-0.02402166,0.052370664,-0.008144499,-0.027193407,-0.03134864,0.004517892,0.030930655,0.031078178,0.02707047,-0.03823304,-0.07504003,0.009312389,0.0070196358,-0.034323685,0.05428846,0.052272316,-0.017973218,0.042658735,-0.06899159,-0.026750837,-0.018760007,0.014420373,0.045781303,-0.011623583,0.0026953681,0.01657175,0.0037618363,0.012582482,0.008666976,0.020333586,-0.033881117,-0.0011986244,0.05802571,-0.0044656442,-0.000836732,-0.026480379,-0.029234141,0.016313585,-0.00062121014,-0.014358905,-0.034913775,-0.02233744,-0.027267167,0.01907964,-0.010953583,0.018010098,-0.011844867,0.06082865,0.023013588,0.0067122965,0.018956706,-0.022718541,-0.003469864,0.008242847,0.024783863,0.04511745,0.01674386,0.0023311707,-0.008814499,0.03262717,0.01049872,0.053304978,0.011734225,-0.027832672,-0.021735055,-0.0055228923,0.045584604,-0.009478353,-0.019903312,0.050280754,-0.022140743,0.012330464,0.03680699,-0.041847356,0.03557763,0.004059956,-0.028324416,-0.01262551,0.011224042,0.0031655976,0.013117253,-0.0018778448,-0.013104959,0.0029443132,0.012244409,0.004311974,0.026750837,0.045437083,-0.010412665,-0.016215237,-0.015342392,-0.015330098,0.05856663,-0.009263215,0.011771106,-0.0074130306,-0.004582433,0.006546333,0.0016765374,-0.03646277,0.03815928,-0.01423597,-0.00885138,-0.032037076,-0.015551383,0.0042628,0.045215797,-0.02576735,0.015342392,-0.026578726,0.002375735,-0.035897262,0.025447717,-0.03963451,0.0059162867,-0.014174501,-0.040495064,-0.0013084982,-0.018280558,0.019964779,0.0104925735,0.028668636,-0.0046223872,-0.010148353,0.024390468,0.0080400035,-0.009232481,-0.011420739,-0.021243311,0.014002391,0.008169086,-0.03311891,-0.030389737,-0.010418812,0.024525698,-0.015084227,0.020776154,-0.017764227,-0.008113765,0.049321856,-0.026357442,0.0041951854,0.0036911482,0.036634877,0.021968633,-0.010775326,-0.030315977,-0.011125693,-0.026136158,0.008476426,0.0091956,0.01574808,0.0043242676,-0.01423597,0.0775971,0.02741469,-0.014383492,-0.03245506,0.037347905,-0.00867927,0.00783716,-0.0701226,-0.041601487,0.009570555,-0.013129546,-0.00077257486,-0.05143635,-0.03365983,0.03019304,0.010277435,-0.018932117,-0.002375735,0.026406616,-0.0069458745,0.008550187,0.017407713,-0.014125327,0.0031901847,-0.018169915,0.001902432,-0.00967505,-0.021538358,0.011082665,-0.00070688105,0.009730371,0.013326244,0.028398177,-0.045092862,0.033856526,0.035036713,-0.0062389933,-0.02542313,0.002380345,-0.006220553,0.009343123,0.035257995,0.027267167,-0.07243379,-0.03584809,-0.0067184432,-0.030807719,-0.005356929,-0.040839285,0.008408811,0.022755422,-0.024746982,-0.024046248,0.05989434,-0.02065322,-0.00804615,0.0040630293,-0.0006527124,0.0015466864,0.01735854,-0.03115194,0.0008651609,0.0028874553,-0.013940923,0.006527893,-0.03235671,-0.005381516,0.034225333,0.007259361,-0.024574872,-0.0003113734,0.023652853,0.022595605,-0.025226433,-0.043888092,-0.0017195649,0.029381663,0.0063619292,0.010302023,-0.012268996,-0.015010465,-0.017751934,0.018292852,0.025718175,-0.0073577096,-0.010111472,-0.026578726,0.020124596,0.052518185,0.014887529,-0.0060453694,-0.0004529417,-0.013129546,-0.005519819,0.027340928,-0.03316809,-0.001561285,-0.02182111,-0.016387347,-0.0056827087,0.014506428,-8.8456174e-05,0.011199454,0.048977636,0.0059716078,-0.052911583,0.008181379,0.030242214,0.028152306,0.008144499,0.028816158,0.018784596,-0.06505764,-0.036856163,0.06569691,-0.025349367,-0.00850716,-0.041626073,0.01344918,0.044232313,-0.003641974,0.0059347274,0.022792302,-0.041503135,0.021132668,-0.01879689,-0.017383127,-0.010197527,0.035085887,-0.015637437,-0.004247433,-0.025177259,0.035085887,0.017727347,-0.03191414,-0.0048313783,-0.001510574,0.02360368,-0.010160646,-0.015194869,-0.002197478,-0.0038325244,0.00869771,0.021599825,-0.03498754,-0.018600192,0.022116156,-0.018846063,-0.021378541,-0.036585703,-0.012576335,-0.014162208,-0.011525234,-0.002069932,-0.023161111,-0.037716713,0.024599459,0.008740737,0.0016258263,-0.00873459,-0.062254705,-0.02168588,0.03434827,-0.01101505,-0.04209323,-0.007781838,-0.0043365615,0.04251121,-0.0006242835,-0.010455692,-0.023075055,-0.025914874,0.01866166,0.008900554,0.010799913,-0.0063742227,-0.0037003686,-0.03311891,-0.0054399106,0.0098901875,-0.023997074,0.015809547,0.049666077,-0.050551213,-0.008722297,-0.018809183,0.008414958,-0.0071855993,-0.016239824,-0.0134368865,0.0009934752,-0.00524936,0.027586801,-0.066680394,0.049002223,-0.0036942216,-0.018514136,0.0057749106,-0.0059224335,-0.026160745,-0.01557597,0.027513038,-0.01952221,-0.012275143,-0.017211016,-0.014420373,-0.012103032,-0.007406884,0.004096837,0.038921483,-0.01735854,-0.0072163334,0.04433066,0.027783498,0.01687909,-0.0060361493,0.012238262,-0.024144597,-0.020763861,0.0034729373,-0.021759642,-0.024968266,0.0055566994,-0.04841213,-0.056452133,-0.018760007,-0.017235603,-0.014494134,0.033192676,0.061222043,-0.015157988,0.002318877,-0.10036481,-0.030217627,0.0046623414,-0.014776886,-0.025669001,-0.008556333,-0.029553773,0.013842574,-0.021292485,0.024562579,0.017137256,-0.0016473401,-0.058320757,-0.03646277,0.024710102,0.00139609,-0.0025094277,0.018747713,0.016485695,-0.0046561947,-0.009718077,0.0057564704,-0....', '2025-03-25 05:14:48.587255+00'), ('75', 'https://ai.pydantic.dev/testing-evals/', '4', 'Testing Evaluations with Pydantic', 'This document discusses the use of anyio for running asynchronous tests in Pydantic, highlights the safety measure of preventing real requests during testing using ALLOW_MODEL_REQUESTS, and details the functionality of Agent.override to replace the agent's model with TestModel.', 'TextPart(
                                            content='{"weather_forecast":"Sunny with a chance of rain"}',
                                        )
                                    ],
                                    model_name='test',
                                    timestamp=IsNow(tz=timezone.utc),
                                ),
                            ]
                        

              1. We're using [anyio](https://anyio.readthedocs.io/en/stable/) to run async tests.
              2. This is a safety measure to make sure we don't accidentally make real requests to the LLM while testing, see [`ALLOW_MODEL_REQUESTS`](../api/models/base/#pydantic_ai.models.ALLOW_MODEL_REQUESTS) for more details.
              3. We're using [`Agent.override`](../api/agent/#pydantic_ai.agent.Agent.override) to replace the agent's model with [`TestModel`](../api/models/test/#pydantic_ai.models.test.TestModel), the nice thing about `override` is that we can replace the model inside agent without needing access to the agent `run*` methods call site.
              4. Now we call the function we want to test inside the `override` context manager.
              5. But default, `TestModel` will return a JSON string summarising the tools calls made, and what was returned. If you wanted to customise the response to something more closely aligned with the domain, you could add [`custom_result_text='Sunny'`](../api/models/test/#pydantic_ai.models.test.TestModel.custom_result_text) when defining `TestModel`.
              6. So far we don't actually know which tools were called and with which values, we can use [`capture_run_messages`](../api/agent/#pydantic_ai.agent.capture_run_messages) to inspect messages from the most recent run and assert the exchange between the agent and the model occurred as expected.
              7. The [`IsNow`](https://dirty-equals.helpmanual.io/latest/types/datetime/#dirty_equals.IsNow) helper allows us to use declarative asserts even with data which will contain timestamps that change over time.
              8. `TestModel` isn't doing anything clever to extract values from the prompt, so these values are hardcoded.
Unit testing with `FunctionModel` The above tests are a great start, but careful readers will notice that the `WeatherService.get_forecast` is never called since `TestModel` calls `weather_forecast` with a date in the past. To fully exercise `weather_forecast`, we need to use [`FunctionModel`](../api/models/function/#pydantic_ai.models.function.FunctionModel) to customise how the tools is called. Here's an example of using `FunctionModel` to test the `weather_forecast` tool with custom inputs test_weather_app2.py
                        
                                                import re
                        
                        import pytest
                        
                        from pydantic_ai import models
                        from pydantic_ai.messages import (
                            ModelMessage,
                            ModelResponse,
                            TextPart,
                            ToolCallPart,
                        )
                        from pydantic_ai.models.function import AgentInfo, FunctionModel
                        
                        from fake_database import DatabaseConn
                        from weather_app import run_weather_forecast, weather_agent
                        
                        pytestmark = pytest.mark.anyio
                        models.ALLOW_MODEL_REQUESTS = False
                        
                        
                        def call_weather_forecast(  # (1)!
                            messages: list[ModelMessage], info: AgentInfo
                        ) -> ModelResponse:
                            if len(messages) == 1:
                                # first call, call the weather forecast tool
                                user_prompt = messages[0].parts[-1]
                                m = re.search(r'\d{4}-\d{2}-\d{2}', user_prompt.content)
                                assert m is not None
                                args = {'location': 'London', 'forecast_date': m.group()}  # (2)!
                                return ModelResponse(parts=[ToolCallPart('weather_forecast', args)])
                            else:
                                # second call, return the forecast
                                msg = messages[-1].parts[0]
                                assert msg.part_kind == 'tool-return'
                                return ModelResponse(parts=[TextPart(f'The forecast is: {msg.content}')])
                        
                        
                        async def test_forecast_future():
                            conn = DatabaseConn()
                            user_id = 1
                            with weather_agent.override(model=FunctionModel(call_weather_forecast)):  # (3)!', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 4994, "crawled_at": "2025-03-25T05:14:42.505620+00:00"}', '[-0.039573133,-0.018974332,0.00634475,-0.054006938,-0.005429322,0.0021004917,0.019759934,-0.0011825669,0.02315534,0.013861248,0.011025085,-0.023861054,0.00358515,-0.034832876,-0.036297563,0.0109451935,0.013581627,0.02908066,-0.046230793,0.029320335,0.02956001,0.010319374,0.007769489,-0.03778888,-0.0050797947,-0.008122345,-0.04122423,0.05320802,0.015272672,-0.022063486,0.052515622,-0.016990349,-0.019680044,-0.022822458,0.010332689,-0.0017775953,0.022689305,-0.002193699,0.0070970654,0.018268619,-0.013448473,-0.047056343,0.017549591,0.029666534,-0.03991933,0.027642604,0.010226166,0.058853716,0.009400616,-0.0043208213,0.0005929479,0.030625237,-0.015485717,-0.045884594,0.012409878,-0.011863951,-0.03544538,0.040931296,0.0031990057,0.008501832,0.0077428585,-0.014726744,-0.027589343,0.04708297,-0.03171709,-0.031743724,-0.0021121427,0.013142221,-0.031770352,0.007503183,0.00029501755,0.016910456,0.010685544,-0.020345809,-0.036404084,-0.051716704,0.06258201,0.04447317,0.014380545,-0.036004625,-0.015325934,0.016803933,-0.019440368,0.01320214,-0.035258967,-0.03400733,-0.07163642,-0.008947895,-0.0428487,-0.055977605,-0.0030508728,0.048121568,-0.006484561,0.020692008,0.08148976,-0.0046570334,-0.029480118,-0.039759547,0.023834422,-0.025059432,0.056350436,-0.009367328,-0.06290157,0.040851403,0.0632744,0.00822221,0.026324388,-0.015632186,-0.06668312,0.0441536,-0.0804778,-0.01752296,-0.03411385,0.0005359416,-0.051796596,0.022329792,0.00042775465,-0.044659585,0.01866808,-0.04194326,0.0041643665,-0.0045804703,0.028201848,0.0034020643,0.017070241,-0.009640292,-0.004530538,-0.050012343,-0.03411385,-0.0047901864,0.025618676,0.0073900027,0.011824004,0.0074898675,-0.04034542,-0.004530538,-0.02953338,-0.011218158,-0.03288884,0.043461204,0.0015387516,0.0014155849,-0.024699919,0.020931683,-0.017536277,0.0037116455,-0.016763989,-0.010805382,-0.01172414,0.040957924,0.012250095,0.01869471,-0.015938438,0.020225972,-0.0048101596,-0.0038248256,0.0022985572,0.033448085,0.018082205,-0.032968733,0.00080640905,0.0316372,-0.02535237,0.004896709,-0.030119255,0.004996574,0.0015437449,-0.015965069,-0.062209178,-0.022835774,-0.0077894623,-0.03155731,0.0042575737,-0.008921265,0.012582977,0.00025070252,-0.016005015,-0.05363411,-0.009433905,-0.034752987,-0.022010224,0.002819519,-0.052702036,-0.013335293,-0.047056343,-0.015898492,0.037975293,0.03422037,-0.0071969307,0.02427383,-0.020612115,0.01744307,0.04702971,0.015778655,-0.012855941,-0.048973747,0.06993206,-0.00075606053,0.0048068305,0.022436315,0.019933034,0.03366113,0.05398031,-0.021797178,0.050837893,-0.032036662,0.0051430427,0.03323504,-0.07264838,-0.008535121,0.04625742,-0.02828174,0.023434963,-0.03991933,-0.030891543,-0.012156887,-0.07467232,-0.00013970684,-0.03190351,0.09416594,0.0075497865,0.017855844,0.036297563,-0.008555093,-0.016324583,0.011571013,0.01979988,-0.046869926,0.006191624,0.008441913,-0.015738709,-0.028521417,-0.010013121,-0.0077628316,0.02119799,-0.06268853,0.013128906,-0.025445577,-0.019759934,-0.009746814,-0.01559224,0.021411035,-0.0049732723,-0.030598605,0.019560205,0.030412192,0.0061217183,-0.052515622,0.05912002,0.030039363,0.097042054,-0.05027865,-0.0030142555,-0.03195677,-0.016191429,-0.009886625,0.014167501,0.0035951363,-0.045565024,-0.0029626586,-0.015325934,-0.010705518,-0.028388262,0.009074391,-0.004783529,-0.02910729,0.007862696,-0.026510803,0.0063181194,-0.039040517,0.039306827,0.065404855,0.031264372,-0.01852161,-0.0444998,-0.0030325642,0.003971294,0.027988803,0.025671937,-0.0008005836,0.017296601,-0.00058171304,-0.0082554985,-0.010891932,-0.022596098,0.038747583,-0.012955806,-0.01322877,-0.0049266685,0.0014214105,-0.018042259,0.0071703,0.033314932,-0.027749127,-0.021903701,-0.0037682357,0.013421843,-0.0014039341,-0.0073300838,-0.025671937,0.0065278355,-0.009487166,-0.0051430427,0.022636045,0.04322153,-0.00039009727,0.033368193,-0.020212656,0.0050198757,-0.014473753,0.006045155,0.048813965,-0.012443167,-0.043061744,0.008461886,-0.034673095,0.025871668,-0.020705324,0.040105745,-0.012429851,-0.05619065,-0.034752987,-0.009021129,0.005582448,-0.03368776,-0.019879773,0.020705324,-0.017549591,0.0039047177,0.010851986,-0.058906976,-0.013754725,-0.015512348,0.0075697596,0.024287144,0.022982243,-0.041437276,-0.004587128,0.027016785,0.087614805,-0.045138936,0.002851143,-0.058374364,-0.033874176,0.011857293,0.013674834,0.04087803,-0.0036250958,0.015991699,0.03994596,0.062848315,0.01684388,0.022130063,0.024020838,0.0038514563,-0.02750945,-0.012436509,0.04998571,0.0021404377,-0.009853337,-0.016351214,0.032276336,-0.012369933,0.0072834804,-0.025818406,0.037522573,-0.021184674,-0.014167501,-0.07515167,0.007003858,0.0049433126,0.0022469603,-0.04399382,0.030518714,-0.012969122,-0.011917211,0.010752121,-0.008595039,0.014886528,0.03861443,0.064765714,-0.011151581,0.031450786,-0.017203394,0.026217865,0.027323037,0.006424642,-0.0002779573,-0.008861345,-0.0054925694,0.04151717,-0.08186259,-0.05280856,0.008595039,0.005852083,0.03709648,0.0036250958,0.04772211,0.051743336,0.008368678,-0.016164798,-0.0050664796,-0.073287524,0.025126008,-0.00157204,0.056030866,0.008495174,-0.0029177195,0.0018558227,-0.021211306,0.053527586,-0.019839827,0.04122423,-0.009640292,-0.020625431,-0.028175218,0.033554606,0.025006171,0.03206329,0.016191429,-0.05698957,-0.09688227,0.019866457,-0.002273591,-0.028068695,0.060611337,0.053128127,-0.040798143,0.03171709,-0.049959082,-0.046284053,-0.01394114,0.046230793,0.030625237,-0.018042259,-0.007110381,0.01621806,0.0040245554,0.0011442853,0.02187707,0.027296407,-0.0352856,-0.025019487,0.05086452,-0.009340697,-0.0032472736,-0.053847156,-0.005429322,0.02344828,-0.015139519,-0.001997298,-0.020585485,-0.040611725,-0.026817055,0.010365977,-0.0027529425,0.055498254,-0.002406744,0.075844064,-0.002654742,0.043860666,0.0022386382,-0.029586641,0.0037282896,-0.011737455,0.018401772,0.063540705,0.009101021,0.00023530668,-0.008561751,0.023488225,0.016138168,0.009074391,0.0017992327,-0.031504046,-0.024420297,0.017775953,0.031397525,-0.011131608,-0.021264566,0.035072554,-0.029213812,0.030465452,0.029852947,-0.04503241,0.058001533,0.0004756066,-0.049959082,-0.027269775,0.013994401,-0.0023851066,0.008714877,0.010971824,-0.015605555,0.018228672,-4.6031477e-05,0.023980891,0.024446927,0.015032996,0.00819558,-0.010951851,-0.0035318886,-0.009480508,0.043194897,-0.008142319,0.01684388,0.004993245,0.015925122,0.0067308946,0.03366113,-0.04894712,0.040159006,-0.0115909865,0.014114239,-0.030944804,-0.014447123,0.01977325,0.03744268,-0.005848754,-0.0011775736,0.0036151095,-0.0036117807,-0.012429851,0.024020838,-0.0020222643,-0.012935834,-0.011517752,-0.018734656,-0.03299536,-0.010918562,0.0059219887,0.004047857,0.03704322,-0.047615584,-0.02993284,-0.000986166,0.008115687,-0.010732148,-0.024247197,-0.015072943,0.034300264,0.02330181,-0.027615974,-0.016457736,-0.013015726,0.04111771,-0.007876012,0.018907756,-0.025472207,-0.014740059,0.055924345,-0.03738942,0.010013121,-0.0052828533,0.015911808,0.013481761,-0.020958314,-0.019440368,-0.008015823,-0.020159395,0.0057355743,0.011903896,0.0121036265,0.013162194,-0.013861248,0.035871472,0.029133921,-0.028228479,-0.0122234635,0.03246275,0.004157709,0.0039646365,-0.050145496,-0.040585097,0.01493979,-0.008408625,0.034433417,-0.05118409,-0.028308371,0.036803544,0.00092291815,-0.015605555,-0.0024849717,0.024713235,-0.017416438,0.0027812375,0.0019340502,-0.011311364,0.009733499,-0.028228479,0.0077628316,-0.019440368,-0.009713526,0.0031707105,-0.019134115,0.015112888,-0.0015803621,0.018601503,-0.040478572,0.022010224,0.03075839,-0.015898492,-0.022689305,0.011065031,-0.025831722,0.013901195,0.023461593,0.021597449,-0.06993206,-0.028228479,-0.013927825,-0.021344459,0.0004042448,-0.03866769,-0.010359319,0.007503183,-0.0299861,-0.017975682,0.073500566,-0.018508295,-0.0059918943,0.022489576,0.010891932,0.005755547,0.006108403,-0.037708987,-0.00091792486,0.02219664,-0.0040278845,0.024260513,-0.031504046,0.0072768223,0.017123502,0.014420492,-0.037469313,-0.0021421022,0.034380157,0.017762637,-0.023674639,-0.033820912,0.03861443,0.01982651,0.021158043,0.0015504026,-0.004720281,0.003132429,-0.014287339,0.023954261,0.028574677,-0.01979988,0.009380643,-0.021317828,0.031690463,0.06359397,0.014007716,0.008082399,0.011697508,-0.02788228,-0.015019681,0.03621767,-0.036537237,0.008595039,-0.005192975,-0.0076829395,0.00012067009,0.013554996,0.0059619346,-0.00023884355,0.031291004,-0.006990543,-0.061356995,-0.0152993025,0.004184339,0.007955904,0.016883826,0.021970278,0.036430717,-0.064286366,-0.027935542,0.065511376,-0.020505592,-0.0049466416,-0.039360087,-0.0055192,0.04617753,-0.014686798,0.01624469,0.0031790326,-0.032649167,0.016164798,-0.007230219,-0.050758,-0.01684388,0.016510997,-0.007037147,-0.002145431,-0.011883923,0.02876109,0.0021004917,-0.058906976,-0.004736925,-0.0109451935,0.0017076898,0.0012300027,-0.018588187,-0.015379195,-0.006148349,0.024287144,0.023661325,-0.03211655,-0.031504046,0.0027379626,-0.011923869,-0.016457736,-0.037203006,-0.003704988,-0.007769489,0.012183518,0.018961016,-0.011244788,-0.024793126,0.03288884,0.018135466,0.0068840208,4.7903945e-05,-0.063966796,-0.01761617,0.05853415,-0.009300752,-0.012582977,-0.0071703,0.012050365,0.022502892,-0.018361827,-0.0031773683,-0.017163448,-0.04370088,0.00685739,0.0037449338,-0.0023651337,0.0010485814,0.0062448853,-0.012136915,-0.0026580708,0.0122234635,-0.022170007,0.02187707,0.059173282,-0.048680812,0.0023584762,-0.019107485,0.011058373,-0.008974526,0.0078027775,-0.028068695,-0.0056323805,-0.017176762,0.009200886,-0.06721573,0.031104589,-0.012316671,-0.021530872,0.0036250958,0.0018757958,-0.03781551,-0.019839827,0.024766495,-0.00884803,0.0005958606,-0.008668274,-0.00042733856,-0.027016785,-0.004021227,0.0016744015,0.016897142,-0.023648009,0.0158186,0.051716704,0.028388262,0.008575066,0.01641779,0.010685544,-0.02122462,-0.0013598271,0.0018674737,-0.019533575,-0.037309527,-0.003931348,-0.030864913,-0.047562324,-0.013541681,-0.019666728,-0.008142319,0.029213812,0.044819366,-0.013022383,0.007077093,-0.101675786,-0.02412736,0.0103060575,-0.023142027,-0.033421453,-0.010059725,-0.023315126,0.006557795,-0.029693164,-0.0016294623,0.015032996,-0.008561751,-0.031237742,-0.028521417,0.041304123,0.0010261119,-6.2259525e-05,0.0031507376,0.024699919,-0.00090377737,...', '2025-03-25 05:14:48.644561+00'), ('76', 'https://ai.pydantic.dev/testing-evals/', '5', 'Weather Forecast Function Implementation', 'This section describes the implementation of a function `call_weather_forecast` designed to interface with a language model during weather forecasting. The function extracts date information from user prompts while using a hard-coded location. It involves a test case where a user's query for a weather forecast is processed, and an expected result is asserted.', 'prompt = 'What will the weather be like in London on 2032-01-01?'
                                await run_weather_forecast([(prompt, user_id)], conn)
                        
                            forecast = await conn.get_forecast(user_id)
                            assert forecast == 'The forecast is: Rainy with a chance of sun'
                        

              1. We define a function `call_weather_forecast` that will be called by `FunctionModel` in place of the LLM, this function has access to the list of [`ModelMessage`](../api/messages/#pydantic_ai.messages.ModelMessage)s that make up the run, and [`AgentInfo`](../api/models/function/#pydantic_ai.models.function.AgentInfo) which contains information about the agent and the function tools and return tools.
              2. Our function is slightly intelligent in that it tries to extract a date from the prompt, but just hard codes the location.
              3. We use [`FunctionModel`](../api/models/function/#pydantic_ai.models.function.FunctionModel) to replace the agent's model with our custom function.
Overriding model via pytest fixtures If you're writing lots of tests that all require model to be overridden, you can use [pytest fixtures](https://docs.pytest.org/en/6.2.x/fixture.html) to override the model with [`TestModel`](../api/models/test/#pydantic_ai.models.test.TestModel) or [`FunctionModel`](../api/models/function/#pydantic_ai.models.function.FunctionModel) in a reusable way. Here's an example of a fixture that overrides the model with `TestModel`: tests.py
                        
                                                import pytest
                        from weather_app import weather_agent
                        
                        from pydantic_ai.models.test import TestModel
                        
                        
                        @pytest.fixture
                        def override_weather_agent():
                            with weather_agent.override(model=TestModel()):
                                yield
                        
                        
                        async def test_forecast(override_weather_agent: None):
                            ...
                            # test code here', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 2271, "crawled_at": "2025-03-25T05:14:42.442618+00:00"}', '[-0.014651138,-0.021573927,-0.0013656775,-0.04372685,-0.008307347,0.010214261,0.03390908,-0.0048994464,0.016098632,-0.004553307,-0.00849615,-0.011428895,-0.003851588,-0.038969006,-0.050699987,-0.010075805,-0.008206652,0.020944582,-0.04037874,0.039900437,-0.0066207037,-0.009515688,-0.014109902,-0.032524522,-0.032474175,-0.018112533,-0.043449942,0.05004547,-0.0030051197,-0.01436164,0.07245013,-0.024745824,-0.02407872,-0.022983659,0.021309603,-0.039220747,0.03692993,0.010711443,-0.01112681,0.028672934,-0.033153865,-0.08382868,0.027464591,0.008439509,-0.026608683,0.04717566,-0.012366618,0.062531665,0.00507881,0.018062185,0.011472949,0.005594872,0.0042008744,-0.02071802,0.027665982,-0.017017474,-0.025438102,0.02059215,0.0031042416,0.010107271,0.016501412,-0.0067780395,-0.043072335,0.059611507,-0.016916778,-0.023323504,0.008540204,0.038490705,-0.031744134,-0.009150668,-0.00015733611,0.02455702,0.03257487,-0.05638926,-0.041284997,-0.018779637,0.032952476,0.023839567,0.028093936,-0.048434347,0.0133798625,-0.005981919,-0.038163446,0.02665903,-0.020466281,-0.02932745,-0.031819656,-0.00871642,-0.05749691,-0.052764237,0.023474548,0.03438738,0.005878077,0.034764986,0.057798993,0.047553267,-0.0022514798,-0.061323322,0.026231077,0.007835338,0.053469103,-0.016526585,-0.073003955,0.003886202,0.036728542,0.040806692,0.0011178731,-0.026482815,-0.061272975,0.039950784,-0.085943274,0.004949794,-0.013040016,0.0018392592,-0.06988241,0.0437772,-0.005214119,-0.03280143,0.009144375,-0.01918242,-0.0087667685,0.0057270345,0.024217173,0.021636862,0.0064319004,0.0040938854,-0.009364645,-0.05890664,-0.021662036,-0.018150294,0.0154567,0.010459704,0.028345674,0.0036911052,-0.053469103,-0.011410015,-0.04491002,-0.00019313008,0.0034267805,0.03358182,0.000888949,0.0298561,-0.020415934,0.015721025,-0.03418599,0.019761415,-0.02585347,-0.0125428345,-0.033883903,0.01945933,0.0067465724,0.015557394,-0.006891322,0.030133013,-0.005424949,0.00697943,0.011038702,0.016690215,0.023034006,-0.036149547,-0.005701861,0.01266241,-0.012832333,-0.01974883,-0.015607743,-0.027288375,-0.0005856837,-0.020139022,-0.061222628,-0.02859741,-0.013895925,0.018238401,0.017332146,-0.022996247,0.05024686,-0.012316271,-0.02455702,-0.04777983,0.013996621,-0.021813078,-0.02318505,0.026507989,-0.015796546,-0.029956795,-0.03743341,0.006853561,0.034563597,0.027464591,-0.0043865307,0.0003359126,-0.0116302855,0.027514938,0.0751689,0.0052361456,-0.025312234,-0.030963747,0.059611507,-0.019849524,0.033934254,0.011504416,0.00397431,0.03745858,0.032751083,-0.018905507,0.049239907,-0.015356004,-0.0041473797,0.024783583,-0.05185798,0.009383526,0.026482815,-0.018150294,0.030158186,-0.014336467,-0.029277103,0.021976708,-0.06983206,-0.012656117,-0.05311667,0.060668804,-0.0027738356,-0.0027879959,0.036501978,-0.041486386,-0.022303967,0.013480558,-0.008219238,-0.039598353,0.030737182,0.023613004,-0.008263293,-0.039094876,-0.0033449656,-0.016086044,0.004757844,-0.022152925,0.02932745,-0.026482815,-0.015016158,-0.033556644,-0.0070738317,0.028043589,-0.0027077545,-0.0052078255,0.03290213,0.037685145,0.007646535,-0.040152177,0.04551419,0.051304158,0.08241895,-0.06610634,0.00999399,-0.031391703,-0.031618264,0.025828296,0.00888005,0.017105581,-0.060014285,-0.04783018,-0.023776634,-0.0043015694,-0.025652079,0.042065382,-0.002295534,-0.040076654,-0.018389445,-0.031819656,-0.00051842246,-0.02905054,0.057094127,0.032197263,-0.0037068387,-0.011170864,-0.035872635,-0.007678002,0.010283488,0.036678195,-0.002588179,0.01986211,0.0029799459,-0.006683638,0.0056357794,-0.02925193,-0.008187771,0.0329273,-0.04017735,0.012964495,0.0126120625,-0.017218864,-0.002147638,0.014097315,0.02884915,-0.017458014,-0.012530248,0.019912459,0.020529216,-0.004996995,0.014462335,-0.010484878,0.00019785015,0.0034676879,-0.028370848,0.011989011,0.0095345685,0.008829703,0.032751083,-0.0234242,-0.006199043,-0.017495776,-0.026709378,0.07033554,-0.027741503,-0.012737932,0.0009982976,-0.035218116,0.026155556,-0.019547438,0.01227851,0.013782644,-0.058151428,-0.018918093,-0.024103893,-0.012700171,-0.033405602,-0.00999399,0.014411988,-0.008307347,-0.008773061,0.026935942,-0.037408233,-0.023562657,-0.024695477,-0.0012225016,0.030611314,0.022014469,-0.013178472,-0.014122489,0.045967318,0.068674065,-0.027439417,0.0016504558,-0.07013415,-0.02698629,0.0023631884,-0.008590552,0.020139022,-0.018804813,0.002797436,0.041083604,0.058604553,0.031693786,0.015695851,0.028547063,-0.019031376,-0.015104267,0.027363896,0.031744134,0.006013386,-0.0074514383,-0.033027995,0.027086984,0.012221869,0.003385873,-0.02585347,0.034966376,-0.022429835,0.013266581,-0.040831868,0.006872441,-0.014185424,0.0015072799,-0.044532415,0.017067822,0.0162245,-0.02658351,-0.008905224,0.0052739065,0.020768367,0.048358828,0.056288566,0.0009699771,0.008433215,-0.016753148,0.0138707515,0.0680699,-0.013480558,-0.0013766909,0.006013386,-0.044406544,0.07083901,-0.075319946,-0.035872635,0.013216233,-0.020516628,0.025475863,0.010686269,0.05991359,0.040101826,0.0032348305,-0.016274847,-0.008212945,-0.02018937,0.043600984,0.035469852,0.035746764,0.0036501978,0.008238119,-0.014965811,-0.023726286,0.04339959,-0.041008085,0.03567124,-0.011189744,-0.022757094,-0.019774003,0.026105208,0.0024764703,0.028043589,0.04918956,-0.026382118,-0.0834259,0.026533162,0.013178472,-0.0033795796,0.033355255,0.028219804,-0.032751083,0.031945523,-0.05729552,-0.054828487,-0.027514938,0.04916439,0.04357581,-0.0018644329,-0.0017070968,0.0020249158,0.009308005,0.02561432,0.009213603,0.028471543,-0.002169665,-0.013405036,0.04818261,-0.014600791,-0.010044337,-0.014034381,0.006557769,-0.0066962247,0.015154614,0.013782644,0.0068976153,-0.024871692,-0.0022892405,0.003137282,-0.02079354,0.052160066,-0.013241407,0.054022927,0.041008085,0.01869153,-0.0037980936,-0.013354689,-0.020743193,-0.028068762,0.03985009,0.038641747,0.018540487,-0.01743284,-0.014990984,0.044809323,0.005620046,0.04898817,0.034160815,-0.015003571,-0.023826981,0.007237461,0.0071682334,-0.0355202,-0.025979338,0.05331806,-0.012668704,0.03680406,0.020277478,-0.065250434,0.049894426,0.014449748,-0.026633857,-0.020780953,0.049869254,-0.008779355,0.016526585,0.020818714,-0.014135076,0.0381131,-0.021750145,0.018137706,0.036728542,0.00472323,0.0060291197,-0.0072815153,-0.009377232,0.0007434131,0.028773628,0.006070027,0.03078753,-0.009710785,-0.009056266,0.016186738,0.02334868,-0.049365778,0.02945332,-0.016778322,0.0066332906,-0.008433215,-0.007558427,0.023562657,0.046823226,0.0007638668,0.017420255,0.0051228637,0.0057490617,-0.03358182,0.023801807,-0.0034613945,-0.0072437543,-0.020415934,-0.03567124,-0.0041284994,-0.023927676,0.028874323,0.008848583,0.01395886,-0.0084206285,-0.027338723,0.02152358,0.01187573,-0.017772688,-0.0076654153,-0.007419971,-0.0006757586,0.02443115,-0.021510992,-0.0067780395,-0.026759725,0.047880527,-0.017344734,0.046999443,-0.0116365785,-0.009496808,0.06293444,-0.027640808,-0.0108624855,-0.027338723,0.011252679,0.014588204,-0.032474175,-0.016715389,0.0017668845,-0.01019538,0.00023993757,0.013669361,0.012152641,-0.0073003955,-0.0017196836,0.037508927,0.01743284,-0.015972761,-0.02605486,0.016174152,0.01840203,-0.011189744,-0.035595722,-0.031870004,-0.013681948,-0.0070046037,0.038969006,-0.037307538,-0.021221494,0.012687584,0.0037068387,-0.006557769,0.004257515,-6.0476068e-05,-0.013782644,0.016400715,-0.017306972,-0.0086975405,-0.028547063,-4.326743e-05,0.014802181,-0.029025367,-0.010831018,0.018905507,-0.028547063,0.026205903,-0.005459563,-0.0055539645,-0.043449942,0.024972387,0.017143343,-0.00028615506,-0.02402837,0.007879392,0.006457074,0.0043330365,0.01726921,0.007105299,-0.096768,-0.04339959,-0.025022736,-0.038213793,-0.013040016,-0.026633857,-0.027086984,0.0022357462,-0.019383809,-0.024280109,0.08050574,0.0007048658,-0.004981261,0.013656775,-0.0056609535,0.0052046785,0.00491518,-0.03385873,-0.018049598,0.018540487,-0.0116302855,0.022933312,-0.017583884,-0.011397428,0.008288466,0.010119858,-0.018867746,0.018376857,0.031265832,0.0013766909,-0.011202331,-0.047603615,0.0036313175,0.015079093,0.0007017191,0.0010211114,-0.014827355,0.00050898234,-0.023575243,0.035545375,0.043072335,0.00014052082,-0.01598535,-0.0283205,0.015368591,0.050599292,0.025010148,0.021510992,0.015431526,0.015997935,0.013040016,0.030762356,-0.04740222,-0.0031656025,-0.026507989,-0.011579937,0.0041977274,0.0095345685,0.033808384,0.00321123,0.0453128,-0.0073885038,-0.056540303,0.0010203246,0.0038106807,0.035016723,0.0009888575,0.017445428,0.020050913,-0.069328584,-0.05044825,0.057094127,-0.005912691,-0.021838252,-0.043928243,0.015595156,0.047074966,-0.013782644,0.008061903,-0.0047358167,-0.026155556,0.030208534,-0.016350368,-0.033808384,-0.010686269,0.031064441,0.0028037294,-0.0014671593,-0.006973136,0.010428238,0.00020434028,-0.024607368,-0.00827588,-0.0022971071,0.006639584,0.0039302562,-0.009156962,-0.018905507,-0.011252679,0.005717594,0.012977082,-0.03385873,-0.017546123,0.010107271,-0.02071802,-0.01796149,-0.026457641,-0.0033166453,-0.002556712,0.018779637,0.019761415,-0.0031860562,-0.035369158,0.024330456,-0.0200635,0.010006577,-0.013316928,-0.05117829,-0.00050662225,0.050473426,-0.019396396,-0.03418599,-0.0067151054,-0.0033355255,0.038339663,-0.006501128,-0.016237088,-0.028672934,-0.041964687,0.009175842,0.010975767,-0.006538889,0.000815001,0.012020479,-0.023663351,-0.0005215692,0.032272782,-0.00015379605,0.01755871,0.04609319,-0.049139213,-0.0007284662,-0.030007143,0.00871642,0.0023285744,-0.009144375,-0.015318244,0.025173778,-0.01703006,-0.0033072052,-0.07748489,0.01966072,0.0096793175,-0.033506297,0.034412555,-0.002566152,-0.028219804,-0.019031376,0.02585347,-0.00948422,-0.009049973,-0.012951909,-0.00791086,-0.029906448,-0.017810447,-0.0022074257,0.021536168,-0.018062185,0.014046968,0.030863052,0.018225815,0.013430211,-0.020201957,0.010321249,-0.006752866,-0.00022951406,0.004877419,-0.015381178,-0.009509395,-0.003625024,-0.039271094,-0.050800685,-0.019560026,-0.02249277,0.012416966,0.03385873,0.048560217,0.0128197465,0.012788279,-0.11781328,-0.048459522,0.0015780812,-0.020176783,-0.029226756,-0.015960176,-0.022316555,-0.010384183,0.0034676879,-0.006885028,0.008131131,-0.0093268845,-0.028018415,-0.033682514,0.032172088,-0.027691156,0.009377232,0.013052604,0.0042826887,-0.014273532,-0.028446369,0....', '2025-03-25 05:14:48.768975+00'), ('77', 'https://ai.pydantic.dev/testing-evals/', '6', 'Evaluating Model Performance with Evals', 'Evals focus on assessing a model's performance for specific applications, differing from traditional unit tests as they do not have pass/fail outcomes but rather serve as benchmarks to track performance over time. Due to their requirement for real model execution, evals can be resource-intensive, making them unsuitable for continuous integration. Measuring performance can vary in difficulty, with some cases having straightforward metrics while others present challenges in quantification.', 'Evals "Evals" refers to evaluating a models performance for a specific application. Warning Unlike unit tests, evals are an emerging art/science; anyone who claims to know for sure exactly how your evals should be defined can safely be ignored. Evals are generally more like benchmarks than unit tests, they never "pass" although they do "fail"; you care mostly about how they change over time. Since evals need to be run against the real model, then can be slow and expensive to run, you generally won't want to run them in CI for every commit. Measuring performance The hardest part of evals is measuring how well the model has performed. In some cases (e.g. an agent to generate SQL) there are simple, easy to run tests that can be used to measure performance (e.g. is the SQL valid? Does it return the right results? Does it return just the right results?). In other cases (e.g. an agent that gives advice on quitting smoking) it can be very hard or impossible to make quantitative measures of performance  in the smoking case you'd really need to run a double-blind trial over months, then wait 40 years and observe health outcomes to know if changes to your prompt were an improvement. There are a few different strategies you can use to measure performance:
              * **End to end, self-contained tests**  like the SQL example, we can test the final result of the agent near-instantly
              * **Synthetic self-contained tests**  writing unit test style checks that the output is as expected, checks like `'chewing gum' in response`, while these checks might seem simplistic they can be helpful, one nice characteristic is that it's easy to tell what's wrong when they fail
              * **LLMs evaluating LLMs**  using another models, or even the same model with a different prompt to evaluate the performance of the agent (like when the class marks each other's homework because the teacher has a hangover), while the downsides and complexities of this approach are obvious, some think it can be a useful tool in the right circumstances
              * **Evals in prod**  measuring the end results of the agent in production, then creating a quantitative measure of performance, so you can easily measure changes over time as you change the prompt or model used, [logfire](../logfire/) can be extremely useful in this case since you can write a custom query to measure the performance of your agent
System prompt customization The system prompt is the developer's primary tool in controlling an agent's behavior, so it's often useful to be able to customise the system prompt and see how performance changes. This is particularly relevant when the system prompt contains a list of examples and you want to understand how changing that list affects the model's performance. Let's assume we have the following app for running SQL generated from a user prompt (this examples omits a lot of details for brevity, see the [SQL gen](../examples/sql-gen/) example for a more complete code): sql_app.py
                        
                                                import json
                        from pathlib import Path
                        from typing import Union
                        
                        from pydantic_ai import Agent, RunContext
                        
                        from fake_database import DatabaseConn
                        
                        
                        class SqlSystemPrompt:  # (1)!
                            def __init__(
                                self, examples: Union[list[dict[str, str]], None] = None, db: str = 'PostgreSQL'
                            ):
                                if examples is None:
                                    # if examples aren't provided, load them from file, this is the default
                                    with Path('examples.json').open('rb') as f:
                                        self.examples = json.load(f)
                                else:
                                    self.examples = examples
                        
                                self.db = db
                        
                            def build_prompt(self) -> str:  # (2)!
                                return f"""\
                        Given the following {self.db} table of records, your job is to
                        write a SQL query that suits the user's request.
                        
                        Database schema:
                        CREATE TABLE records (
                          ...
                        );
                        
                        {''.join(self.format_example(example) for example in self.examples)}
                        """
                        
                            @staticmethod
                            def format_example(example: dict[str, str]) -> str:  # (3)!
                                return f"""\', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 4977, "crawled_at": "2025-03-25T05:14:42.448435+00:00"}', '[0.0024082812,0.014949277,0.04222178,-0.008390554,0.016153418,0.023160491,0.00533857,-0.02318611,0.041068878,0.04593668,0.01995799,-0.06891783,-0.027618373,-0.017588139,0.0004539546,0.002395471,-0.0045123245,-0.009018244,-0.028899373,0.0225328,0.032178733,0.02314768,0.039941598,0.0074233986,0.010228789,-0.026183652,-0.031922534,0.04063334,0.004682057,-0.034817595,0.056927666,-0.02178982,-0.00573568,-0.030359713,-0.02260966,0.015666638,0.012649881,0.0018654572,0.0075514982,-0.0033850442,-0.0061391955,0.018049298,0.0028278087,0.010158335,-0.025363812,0.049600344,-0.014974897,-0.02157205,0.02023981,-0.0025972286,-0.04998464,0.056722704,0.0041728592,-0.010645115,0.052930944,-0.030820874,-0.04119698,0.024005951,-0.013706706,-0.027259693,0.004451477,-0.045578,-0.02191792,0.039224237,-0.02171296,-0.018728228,-0.012348846,0.025812162,-0.035688676,-0.0073785633,0.04191434,0.027387792,-0.0038526093,0.008569894,-0.0110102,-0.0019054884,0.072914556,0.034100235,0.012233555,-0.015897218,-0.015512917,-0.019650549,0.018023679,0.005950248,0.026439853,0.008909359,-0.078602195,-0.02195635,0.032409314,-0.055287987,-0.049625963,0.03773828,0.0103889145,0.04396394,0.071172394,0.038327537,0.0012705924,-0.0123104155,0.045347422,0.02064973,0.003263349,-0.030744014,-0.038763076,0.0052713174,0.04460444,0.017088547,0.0048293723,0.0125730205,-0.051752422,-0.016281517,-0.04024904,-0.0045699696,-0.02346793,-0.02328859,-0.01990675,0.017536897,-0.026260512,-0.06512607,0.018074919,-0.06092439,-0.0394292,0.003958292,-0.013168686,-0.031000214,0.0020399934,-0.012880461,-0.008070304,-0.032204356,0.0016572945,0.0022849848,0.015974076,-0.008934979,0.046730902,-0.04457882,-0.0218923,-0.0028326125,-0.038558118,-0.02015014,-0.0204832,0.054314423,0.016281517,0.0109141255,-0.06420375,0.004336187,-0.01189409,-0.006686823,-0.069993876,0.035996117,-0.02186668,-0.009088699,0.049754065,0.024864221,-0.04319534,-0.012605046,-0.015961267,0.0091335345,-0.0020319873,0.031461373,0.014705887,-0.07742368,0.016089367,0.026644813,-0.038660597,0.01866418,-0.031768814,-0.017767478,-0.0063313455,-0.02121337,-0.06312771,-0.02116213,-0.025735302,-0.017818717,0.03612422,-0.028822513,0.050855722,-0.033280395,0.008730019,-0.032844856,-0.045501143,-0.0032105078,-0.050753243,0.012124671,-0.0190741,0.033331636,0.0045443494,-0.014270347,-0.0044610845,0.04350278,-0.053340863,-0.0198427,0.008127949,0.04601354,0.025197282,-0.0016556933,0.008159974,-0.04217054,0.04176062,0.0009655542,0.005524315,-0.005204065,0.034484535,0.0478838,0.069840156,-0.040838297,0.044706922,-0.014462497,0.0053609875,-0.017524088,-0.04176062,0.016691437,0.052777223,0.008249644,0.06963519,0.019932369,-0.02357041,0.02257123,-0.017344749,0.017741859,0.01042094,0.029232433,0.02164891,0.02015014,0.015538537,-0.040684577,-0.027080353,0.04580858,0.008973409,-0.044220142,0.014641836,-0.015653826,0.0014091006,-0.01143293,-0.025338192,-0.008704399,0.009633125,-0.015256717,0.028130773,-0.0017293508,0.013437696,-0.033844035,-0.007250463,-0.0022817822,0.013021371,-0.02250718,0.04691024,0.06138555,-0.026414232,-0.02398033,0.033741556,0.04145318,0.03976226,-0.031589475,-0.0060975626,-0.06430623,-0.02209726,-0.04334906,-0.02140552,-0.011503385,-0.008794069,-0.042042438,-0.02326297,0.051598705,0.013360837,0.02016295,0.006635583,-0.016127797,0.0038077743,-0.050778862,0.005626795,-0.048165623,0.017344749,0.017024498,0.033792794,-0.028745653,-0.013104636,-0.0077372435,0.014654647,0.035688676,-0.004137632,0.014488117,-0.06702195,-0.02190511,-0.005758098,0.032486174,-0.01995799,-0.0025059574,-0.026491093,0.00086547603,-0.007948609,0.0066804183,-0.026901012,0.0055275178,0.033177916,-0.017293507,0.008941384,-0.013194306,-0.0019247034,0.032767996,-0.025991501,0.018472029,0.008902954,0.04370774,-0.021059649,-0.0036572567,-0.027029112,0.011215161,0.024723312,-0.018356739,-0.013027776,-0.02100841,0.0016316745,0.049062323,0.02054725,-0.009671555,-0.0013066207,-0.055954106,0.04350278,-0.016909208,0.059233468,-0.031717576,-0.052162345,0.008288073,-0.0057837176,0.0004359405,-0.050010264,-0.034382056,0.016768297,0.040684577,-0.0044802995,0.02067535,-0.010862885,-0.014744317,0.015845977,0.030026654,0.037302736,-0.015448867,-0.038404398,0.033767175,-0.027772093,0.016179038,-0.047525123,-0.0014459294,-0.026491093,-0.006411408,0.0038205842,0.023160491,0.0019775447,0.032486174,0.027797712,0.02325016,0.022596851,-1.1358872e-05,0.017485658,0.011215161,-0.0061648153,-0.0419912,-0.04603916,-0.012842031,-0.036149837,-0.0042176945,0.001979146,-0.03709778,0.02109808,0.0037437242,-0.011618676,0.032819234,0.002528375,-0.01898443,-0.009697175,0.02241751,0.025543151,0.025581582,-0.019496828,0.015346387,-0.038993657,-0.008428984,-0.030948974,0.0037757491,0.0032345264,0.055697907,0.0071351733,0.015077377,-0.034535777,0.02280181,0.031025834,0.038660597,0.031410135,0.00086547603,-0.064050026,0.020624109,0.06256407,-0.06440871,-0.024531161,-0.024326202,0.04593668,0.09335932,-0.016166227,0.035048176,0.052572265,0.037917618,0.0007726035,0.0059598554,-0.026875392,0.01858732,0.00144673,-0.026362993,0.0048133596,0.027336553,0.006859758,-0.01031846,0.04765322,-0.0049734847,0.034458917,-0.014603407,0.0052841273,-0.08715928,0.034996938,0.026593572,0.048268102,0.07911459,-0.038071338,-0.06697071,-0.0048517897,-0.0015604189,-0.030872114,0.029719213,0.01253459,-0.0129381055,0.011798016,-0.05062514,-0.02346793,0.034663875,0.018651368,0.014488117,-0.02184106,-0.027490273,0.02292991,0.0017982046,0.02203321,-0.0027157213,0.0140910065,-0.038916796,0.005101585,0.04814,-0.052111104,0.016383998,-0.04585982,-0.0018846721,0.01990675,-0.031871296,0.0017197432,-0.015320767,-0.0074169934,0.014103817,-0.007871749,-0.07803856,0.056927666,0.009914945,0.034074616,-0.01124078,0.016486477,0.0062064477,-0.0049702823,-0.018241448,-0.007007073,0.036585376,-0.018369548,0.02152081,0.017831529,0.014219106,-0.02300677,0.0019871523,-0.00459559,-0.014654647,-0.02040634,-0.014488117,-0.0155257275,-0.01010069,-0.016947638,-0.010011019,0.030641533,-0.024659261,0.035253137,0.02292991,0.0055851624,0.059899587,0.017088547,-0.04603916,-0.034920078,0.034484535,0.012143886,-0.029796073,0.049779683,-0.013809186,0.017101359,0.02140552,0.018151779,0.023916282,0.00013590616,-0.017165408,0.0020912334,0.0132199265,-0.018267069,0.054160707,0.0032361278,-0.01124078,0.0100238295,0.00933209,0.02377537,0.018023679,-0.036969677,-0.0017629771,-0.031384513,0.032639895,-0.018472029,0.009870109,-0.0125538055,0.04496312,-0.011759586,0.01028003,0.02332702,-0.009729199,-0.02157205,-0.012630666,-0.0028630362,-0.014385637,-0.015781928,-0.009306469,-0.0047461074,-0.04024904,-0.018113349,0.01067714,-0.005383405,0.027439032,-0.026068361,0.034330815,0.012540996,0.0019631335,-0.04657718,0.0031656728,-0.018292688,0.038071338,0.006059133,-0.0063377502,-0.016614577,-0.0016717057,0.024915462,0.027029112,0.014001337,-0.029539874,0.026158033,-0.030052274,-0.015295147,-0.015320767,0.026721673,0.003442689,-0.056620225,-0.0043746172,-0.0029334913,-0.0148596065,0.0018142171,-0.007955014,0.026567953,-0.015167047,0.0024947487,0.0046019945,0.027387792,0.016947638,-0.054878063,0.04447634,-0.019817078,0.0015716276,-0.027080353,0.0006316934,0.02011171,-0.04488626,0.004220897,-0.0112664,-0.032178733,0.031538233,0.010094285,-0.028310113,-0.0138476165,0.033510976,-0.018369548,0.006763683,-0.0016508895,-0.002297795,-0.00542824,-0.02478736,0.001647687,-0.010017425,-0.011823636,-0.002771765,-0.0041632517,0.02135428,0.01013912,0.0046372223,-0.056210306,0.014116626,0.024864221,0.0043329843,-0.0050439397,0.007916584,-0.009876515,0.018561698,-0.038737457,0.03740522,-0.013027776,-0.015615397,-0.0084866285,-0.012701121,-0.033946514,-0.017588139,-0.020214189,0.012605046,0.014398446,0.020700969,0.04014656,-0.0381482,-0.025735302,0.0052585076,0.013008561,0.007833319,0.015064567,-0.015154237,0.006706038,-0.025773732,-0.016460858,0.012438516,-0.030539054,0.042606078,0.030282853,0.0056812377,0.009697175,0.027157212,0.008031874,-0.033331636,0.0010552242,-0.034510154,0.015986888,0.02264809,-0.012323226,-0.0016893195,-0.01124078,-0.00610717,-0.028156392,0.012163101,-0.0065395082,-0.02146957,-0.036072977,-0.023672892,0.029309293,0.002528375,0.023403881,0.011529005,-0.035637435,-0.028335733,-0.019048478,0.0027109175,-0.034868836,0.00047437052,-0.011221565,0.008070304,0.015743498,0.032153115,0.016307138,0.0035739916,0.008320099,-0.015320767,-0.06876411,0.0017165408,-0.0052969377,0.0071928184,0.0045443494,-0.010337675,-0.0021536823,-0.040607717,-0.034638256,0.029309293,-0.02180263,-0.030385334,-0.030359713,-0.00065130874,0.02196916,0.008012659,0.010613089,0.02285305,0.012489756,0.029334914,-0.016076557,-0.004790942,-0.026696052,0.006725253,-0.024928272,-0.026721673,-0.010978175,0.03732836,-0.0046884622,-0.06722691,-0.008179189,0.013008561,0.0077564586,-0.023519171,-0.01172756,-0.03612422,-0.023685701,-0.02378818,0.016563337,-0.018881949,-0.036149837,0.035125036,-0.04585982,-0.0017709833,-0.0075899283,0.0054826825,-0.0037725468,0.003449094,0.04129946,-0.032614276,-0.02446711,0.024249341,-0.007993444,-0.0077436487,-0.011093465,-0.04514246,-0.007077528,0.054365665,-2.0478496e-05,0.0091335345,0.0069302134,-0.027797712,0.025479103,-0.017037308,0.01039532,-0.00981887,-0.04040276,-0.017536897,-0.011618676,-0.025222901,-0.003109629,0.00027941825,-0.0062416755,-0.0007333728,-0.01138169,-0.008806879,-0.0019583297,0.09417916,0.009594695,-0.005626795,-0.019701788,0.01020317,0.017626569,0.00011859263,0.017280698,0.005860578,0.0043393895,-0.009978995,-0.008614729,0.016665818,-0.017844338,0.006635583,-0.013155876,0.020380719,0.00501832,-0.026042743,0.0403259,-0.008499439,-0.0049574724,-0.007288893,-0.029488634,-0.0017533696,0.00068213284,-0.02349355,0.045270562,-0.047601983,0.0015868394,0.0058733877,0.009735605,0.0409664,-0.013053396,0.014155056,-0.02140552,-0.025120422,0.033357255,-0.013399266,-0.004214492,-0.011311235,-0.027643993,-0.055902865,-0.04388708,-0.013962907,-0.021508,-0.008512249,0.028233252,-0.008902954,0.007846128,-0.08413612,-0.017293507,0.022071641,-0.047781322,0.01231682,-0.0027301325,0.008038279,-0.011676321,-0.0077884835,-0.008550679,0.012489756,-0.0075258785,-0.014052576,-0.034791976,0.033997755,-0.055236746,0.00032885687,-0.00034326813,0.051983003,-0.026516711,-0.0045155273,-0.006674013,-0.037046537,0.01...', '2025-03-25 05:14:48.814348+00'), ('78', 'https://ai.pydantic.dev/testing-evals/', '7', 'SQL Agent Configuration and User Search Function', 'This section discusses the setup of a SQL agent using the 'google-gla:gemini-1.5-flash' model and the implementation of a system prompt that builds a prompt based on context. It also introduces a user search function that queries the database according to user prompts.', '<example>
                          <request>{example['request']}</request>
                          <sql>{example['sql']}</sql>
                        </example>
                        """
                        
                        
                        sql_agent = Agent(
                            'google-gla:gemini-1.5-flash',
                            deps_type=SqlSystemPrompt,
                        )
                        
                        
                        @sql_agent.system_prompt
                        async def system_prompt(ctx: RunContext[SqlSystemPrompt]) -> str:
                            return ctx.deps.build_prompt()
                        
                        
                        async def user_search(user_prompt: str) -> list[dict[str, str]]:
                            """Search the database based on the user's prompts."""
                            ...  # (4)!
                            result = await sql_agent.run(user_prompt, deps=SqlSystemPrompt())
                            conn = DatabaseConn()
                            return await conn.execute(result.data)
                        

              1. The `SqlSystemPrompt` class is used to build the system prompt, it can be customised with a list of examples and a database type. We implement this as a separate class passed as a dep to the agent so we can override both the inputs and the logic during evals via dependency injection.
              2. The `build_prompt` method constructs the system prompt from the examples and the database type.
              3. Some people think that LLMs are more likely to generate good responses if examples are formatted as XML as it's to identify the end of a string, see [#93](https://github.com/pydantic/pydantic-ai/issues/93).
              4. In reality, you would have more logic here, making it impractical to run the agent independently of the wider application.
`examples.json` looks something like this:
                        
                                                request: show me error records with the tag "foobar"
                        response: SELECT * FROM records WHERE level = 'error' and 'foobar' = ANY(tags)
                        

examples.json
                        
                                                {
                          "examples": [
                            {
                              "request": "Show me all records",
                              "sql": "SELECT * FROM records;"
                            },
                            {
                              "request": "Show me all records from 2021",
                              "sql": "SELECT * FROM records WHERE date_trunc('year', date) = '2021-01-01';"
                            },
                            {
                              "request": "show me error records with the tag 'foobar'",
                              "sql": "SELECT * FROM records WHERE level = 'error' and 'foobar' = ANY(tags);"
                            },
                            ...
                          ]
                        }', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 3152, "crawled_at": "2025-03-25T05:14:42.531758+00:00"}', '[-0.027416427,0.019778993,0.03059869,-0.009840539,0.011052247,-0.0048682517,0.018763117,0.018285777,-0.002034813,0.00793118,-0.002781421,-0.039631423,0.03199399,-0.03644916,-0.025923211,0.016278503,-0.0022046356,0.023414118,-0.026559664,0.008769585,0.06188279,-0.011431671,-0.00630333,0.0041247034,-0.047146462,-0.006382887,-0.034955945,0.05135684,-0.005535303,-0.031137228,0.030892437,-0.016511053,0.015127992,0.030549733,0.0008506436,0.0050824424,0.0066705146,0.003760579,0.0058290507,0.0027232834,0.015470698,-0.019448528,0.020917265,-0.046852715,-0.030500775,0.036816344,-0.021345647,0.01051371,0.029986717,-0.025115404,-0.014748569,0.041002244,0.00087741745,0.012123201,0.018346975,-0.06310674,-0.060854673,0.02545811,-0.0041706013,-0.0026804453,-0.0008896569,-0.020880546,-0.033560645,0.034172617,-0.0053823097,0.005051844,-0.015519655,0.045237105,-0.027710173,0.019460768,0.04881103,0.01004861,-0.026119042,-0.04185901,0.0088858595,-0.0036075856,0.046681363,0.03987621,-0.01914254,-0.044747524,0.013438945,-0.032165345,-0.02150476,-0.011957968,-0.029595053,0.002923705,-0.04367045,0.02239824,0.0030736385,-0.054539107,-0.049398527,0.01775948,0.015691008,0.026779974,0.0879284,0.053462032,0.022251368,0.004807054,0.0071845725,0.056889083,0.028664853,-0.03390335,-0.036375724,-0.023940416,0.06291091,-0.01682928,0.0067867893,-0.008488077,-0.029154431,-0.014283469,-0.07377956,-0.0015911319,0.014124355,-0.0074538407,-0.0049631074,0.0043633734,-0.0284935,-0.07010772,0.010813577,-0.027832568,-0.059777603,-0.014222271,-0.025727378,-0.023242764,0.020635756,0.03294867,-0.013365508,-0.031382017,-0.023352921,0.00818209,0.031455453,0.0011941139,0.023279484,-0.011566305,-0.026902368,0.012790252,-0.045237105,-0.025041968,-0.013022803,0.02778361,-0.0021434382,-0.009075572,-0.016058194,0.044551693,-0.041002244,-0.017025111,-0.04509023,0.033193458,-0.02194538,-0.0018894691,0.022300325,0.008726747,-0.072604574,0.008830782,-0.0053670104,0.0021158995,0.004531666,0.009938454,0.0013807659,-0.05375578,0.010207723,0.018628482,0.010807457,0.013451184,-0.02288782,-0.0317492,-0.0126800975,-0.014699611,-0.06526089,-0.020696955,-0.018628482,-0.022630792,-0.0007332211,0.0024371857,0.060658842,-0.01260666,0.013977482,-0.028566938,-0.026045606,-0.045114707,-0.036840823,-0.034955945,0.015923558,-0.008690028,0.007527278,-0.037550714,0.0005393019,-0.0018175622,-0.021272209,-0.004837653,0.05253183,0.04440482,0.042348586,-0.02079487,-0.0027676516,-0.050108414,0.058553655,-0.009155128,0.0034607118,0.007570116,0.05444119,0.040708497,0.03348721,-0.010311758,0.0100853285,-0.023536513,0.016205067,-0.008585992,-0.031088268,0.0134879025,0.012949366,0.0030185608,0.07426914,0.012814731,-0.042348586,0.02685341,-0.0402434,0.001285145,-0.038652264,-0.018971188,0.010636104,0.023450837,0.007319207,-0.057182834,-0.02124773,0.029325785,-0.002596299,-0.060120307,-0.003760579,0.033976786,0.008377922,-0.020182896,0.012655619,-0.013598057,0.036375724,-0.018359214,0.033217937,-0.023891456,0.0066215564,-0.040488187,-0.010256681,-0.04227515,0.017490212,-0.009687546,0.021125335,0.050818305,-0.014283469,-0.02103966,0.048541762,0.031186186,0.012086483,0.007282488,0.0036381842,-0.0761785,0.008983775,-0.008316724,-0.047709476,-0.015935797,-0.05116101,-0.0360575,-0.008745106,0.04795427,0.02518884,0.05674221,-0.003806477,-0.014552737,0.00537313,-0.057819284,-0.023157088,-0.012900407,-0.020036023,0.02805288,0.051307883,-0.05654638,-0.054098483,-0.00490497,-0.009302001,0.042373065,0.03483355,0.050867263,-0.071968116,-0.0007542577,-0.023781301,0.046363134,0.0018756997,0.051209968,-0.003830956,-0.0035402684,0.003365856,0.01026892,-0.023744583,0.0052476753,0.017624846,-0.011743777,-0.026070084,-0.016180588,0.01868968,0.044527214,0.011095085,0.021798506,0.0036840823,0.0020363429,-0.0074110026,-0.031088268,-0.0040053683,0.02381802,0.035225213,-0.03625333,0.044062115,-0.0029466539,-0.00957127,0.024368796,0.016963914,-0.010574907,0.004274637,-0.059239063,0.051552672,-0.0016247905,0.019766754,-0.039631423,-0.026412789,0.017196463,0.038456433,-0.0041920207,-0.06912856,-0.032826275,0.0072274106,-0.0007026224,0.008365682,0.017000632,-0.0045194267,-0.036106456,0.01681704,0.00794342,0.01424675,-0.045212623,-0.022153452,0.024038332,-0.006499162,0.023866978,-0.035788227,0.02170059,-0.043548055,-0.023401879,-0.020231854,0.028224232,0.008304484,0.016107151,-0.013708213,0.03547,0.0023576291,0.019705556,0.025898732,0.034662195,0.0374528,-0.05840678,-0.049423005,-0.005725015,-0.010293399,0.030109111,-0.020880546,-0.04464961,0.009057213,-0.028762769,-0.023989374,0.03387887,0.009669187,-0.032581486,0.02031753,0.03248357,0.027587779,0.0035953461,-0.029766405,-0.0076496727,-0.013010563,-0.02313261,-0.060756758,-0.0068541067,0.024185205,0.08572529,0.00840852,-0.02805288,-0.012888168,-0.0017349457,0.01915478,0.015678769,0.025409153,0.015042316,-0.02149252,0.0020455224,0.044894397,-0.0765212,0.023646668,-0.03877466,-0.008971536,0.042544417,0.009944574,0.026731016,0.031088268,-0.0013968302,0.028003922,-0.026363831,-0.010868655,-0.0025167423,0.0010089919,-0.016278503,0.0032281617,0.019717796,0.013610298,-0.019534204,0.033829913,0.038750183,0.027049242,-0.008102533,0.0066460357,-0.07549309,-0.0034454125,0.05116101,0.04763604,0.068345234,0.019570922,-0.0266331,-0.017196463,0.01802875,-0.015054556,0.03691426,0.028664853,-0.01611939,0.0009692135,-0.03226326,-0.0020745911,0.023964895,-0.002196986,0.011970208,-0.02408729,-0.039117366,0.046289697,0.0028579177,0.051846422,-0.025996648,-0.00047045486,-0.018555045,0.019167019,0.06168696,-0.01259442,-0.0028548578,-0.039141845,-0.006890825,0.054000568,-0.01868968,-0.01005473,-0.031822637,-0.031871594,-0.0020195136,0.002830379,-0.04222619,0.042201713,0.0060157026,0.027636737,-0.037061132,0.04158974,0.04763604,-0.003482131,-0.026731016,0.017624846,0.01472409,-0.02266751,0.010727901,0.02778361,0.027612258,0.019558683,-0.0005465691,0.00036010833,-0.0043786727,-0.025800815,-0.0020929505,-0.0116336215,0.010929852,0.010899253,-0.02734299,0.08758569,0.022973496,0.052238084,0.0402434,0.004993706,0.03270388,-0.005721955,-0.01890999,-0.017796198,0.026902368,0.0044918875,-0.020599037,0.034050222,-0.01238635,0.020586798,0.05209121,0.0019445467,-0.028346626,-0.023940416,-0.01586236,-0.012490385,0.004534726,-0.029105473,0.054588065,-0.0028211991,-0.022936778,-0.00233927,0.009173487,0.037575193,0.028395584,-0.029986717,-0.021076377,-0.019901387,0.020439925,-0.00053853693,0.033707518,-0.013230873,-0.00044253355,-0.034955945,-0.016205067,0.015984755,0.00056301587,-0.031259622,-0.032410134,-0.002218405,-0.0059208465,-0.002177097,-0.016670166,0.023328442,-0.021137575,-0.0077414685,0.00934484,0.008934817,0.022055537,-0.029276827,0.0038584948,-0.00070185744,0.018089946,-0.033780955,-0.028224232,-0.04203036,0.03666947,-0.029888801,-0.005354771,-0.0050977417,-0.011254198,0.02707372,0.0055903806,0.006444084,-0.013267592,0.067023374,0.002894636,0.0012560763,-0.023169328,0.054294314,0.015397261,-0.037061132,-0.0187264,0.022386001,-0.026828932,-0.01028116,-0.012924886,0.024589108,0.015837882,0.011352114,-0.012166039,0.04087985,0.0045928634,-0.040928807,0.014099876,-0.014222271,0.000120864825,-0.019693317,0.00025951513,0.022728708,-0.04251994,-0.036791865,-0.0187264,-0.047513645,0.008029097,-0.005005946,-0.027367469,-0.0062268334,0.051209968,0.0059942836,-0.026461747,-0.017012872,0.022557354,0.0023545693,-0.033952307,-0.0040757456,-0.0026008887,-0.017000632,-0.0150790345,-0.016278503,-0.001447318,0.01821234,0.004320535,-0.05767241,0.018065467,0.028885163,-0.021847464,-0.0066949935,0.023022454,0.020966223,-0.012924886,0.0057127755,0.009834419,-0.011841693,0.002241354,-0.02172507,0.018861033,-0.03921528,-0.026119042,-0.022740947,0.030867958,-0.01050759,-0.0016003115,0.04158974,-0.0396559,0.012545463,0.0032740599,0.002943594,0.025017489,0.029276827,-0.0012400119,-0.012582181,-0.03292419,-0.004372553,0.012190518,-0.028591417,0.012049764,0.05096518,0.010727901,0.0038187166,0.036400203,0.016266264,-0.03223878,0.014687371,-0.04203036,0.0003974005,0.01915478,0.000911841,-0.03737936,-0.012741295,0.007527278,-0.034246054,-0.0035188494,0.008475837,-0.008677788,-0.025776336,-0.016107151,0.038897056,0.012270074,0.0072763683,0.029056516,-0.012110962,-0.008579873,-0.0014802116,0.0065970775,-0.052384958,0.030084632,0.0029986717,-0.0012140031,-0.008812423,0.022569593,0.011957968,0.03250805,0.031014832,0.022361523,-0.08224928,-0.0027921305,0.031479932,0.0303539,-0.019962585,0.0011596903,-0.0055108243,0.0035341487,-0.011945728,0.013206394,0.0027355228,-0.02594769,-0.023646668,0.011872292,0.062225495,-0.010801338,0.015629811,0.00817597,0.007570116,0.06672962,0.010299519,-0.015911318,-0.015519655,-0.003017031,0.003668783,-0.009320361,-0.039533507,0.0172699,-0.001446553,-0.038872577,-0.026265915,0.022447199,-0.003619825,-0.014124355,-0.008659429,-0.016388658,-0.029178912,-0.030721085,0.021345647,-0.02521332,-0.022863341,0.003157785,-0.034784593,0.013818368,-0.0086471895,-0.005767853,-0.025972169,-0.0025090927,0.023964895,-0.023034694,-0.031235144,0.026804453,0.0018818195,-0.03830956,-0.009956813,-0.07162541,0.014454821,0.030794522,-0.036547076,0.0036320644,0.0058963676,-0.008940937,0.028199753,-0.0027676516,-0.006964262,-0.029692968,-0.05816199,0.002824259,-0.004458229,-0.020415446,0.016792562,-0.0078393845,-0.04320535,0.0031027072,-0.014332427,-0.019081343,-0.0055475426,0.064624436,-0.0018940589,0.0280284,-0.045408458,0.008396281,0.015960276,-0.031235144,0.033413768,-0.0005809926,0.003200623,-0.00060853147,-0.035592396,0.022838863,-0.035225213,0.018334735,-0.016266264,0.023279484,-0.017110787,-0.007833265,0.03928872,-0.040488187,-0.02170059,-0.025996648,-0.008200449,-0.023144849,0.012863689,0.0050181854,0.034417406,-0.038187165,0.020892786,0.010831936,0.040537145,-0.00084681873,-0.01656001,0.02548259,-0.019950345,-0.02545811,0.018799836,-0.007153974,-0.030378379,-0.00023293252,-0.03529865,-0.046093866,-0.034246054,-0.022263607,0.0048009343,0.0023515094,6.3635714e-05,0.0031730842,0.016535532,-0.09566374,-0.0087328665,-0.0038890934,-0.014919922,0.0049845264,-0.012367991,0.037991334,0.021198772,-0.005645458,0.005171179,-0.015054556,-0.01986467,7.5540515e-06,-0.00092331547,0.006174816,-0.017563649,0.0072274106,-0.013096239,0.04878655,-0.003457652,-0.012080363,-0.0146873...', '2025-03-25 05:14:48.866813+00'), ('79', 'https://ai.pydantic.dev/testing-evals/', '8', 'Quantifying SQL Generation Success in Agent Performance', 'This section outlines a method to measure the effectiveness of SQL generation by an agent. It involves using the `Agent.override` method to set a custom system prompt and running application code to compare the results of generated SQL against a predefined correct output. A scoring system is established, assigning points based on the validity of the SQL and the accuracy of the results returned.', 'Now we want a way to quantify the success of the SQL generation so we can judge how changes to the agent affect its performance. We can use [`Agent.override`](../api/agent/#pydantic_ai.agent.Agent.override) to replace the system prompt with a custom one that uses a subset of examples, and then run the application code (in this case `user_search`). We also run the actual SQL from the examples and compare the "correct" result from the example SQL to the SQL generated by the agent. (We compare the results of running the SQL rather than the SQL itself since the SQL might be semantically equivalent but written in a different way). To get a quantitative measure of performance, we assign points to each run as follows:
              * **-100** points if the generated SQL is invalid
              * **-1** point for each row returned by the agent (so returning lots of results is discouraged)
              * **+5** points for each row returned by the agent that matches the expected result
We use 5-fold cross-validation to judge the performance of the agent using our existing set of examples. sql_app_evals.py
                        
                                                import json
                        import statistics
                        from pathlib import Path
                        from itertools import chain
                        
                        from fake_database import DatabaseConn, QueryError
                        from sql_app import sql_agent, SqlSystemPrompt, user_search
                        
                        
                        async def main():
                            with Path('examples.json').open('rb') as f:
                                examples = json.load(f)
                        
                            # split examples into 5 folds
                            fold_size = len(examples) // 5
                            folds = [examples[i : i + fold_size] for i in range(0, len(examples), fold_size)]
                            conn = DatabaseConn()
                            scores = []
                        
                            for i, fold in enumerate(folds):
                                fold_score = 0
                                # build all other folds into a list of examples
                                other_folds = list(chain(*(f for j, f in enumerate(folds) if j != i)))
                                # create a new system prompt with the other fold examples
                                system_prompt = SqlSystemPrompt(examples=other_folds)
                        
                                # override the system prompt with the new one
                                with sql_agent.override(deps=system_prompt):
                                    for case in fold:
                                        try:
                                            agent_results = await user_search(case['request'])
                                        except QueryError as e:
                                            print(f'Fold {i} {case}: {e}')
                                            fold_score -= 100
                                        else:
                                            # get the expected results using the SQL from this case
                                            expected_results = await conn.execute(case['sql'])
                        
                                        agent_ids = [r['id'] for r in agent_results]
                                        # each returned value has a score of -1
                                        fold_score -= len(agent_ids)
                                        expected_ids = {r['id'] for r in expected_results}
                        
                                        # each return value that matches the expected value has a score of 3
                                        fold_score += 5 * len(set(agent_ids) & expected_ids)
                        
                                scores.append(fold_score)
                        
                            overall_score = statistics.mean(scores)
                            print(f'Overall score: {overall_score:0.2f}')
                            #> Overall score: 12.00
                        

We can then change the prompt, the model, or the examples and see how the score changes over time.  Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/testing-evals/", "chunk_size": 4442, "crawled_at": "2025-03-25T05:14:42.435906+00:00"}', '[0.011046116,0.018742895,0.04289832,-0.006156083,0.006085747,-0.015648106,0.019653914,0.0015122261,0.014375359,0.023056842,0.016907457,-0.08161667,-0.04072795,-0.05321428,0.016920855,0.023954464,0.009471928,0.0142815765,-0.021274995,-0.016023234,0.036012083,-0.0116088055,0.039790135,0.0066450867,-0.0066082436,-0.007710176,0.00017290957,0.017711299,0.019452956,-0.03775374,0.040406413,-0.024490358,0.014549524,-0.018073028,-0.022909472,0.013256679,0.01057051,0.012372455,0.0016755064,-0.0118566565,0.011930342,0.016733292,0.029929684,0.0028703825,-0.031001473,0.025990862,0.012412647,-0.02520042,0.030947883,0.0007343423,-0.04375575,0.052330054,-0.030894293,-0.016063424,0.026928676,-0.0293402,-0.020176413,0.0042268643,-0.025133431,-0.03879873,0.017242393,-0.032957487,0.017349571,0.039227445,0.0062498646,0.005054151,-0.022842485,0.045818944,-0.009277666,-0.0059618214,0.019519942,0.03459196,0.0027213371,-0.035904903,-0.00084780116,-0.008400139,0.050293658,0.04407729,0.001684717,-0.034699142,-0.014589716,-0.02150275,-0.001021548,0.029179431,-0.01421459,-0.0051948233,-0.04426485,-0.058466043,0.010563812,-0.043728955,-0.032743126,0.06655804,0.011803067,0.011916945,0.06693317,0.020873073,0.010081507,-0.010021219,0.03520824,0.014482537,0.00023487232,-0.017818477,-0.0419873,-0.002190467,0.038771935,0.0041397815,-0.0062297685,0.012124604,-0.034725934,-0.021690313,-0.047587395,-0.0047728065,-0.036494385,-0.026995664,-0.03834322,0.000732249,-0.020350577,-0.060931157,0.028107643,-0.047373034,-0.0632355,-0.00445127,-0.036708742,0.0020263495,0.01663951,0.0086747855,0.0033778073,-0.02469132,-0.008467127,0.016585922,0.010804964,0.004558449,0.028965075,-0.020430962,-0.015567723,-0.0060890964,-0.023003252,-0.017831875,-0.020015644,0.0142815765,-0.011012623,-0.009451832,-0.05308031,0.048444822,-0.030144041,-0.029206228,-0.022855882,0.039548982,-0.013591614,0.031081855,0.036146056,0.007998219,-0.06243166,0.004518257,-0.012633703,0.010463332,-0.002458414,0.026888484,-0.02084628,-0.04932905,0.0111064045,0.028670333,-0.010282467,-0.004628785,-0.008634593,-0.012539921,-0.033788122,-0.03298428,-0.06821931,-0.032207232,-0.0217573,-0.059966546,0.050025713,-0.017697902,0.031189036,-0.02589708,0.004220166,-0.049275458,-0.028402386,-0.035690546,-0.053160693,-0.017992644,-0.029581353,0.010409743,0.014656703,-0.029822504,0.012057616,0.036012083,-0.035985287,0.012117905,0.060288083,0.019854875,0.018729499,-0.027544955,-0.0070938976,-0.05503632,0.06521831,-0.0044244756,-0.04000449,0.003925424,0.028402386,0.030813908,0.05675118,-0.0059283283,0.008768567,-0.048364438,0.0037010184,-0.021690313,-0.037673354,0.009518818,0.009692984,0.010081507,0.06913033,-0.0007004303,-0.018448154,0.0042101177,-0.048846744,0.04238922,-0.0037110664,0.017617518,0.0056469836,0.036333617,-0.016800279,-0.05851963,-0.0049235267,0.046354838,0.034377605,-0.0298493,0.034082863,-0.007669984,0.009438435,-0.008761868,-0.0049469722,-0.0012400923,0.026700921,-0.045658175,0.03673554,-0.019305583,0.0028804305,-0.016451947,-0.017228995,-0.0016964397,0.028509565,0.0032957485,0.028107643,0.05241044,-0.028322002,-0.031698134,0.038289633,0.038155656,0.015313173,-0.00010414347,-0.0013682046,-0.061091922,-0.0037914505,-0.018434756,-0.02205204,-0.015835669,-0.029125843,-0.0035938397,-0.05040084,0.013477736,-0.02666073,-0.010912143,-0.012044219,-0.009471928,0.027196623,-0.034886703,-0.026071247,-0.023110433,0.01629118,0.032877102,0.016451947,-0.00511109,-0.03172493,0.005770909,0.0035536475,0.057715792,0.0066584838,-0.017242393,-0.048685975,-0.014978239,0.012164796,0.044130877,0.0033175193,0.0039857123,-0.013718888,0.005630237,0.009009719,-0.014147604,-0.03435081,0.03156416,0.038611166,-0.009023116,0.002645977,0.008560908,0.01851514,0.024865486,-0.0045550996,0.016224192,0.018796485,0.0017902211,-0.013893054,0.009418339,-0.016572524,0.020404167,0.011293967,-0.0038014986,0.0038148959,-0.0027079398,-0.024865486,0.050856348,0.0072680633,-0.012995431,-0.0055732983,-0.04477395,0.06495036,-0.017416557,0.042469606,-0.023351584,-0.066504456,-0.029608147,0.009391543,0.026111439,-0.07481081,-0.02423581,0.018220399,0.00192252,0.003036175,0.012807868,-0.008460428,-0.019265391,-0.005013959,0.028777512,-0.018742895,-0.0016336396,-0.019694107,0.05246403,-0.015902657,0.025776505,-0.1001586,-0.0013481085,-0.05133865,-0.030492373,0.020002246,0.016277783,0.0012375803,0.034484785,0.022494154,0.0044177766,0.012426044,0.001426818,0.033225432,0.04847162,0.022386976,-0.04062077,-0.047373034,0.001264375,-0.025602339,-0.0068862387,-0.02589708,-0.021154419,0.025883684,-0.024878882,-0.011441339,0.013116008,-0.019975452,-0.008011617,0.020163015,0.011320762,-0.0042168163,0.007864245,-0.034243632,0.006062302,-0.022601333,-0.028214823,-0.014348564,0.021007048,-0.010798265,0.05894835,0.025307598,0.013491133,-0.034163248,0.002195491,0.0505884,0.04046,0.039120268,0.032769922,-0.052383646,0.014897855,0.027210021,-0.058090918,0.004826396,-0.042201657,0.026928676,0.06907675,0.00046053398,0.022587935,0.06361063,0.026955472,-0.012734183,-0.026727717,-0.030787114,-0.011870054,0.008473825,0.005305351,0.008433633,0.007207775,0.037539378,0.011334159,0.043246653,-0.010892047,0.036708742,-0.046729963,0.014844266,-0.085367925,0.0071206926,0.035583366,0.047319446,0.058358863,-0.04112987,-0.06618292,0.03298428,-0.011468133,-0.009230776,0.024088439,-0.00925757,0.009826957,0.040486798,-0.02250755,-0.017630914,0.0344044,0.005908232,0.00079588644,-0.02813444,-0.019439558,0.0318857,0.018247193,0.027156431,-0.009317858,-0.006926431,-0.050266862,0.009572408,0.020980252,-0.03234121,-0.009699683,-0.03890591,-0.022936266,0.049087897,0.0020983603,-0.014120809,-0.0079446295,-0.026593743,0.01866251,-0.021743901,-0.065754205,0.03778053,-0.014442345,0.0637714,-0.0004998887,0.03279672,0.029179431,-0.013564819,0.008621196,0.013893054,0.032260824,0.0077570667,0.015045226,-0.00090432126,-0.006708724,0.015139007,-0.011059514,0.005348893,-0.019734299,-0.028616743,-0.031590957,0.0217573,0.012117905,-0.0048498414,-0.011461434,0.015996438,-0.018930458,0.063181914,0.034029275,-0.013785875,0.047721367,0.008071904,-0.022721909,-0.035797723,0.02751816,0.0032254125,-0.0062599126,0.05149942,-0.015286379,0.017939053,0.01396004,0.039950904,0.011193488,-0.033520173,-0.018019438,0.017215597,0.02215922,-0.016050028,0.046247657,-0.024919074,-0.031242624,-0.0036038875,0.007375242,0.022802293,0.0430055,-0.045443818,-0.02802726,-0.015554326,0.009291063,-0.01826059,0.026432974,0.008949431,0.02751816,-0.024557346,0.016786883,0.0038316427,-0.035636954,-0.033252228,-0.00023173232,0.0037579571,-0.046917524,-0.011548517,-0.03030481,-0.014321769,-0.02893828,-0.0056235385,0.018608922,-0.0037010184,0.034243632,-0.04021885,0.009250872,0.008788663,0.005640285,-0.048846744,0.004679025,-0.032314412,0.019318981,0.018153412,-0.018823279,0.009036514,-0.01558112,0.030465579,0.008359947,-0.020819485,-0.025964068,0.00038454586,-0.007864245,0.012801169,-0.010362851,-0.00044169393,0.003116559,-0.040111672,-0.016317975,0.0002198003,-0.015822273,0.010336057,-0.0031852203,0.028161233,-0.00044964862,0.009659491,-0.010952335,0.040245645,-0.010657594,-0.040486798,0.03617285,-0.0037914505,0.010295865,-0.0046421825,0.0034330713,0.012352359,-0.0125734145,-0.0065747504,-0.024758305,-0.019278789,0.029099047,-0.001644525,-0.024731511,-0.0064340783,0.044157673,-0.015916053,-0.0027380837,-0.02044436,0.01254662,0.016572524,-0.0018086425,-0.025883684,-0.01709502,0.0036708743,-0.035449393,-0.003500058,0.026365988,0.016894061,0.017349571,-0.027183227,0.018850073,0.027598545,-0.034484785,-0.0002633417,0.006236467,-0.001434354,0.033171844,-0.003026127,0.03547619,0.0059283283,-0.0057977038,-0.022467358,-0.022386976,-0.037512586,-0.01128057,-0.0076163947,0.018300783,-0.010188686,0.028161233,0.046703167,-0.05519709,-0.029500969,-0.01421459,-0.0063068033,0.013377256,0.020953458,-0.0057106214,0.0009453506,-0.031858902,-0.009016418,0.017483544,-0.03247518,0.036494385,0.025160227,-0.0005580834,0.016304577,0.03804848,0.0049235267,-0.013035623,-0.00089762255,-0.032421593,0.021395572,0.016451947,0.0061024935,0.015205994,0.008004918,0.010309262,-0.020283591,0.0009595853,-0.0015155755,-0.039388213,-0.030492373,-0.022909472,0.030519167,0.011474832,0.023539146,-0.022534346,-0.022762101,-0.041906916,-0.02837559,-0.0031383296,-0.049864944,0.03145698,-0.012178193,-0.016666306,0.028295208,0.03531542,0.010851854,0.02842918,0.02383389,-0.013605011,-0.061842177,0.008614497,0.021636723,0.026124835,-0.012117905,0.001178967,0.004799601,-0.031108651,-0.015487338,0.039227445,-0.019734299,-0.017939053,-0.04182653,0.005013959,0.026848292,-0.015969643,0.0015767008,0.029152637,0.013350461,0.034672346,0.015072021,-0.003181871,-0.030572757,0.0021787444,-0.023003252,-0.007911136,-0.039441805,0.037271433,0.010871951,-0.05685836,-0.015916053,0.008534113,0.014161001,-0.017791683,-0.04522946,-0.007971425,-0.03311825,-0.024155425,0.014562922,-0.016451947,-0.017135212,0.033975683,-0.029983273,0.004826396,-0.013852862,0.025079843,-0.033707738,0.006383838,0.033868507,-0.053482227,-0.012479633,0.024919074,0.0029675134,-0.022253001,-0.011977232,-0.06077039,-0.0052584605,0.055732984,-0.0237803,0.007931232,0.0022172618,-0.0086747855,0.021971656,-0.012298769,0.023740107,-0.02676791,-0.041317433,0.013390653,-0.0063503445,-0.007067103,-0.012633703,0.0075895996,-0.021864478,0.009304461,-0.017764889,0.0025053048,-0.010449935,0.08225974,0.026901882,0.008654689,-0.0043306937,0.011421243,0.029125843,-0.0037311625,0.021435764,0.024209015,0.018997444,-0.0032337857,-0.023231007,0.0048129987,-0.02585689,0.01609022,-0.013732285,0.031081855,0.004032603,0.0057742586,0.04214807,-0.02084628,-0.04204089,-0.0060991445,-0.009672888,-0.0015683275,-0.0005785981,-0.003875184,0.027076049,-0.02939379,0.02737079,-0.003834992,0.027076049,0.03970975,-0.012372455,0.014375359,-0.0068359985,-0.011213584,0.0123255635,-9.435713e-05,-0.0022909471,-0.016505538,-0.036012083,-0.031537365,-0.024302796,0.014643306,-0.0008867372,-0.0057240184,0.022319987,0.0073886393,0.003677573,-0.10578549,-0.022172617,0.01072458,-0.038557578,0.024101837,-0.019506544,0.015192597,-0.024771703,-0.03611926,-0.011468133,0.010516921,-0.011628902,-0.021234803,-0.011749477,0.048498414,-0.043407418,-0.01538016,0.00020378629,0.046274453,-0.030947883,0.001694765,-0.02...', '2025-03-25 05:14:48.918126+00'), ('80', 'https://ai.pydantic.dev/api/common_tools/', '0', 'PydanticAI Common Tools Documentation', 'This page provides an overview of the common tools available in the PydanticAI documentation, along with links to related sections such as installation, troubleshooting, and other documentation categories.', 'Skip to content  [ ![logo](../../img/logo-white.svg) ](../.. "PydanticAI") PydanticAI  pydantic_ai.common_tools  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../../img/logo-white.svg) ](../.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](../..)
              * [ Installation  ](../../install/)
              * [ Getting Help  ](../../help/)
              * [ Contributing  ](../../contributing/)
              * [ Troubleshooting  ](../../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../../agents/)
                * [ Models  ](../../models/)
                * [ Dependencies  ](../../dependencies/)
                * [ Function Tools  ](../../tools/)
                * [ Common Tools  ](../../common_tools/)
                * [ Results  ](../../results/)
                * [ Messages and chat history  ](../../message-history/)
                * [ Testing and Evals  ](../../testing-evals/)
                * [ Debugging and Monitoring  ](../../logfire/)
                * [ Multi-agent Applications  ](../../multi-agent-applications/)
                * [ Graphs  ](../../graph/)
                * [ Image, Audio & Document Input  ](../../input/)
                * [ MCP  ](../../mcp/) MCP 
                  * [ Client  ](../../mcp/client/)
                  * [ Server  ](../../mcp/server/)
                  * [ MCP Run Python  ](../../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../../cli/)
              * [ Examples  ](../../examples/) Examples 
                * [ Pydantic Model  ](../../examples/pydantic-model/)
                * [ Weather agent  ](../../examples/weather-agent/)
                * [ Bank support  ](../../examples/bank-support/)
                * [ SQL Generation  ](../../examples/sql-gen/)
                * [ Flight booking  ](../../examples/flight-booking/)
                * [ RAG  ](../../examples/rag/)
                * [ Stream markdown  ](../../examples/stream-markdown/)
                * [ Stream whales  ](../../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../../examples/chat-app/)
                * [ Question Graph  ](../../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../agent/)
                * [ pydantic_ai.tools  ](../tools/)
                * pydantic_ai.common_tools  [ pydantic_ai.common_tools  ](./) Table of contents 
                  * duckduckgo 
                  * duckduckgo_search_tool 
                  * tavily 
                  * tavily_search_tool 
                * [ pydantic_ai.result  ](../result/)
                * [ pydantic_ai.messages  ](../messages/)
                * [ pydantic_ai.exceptions  ](../exceptions/)
                * [ pydantic_ai.settings  ](../settings/)
                * [ pydantic_ai.usage  ](../usage/)
                * [ pydantic_ai.mcp  ](../mcp/)
                * [ pydantic_ai.format_as_xml  ](../format_as_xml/)
                * [ pydantic_ai.models  ](../models/base/)
                * [ pydantic_ai.models.openai  ](../models/openai/)
                * [ pydantic_ai.models.anthropic  ](../models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../models/cohere/)
                * [ pydantic_ai.models.gemini  ](../models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../models/vertexai/)
                * [ pydantic_ai.models.groq  ](../models/groq/)
                * [ pydantic_ai.models.instrumented  ](../models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../models/mistral/)
                * [ pydantic_ai.models.test  ](../models/test/)
                * [ pydantic_ai.models.function  ](../models/function/)
                * [ pydantic_ai.models.fallback  ](../models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../models/wrapper/)
                * [ pydantic_ai.providers  ](../providers/)
                * [ pydantic_graph  ](../pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../pydantic_graph/exceptions/)
Table of contents 
              * duckduckgo 
              * duckduckgo_search_tool 
              * tavily 
              * tavily_search_tool 
`pydantic_ai.common_tools` duckduckgo_search_tool
                        
                                                duckduckgo_search_tool(
                            duckduckgo_client: DDGS | None = None,
                            max_results: [int](https://docs.python.org/3/libr', '{"source": "pydantic_ai_docs", "url_path": "/api/common_tools/", "chunk_size": 5000, "crawled_at": "2025-03-25T05:14:52.623357+00:00"}', '[0.0015355546,-0.012329684,0.047327884,-0.0055200784,0.0122618135,-0.0051882705,-0.0072469884,0.05592473,-0.02060226,0.022381958,0.004879086,-0.08892454,-0.021869162,-0.028852213,0.023317052,0.0021171612,-0.042893723,-0.004370062,-0.00037658322,0.083253644,0.041144192,0.01707303,0.00072960055,0.02563971,0.016168099,-0.0014742833,-0.0005373027,0.05906182,0.014426107,-0.052998785,0.02067767,-0.031340774,-0.0441003,0.02164293,0.014901196,-0.02108489,-0.008589302,0.020376027,-0.01714844,0.020436356,0.004973349,-0.042893723,0.057432946,0.003159717,-0.040209096,-0.024161655,-0.0032106193,0.012028039,0.017751727,-0.020089466,-0.062259246,0.008996521,-0.049620375,0.038881864,0.006990591,-0.011055239,-0.041506164,0.0064551737,0.020240288,-0.01161328,-0.021311123,-0.009765713,-0.011711313,0.0536624,-0.029184021,-0.005474832,-0.05357191,0.028083023,-0.056588344,-0.04865512,-0.0030390595,0.04575934,-0.035231974,-0.06023823,-0.014403483,-0.022698684,0.03954548,0.07716044,-0.007661748,-0.038399234,-0.011454917,0.03643855,-0.013981182,-0.006549437,-0.023105903,-0.04784068,-0.055954892,-0.030948637,0.0013630522,-0.04156649,-0.041053697,-0.008280118,0.0055690953,0.007081084,0.08530482,0.02295508,0.021401616,0.015331037,-0.0012687885,0.039213672,0.021658013,-0.006383533,-0.037705455,0.03788644,0.025594462,-0.017450083,0.02627316,-0.036981508,-0.014373319,0.017193686,-0.1060579,0.011371965,-0.032547347,0.033965074,-0.049288567,-0.0020021596,-0.002115276,0.02191441,0.0017457625,-0.040088437,-0.040299587,-0.030586664,0.03284899,-0.0038063654,0.004430391,0.024221983,-0.008838158,-0.022668518,-0.050857116,-0.025488887,0.02447838,0.015941866,0.023241641,-0.019848151,-0.013528717,-0.024689531,-0.054386348,0.018913055,-0.03725299,0.061836943,0.031823404,-0.033723757,-0.004867774,0.018701905,-0.03704184,0.0038007097,-0.050374486,-0.00073478505,-0.047327884,0.012819855,0.018219275,-0.0023528202,-0.04108386,-0.015881537,-0.055653248,0.017450083,0.015655303,0.03686085,0.007722077,-0.035563786,-0.050374486,0.04419079,-0.025700036,0.008272576,-0.03471918,0.0049884315,-0.017389756,-0.012201484,-0.06400878,-0.039243836,-0.0047169523,-0.017193686,-0.003387835,-0.0018494525,0.016967455,-0.03595592,-0.027298748,-0.025051503,-0.03761496,-0.04265241,-0.042833395,0.00038035377,-0.029199103,-0.020557012,-0.024342641,-0.021205546,0.0001061055,-0.0017372788,-0.018837644,0.04370816,0.02723842,0.041114025,0.07239447,0.019440932,0.011786724,-0.015911702,0.06286253,-0.009162425,0.006624848,0.008566679,-0.0082952,0.010308671,0.013513635,0.010044733,0.0023283118,-0.0305565,0.011454917,0.028158432,-0.03007387,-0.04895676,0.042350765,-0.045246545,0.008378152,-0.013392977,-0.04633246,-0.014214956,-0.037072003,0.011839513,0.0048036748,0.022200972,-0.0154743185,0.04195863,0.021054726,-0.010519821,-0.018596329,0.013807737,0.036257565,-0.077462085,0.00809159,0.053390924,0.030375514,0.0104896575,0.0008785371,-0.010881794,0.017163523,-0.052787635,0.041626822,-0.027163008,0.009803418,-0.014267744,-0.005765164,-0.028067939,0.0013385436,0.021145219,0.0025488886,-0.00048592902,-0.009991945,-0.040631395,0.031280443,0.045879997,0.028354501,-0.0015553499,0.033361785,-0.00919259,-0.025217406,-0.015670387,-0.036981508,0.0032690628,-0.008257494,0.0009030456,0.006511732,0.03414606,-0.031340774,-0.01320445,-0.031431265,-0.03975663,-0.018837644,0.006726653,-0.034749348,-0.018204194,0.022140643,0.042199943,0.07667781,-0.02191441,-0.04542753,0.0015826864,-0.0005396593,0.023633778,0.030119115,-0.01990848,-0.010957205,0.02648431,0.031189952,0.031823404,0.017238934,0.013098874,0.019365521,-0.028324336,0.001759902,-0.0058782804,0.023799682,0.013626751,0.04280323,-0.03725299,-0.010157849,-0.009169966,0.054778483,0.013611669,0.027434489,-0.012819855,0.056135878,0.026318407,-0.003276604,0.0041249767,-0.013302484,0.0129028065,0.021265876,-0.0016854338,0.04120452,-0.024418052,-0.03188373,0.028052857,-0.012684114,-0.023256723,0.0029259431,-0.0314011,0.056739166,-0.015029394,0.046483282,-0.021401616,-0.058941163,-0.04805183,0.030662075,0.026710544,-0.055653248,-0.0036743965,0.023543285,-0.013294943,-0.030390596,-0.012540834,0.008008638,-0.0309788,-0.01078376,0.023679025,-0.04253175,-0.033241127,-0.023543285,0.029093528,-0.01832485,0.047448542,-0.052365333,-0.035412963,-0.042079285,-0.02509675,0.0003339289,0.027057434,0.041506164,0.020089466,0.0121034505,0.012970676,0.024387887,-0.0004435104,0.021235712,0.027193174,-0.032879155,-0.022562943,-0.029636487,-0.019516343,-0.012156238,0.04458293,-0.05387355,-0.020934068,-0.0079181455,-0.011092944,-0.015896618,0.005863198,-0.034749348,-0.034538195,-0.026695462,0.024568874,0.050042678,-0.005067613,-0.034900166,-0.021612765,-0.020014055,-0.022593107,-0.020587178,0.0050789244,-0.0028731555,0.041476,0.038640548,-0.022547862,-0.016153017,0.017223852,0.037554633,-0.0014507173,0.018852727,-0.0030371742,-0.014003806,0.02509675,0.038338903,-0.02455379,0.028852213,-0.010859171,-0.008536515,0.022110477,0.011492622,0.03809759,0.06599963,0.020934068,0.003553739,0.010791301,-0.013837902,-0.009433905,-0.016650729,0.043798655,0.058880836,0.015534647,0.030601745,-0.046996076,0.055532593,-0.03677036,0.022306547,-0.01846059,-0.010346376,-0.055743743,0.013837902,0.024810188,0.018355016,0.030631911,-0.03858022,-0.06286253,-0.029470582,0.022427203,-0.041717313,0.07619518,0.05055547,-0.03788644,0.025458721,-0.025398394,0.00435498,0.006311893,0.040178932,-0.009313247,7.784114e-06,-0.036740195,-0.026303325,0.045819666,0.007480762,0.009833583,0.012178862,-0.052093856,-0.024237065,0.04280323,-0.04286356,-0.012593621,0.014139545,-0.027555145,-0.013257237,-0.039123178,0.0070471494,-0.028746638,-0.015263167,0.022004902,-0.010037192,-0.048564624,0.07215316,-0.025911188,0.05055547,0.0031163557,0.05330043,-0.0014855949,-0.053843386,0.041777644,-0.0014299793,0.0010614085,0.026801037,0.01894322,0.01755566,0.010067356,0.045125887,-0.020526849,-0.009833583,-0.01915437,-0.05688999,-0.030104034,0.026710544,0.024297394,-0.041988794,0.0023207706,0.022849504,-0.042350765,0.02060226,0.021899328,0.0034255404,0.07884964,-0.011153273,-0.021069808,-0.0019276913,0.0126614915,-0.015655303,0.021054726,0.026167585,-0.020179959,0.011319177,0.018068453,1.3388381e-05,-0.008581761,-0.015036935,-0.024221983,-0.012963135,-0.01832485,-0.030466007,0.033210963,0.016469741,-0.012028039,0.036257565,-0.011100486,-0.007597649,0.01348347,-0.067025214,-0.004860233,-0.005399421,0.03125028,0.025307901,0.027540063,-0.0037158725,-0.0024056078,0.012367389,-0.015941866,0.03076765,-0.044160627,-0.023694107,-0.002758154,0.00321439,-0.03194406,-0.03296965,-0.048836105,-0.046905585,-0.01797796,0.005274993,-0.00048357245,0.026212832,-0.01582121,-0.05954445,0.00200593,0.010625397,0.005007284,-0.049620375,-0.03643855,0.012224108,0.011590657,-0.02364886,-0.0117791835,0.00026417384,-0.0014186677,0.03520181,-0.0077597825,-0.0065381257,-0.0019116665,0.06515502,0.0009157712,0.027645638,-0.018596329,0.015564811,0.0140339695,-0.0014328072,-0.010964746,0.037373647,-0.0005165647,0.01846059,-0.007872899,0.036981508,0.012028039,-0.019953726,0.024010833,0.028399747,-0.010610315,-0.032547347,-0.030873226,-0.0006631447,-0.008951275,-0.016168099,0.0076504364,0.00031012736,-0.0016119081,-0.0002117397,-0.013400518,-0.040812384,-0.006851081,-0.019335357,-0.02150719,0.013845443,0.03435721,-0.043195367,0.00504876,0.0057425406,0.014358236,0.007197971,-0.011560492,0.005716147,-0.0030220922,-0.018174028,-0.02702727,-0.030797815,-0.007197971,0.022653436,-0.016137933,-0.037162494,0.026363652,0.0067530465,-0.028987953,0.01990848,0.040359918,0.0015779732,0.0070622317,-0.0025545445,0.0014035855,-0.009441446,-0.014682503,-0.007420433,0.007887981,-0.008340446,-0.03906285,-0.022170806,0.015911702,-0.04998235,0.015730714,0.058911,-0.039123178,0.0028844671,7.918145e-05,0.016303837,0.007431745,0.014207415,-0.029953212,-0.0150671,-0.03345228,-0.038067427,0.0031616022,-0.04515605,0.037946768,0.03990745,-0.009102097,-0.007522238,0.007865357,0.037524465,-0.031702746,0.0018720757,-0.011688691,0.035231974,0.03435721,0.0012980102,-0.02586594,0.010859171,-0.011364424,-0.020934068,-0.002053062,0.011040157,-0.01452414,0.009924076,-0.007910605,0.0102483425,-0.011485081,0.027087597,-0.011590657,-0.0064627146,-0.02731383,-0.034055565,0.031582087,-0.03870088,0.038007095,0.018913055,-0.014607092,-0.037162494,0.038338903,0.038972355,0.027524982,0.013641833,0.01838518,-0.0029165167,0.024297394,0.035835262,-0.0067945225,-0.005422044,0.0042079287,0.028158432,-0.04002811,-0.010022109,0.03692118,-0.015610058,0.010014568,-0.06750784,0.018762233,0.066421926,-0.011070321,0.003401032,0.021356368,0.0004378546,0.043527175,-0.0005146794,-0.018339932,0.025458721,0.009298164,0.0036065266,-0.0014460041,-0.01915437,0.036106743,-0.010037192,-0.062319573,-0.017751727,0.012963135,0.003651773,0.0007027354,-0.035141483,0.0044907196,-0.00919259,0.00836307,0.025202325,-0.023422627,-0.028067939,0.012141156,-0.03152176,0.004750887,-0.008483727,0.015730714,-0.00401186,0.007333711,-0.010791301,-0.017178604,-0.023528203,0.04419079,-0.011243766,-0.006353369,0.01140967,-0.050223663,-0.0023810994,0.012472964,-0.0018023207,0.002460281,0.010595232,0.002716678,0.00025993196,-0.015368743,0.0059612324,-0.021793753,-0.034327045,0.042411093,-0.028897459,-0.006070578,0.014931359,0.0018362555,-0.013822819,-0.02212556,-0.031189952,-0.024659367,0.012367389,0.04425112,-0.020858657,-0.00961489,-0.0037064462,0.014780538,-0.0016109655,-0.012028039,0.020858657,0.0011415326,0.010240802,0.008770289,-0.017450083,0.010316212,0.0098185,0.01272182,-0.018928139,0.037705455,0.00650042,-0.027705967,0.017676316,-0.018988466,-0.039877288,-0.0031276674,-0.006319434,-0.040178932,0.008672254,0.0092906235,0.028475158,-0.033422112,-0.00078663003,-0.025353147,0.015866455,0.007409122,-0.007903063,0.02455379,-0.024342641,-0.0038798912,0.016680893,-0.0141923325,0.0014167824,-0.018656658,-0.015014311,-0.029953212,-0.03906285,0.0007182889,-0.011394588,-0.0018777315,0.017615987,-0.023950504,0.005897133,-0.09918042,-0.024282312,-0.0016599826,0.007556173,0.031491596,-0.02191441,0.017615987,0.049620375,-0.032517184,-0.017118275,-0.013905771,-0.008453563,-0.021461945,-0.015383825,0.03499066,-0.021688176,0.03836907,-0.0024093785,0.029832555,-0.019923562,-0.024855435,0.0074166628,-0.01...', '2025-03-25 05:14:53.151385+00'), ('81', 'https://ai.pydantic.dev/api/common_tools/', '1', 'DuckDuckGo Search Tool Creation', 'This section outlines the creation of a DuckDuckGo search tool, detailing its parameters such as `duckduckgo_client` and `max_results`, including default values and the location of the source code.', 'ary/functions.html#int) | None = None,
                        )
                        

Creates a DuckDuckGo search tool. Parameters: Name | Type | Description | Default  
---|---|---|---  
`duckduckgo_client` |  `DDGS | None` |  The DuckDuckGo search client. |  `None`  
`max_results` |  `[int](https://docs.python.org/3/library/functions.html#int) | None` |  The maximum number of results. If None, returns results only from the first response. |  `None`  
Source code in `pydantic_ai_slim/pydantic_ai/common_tools/duckduckgo.py`
                        
                                                62
                        63
                        64
                        65
                        66
                        67
                        68
                        69
                        70
                        71
                        72
                        73

| 
                        
                                                def duckduckgo_search_tool(duckduckgo_client: DDGS | None = None, max_results: int | None = None):
                            """Creates a DuckDuckGo search tool.
                        
                            Args:
                                duckduckgo_client: The DuckDuckGo search client.
                                max_results: The maximum number of results. If None, returns results only from the first response.
                            """
                            return Tool(
                                DuckDuckGoSearchTool(client=duckduckgo_client or DDGS(), max_results=max_results).__call__,
                                name='duckduckgo_search',
                                description='Searches DuckDuckGo for the given query and returns the results.',
                            )
                          
  
---|---  
tavily_search_tool
                        
                                                tavily_search_tool(api_key: [str](https://docs.python.org/3/library/stdtypes.html#str))
                        

Creates a Tavily search tool. Parameters: Name | Type | Description | Default  
---|---|---|---  
`api_key` |  `[str](https://docs.python.org/3/library/stdtypes.html#str)` |  The Tavily API key. You can get one by signing up at <https://app.tavily.com/home>. |  _required_  
Source code in `pydantic_ai_slim/pydantic_ai/common_tools/tavily.py`
                        
                                                71
                        72
                        73
                        74
                        75
                        76
                        77
                        78
                        79
                        80
                        81
                        82
                        83

| 
                        
                                                def tavily_search_tool(api_key: str):
                            """Creates a Tavily search tool.
                        
                            Args:
                                api_key: The Tavily API key.
                        
                                    You can get one by signing up at [https://app.tavily.com/home](https://app.tavily.com/home).
                            """
                            return Tool(
                                TavilySearchTool(client=AsyncTavilyClient(api_key)).__call__,
                                name='tavily_search',
                                description='Searches Tavily for the given query and returns the results.',
                            )
                          
  
---|---  
 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/api/common_tools/", "chunk_size": 3697, "crawled_at": "2025-03-25T05:14:53.498207+00:00"}', '[-0.005484927,0.029185032,0.026740212,-0.046706237,-0.008646002,-0.055161238,-0.025161266,0.047470246,0.002839556,0.0054785605,0.0119694285,-0.075993136,0.025734272,-0.05612898,0.024499128,0.009658311,-0.0051602246,-0.016438864,0.0335144,0.072580576,0.003495328,-0.001797006,-0.03669776,0.023607789,0.03473681,-0.015445656,0.02831916,0.050449867,0.0070161223,-0.030611178,-0.007589127,-0.034202006,-0.022767382,0.026485544,-0.0039187144,-0.038531374,0.011689293,0.008314933,0.005096557,0.03993205,-0.022041576,-0.025339535,0.07884543,-0.003613112,-0.03213919,-0.054142565,-0.022665514,0.0011778427,0.0028506976,-0.061120488,0.02053903,0.022283511,-0.05037347,0.026511012,0.016782667,-0.0029207317,-0.056383647,0.018170612,0.0041415496,0.033718135,-0.049762264,0.012230464,0.026485544,0.052665487,-0.021188436,-0.0010584667,-0.0066595864,0.03229199,-0.015280122,-0.039600983,0.006907888,0.06229196,-0.022818316,-0.027376885,0.012109497,-0.03919351,0.0020978334,0.06463491,0.0027488302,-0.017177403,-0.011294557,0.018565347,-0.023493188,0.0024066193,-0.039550047,-0.014032245,-0.057656992,-0.04092526,-0.0019004651,-0.024868397,-0.0378183,-0.03870964,0.03695243,0.0035080612,0.08745323,0.04230047,0.057402324,0.0169482,-0.015763992,0.053887896,0.036748692,0.0125106,-0.029872637,0.026893014,0.040033918,-0.030483842,-0.02643461,-0.061782625,-0.008747869,0.035679083,-0.09229194,0.0006426405,-0.0063508004,0.012599734,-0.03407467,-0.008244899,-0.0010815461,0.004348468,-0.03392187,-0.019673157,-0.04400675,-0.05653645,0.077877685,0.0072198575,0.012211364,0.03422747,-0.040950727,-0.029337833,-0.07370112,-0.014668916,0.031909987,0.053022023,0.007614594,-0.018221546,-0.012555166,-0.017775875,-0.07899823,0.0374363,-0.013968578,0.041994866,0.024855664,-0.019902358,0.006392184,-0.0007787291,-0.05182508,0.0011730677,-0.023620522,-0.02903223,-0.020322561,0.026485544,-0.0032693094,-0.01753394,0.002656513,-0.0023954774,-0.044235952,0.019112885,0.02831916,0.04240234,0.009671044,-0.0012224098,-0.03106958,0.007277158,-0.012402365,0.01419778,-0.047673978,0.00056066905,0.017113736,-0.015038187,-0.069728285,-0.005749146,0.025046665,-0.010186748,0.0045235525,0.06962642,0.014388781,-0.008951604,-0.024881132,-0.0051443074,-0.036723226,-0.015878594,-0.038022038,0.0105496505,-0.023047516,-0.05587431,-0.03588282,-0.022907449,0.027809821,-0.048947323,-0.008837003,-0.0039919317,0.00462542,0.01427418,0.040874325,-0.01842528,-0.012561534,-0.005822363,0.031859055,-0.016158728,0.02069183,-0.0017349304,-0.0083404,-0.01212223,-0.03473681,-0.00044646606,0.02542867,-0.02554327,0.017877743,0.003966465,-0.016960936,-0.060662083,0.017126469,-0.028599294,-0.008913404,-0.01041595,-0.0033202432,0.0036449456,-0.01968589,0.01786501,0.023633255,0.017763142,-0.013204572,0.023251252,0.013777576,-0.033947337,-0.03792017,0.046273302,-0.0037786467,-0.06993202,-0.04041592,0.057402324,0.02253818,0.016960936,0.027835289,-0.033005062,0.009008905,-0.031451583,0.07558567,-0.04000845,0.031629853,-0.027122216,-0.010944387,-0.0634125,-0.025466869,0.02569607,0.014796251,-0.009263574,0.008060264,-0.01208403,0.024053458,0.029541569,0.05067907,-0.023900656,0.061273288,-0.0012980145,0.003444394,-0.010785219,-0.008849737,-0.00748726,0.005723679,0.0034284773,0.05246175,-0.013573841,-0.018030543,0.029465169,-0.031222383,0.0029493817,-0.017699474,0.022754649,0.011377324,0.02676568,-0.0013855569,0.0548047,0.027886221,-0.019163819,-0.016859068,-0.009403641,0.02179964,0.014821718,0.038684174,-0.054855637,-0.038251236,0.025492337,-0.020742765,0.013955845,0.035373483,-0.009709244,0.02139217,-0.052258015,-0.015305589,-0.032521192,0.025645137,-0.013561108,0.0054881102,-0.00063508004,-0.035831884,0.04711371,0.044694357,0.010218581,0.006685053,0.009970279,0.033794537,0.024550062,0.031196915,0.0031356083,-0.017686741,0.006538619,0.038836975,0.017368404,0.04367568,0.0001623513,0.034431208,0.048361585,-0.0068060206,-0.017342938,0.0148599185,-0.0021806008,0.020780966,0.0027185883,0.005784163,-0.02550507,-0.02350592,-0.015763992,0.038047504,0.013051771,-0.0335908,-0.0059687975,0.0071561905,-0.049685862,-0.012816202,-0.020297095,0.011084455,-0.01609506,-0.031859055,0.02457553,-0.046884507,-0.012758901,0.026943948,-0.011975795,0.016515264,0.047801312,-0.02765702,0.013955845,-0.034380272,-0.046604373,0.032393858,0.063259706,0.057198588,0.026460078,-0.0022554097,0.04815785,0.039702848,-0.0012391224,0.01586586,0.054193497,-0.03221559,-0.0504244,-0.017814076,-0.037996568,-0.027784355,0.024906598,-0.045280095,-0.03700336,0.0019513989,-0.029796237,-0.014465182,0.014032245,-0.022499979,-0.031171449,-0.027733421,0.034431208,0.024257192,0.019622223,-0.027351419,-0.006061115,-0.012682501,-0.03198639,-0.004660437,0.015369256,0.031578917,0.006774187,0.06132422,-0.05475377,-0.026485544,-0.00039891462,0.023353118,-0.00921264,0.022449045,-0.0035717285,-0.014452448,-0.0041033495,-0.005510394,-0.07324272,0.029235967,0.015509323,-0.028089957,0.016731733,0.02831916,0.039117113,0.018705416,-0.0021726424,-0.0045044525,-0.0032406591,0.021379437,-0.04303901,-0.023786057,0.027198616,0.045916766,0.022703715,0.049100123,0.006774187,0.06397278,0.011676559,0.020666365,-0.005147491,-0.0020357578,-0.031833585,0.004650887,0.023480454,0.013522908,-0.021494038,-0.05816633,-0.07308991,0.005230258,0.0005499252,0.014452448,0.033336133,0.03196092,-0.03341253,0.021888774,-0.016031394,0.0124469325,0.001295627,0.0419694,-0.025365002,-0.028573828,-0.031349715,-0.0374363,0.035042413,0.0100848805,0.051443078,-0.02443546,-0.027758887,-0.006583186,0.032241058,-0.026612878,-0.020080626,-0.0028236392,-0.01887095,-0.0057905293,-0.026129007,0.034252938,-9.3573335e-06,-0.01745754,0.029592503,0.018081477,-0.045280095,-0.0028252308,-0.032088254,0.0004273659,-0.022372644,0.044363286,-0.02358232,-0.037385363,0.052971087,0.01708827,-0.014477915,-0.035373483,0.02179964,0.03140065,-0.034202006,0.0086141685,0.0031356083,-0.0018590814,-0.0006776575,-0.07263151,-0.010759752,0.0077610286,0.015776725,-0.018527148,-0.010963487,0.008856104,-0.029643437,-0.02416806,0.021048367,-0.004669987,0.033438,-0.015929528,-0.011555592,0.022283511,0.008633269,0.008817904,0.013293706,0.013548374,-0.014172313,-0.014337847,0.033157863,0.004259334,-0.014465182,-0.016158728,0.0011364591,-0.02854836,-0.017215604,-0.0016537549,0.034100138,0.037054297,0.020679098,0.05475377,0.0050360733,0.009002538,0.036926962,-0.07191844,-0.024308126,0.02061543,0.01972409,0.033641733,0.0075572934,0.011721127,-0.0037690967,0.00374363,-0.036825094,-0.0014380823,-0.036010154,-0.030763978,-0.017393872,0.006780554,-0.027096748,-0.048539855,-0.0039187144,-0.044516087,-0.038200304,-0.019380288,0.018488947,0.03091678,0.010657885,-0.06331064,-0.04441422,0.011421891,0.023047516,-0.007850163,-0.008652369,-0.0023206684,0.012402365,-0.02253818,-0.02331492,0.021735974,-0.010365016,0.04912559,0.0042943507,-0.002174234,-0.04337008,0.054091632,-0.017839542,0.030280108,-0.0064303847,0.0031053664,0.0026230875,0.0077100946,-0.011975795,0.009499142,-0.01745754,0.021226635,0.01501272,0.033769067,0.021481303,-0.0021137502,0.015853126,0.01949489,0.03544988,-0.045509297,-0.018514413,-0.016005928,-0.0075827604,0.013790309,0.0011285007,0.02331492,0.00998938,-0.016184196,-0.03198639,-0.035577215,-0.0052175247,-0.018845484,-0.021290302,0.015954994,0.024180792,-0.031859055,0.017852275,0.008442267,0.017151937,0.015623924,-0.026536478,-0.026129007,0.009804744,-0.003613112,-0.007856529,-0.016107796,-0.024460929,0.017177403,-0.0292869,-0.021557705,0.0022554097,-0.0027520135,-0.032088254,0.028752096,0.04887092,-0.04637517,-0.016107796,0.029134098,-0.012325965,-0.031935453,-0.016286062,0.011867561,-0.002804539,-0.033641733,-0.012898969,0.004297534,0.024639197,-0.032699462,3.3698834e-05,0.040033918,-0.03618842,0.01382851,-0.021595905,0.0038773308,0.03188452,0.025123067,-0.0096073765,-0.008607802,-0.023900656,-0.028624762,0.02798809,-0.01419778,0.01334464,0.03611202,-0.012860769,0.0067232535,-0.009053472,0.045356493,-0.01646433,0.0022203927,-0.008658736,9.639608e-05,0.009734711,0.02847196,-0.024448195,-0.01631153,0.016591666,0.0015184621,0.0055326773,0.023302186,0.00499469,0.03848044,0.014376048,0.018323412,-0.02280558,0.023786057,0.009098039,-0.010721552,-0.019800492,-0.02269098,0.01883275,-0.021863308,0.03848044,-0.021226635,-0.019112885,-0.0044885357,0.06331064,0.025683338,-0.0027185883,0.025275867,0.032699462,-0.011428257,0.026943948,0.021812374,-0.014426981,-0.011708393,0.0028427392,0.03496601,-0.034889612,0.015598457,0.028115423,0.0012367348,-0.010772486,-0.039550047,-0.0051156576,0.058268197,-0.025874339,-0.0095819095,0.02550507,-0.009900246,0.029108632,-0.017101003,0.0014516115,0.0055326773,0.0051984247,-0.009524609,0.019889625,-0.020284362,0.02903223,-0.015560257,-0.027937155,-0.007226224,0.03106958,-0.00793293,0.003409377,-0.024664663,0.015802192,-0.007888363,0.029235967,0.020398963,-0.020895567,-0.015878594,0.008856104,-0.031298783,-0.005182508,-0.01838708,0.025250401,0.013535641,-0.0210611,-0.022283511,-0.0074936263,-0.0057523292,0.03718163,-0.028421026,-0.017470272,0.0066341194,-0.040212188,-0.008353133,-0.030534776,0.02635821,-0.016719,-0.01123089,0.0037499964,-0.015585724,-0.026867548,-0.022016108,-0.027020348,-0.030814912,0.01646433,-0.012109497,0.0017810892,0.04303901,0.0295161,-0.006755087,0.010676985,-0.0458913,-0.011651093,0.007226224,-0.003896431,-0.020806432,-0.000903278,-0.021519504,0.009098039,0.008779704,0.0007158578,0.026027141,0.020551763,-0.022958383,-0.023887923,-0.04578943,0.025275867,0.030713044,-0.015636658,-0.014465182,0.031375185,0.003797747,-0.055772442,0.0050647235,-0.004393035,-0.031375185,-0.0027806638,0.019991493,-0.0670288,-0.027707953,-0.008022063,0.031120514,0.0012797102,-0.0037595467,-0.0036990629,-0.019469421,-0.007729195,-0.008798803,0.0335144,-0.038047504,0.002685163,0.030203708,-0.033438,-0.053327624,-0.0041765664,0.013955845,-0.009308141,-0.019902358,-0.007410859,-0.0016983219,0.012332331,0.027733421,-0.0086651025,0.016069595,-0.0759422,-0.03262306,0.0054817437,0.027275017,0.010626052,-0.014223247,0.0029812155,0.03287773,-0.020806432,0.00045959742,-0.01638793,-0.0055867946,0.025810672,-0.012841669,0.04443969,0.023034783,0.0066977865,-0.0016712632,0.011447358,-0.022601847,-0.027809821,0.007092523,0.00048267675,-0.0046286033,-0.029490635,-0.0...', '2025-03-25 05:14:53.2012+00'), ('82', 'https://ai.pydantic.dev/tools/', '0', 'PydanticAI Function Tools Documentation', 'This section covers the Function Tools in PydanticAI, providing links to installation, troubleshooting, agents, models, and dependencies, along with a detailed table of contents for further exploration.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Function Tools  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * [ Troubleshooting  ](../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * Function Tools  [ Function Tools  ](./) Table of contents 
                  * Registering Function Tools via kwarg 
                  * Function Tools vs. Structured Results 
                  * Function tools and schema 
                  * Dynamic Function tools 
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Registering Function Tools via kwarg 
              * Function Tools vs. Structured Results 
              * Function tools and schema 
              * Dynamic Function tools 
Function Tools Function tools provide a mechanism for models to retrieve extra information to help them generate a response.', '{"source": "pydantic_ai_docs", "url_path": "/tools/", "chunk_size": 4957, "crawled_at": "2025-03-25T05:14:52.040971+00:00"}', '[-0.008785997,0.028812377,0.024045885,-0.021655524,0.005520594,-0.014427531,-0.02622282,0.024287766,-0.011588978,0.023988971,0.037562802,-0.07928028,-0.010429369,-0.028300157,0.018980598,-0.00046775647,-0.017443938,0.0037740655,-0.00015573356,0.08770345,0.035314724,0.0005931437,-0.00115872,0.023505207,0.023718633,0.01297624,-0.029566478,0.07387351,-0.008366261,-0.03568466,0.028968887,-0.02699115,-0.03559929,-0.0171736,0.034489483,0.011966029,0.008117264,0.03209912,0.008487201,0.026920008,-0.02024692,-0.033095106,0.011155014,0.010749507,-0.046953503,0.004457026,-0.014406188,0.0024348237,0.006160869,-0.01947859,-0.06715774,-0.00012038505,-0.014854381,0.0032244963,-0.011169243,-0.010863333,-0.0708571,-0.016675608,0.00061448617,0.021541698,-0.005204013,-0.01089179,0.0035055059,0.0738166,-0.048404794,-0.009518756,-0.060328137,0.0064027505,-0.068296,-0.010173259,0.01630567,0.04627054,-0.026507387,-0.040323097,-0.01614916,-0.024145482,0.041973587,0.060840357,-0.0021413644,-0.05688488,-0.0050119306,0.021185989,-0.009241303,0.0009968727,-0.03451794,-0.06471046,-0.025397576,-0.017145142,-0.028769692,-0.016689835,-0.03440411,-0.012819729,-0.005499251,0.02758874,0.08633753,-0.00308577,-0.000187525,0.018567976,-0.005534822,0.018553747,0.042172782,-0.011382667,-0.04518919,-0.006416979,0.052388728,-0.017856559,0.00069540984,-0.03380652,-0.036026143,0.009248417,-0.13670583,-0.031814557,-0.041119885,0.030078698,-0.053754646,0.012065628,0.0014601828,0.01997658,0.012094084,-0.048148684,-0.029851045,-0.0021395858,0.051051263,0.015622711,0.0055988496,-0.010265743,-0.017088229,-0.03713595,-0.044961534,-0.011460923,0.017017087,0.0016327014,0.019692015,0.0016353691,-0.01777119,-0.010607223,-0.03716441,0.011418238,-0.01405048,0.025497174,0.010415141,-0.024643475,0.014797468,0.021413643,-0.033465043,0.01690326,-0.035001703,-0.016960174,-0.0661333,0.024828443,0.030989312,-0.006313823,-0.03024944,-0.040550753,-0.046697393,0.010934475,0.011048301,0.04245735,0.014078937,-0.020175777,-0.008935394,0.056657225,-0.038985636,0.01871026,-0.040095445,-0.021242904,-0.029851045,-0.014811696,-0.04331105,-0.02569637,-0.029879501,-0.05560433,-0.030363265,0.014669413,-0.0029008016,-0.038245764,-0.06624712,-0.035058614,-0.028200557,-0.0369083,-0.028584722,0.008060351,-0.055120565,-0.011418238,-0.012051399,-0.020944107,0.005460123,-0.008067465,-0.0050475015,0.053270884,0.01234308,0.01947859,0.057539385,0.038814895,0.024629246,-0.030875485,0.06192171,-0.015679624,0.009753523,0.0066339606,-0.0060648276,-0.003912792,0.037448976,-0.0037313807,0.02075914,-0.013872625,0.020318061,0.04433549,0.0031800326,-0.04177439,0.019037511,-0.05381156,0.022566138,0.009789093,-0.015295459,0.0075125606,-0.035656206,0.024358908,-0.0005846956,0.038473416,-0.011937573,0.021584382,0.037705086,-0.016078018,-0.008850024,0.017230513,0.008878481,-0.085768394,0.025113009,0.023832459,0.032924365,0.011041188,-0.006047042,0.0011658341,0.01767159,-0.053583905,0.008145722,-0.00071719696,0.0032529528,-0.0291254,0.018055756,-0.021370959,-0.0060719415,0.021442099,-0.009774866,0.012200796,-0.0011400452,-0.029794132,0.041802846,0.021242904,0.079735585,-0.047608007,0.052531008,0.01997658,-0.023434067,-0.018297637,0.0013339063,-0.011019845,-0.037306692,0.0044072266,0.007619273,0.016718293,-0.028655864,-0.0008434734,-0.023121042,-0.025426034,-0.025838654,0.049656887,-0.042656545,-0.027119204,0.06687317,0.056571856,0.07523943,-0.0180273,-0.013381748,-0.009760637,-0.0046028662,0.041290626,-0.0039270204,0.010201716,-0.0009826443,0.003745609,0.049315404,0.0110554155,0.019578187,0.025554089,-0.025838654,-0.022580367,0.0051364284,0.008188406,0.001513539,0.03559929,0.03483096,-0.021470556,-0.0095543265,-0.011226156,0.04903084,-0.021114849,0.047181156,0.021740895,0.019037511,0.006772687,-0.00016407047,0.0029274798,0.021470556,-0.012962013,0.0003677135,-0.032326777,0.038729526,-0.00935513,-0.014093165,0.0024366023,-0.0010466719,-0.041717477,-0.025269521,-0.0014957536,0.035656206,-0.029253455,0.036481448,-0.024458507,-0.06619021,-0.07597931,0.02494227,0.0021911634,-0.021641295,0.00038816675,-0.00030635382,0.018169582,-0.013502689,-0.0066695316,0.024202397,-0.048376337,-0.02775948,0.026834639,-0.018923685,-0.0051719993,-0.028385526,0.035513923,-0.022822248,0.026877323,-0.037050582,-0.024330452,-0.06533651,-0.039412484,0.023291783,0.032753624,0.032212947,0.0409776,-0.024529647,0.010970046,0.032070667,-0.0025397576,0.010116345,0.026635442,-0.030277895,-0.012407107,-0.035656206,-0.027716795,-0.007210208,0.0062462385,-0.061181836,0.004987031,0.004257829,-0.005627306,-0.032838996,0.03938403,-0.018383007,-0.02203969,-0.029680304,0.0007892279,0.029424194,0.006779801,-0.003749166,-0.02425931,-0.0018176697,-0.015082034,-0.0042080297,-0.0003839427,0.002639356,0.010386684,0.062718496,-0.009675267,0.0155800255,-0.00282966,0.04723807,0.010998502,0.016704064,0.010785078,-0.010735278,0.034887876,0.034631766,-0.022936074,0.0056095207,-0.009426272,0.018482607,0.006043485,-6.447214e-05,0.03784737,0.08104459,-0.031700727,-0.00043218565,0.03707904,-0.060100485,-0.010251515,0.00025499842,0.034887876,0.061694056,0.023547893,0.014783239,-0.016262986,0.05014065,-0.0057269046,0.025013411,-0.023846688,-0.004350313,-0.062832326,0.011980257,0.038331132,0.015836136,0.014363503,-0.021214446,-0.07136932,-0.04749418,0.005538379,-0.04074995,0.065279596,0.051876508,-0.054096125,0.010792191,-0.06300306,-0.012506706,0.011717034,0.072052285,0.008593914,-0.016021105,-0.030619375,0.015978418,-0.003827422,0.024486963,0.027304173,0.015224317,-0.026507387,-0.02202546,0.06624712,-0.030107155,-0.02340561,-0.009234189,-0.026962694,0.013353292,-0.057084076,0.021570155,-0.014640956,-0.014249677,0.011759718,-0.006616175,-0.04985608,0.07751597,-0.02340561,0.051278915,0.023263326,0.05773858,0.016547553,-0.036083054,0.035997685,-0.022907618,-0.0008470305,0.017230513,-0.0009826443,-0.005798046,-0.0077330996,0.03209912,-0.015708081,1.9216588e-05,-0.0007692193,-0.0057375757,-0.0240032,0.032184493,-0.008223977,-0.015338144,0.013175437,0.0445916,-0.042571176,0.010201716,0.022366941,-0.008537,0.09043529,-0.019549731,-0.0179277,-0.0029079157,0.0013054496,-0.025113009,-0.013082953,0.028968887,-0.017458165,0.021171762,0.015437743,-0.0051471,-0.0005531265,-0.01930785,-0.0051719993,-0.00012950007,-0.006975441,-0.019919667,0.03998162,0.01169569,0.020047722,0.050482128,-0.010059432,0.0027176118,0.026848866,-0.06243393,-0.0047487067,0.002836774,0.053840015,0.026151678,0.037107494,-0.00973218,0.01012346,0.015281231,-0.021285588,0.01758622,-0.018169582,-0.005801603,0.008316461,0.009966948,-0.02417394,-0.028840832,0.015067806,-0.05688488,-0.043624073,0.012193683,-0.015181633,0.05090898,-0.012883756,-0.05113663,-0.030220982,0.01982007,0.0076619578,-0.03152999,-0.017742733,0.007711757,0.012399993,-0.02699115,-0.015025121,0.006345837,0.032696713,0.020687997,-0.0056522056,0.0019012612,-0.0030644275,0.086508274,-0.034631766,0.02494227,-0.029111171,0.019777384,0.011973144,-0.0048838756,-0.0009897585,0.031643815,-0.008686398,0.013737457,-0.013893968,0.026706584,0.014320819,-0.016262986,0.048632447,0.029196542,-0.028172102,-0.030562462,-0.023932058,0.008700626,0.008273777,-0.008544114,0.017372796,-0.015651168,-0.00896385,0.0006962991,-0.022523453,-0.005705562,-0.020161549,-0.006516577,-0.027261488,0.004716693,0.011510722,-0.03409109,-0.00053489645,0.001309896,0.01664715,0.018340323,-0.01905174,-0.0034414784,-0.00045397278,-0.011339982,-0.01512472,-0.020275377,-0.010948703,0.011226156,-0.011766832,-0.038245764,0.012826843,0.010386684,-0.017358568,0.0046491083,0.008629485,-0.006697988,0.011624549,-0.012271938,0.012058513,-0.0394694,0.010166145,-0.003749166,0.0014468437,-0.0035197341,-0.03460331,-0.02364749,0.02835707,-0.040066987,0.007448533,0.060100485,-0.029623391,-0.036794472,0.020901423,0.012606304,0.007210208,0.009383586,0.0020399874,0.011083872,-0.029168084,-0.018624889,0.024757301,-0.028712777,0.04433549,0.026877323,0.0068402714,-0.013758799,0.028684322,0.041660562,-0.024373136,-0.0057731466,-0.026350874,0.0334935,0.03764817,-0.0030537562,-0.017870788,0.0006340501,-0.0081243785,-0.036595274,0.019350534,0.008216863,-0.0034005719,0.005410324,-0.007711757,0.0026695912,-0.0042542717,0.021812037,-0.003663796,-0.010955817,-0.027104976,-0.01828341,0.0044748113,-0.040095445,0.015352372,0.0039874907,-0.02280802,-0.0047807205,0.041859757,0.042741917,0.039782424,0.028214786,0.0015046464,-0.03517244,0.010329771,0.013595173,-0.007960753,0.0105431955,-0.010023861,0.015366601,-0.039753966,-0.031074682,0.039611682,-0.011076758,-0.012848185,-0.05395384,0.02374709,0.08684975,0.0050830725,0.04151828,0.018767172,0.03508707,0.034119546,0.016021105,-0.026507387,0.026507387,-0.014968207,-0.0028705664,0.0036157754,0.003880778,0.029594935,-0.03184301,-0.11007039,0.0008968297,0.016447954,-0.023064129,-0.022338485,-0.029168084,0.005029716,0.0010795748,0.008928279,0.039327115,-0.033607326,-0.023804003,-0.005356968,-0.024358908,0.007377391,-0.029993327,-0.0077330996,0.017828103,0.020261148,0.010073661,-0.011019845,-0.04911621,0.02221043,-0.011098101,0.002682041,-0.0058549596,-0.016006876,0.0018114448,0.0454453,0.004656222,-0.003574869,0.0017678705,0.020972565,-0.0019848526,-0.019677786,0.014569814,-0.022879161,-0.039753966,0.023505207,-0.026521614,-0.007861154,0.019165566,-0.0035055059,-0.0049194465,-0.008878481,-0.036225338,-0.014769011,0.001694061,0.04433549,-0.017998843,-0.002029316,0.018639117,0.013687657,-0.00926976,0.003384565,0.017571993,-0.005075958,-0.006175097,0.004994145,-0.040010076,0.004129774,-0.006288924,0.0044605825,-0.007669072,0.017486623,0.0033401013,-0.03451794,0.015238546,0.0045779664,-0.008992307,-0.012293281,0.0069185277,-0.028399754,-0.0025237508,0.0009968727,0.01895214,-0.033778064,-0.00028034265,-0.04148982,-0.0006398304,-0.014370617,-0.017401252,-0.00998829,-0.039497856,-0.008928279,-0.00013828163,-0.0019741813,-0.0014210548,-0.008743311,-0.017785417,-0.031615358,-0.04220124,0.0042862855,-0.021726666,-0.016234528,0.018994827,-0.04151828,-0.0047949487,-0.09811859,-0.013225237,-0.0069149705,0.0068758423,0.010571652,-0.014584042,0.0029541578,0.047437266,-0.015053578,-0.053299338,0.014982436,-0.013630744,-0.014320819,0.020474574,0.04533147,-0.009227075,0.040579207,-0.0042862855,0.010827762,-0.01259919,-0.004257829,-0...', '2025-03-25 05:14:55.794806+00'), ('83', 'https://ai.pydantic.dev/tools/', '1', 'Understanding PydanticAI Tools and Their Integration', 'PydanticAI tools enhance the capabilities of agents by allowing them to access additional information, which is particularly useful when full context cannot be embedded in the system prompt. Unlike Retrieval-Augmented Generation (RAG) that focuses on vector search, PydanticAI tools serve a more general purpose. There are multiple methods to register these tools with an agent, including the use of the @agent.tool decorator.', 'They're useful when it is impractical or impossible to put all the context an agent might need into the system prompt, or when you want to make agents' behavior more deterministic or reliable by deferring some of the logic required to generate a response to another (not necessarily AI-powered) tool. Function tools vs. RAG Function tools are basically the "R" of RAG (Retrieval-Augmented Generation)  they augment what the model can do by letting it request extra information. The main semantic difference between PydanticAI Tools and RAG is RAG is synonymous with vector search, while PydanticAI tools are more general-purpose. (Note: we may add support for vector search functionality in the future, particularly an API for generating embeddings. See [#58](https://github.com/pydantic/pydantic-ai/issues/58)) There are a number of ways to register tools with an agent:
              * via the [`@agent.tool`](../api/agent/#pydantic_ai.agent.Agent.tool) decorator  for tools that need access to the agent [context](../api/tools/#pydantic_ai.tools.RunContext)
              * via the [`@agent.tool_plain`](../api/agent/#pydantic_ai.agent.Agent.tool_plain) decorator  for tools that do not need access to the agent [context](../api/tools/#pydantic_ai.tools.RunContext)
              * via the [`tools`](../api/agent/#pydantic_ai.agent.Agent.__init__) keyword argument to `Agent` which can take either plain functions, or instances of [`Tool`](../api/tools/#pydantic_ai.tools.Tool)
`@agent.tool` is considered the default decorator since in the majority of cases tools will need access to the agent context. Here's an example using both: dice_game.py
                        
                                                import random
                        
                        from pydantic_ai import Agent, RunContext
                        
                        agent = Agent(
                            'google-gla:gemini-1.5-flash',  # (1)!
                            deps_type=str,  # (2)!
                            system_prompt=(
                                "You're a dice game, you should roll the die and see if the number "
                                "you get back matches the user's guess. If so, tell them they're a winner. "
                                "Use the player's name in the response."
                            ),
                        )
                        
                        
                        @agent.tool_plain  # (3)!
                        def roll_die() -> str:
                            """Roll a six-sided die and return the result."""
                            return str(random.randint(1, 6))
                        
                        
                        @agent.tool  # (4)!
                        def get_player_name(ctx: RunContext[str]) -> str:
                            """Get the player's name."""
                            return ctx.deps
                        
                        
                        dice_result = agent.run_sync('My guess is 4', deps='Anne')  # (5)!
                        print(dice_result.data)
                        #> Congratulations Anne, you guessed correctly! You're a winner!', '{"source": "pydantic_ai_docs", "url_path": "/tools/", "chunk_size": 3235, "crawled_at": "2025-03-25T05:14:52.059098+00:00"}', '[-0.013770271,0.044759914,0.0019727808,0.004308109,0.014240603,-0.015507886,0.008198145,0.008198145,0.021739783,0.009282521,0.045805097,-0.055446897,0.036450718,-0.019727807,0.00706151,-0.020668471,-0.03362873,-0.003684266,-0.018538913,0.057955336,0.027357636,0.014841583,0.0058758818,0.036868792,0.022379957,-0.005657047,0.025476309,0.0655329,-0.013077838,0.0068198116,-0.005960803,-0.01529885,-0.0047555775,-0.013084371,0.0063429475,-0.023960793,0.026939563,0.006839409,0.010863359,0.02454871,-0.020563953,-0.0072052223,-0.00402395,0.040788222,-0.034099057,0.014632546,-0.028559595,0.00086390815,0.0015808375,-0.020289592,-0.036476847,0.0328971,-0.018342942,0.006587912,-0.002008709,0.0062776236,-0.055708192,-0.0065160557,0.0042362525,-0.0018339675,-0.031015772,-0.002836689,-0.0031012506,0.07436469,-0.048783865,-0.00077327125,-0.06391287,0.024182895,-0.049201936,0.018486654,-0.0014665208,0.0070811072,-0.014462704,-0.020106686,-0.029813813,0.0086423475,0.046275426,0.04954162,0.015429498,-9.997614e-05,0.0014567223,-0.011026668,0.0022847021,0.017689703,-0.046379946,-0.07054978,-0.043401178,-0.054506235,-0.0028187248,-0.03511811,-0.029291222,0.008903643,0.01467174,0.022105597,0.06600323,0.051579725,0.007179093,0.0027485017,0.012339679,0.05696241,0.03328904,-0.0023957528,-0.04337505,0.025175817,0.062554136,0.010255847,0.00082798,-0.026207935,-0.06109088,0.022549799,-0.099971645,-0.022863353,-0.041101776,0.032452896,-0.05301685,0.024692422,0.018434396,0.022393022,0.009504623,-0.035614572,-0.025711473,-0.042983104,0.024862263,0.000121665704,0.00018209028,0.012326614,-0.03386389,-0.065950975,0.002144256,-0.00020903637,0.007969512,0.022458345,0.012953723,-0.0015285785,-0.02942187,-0.059000514,-0.015520951,-0.026207935,-0.026064223,0.028637983,0.0023581916,-0.009491558,-0.033680987,-0.00081450696,-0.041911792,0.02712247,-0.06631679,-0.014580287,-0.033707116,0.03569296,-0.0022879685,-0.010059875,-0.0031698407,-0.0374959,-0.028063133,0.01754599,-0.006437667,0.032139342,0.020106686,-0.023203038,-0.0060914503,0.03901141,-0.027305376,0.0020821982,-0.033184525,-0.017245501,0.02014588,-0.027017951,-0.04334892,0.015455627,-0.019414254,-0.053252015,-0.021086544,0.0013734343,0.007538374,-0.05069132,-0.0466935,-0.032818712,-0.021360904,-0.037103955,-0.052285224,0.014358186,-0.03349808,-0.016317902,-0.018917792,-0.020289592,0.013574299,-0.035065852,-0.017062593,0.03916819,0.036084905,0.025254207,0.042408254,0.0029689698,0.011869347,-0.037286863,0.044707656,-0.023673369,-0.0013587364,-0.04729448,0.027148599,0.010504078,0.022432216,0.0006605876,-0.008720736,-0.05181489,0.004709851,-0.00081818143,0.0017180177,-0.012496456,0.004938484,-0.06396513,0.028690241,-0.01223516,-0.035510052,-0.0066499696,0.004239519,0.05348718,-0.015377238,0.041049518,-0.014109955,0.015285784,0.008479038,-0.025881317,-0.030179627,0.018591173,0.004948283,-0.07311047,0.037182346,0.034125187,0.005340226,0.021883495,0.0049874773,-0.031538364,0.05868696,-0.02879476,0.014201408,-0.009876968,-0.025267271,-0.005624385,0.021034285,-0.059575368,-0.014528028,-0.015155137,-0.019767001,0.027723448,0.018852469,0.010562869,0.05926181,0.0027109405,0.096574806,-0.06892975,0.03736525,-0.01283614,-0.011392483,-0.022811094,0.030571569,-0.028402817,-0.05826889,0.009844307,0.0154686915,0.020106686,0.0043375045,-0.0033903087,0.00793685,-0.033524208,0.0047392463,0.009844307,-0.023830146,0.0044028284,0.02887315,0.033733245,0.021426229,-0.01612193,-0.03169514,-0.027618932,0.02646923,0.025319532,-0.043662474,0.02244528,0.0149461,0.032087084,0.043845378,0.024117572,0.016291773,-0.01844746,-0.045909613,0.0074207913,-0.010608596,-0.014410445,0.011229172,0.027409894,0.05988892,0.004700052,-0.015481756,-0.016030477,0.028585725,-0.0068459413,-0.014802388,-0.02999672,-0.01048448,0.009145341,0.015716922,-0.015520951,0.015729988,-0.013600429,0.0054937373,-0.033942282,0.019793132,-0.017807286,0.021452358,0.06913878,0.006872071,-0.015651599,-0.039586265,0.0005278985,0.023999989,-0.020603148,0.04951549,-0.012254758,-0.022053337,-0.024352737,0.043453436,-0.01984539,-0.0333413,-0.027723448,0.009857371,-0.0074599856,-0.009465428,0.012365808,-0.0019058238,-0.0282983,-0.0075971656,0.061561212,-0.009367443,0.007544907,-0.021635264,0.011614583,-0.025384855,0.019192152,-0.039507873,0.0059999973,-0.036450718,-0.05069132,0.003209035,0.060202476,-0.01384866,0.036476847,-0.040683705,0.020655407,0.05022099,0.0033347835,-0.015429498,0.04379312,-0.04849644,-0.01354817,-0.05549916,0.0009896565,-0.021569941,0.005454543,-0.04502121,-0.005614586,-0.017323889,-0.003111049,-0.03744364,0.051579725,-0.01292106,-0.038802378,0.0039488277,0.023581916,0.01439738,0.051527467,-0.030728348,-0.014737064,0.024313543,0.0029885669,-0.034125187,0.010040279,0.011157316,0.010497545,0.04604026,-0.013495911,0.007316273,-0.0012689161,0.042355996,0.022105597,0.029108316,0.0037463238,-0.030440921,0.03621555,0.034778427,-0.06067281,-0.041885663,-0.013979307,-0.032034826,-0.013045176,-0.022262374,0.013064774,0.054715272,-0.030179627,-0.027148599,0.01992378,-0.043427307,-0.012006527,-0.0152204605,0.06971363,0.02704408,0.021726718,0.014763194,0.026612943,0.09626125,0.02214479,0.033602595,0.012117577,-0.027409894,-0.04611865,0.020263463,-0.009380507,0.014593352,0.022393022,-0.021373969,-0.07337177,0.022458345,-0.012411535,0.006937395,0.043636344,0.0206946,-0.02222318,0.022510605,-0.026064223,0.045726705,0.032661933,0.05361783,-0.014802388,-0.03582361,0.008779528,0.034935202,0.02564615,0.0035568846,0.031355456,-0.01278388,-0.026077287,0.018617302,0.045177985,-0.046379946,-0.024026118,-0.032139342,-0.027383765,0.02447032,-0.040161114,-0.012176368,-0.0123592755,-0.033916153,0.025972769,0.0009373975,-0.029186703,0.08225581,-0.00029273258,0.020629277,0.018983116,0.039377227,-0.006839409,-0.042173088,0.034491003,-0.020354917,0.015991282,0.004357102,0.01297332,0.0007242784,0.0044387565,0.0078519285,0.010778438,-0.009073485,-0.013887854,-0.0042819795,-0.036189422,0.023124648,-0.010660855,0.0011031568,0.005676644,0.05717145,-0.014188344,-0.0044028284,0.035510052,-0.006806747,0.03984756,-0.0056962413,-0.018042453,-0.005575392,0.012019591,-0.014867712,-0.018329877,0.055551417,-0.014253668,0.04909742,0.047921587,0.0683549,0.024182895,-0.032609675,-0.022784965,-0.026639072,0.013228083,-0.011712569,0.05259878,-0.0126075065,0.041075647,0.042225346,-0.007283611,0.0017702768,0.04794772,-0.032531284,-0.03292323,-0.009746321,0.029265093,0.02274577,-0.0068851355,-0.012307016,0.015534015,-0.0036124098,-0.031355456,0.026965693,-0.0053957514,-0.009811644,-0.001958083,0.026077287,-0.018630367,-0.008916708,0.0072182873,-0.037574288,-0.030702217,-0.003429503,-0.018708756,0.041859534,0.005065866,-0.057955336,-0.011470871,0.017937934,0.03396841,-0.02427435,-0.0135089755,-0.02104735,0.017284695,-0.013208486,-0.007714749,-0.0029640705,0.035483923,0.022510605,0.002348393,0.015338044,-0.019544901,0.056544337,0.002720739,0.012992917,-0.015978217,0.03114642,-0.0010076206,0.012287419,-0.013482846,-0.00044665195,-0.038959153,-0.006052256,-0.0023255297,0.013404458,-0.0011023403,0.011261835,0.04656285,0.018930856,0.015912894,-0.012307016,-0.024365801,0.0124050025,0.008753398,0.004017418,-0.004086008,0.023307556,0.012705492,0.030676087,-0.032060955,-0.022562863,0.025410984,0.011392483,-0.0053271614,-0.014096891,0.006633639,0.012352743,-0.008779528,-0.00096516014,0.01067392,0.011065863,-0.024679357,0.0013260745,-0.010170926,-0.005761565,-0.0015694059,-0.045935743,0.00031396284,-0.017637445,0.0154686915,-0.036189422,0.015782246,0.05116165,-0.03294936,-0.0018453993,0.023255296,-0.010961344,-0.002975502,0.01469787,0.017990192,-0.04601413,0.029082185,0.026247129,-0.0059771338,-0.006120846,-0.021086544,-0.025410984,0.007571036,-0.025593892,-0.019244412,0.036111034,-0.008034836,-0.0611954,0.023934664,0.0032400638,-0.0014412078,0.004497548,0.02107348,0.015782246,-0.010700049,-0.006300487,0.046850275,-0.03402067,0.03629394,0.0021883496,0.007264014,-0.027775709,0.02594664,0.008537829,-0.021988014,-0.007296676,-0.034308095,0.014253668,0.035901997,-0.0012517686,-0.008727268,-0.012842672,0.0069177975,-0.01111159,0.010464883,0.01784648,-0.015769182,-0.00618617,-0.032139342,0.0010247681,-0.015769182,0.02334675,0.006320084,0.017585184,-0.013495911,-0.011483936,0.0059738676,-0.022824159,-0.013371795,-0.016004348,-0.026234064,0.008158951,0.04204244,0.041075647,0.0087991245,0.00040541624,-0.012953723,-0.04836579,0.010138264,-0.0250713,0.025241142,0.012790413,0.016592262,0.00014167113,-0.004931952,-0.040082723,0.035901997,-0.0020348385,-0.026808916,-0.0275928,0.03637233,0.07305821,0.010686984,0.04089274,0.014606416,0.018264553,0.021635264,0.00088595494,-0.00031192147,0.00108111,0.017010335,0.01384866,0.0347523,-0.009491558,0.0043538357,-0.021491552,-0.05259878,-0.0066434373,0.0117060365,-0.0057060397,-0.017559055,-0.021413164,-0.035222627,0.010053343,-0.003700597,0.03386389,-0.010517143,-0.014750129,0.016879687,-0.040735964,0.0043995623,-0.03987369,0.001554708,0.025685344,0.0070484453,0.023359815,-0.010791503,-0.035588443,-0.0059346734,-0.03801849,-0.025580825,-0.006561782,-0.029134445,-0.004964614,0.032661933,0.0017621113,-0.00014554974,-0.011804023,-0.005758299,-0.010438754,-0.055133343,0.02309852,-0.02017201,-0.042251475,0.013718012,-0.03294936,-0.022602057,0.034464873,-0.0015955354,-0.01959716,-6.935557e-05,-0.032426767,0.003111049,0.0193228,0.008929772,0.013090903,0.01354817,-0.006300487,0.010889488,-0.0017768092,-0.00028558777,0.011137719,0.020276528,-0.048600957,-0.012267822,-0.051658113,-0.014828518,0.024561774,-0.013215018,-0.013326068,0.020524759,0.013064774,-0.011483936,0.023307556,-0.00048543798,-0.03386389,0.007348935,0.0119085405,-0.0035111578,-0.02447032,-0.032034826,0.035327148,-0.023908535,-0.003837777,-0.0275928,-0.005170384,-0.030493181,-0.011621116,0.0029542719,-0.056178525,0.0011488835,0.0018225359,-0.0051279236,0.006084918,-0.002870984,0.0068002143,-0.030571569,-0.06291995,0.018578108,-0.022732705,-0.0031502435,0.020080557,-0.0074599856,0.03182579,-0.07750023,-0.014057696,0.01872182,-0.0007622479,-0.008230807,-0.008603153,0.028742502,0.046327688,-0.013495911,-0.009759386,0.00040215006,0.009236795,-0.028455077,-0.0010745776,0.038123008,-0.025959704,0.026534555,0.0025068035,0.039063673,-0.013005982,-0.0149069065,0.006421336...', '2025-03-25 05:14:55.86989+00'), ('84', 'https://ai.pydantic.dev/tools/', '2', 'Random Number Generation Tool Setup', 'This section outlines the steps to set up a simple tool for generating random numbers using the Gemini flash model. It describes how to use a player's name as a dependency and the implementation of `RunContext` to access this dependency. An example with the function `dice_result.all_messages()` is provided for running the setup.', '1. This is a pretty simple task, so we can use the fast and cheap Gemini flash model.
              2. We pass the user's name as the dependency, to keep things simple we use just the name as a string as the dependency.
              3. This tool doesn't need any context, it just returns a random number. You could probably use a dynamic system prompt in this case.
              4. This tool needs the player's name, so it uses `RunContext` to access dependencies which are just the player's name in this case.
              5. Run the agent, passing the player's name as the dependency.
_(This example is complete, it can be run "as is")_ Let's print the messages from that game to see what happened: dice_game_messages.py
                        
                                                from dice_game import dice_result
                        
                        print(dice_result.all_messages())
                        """
                        [
                            ModelRequest(
                                parts=[
                                    SystemPromptPart(
                                        content="You're a dice game, you should roll the die and see if the number you get back matches the user's guess. If so, tell them they're a winner. Use the player's name in the response.",
                                        timestamp=datetime.datetime(...),
                                        dynamic_ref=None,
                                        part_kind='system-prompt',
                                    ),
                                    UserPromptPart(
                                        content='My guess is 4',
                                        timestamp=datetime.datetime(...),
                                        part_kind='user-prompt',
                                    ),
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    ToolCallPart(
                                        tool_name='roll_die', args={}, tool_call_id=None, part_kind='tool-call'
                                    )
                                ],
                                model_name='gemini-1.5-flash',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                            ModelRequest(
                                parts=[
                                    ToolReturnPart(
                                        tool_name='roll_die',
                                        content='4',
                                        tool_call_id=None,
                                        timestamp=datetime.datetime(...),
                                        part_kind='tool-return',
                                    )
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    ToolCallPart(
                                        tool_name='get_player_name',
                                        args={},
                                        tool_call_id=None,
                                        part_kind='tool-call',
                                    )
                                ],
                                model_name='gemini-1.5-flash',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                            ModelRequest(
                                parts=[
                                    ToolReturnPart(
                                        tool_name='get_player_name',
                                        content='Anne',
                                        tool_call_id=None,
                                        timestamp=datetime.datetime(...),
                                        part_kind='tool-return',
                                    )
                                ],
                                kind='request',
                            ),
                            ModelResponse(
                                parts=[
                                    TextPart(
                                        content="Congratulations Anne, you guessed correctly! You're a winner!",
                                        part_kind='text',
                                    )
                                ],
                                model_name='gemini-1.5-flash',
                                timestamp=datetime.datetime(...),
                                kind='response',
                            ),
                        ]', '{"source": "pydantic_ai_docs", "url_path": "/tools/", "chunk_size": 4980, "crawled_at": "2025-03-25T05:14:52.780568+00:00"}', '[-0.032592684,0.028532045,-0.0037950848,-0.017587142,-0.005835489,0.0046388106,0.012639077,0.01624256,0.0026689968,-0.019725028,-0.005738007,-0.0070657823,0.02358398,-0.0112138195,-0.004840498,-0.023826007,-0.024726877,0.016269451,-0.015839184,0.049803343,0.035954144,0.0036102047,0.016686272,-0.0015698003,-0.015059327,0.025399167,-0.012464282,0.0262597,-0.011852496,-0.05407912,0.024955455,-0.013425658,0.002674039,-0.047517553,-0.02609835,-0.024794105,-0.009983527,0.030629594,0.0051867277,-0.031839717,-0.027563946,-0.0024908395,0.011032301,-0.0027076534,-0.06480889,0.035496984,-0.04533933,0.01582574,0.03270025,0.012934886,-0.03280782,0.06453997,0.0037950848,0.050260503,0.0021664589,-0.04585027,-0.025399167,0.019899825,-0.017049309,-0.034690235,0.009015427,-0.03869709,-0.010393624,0.04843187,0.022414194,0.0086389445,-0.050610095,0.007180072,0.040875316,0.014319806,0.008275907,0.0112138195,-0.015382026,-0.037594534,-0.03573901,-0.0027832862,0.025573963,0.01975192,-0.017318226,-0.0044404846,-0.0021429288,-0.03202796,0.03022622,-0.024350394,-0.05085212,-0.028800962,-0.023960464,0.00019801082,0.004840498,-0.08992569,-0.042327464,0.00029454764,-0.017277889,0.017963625,0.05916164,-0.00865239,0.0046253647,-0.023220943,0.019227533,0.034233075,0.0686275,-0.005348078,-0.048620112,-0.023476414,0.054751407,-0.015650943,-0.018985508,0.017412346,-0.08497763,0.016780393,-0.100090735,0.030280003,0.012309655,0.015798846,-0.03264647,0.033507,0.034797803,-0.020383874,-0.0129685,-0.050314285,-0.047033504,-0.016645934,-0.012094522,-0.019187195,-0.0031732153,0.023893235,-0.028236236,-0.051282384,-0.013929877,0.012665969,0.031759042,-0.008080943,-0.013808864,0.010696156,-0.019993946,-0.035846576,-0.020894816,-0.022252845,-0.028720288,0.052707642,0.011731484,9.517124e-05,-0.007953207,0.019254426,0.0071128425,0.03264647,-0.069756955,0.018299771,-0.07067127,-0.016874513,0.030360678,-0.0193351,-0.011139868,-0.009909575,0.011839051,-0.028854745,-0.00269925,0.024363838,-0.034367535,-0.018434228,-0.007213686,-0.018716592,-0.012813874,-0.020343537,-0.047490664,0.0063632377,-0.007085951,0.0070187217,-0.035685226,-0.004978318,0.00024601663,0.02861272,-0.028021105,0.0001617701,0.01585263,-0.05171265,0.014871085,-0.053998444,-0.03573901,-0.041708957,-0.040767748,-0.033399437,-0.032243095,-0.05410601,-0.019563679,-0.035174284,0.015866077,0.0028000935,0.016148439,0.006232141,0.013304646,0.03883155,0.03509361,-0.01984604,-0.032269984,-0.04991091,0.10321017,-0.051255494,-0.0068775406,0.017560251,0.014064335,0.050583202,0.05410601,-0.033211194,-0.025735313,-0.036545757,-0.022831015,0.025963893,-0.0096473815,0.031221211,0.031812828,-0.05674139,0.019926716,-0.0364113,-0.087182745,0.021513324,-0.0331843,0.03498604,-0.0077649653,0.014763518,0.014655951,0.053863984,0.052680753,-0.041332472,-0.013916431,0.027429488,0.011180205,-0.025708422,0.022037711,0.050932795,0.0073548676,0.004527882,0.028747179,-0.028881637,0.044640146,-0.042004764,0.02861272,0.007906146,-0.01765437,-0.021405756,0.008383473,0.0017008971,0.008195232,-0.020921707,0.01100541,0.012813874,-0.04066018,-0.025049577,0.04197787,0.028881637,0.06545429,-0.038616415,0.023355402,-0.013176911,0.012013847,-0.058032192,-0.016269451,-0.009512923,-0.0011496182,-0.016995525,-0.017573696,-0.007247301,-0.05319169,0.024404177,-0.020612454,-0.0071330112,0.018985508,-0.038643308,-0.0072876383,-0.030683378,-0.035066716,-0.009734779,0.02958082,0.01984604,-0.030468244,-0.010070925,0.0064775273,0.03251201,-0.0038824826,-0.019778812,0.005828766,0.046388105,-0.008880969,0.049722668,-0.02219906,0.026125243,0.0029866544,0.022804122,-0.008154894,0.0046925936,0.0010075967,0.0048001604,0.024471406,-0.025224373,0.009936467,-0.0024051224,0.014736626,-0.0113818925,-0.038885333,-0.007825471,0.021177178,0.0028353888,-0.007677567,0.013217248,-0.015476148,0.0052505955,0.03460956,0.014440819,0.03267336,-0.005532958,0.0068103117,0.057601925,0.01511311,0.00800699,-0.027994212,-0.02452519,0.025789097,-0.030952295,0.0402837,-0.015180339,-0.0054825363,0.014118118,0.025896663,0.013385321,-0.023301618,0.007959929,0.054697625,-0.03541631,-0.015543376,0.012672693,-0.0068674562,-0.039396275,-0.00095885555,0.07405961,0.00731453,-0.0060607065,-0.052788317,0.02023597,0.018837605,0.073468,-0.03444821,0.02291169,-0.022548653,-0.015301351,-0.0023799115,-0.0024589056,0.01197351,0.020101512,0.0133987665,-0.013472719,0.019671245,0.02055867,0.0049211727,0.053164802,-0.008632221,-0.030656487,-0.036707107,-0.013210526,0.013385321,0.008275907,-0.051147927,0.0093112355,0.03186661,-0.028209345,0.030495137,0.04144004,-0.018662808,-0.03694913,-0.003707687,0.01608121,0.016807284,0.040713966,-0.091915675,0.01975192,-0.03412551,0.0024471406,-0.00075968925,0.0040404713,-0.017667817,0.032081746,0.026084905,0.0003634575,-0.007469157,-0.034394424,0.02468654,0.013781973,0.04340313,-0.014373589,-0.06986452,-0.016699718,0.055181675,-0.09003326,-0.039745867,-0.007583447,-0.008632221,0.043322455,0.0025614302,0.047383096,0.013223971,0.009701164,-0.007885978,0.011045747,-0.028505154,-0.025157142,-0.02307304,0.02861272,0.005072438,-0.021109948,0.052707642,0.010776831,0.06238864,-0.010232274,0.044425014,-0.027214354,-0.026474833,-0.061151624,0.039745867,-0.011805437,0.0120272925,0.060560007,-0.024229381,-0.07647987,0.025708422,-0.002958082,0.0017933372,0.06029109,0.03377592,-0.03799791,0.052062243,-0.035550766,-0.03364146,0.012208811,0.037244942,0.01714343,0.022158723,-0.0064640814,0.0037480243,0.0186897,-0.012302932,-0.01749302,0.037083592,-0.027053004,0.017856058,0.057494357,0.018353553,-0.013486165,-0.0515513,-0.034717128,0.0377021,-0.03009176,-0.019227533,-0.029150553,-0.014521494,-0.015516485,-0.023032703,-0.039907217,0.086376,0.011415508,0.03364146,-0.04434434,0.03186661,0.018649362,-0.024094922,-0.0035564213,-0.0018118252,-0.034744017,-0.013876094,0.0072809155,0.010770108,0.013176911,0.007852363,0.01485764,-0.0089481985,0.010259166,-0.010817168,-0.020034283,-0.01788295,0.03431375,0.0014000467,0.020975491,-0.0103196725,0.013714744,-0.0028353888,0.019388882,-0.033049844,0.09433592,-0.007301084,-0.059699472,-0.02072002,0.016713163,0.021876361,-0.014508048,0.03947695,-0.016377017,0.048136063,0.010588589,0.043591373,-0.034394424,-0.02861272,-0.0136139,-0.01749302,0.0066489615,-0.016632488,0.06717535,-0.011919726,-0.0068842634,0.01859558,0.01414501,-0.02958082,0.030952295,-0.0059128026,-0.046549454,-0.029446362,-0.0063464306,-0.01569128,0.001352146,-0.0100104185,0.008928029,0.0018740122,0.010501191,0.0033631376,0.027335366,0.026367268,-0.023449523,0.0031412814,-0.017748492,0.0046253647,0.0199805,-0.009654104,0.007785134,0.0193351,-0.031678367,0.00962049,0.005526235,-0.037971016,0.029957304,0.016551813,-0.02925812,0.0012748325,-0.0145752765,-0.023758776,0.011960063,-0.02219906,-0.030817837,0.004030387,0.032780927,-0.0037581087,-0.008672559,0.0039766035,-0.03364146,0.024202488,-0.020383874,0.011408784,-0.021876361,0.03313052,-0.0064338283,-0.03460956,-0.0068842634,-0.008571715,-0.025318492,0.0020656153,-0.007906146,0.019765366,0.033533894,-0.018488012,0.029984195,0.034636453,0.02039732,-0.0028622805,-0.004312749,-0.002134525,-0.004386701,-0.029231228,0.006840565,-0.0017681263,-0.034259968,-0.0010210425,0.027147125,-0.039718974,0.023180606,-0.0027715212,-0.041950982,-0.016256005,0.024363838,-0.021674674,-0.022548653,0.0014286191,0.014561831,0.004864028,-0.0057514524,0.027752187,-0.029876629,0.0072002406,0.05461695,-0.009929744,-0.007711182,-0.010669264,0.010864228,-0.02738915,0.008827185,0.052223593,-0.028639613,-0.014440819,0.020209078,0.034690235,-0.011650809,0.022777231,-0.0008874246,-0.039745867,0.0064708046,-0.012854211,0.012141582,-0.039907217,-0.020155296,0.00086473476,-0.0027748826,-0.017735045,-0.008827185,0.046065405,0.0003636676,0.0142391315,0.024094922,0.013647514,0.009768394,0.019765366,0.022400748,-0.010097817,0.012007124,-0.025815988,0.016632488,-0.021997374,0.007919592,0.051900893,0.0023765499,-0.014884531,0.023194052,0.020599008,0.012040738,-0.030360678,-0.02184947,0.004480822,0.007415374,0.020545224,0.016000535,-0.0035665056,0.023382293,-0.014521494,-0.0041682064,-8.198803e-05,-0.024942009,-0.013580286,-0.039423164,0.027913537,-0.0077784113,0.029231228,-0.009949912,-0.014723181,-0.01714343,-0.012887825,-0.017600589,-0.016484585,0.029500145,-0.0022185615,-0.010326396,-0.0028135395,0.019563679,0.014387035,-0.006423744,0.02143265,0.03283471,-0.036007926,0.0066119856,0.014346697,0.014615614,-0.022831015,0.03149013,-0.016188776,-0.03901979,-0.048862137,0.046872154,0.008000268,-0.0142122395,-0.036787782,0.034421317,0.06400214,-0.00812128,0.008336413,-0.032269984,-0.011509628,0.0035732286,-0.016417354,-0.0053581623,0.012706307,0.018703146,0.020975491,-0.0044707377,0.008517931,0.009210392,-0.006571648,-0.051793326,-0.026730305,-0.00028299264,-0.0007491847,-0.0066422387,-0.03756764,-0.035819683,-0.0014849235,-0.002104272,0.02845137,-0.007791857,-0.0033127158,-0.0005495982,-0.018555243,0.0021210792,-0.043188,0.02990352,-0.020948598,-0.017250996,0.039557625,0.00106138,0.001887458,0.03283471,-0.024767214,-0.019187195,0.0050825225,-0.05367574,0.005532958,0.012578571,-0.013102959,0.016632488,0.0034253246,-0.022965472,0.013217248,0.013472719,-0.006527949,-0.02667652,-0.052600075,0.0024353755,-0.003657265,0.016067764,-0.011227266,-0.02845137,-0.024444515,-0.018447675,-0.025049577,0.022642773,-0.01781572,0.043645155,-0.027617728,-0.0032757397,-0.017842613,0.011065916,0.016524922,-0.015624051,0.008040605,0.017156875,0.0062724785,0.0053884154,-0.041870307,0.034501992,0.026864763,0.008242292,-0.013970215,0.036976025,0.018367,-0.005711115,0.038589526,0.009869237,-0.029446362,-0.0034858307,0.01859558,-0.028532045,-0.02381256,0.023355402,0.059914608,-0.042488813,-0.007307807,0.020114958,0.02129819,-0.0058825496,-0.015395472,0.01801741,-0.02268311,-0.0113818925,0.0389929,-0.020975491,-0.02268311,-0.021755349,-0.04455947,-0.046872154,-0.033856593,-0.007395205,-0.02348986,-0.0152744595,-0.02162089,-0.025829434,0.029123662,-0.101811804,-0.0022622605,0.018555243,-0.019469557,-0.002147971,0.002042085,0.030280003,0.007818748,-0.03603482,0.010615481,-0.0061649117,-0.032054853,-0.0019093074,0.012397053,0.053917766,0.009580152,0.0024589056,-0.025573963,0.0074489885,-0.018057747,-0.011408784,0.0027984127,-0.061097838,-0.0...', '2025-03-25 05:14:55.931093+00'), ('85', 'https://ai.pydantic.dev/tools/', '3', 'Sequence Diagram for Dice Game Interaction', 'This chunk presents a sequence diagram illustrating the interaction between an Agent and a Language Model (LLM) during a dice game. The Agent sends prompts to the LLM, which decides to use a tool to roll a die. The tool's return value is then communicated back to the LLM.', '"""
                        

We can represent this with a diagram:
                        
                                                sequenceDiagram
                            participant Agent
                            participant LLM
                        
                            Note over Agent: Send prompts
                            Agent ->> LLM: System: "You're a dice game..."<br>User: "My guess is 4"
                            activate LLM
                            Note over LLM: LLM decides to use<br>a tool
                        
                            LLM ->> Agent: Call tool<br>roll_die()
                            deactivate LLM
                            activate Agent
                            Note over Agent: Rolls a six-sided die
                        
                            Agent -->> LLM: ToolReturn<br>"4"
                            deactivate Agent
                            activate LLM
                            Note over LLM: LLM decides to use<br>another tool
                        
                            LLM ->> Agent: Call tool<br>get_player_name()
                            deactivate LLM
                            activate Agent
                            Note over Agent: Retrieves player name
                            Agent -->> LLM: ToolReturn<br>"Anne"
                            deactivate Agent
                            activate LLM
                            Note over LLM: LLM constructs final response
                        
                            LLM ->> Agent: ModelResponse<br>"Congratulations Anne, ..."
                            deactivate LLM
                            Note over Agent: Game session complete

Registering Function Tools via kwarg As well as using the decorators, we can register tools via the `tools` argument to the [`Agent` constructor](../api/agent/#pydantic_ai.agent.Agent.__init__). This is useful when you want to reuse tools, and can also give more fine-grained control over the tools. dice_game_tool_kwarg.py
                        
                                                import random
                        
                        from pydantic_ai import Agent, RunContext, Tool
                        
                        
                        def roll_die() -> str:
                            """Roll a six-sided die and return the result."""
                            return str(random.randint(1, 6))
                        
                        
                        def get_player_name(ctx: RunContext[str]) -> str:
                            """Get the player's name."""
                            return ctx.deps
                        
                        
                        agent_a = Agent(
                            'google-gla:gemini-1.5-flash',
                            deps_type=str,
                            tools=[roll_die, get_player_name],  # (1)!
                        )
                        agent_b = Agent(
                            'google-gla:gemini-1.5-flash',
                            deps_type=str,
                            tools=[  # (2)!
                                Tool(roll_die, takes_ctx=False),
                                Tool(get_player_name, takes_ctx=True),
                            ],
                        )
                        dice_result = agent_b.run_sync('My guess is 4', deps='Anne')
                        print(dice_result.data)
                        #> Congratulations Anne, you guessed correctly! You're a winner!', '{"source": "pydantic_ai_docs", "url_path": "/tools/", "chunk_size": 3599, "crawled_at": "2025-03-25T05:14:51.391750+00:00"}', '[-0.019047657,0.035255104,0.0044199163,-0.0070028156,-0.0037098636,0.017262755,0.011191476,0.02213541,-0.0050224843,-0.011197991,0.016415901,-0.058315538,0.058002856,-0.03997142,0.022695636,-0.010761536,-0.045469444,0.050654784,-0.011699587,0.061702948,0.022461124,0.026864754,0.015152139,0.025014708,0.020050852,0.00038841198,0.026786583,0.03348323,-0.015139109,-0.02197907,0.027698578,-0.017301839,-0.013380263,-0.013575691,-0.030512732,-0.033978313,0.0051657977,0.04195175,-0.004537173,-0.0045502014,-0.025548875,-0.01850046,0.029913422,0.03608893,-0.051071696,0.02362066,-0.054198533,0.03476002,0.020532906,-0.0018191035,-0.019816339,0.040857356,0.01661133,0.0075565265,-0.008162351,-0.033014204,-0.029548625,0.02050685,0.008006009,-0.018604688,-0.0068269307,-0.006524018,0.0005256183,0.062849455,-0.036271326,-0.008253551,-0.08020341,0.032310665,-0.008064638,0.019712111,0.025314363,0.038434055,-0.03087753,0.0006005321,-0.021431873,-0.006168992,-0.0108006215,0.042134147,0.019751197,-0.007107043,-0.011790787,-0.019217027,0.03700092,-0.0055664238,-0.038877025,-0.07368916,-0.023711858,-0.029574681,-0.02855846,-0.048648395,-0.01997268,0.0015007196,0.019295199,0.019334285,0.094326295,0.038408,0.026916867,-0.0019673025,-0.002348386,0.026682355,0.059618387,-0.013823232,-0.05586618,-0.013823232,0.052452717,-0.006892073,-0.015126081,0.005247226,-0.10474909,0.018956458,-0.11881986,0.003853177,-0.01607716,0.008462006,-0.04002353,0.047189206,0.02785492,0.0056087663,0.0033808942,-0.06373539,-0.04625115,-0.03713121,0.022239638,0.015386651,-0.00023247718,0.033196602,-0.0361671,-0.04171724,0.0023321004,0.0016171618,0.0143574,0.0032636377,0.016897956,-0.026187273,-0.008370807,-0.033196602,-0.013328149,-0.019881481,-0.018226862,0.003433008,0.026604185,-0.013888374,0.00012967423,-0.008188408,-0.0059409933,0.057533827,-0.060139526,0.018787088,-0.0479188,0.04784063,0.030512732,-0.009758342,0.014670084,-0.02673447,-0.03676641,-0.019243086,-0.025757331,0.034030426,0.0042082034,0.014005631,0.007817096,0.027516179,-0.029183825,-0.008624863,-0.028141547,-0.017836008,-0.008286122,-0.027438007,-0.037079092,0.01937337,0.017770866,-0.041039754,-0.011256618,0.014826426,0.007810582,-0.054719675,-0.021822726,-0.041847523,-0.03288392,-0.04176935,-0.042941917,-0.015686307,-0.055657726,-0.03035639,-0.03538539,-0.02300832,0.043410942,-0.03971085,0.024259055,0.034629736,0.035281163,0.04888291,0.05138438,-0.02673447,-0.0047000293,-0.04062284,0.08254854,-0.023216777,0.019777253,-0.0697285,-0.004426431,0.012663696,0.04799697,0.007159157,-0.00067096745,-0.026278472,-0.010559594,-0.009738799,0.012761409,-0.016832814,0.015425737,-0.08557115,0.039554507,-0.04929982,-0.048049085,0.016845843,-0.006543561,0.03780869,-0.018370176,0.021731528,0.014995797,0.004885685,0.014943683,-0.05805497,-0.022617465,0.009556401,0.008820291,-0.045417327,0.024675967,0.061859287,-0.010103597,0.013367235,0.026265444,-0.017588466,0.054250646,-0.06029587,-0.002534042,-0.0101882825,-0.02412877,-0.0064751613,0.017666638,-0.030747246,0.0030828672,-0.0010528652,-0.008663949,0.046589892,-0.00529934,0.02448054,0.008891947,0.019138858,0.09119946,-0.047397662,0.041873578,-0.010305539,-0.013093636,-0.008611835,0.021653356,-0.035255104,-0.033926196,-0.0053970534,0.015139109,0.0018516746,-0.04231655,0.006146192,-0.0050550555,-0.02325586,0.008904976,0.01722367,-0.01162793,0.004537173,0.0046837437,0.009217659,0.019282172,0.015021853,-0.011067705,-0.009041775,0.04583424,0.04862234,-0.020637134,-0.0026089558,0.025197107,0.058315538,0.04090947,0.020754391,-0.011699587,-0.0061071063,-0.036114983,0.016507102,-0.013732032,-0.0013280921,0.005247226,0.04713709,0.02636967,-0.00022494509,-0.019099772,-0.00361215,-0.0016448473,-0.03304026,-0.021483986,-0.015699334,0.007276414,-0.00572928,-0.025887618,0.025158022,-0.0008973375,0.0074197273,0.027750691,-0.026017902,0.05346894,0.0058367653,0.031555012,0.06253677,0.00065590325,-0.0011456931,-0.033326887,-0.006094078,0.03251912,-0.022773808,0.025926702,-0.033405058,-0.047293432,0.005116941,0.058315538,-0.020024795,-0.01850046,-0.0043840883,0.012083928,0.0010984648,-0.010500966,-0.004986656,0.009836513,-0.050003357,-0.038512226,0.10454063,0.0018647031,0.016910985,-0.03806926,0.030590903,0.004387345,0.04497436,-0.04617298,0.030278219,-0.043410942,-0.035958644,-0.011992728,0.05336471,0.024884423,0.021822726,-0.023555517,-0.0013948631,0.0027783264,0.014292258,-0.009888627,0.068477765,-0.015777506,-0.02266958,-0.036036815,-1.872846e-05,0.0041235182,0.014917625,-0.039163653,0.011745187,-0.009387029,-0.005677166,-0.05042027,0.032831803,-0.02517105,-0.023920314,0.011204504,0.035619903,0.0387728,0.035541732,-0.037053037,0.00356655,-0.015451794,0.011575817,-0.008084181,-0.0026692126,0.008976632,0.0074392697,0.04231655,-0.005781394,0.01573842,-0.0029737537,0.034629736,0.034916364,0.03710515,0.019764224,-0.017653609,-0.008904976,0.040440444,-0.059618387,-0.016741615,-0.0028043832,-0.013230436,-0.0061657345,0.009973312,0.04520887,0.02897537,-0.030486675,-0.03900731,0.010331595,-0.011510674,-0.028219717,-0.003537236,0.048023026,0.046563838,0.0089114895,0.037678406,0.03468185,0.07191729,-0.0064816754,0.03405648,-0.015712364,-0.03382197,-0.05570984,0.0074457843,-0.026995039,0.035776243,0.023777,-0.011953643,-0.05451122,0.036636125,-0.033691686,0.018122634,0.06456921,0.012579011,-0.032649405,0.035854414,-0.02448054,0.018174749,0.032493062,0.051254094,-0.008611835,-0.01547785,-0.0037163778,0.013745061,0.013862317,0.010474909,0.0037750062,-0.009458686,-0.027021095,0.014813397,0.073897615,-0.029131712,-0.024493568,-0.03806926,-0.039476335,0.051749177,-0.02033748,-0.008462006,-0.018044464,-0.018005379,0.028584516,0.004908485,-0.045443386,0.08478944,0.014031688,0.020741362,-0.019360341,0.057846513,-0.0023353575,-0.039424222,0.043202486,-0.03139867,0.0102925105,-0.0073415563,-0.0012637639,-0.004957342,-0.00042831173,0.008475035,0.013204378,0.00072552427,-0.006550075,-0.0019119314,-0.0309557,0.018474404,-0.007204757,0.03668824,0.0040551187,0.017327897,-0.016767671,-0.009426115,0.03606287,-0.020975875,0.07327225,-0.03371774,-0.03713121,-0.019334285,0.01721064,0.007172186,-0.0052081402,0.043489113,-0.014670084,0.049977303,0.049351934,0.056283094,-0.028167604,-0.02421997,0.0049540848,0.015256366,-0.014982767,-0.01150416,0.03710515,0.021653356,0.014044716,0.027229551,-0.008305665,0.0021578444,0.062171973,-0.021210387,-0.046850465,-0.0003041339,0.012846095,0.0040681474,-0.019360341,0.0092958305,-0.0016790471,-0.009132974,-0.010878792,-0.006390476,0.000742217,0.009224174,-0.0032750375,0.026968982,-0.012357526,-0.007120072,0.010618222,-0.022721693,-0.02897537,-0.0033743798,-0.033066317,0.009048289,-0.0031984951,-0.040153816,0.018604688,0.022330837,-0.0010764793,0.005006199,-0.029522566,-0.004032319,0.03408254,-0.008566234,-0.03275363,0.007146129,0.033352945,0.02066319,-0.015073967,0.011263133,-0.019151885,0.043515168,0.0067487597,0.020923762,-0.02673447,0.027620407,0.0021138731,-0.014644027,0.01262461,-0.010136168,-0.036114983,-0.0082991505,-0.026252415,0.0151912235,0.0049475706,-0.00022718436,0.03275363,0.038694628,0.020532906,-0.00030901958,-0.021041017,0.016533159,-0.0079669235,-0.005484996,0.021249473,0.019959653,-0.012116499,0.025731275,0.00027787333,-0.01418803,-0.004094204,-0.0027099268,-0.020181136,-0.004934542,-0.0034199797,0.0018761031,-0.008481549,-0.002742498,0.013979574,-0.013627805,-0.030721188,0.006390476,-0.0015341052,-0.0041854037,0.027047154,-0.036610067,-0.027177438,-0.018318063,0.014344372,-0.022005126,0.023803057,0.050211813,-0.018357148,-0.027359838,0.01133479,-0.0108527355,-0.011960157,0.04012776,0.01042931,-0.07077078,0.019946624,0.004426431,0.003999748,-0.0019005315,-0.017119441,-0.021549128,0.018565604,-0.04171724,0.0016888184,0.059462044,-0.032988146,-0.02767252,0.041222155,-0.009230688,-0.008950575,0.01834412,0.017314868,0.008755147,-0.0055143097,-0.015686307,0.05534504,-0.039528448,0.029392282,0.022422038,0.007758468,-0.0140186595,0.02689081,0.0140186595,-0.008142808,-0.016897956,-0.029288054,0.020975875,0.022630494,0.005840022,0.013217407,-0.0027701834,0.01016874,-0.020949818,0.009074346,0.031424727,-0.0031805811,-0.016715558,-0.031190215,0.0073285275,0.0016383331,0.021210387,-0.012683239,0.009419601,-0.021744557,-0.012429183,0.0055599096,-0.026812641,-0.0010430937,-0.005071341,-0.027568292,0.017106412,0.02136673,0.036271326,-0.007120072,0.01007754,0.01128919,-0.033926196,-0.0046609435,-0.014982767,0.011829873,-0.008507607,0.044818018,0.000982837,-0.022083297,-0.06201563,0.052035805,0.0140186595,-0.033274774,-0.027385894,0.026708413,0.0574296,0.015894763,0.03280575,-0.004931285,0.021887869,0.01661133,-0.0010341367,0.0023435003,-0.014891569,0.003273409,0.02905354,0.023659745,0.00031879096,0.017953264,-0.03184164,-0.052791458,0.001530848,0.0020422165,-0.016728586,-0.026278472,-0.037860803,-0.040831298,-0.0021024733,0.0063448763,0.038798854,-0.004146318,0.0120252995,-0.0063807047,-0.036297385,0.022096325,-0.050472386,0.020962846,0.00033059804,0.0022620722,0.030408503,0.0022360152,-0.035333276,0.0044101453,-0.03934605,-0.017862065,0.004045347,-0.014852483,0.013575691,0.04004959,-0.00015074374,0.0014502342,-0.0017197612,-0.012292384,0.01072245,-0.043827854,0.00091769453,-0.025158022,-0.04888291,0.013719004,-0.041404553,-0.0026447843,0.01556905,-0.007973438,-0.021093132,0.0142662,-0.034655795,0.014826426,-0.011588845,0.031893753,-0.011491131,0.019516684,-0.0044752876,0.010540051,-0.011452046,-0.0036219212,0.023307975,0.02431117,-0.03277969,-0.027385894,-0.05023787,-0.013289063,0.026265444,-0.013588719,-0.004296146,0.0058497936,0.024259055,-0.024962595,0.003693578,0.011901529,-0.024180884,0.01452677,0.029444396,-0.029757079,-0.017184583,0.0030112106,0.026330587,-0.045443386,-0.005097398,-0.02561402,0.01747121,-0.02793309,-0.017966293,-0.005201626,-0.022474151,-0.013719004,0.012956837,-0.007335042,-0.0058237365,-0.027307723,0.0051592835,-0.029340168,-0.078118846,0.0009575943,-0.0066705886,-0.0057064802,0.007764982,-0.018539546,0.023073463,-0.061702948,-0.026682355,0.002043845,-0.006524018,0.007810582,-0.03244095,0.010494452,0.038850967,-0.031528953,-0.012383583,0.0042049466,-0.00010504223,-0.01799235,0.0153475655,0.038173486,-0.018826174,0.0074848696,0.014292258,0.024858367,-0.004957342,-0.0029265254,0.01010...', '2025-03-25 05:14:55.982221+00'), ('86', 'https://ai.pydantic.dev/tools/', '4', 'Registering and Using Tools with Agent', 'This section explains how to register tools in the `Agent` constructor using a list of functions, emphasizing the inspection of function signatures for compatibility with `RunContext`. It also discusses the use of `Tool` for reusing tool definitions and providing detailed control over tool attributes such as name and description. Additionally, the documentation highlights the difference between function tools and structured results, detailing how function tools facilitate model interactions and schema definitions for responses.', '1. The simplest way to register tools via the `Agent` constructor is to pass a list of functions, the function signature is inspected to determine if the tool takes [`RunContext`](../api/tools/#pydantic_ai.tools.RunContext).
              2. `agent_a` and `agent_b` are identical  but we can use [`Tool`](../api/tools/#pydantic_ai.tools.Tool) to reuse tool definitions and give more fine-grained control over how tools are defined, e.g. setting their name or description, or using a custom `prepare` method.
_(This example is complete, it can be run "as is")_ Function Tools vs. Structured Results As the name suggests, function tools use the model's "tools" or "functions" API to let the model know what is available to call. Tools or functions are also used to define the schema(s) for structured responses, thus a model might have access to many tools, some of which call function tools while others end the run and return a result. Function tools and schema Function parameters are extracted from the function signature, and all parameters except `RunContext` are used to build the schema for that tool call. Even better, PydanticAI extracts the docstring from functions and (thanks to [griffe](https://mkdocstrings.github.io/griffe/)) extracts parameter descriptions from the docstring and adds them to the schema. [Griffe supports](https://mkdocstrings.github.io/griffe/reference/docstrings/#docstrings) extracting parameter descriptions from `google`, `numpy`, and `sphinx` style docstrings. PydanticAI will infer the format to use based on the docstring, but you can explicitly set it using [`docstring_format`](../api/tools/#pydantic_ai.tools.DocstringFormat). You can also enforce parameter requirements by setting `require_parameter_descriptions=True`. This will raise a [`UserError`](../api/exceptions/#pydantic_ai.exceptions.UserError) if a parameter description is missing. To demonstrate a tool's schema, here we use [`FunctionModel`](../api/models/function/#pydantic_ai.models.function.FunctionModel) to print the schema a model would receive: tool_schema.py
                        
                                                from pydantic_ai import Agent
                        from pydantic_ai.messages import ModelMessage, ModelResponse, TextPart
                        from pydantic_ai.models.function import AgentInfo, FunctionModel
                        
                        agent = Agent()
                        
                        
                        @agent.tool_plain(docstring_format='google', require_parameter_descriptions=True)
                        def foobar(a: int, b: str, c: dict[str, list[float]]) -> str:
                            """Get me foobar.
                        
                            Args:
                                a: apple pie
                                b: banana cake
                                c: carrot smoothie
                            """
                            return f'{a} {b} {c}'
                        
                        
                        def print_schema(messages: list[ModelMessage], info: AgentInfo) -> ModelResponse:
                            tool = info.function_tools[0]
                            print(tool.description)
                            #> Get me foobar.
                            print(tool.parameters_json_schema)
                            """
                            {
                                'additionalProperties': False,
                                'properties': {
                                    'a': {'description': 'apple pie', 'type': 'integer'},
                                    'b': {'description': 'banana cake', 'type': 'string'},
                                    'c': {
                                        'additionalProperties': {'items': {'type': 'number'}, 'type': 'array'},
                                        'description': 'carrot smoothie',
                                        'type': 'object',
                                    },
                                },
                                'required': ['a', 'b', 'c'],
                                'type': 'object',
                            }
                            """
                            return ModelResponse(parts=[TextPart('foobar')])
                        
                        
                        agent.run_sync('hello', model=FunctionModel(print_schema))', '{"source": "pydantic_ai_docs", "url_path": "/tools/", "chunk_size": 4474, "crawled_at": "2025-03-25T05:14:51.392306+00:00"}', '[-0.037810978,0.04245868,0.008520784,-0.028128268,0.006995757,0.02362581,0.004118177,-0.02369843,-0.002795882,0.018542387,0.01654533,-0.05354538,0.030863633,-0.011970249,-0.01740467,-0.008774955,-0.024424633,0.008877833,-0.00418172,0.05151201,0.06414795,0.016666362,0.026748482,0.032073975,0.028515577,-0.006360329,-0.027256826,0.03473672,-0.023976808,0.0039487295,0.011256149,-0.00922278,-0.047372654,-0.01658164,-0.019062834,-0.006305864,0.041151512,0.011486113,0.0017217067,0.040038,-0.0070986357,-0.000788233,0.00323463,0.031904526,-0.018034045,-0.00050418166,-0.03725422,0.023250604,-0.034688305,1.8060522e-05,-0.037375256,0.041805096,0.01855449,0.004372348,-0.0032073972,-0.0051530167,-0.028539784,0.005443498,-0.027692547,0.039578073,-0.009283297,-0.023577396,0.01815508,0.066762276,-0.06569718,-0.010396808,-0.037399463,0.032195006,-0.03367162,-0.0013071657,0.009125953,0.021846611,-0.010463377,0.0023768025,-0.028079856,-0.02970171,-0.002228536,0.06298602,0.0126964515,-0.014959785,-0.023637913,-0.025296077,0.019716416,-0.009519313,-0.031977147,-0.04204716,-0.037689943,-0.035801817,-0.017259428,-0.050446913,-0.020866238,0.008151631,0.014390926,0.03606809,0.11057653,0.03284859,-0.025562352,-0.010602566,0.013713136,0.014608786,0.076009266,0.007026016,-0.043281708,0.0006528264,0.040957857,0.013809963,0.012514901,-0.020067414,-0.079882346,0.026821103,-0.08588563,-0.008351336,0.007709857,0.014729821,-0.06608449,0.025150836,-0.027692547,0.022500195,0.007915614,-0.030258466,-0.030912047,-0.01769515,0.023153778,0.015407611,0.027644133,0.013967307,-0.028757645,-0.04812306,-0.031033082,-0.022911709,0.010076069,0.009658502,0.011322717,0.012157851,-0.0382467,-0.054416824,-0.019474348,-0.03442203,-0.038658217,0.028152475,-0.00019857117,-0.012369661,-0.019813243,0.008557094,-0.044879355,0.0396749,-0.04364481,0.01533499,-0.05533668,0.028733438,0.024811942,-0.0020258042,-0.011897628,-0.032049768,-0.024315702,0.007159153,-0.012339402,0.035148233,0.024497254,-0.014269892,0.006547932,0.041756682,-0.040352687,0.024763528,-0.055288266,-0.0030485403,0.008133476,-0.022536505,-0.045121424,-0.015710196,-0.016811604,-0.056401778,-0.019317005,0.015141336,0.017465185,-0.045629766,-0.06177568,-0.07334652,-0.009313555,-0.0275231,-0.045847625,-0.0062332437,-0.0589677,-0.01901442,-0.0008888424,-0.0024902716,0.034688305,-0.027498893,-0.0032709402,0.036552224,0.020248964,0.032872796,0.023395846,-0.0025916374,0.007552513,-0.039723314,0.042531297,-0.03928759,0.0035341887,-0.0065721385,0.027619926,-0.003667326,0.026675863,-0.014173065,-0.0052468176,-0.055917643,0.016036987,0.03112991,0.020115828,-0.019740622,0.004399581,-0.06690752,0.022028163,-0.024170462,-0.028612405,0.0018805636,-0.0147903375,0.04132096,-0.023480568,0.014027825,-0.014499856,0.0030803117,0.03725422,-0.03248549,-0.039457038,0.04168406,-0.017453082,-0.065648764,0.017961426,0.03066998,0.0069897054,0.03352638,0.028951298,-0.025949659,0.043475363,-0.041732475,0.026143314,-0.023492672,0.0024418582,-0.026046487,-0.011086701,-0.037689943,-0.011328769,0.00807901,-0.0014917423,0.037980426,0.021786096,-0.015770713,0.041030478,0.012793279,0.09276035,-0.03914235,0.018506078,0.0033405346,-0.010814375,-0.0019441064,-0.00093876885,-0.027789375,-0.028539784,-0.00480807,0.025150836,0.005425343,-0.03493037,0.006384536,-0.005322464,-0.004944233,-0.007818787,0.0063240193,-0.031202529,-0.0152744735,0.044128947,0.058919284,0.055723988,-0.0055433507,-0.022221817,-0.01379786,0.0016990128,0.03764153,0.0042422367,-0.025150836,0.03045212,0.023940498,0.0307426,0.021677164,0.011964197,0.0049654143,-0.019486452,-0.00489582,-0.009731122,0.013652619,0.015322886,0.0443226,0.03742367,-0.016751086,-0.043015435,-0.030839428,0.033477966,-0.004148436,0.003585628,0.003410129,-0.017997734,0.024134152,0.009622192,0.0017383489,0.0072862385,0.00961614,0.035269268,-0.019171763,0.029677503,-0.015710196,0.027184205,0.031686664,-0.02377105,-0.035898644,-0.028951298,-0.019208074,0.017634634,-0.014427236,0.020938858,-0.010015552,-0.040086415,-0.045532938,0.012242575,-0.026215933,-0.047372654,0.0048020184,0.00035459138,0.022584919,-0.002721749,0.0061031324,0.014499856,-0.049527057,0.0009364995,0.029362815,0.011213787,0.0068505164,-0.004399581,-0.00010505361,-0.0023541085,0.060952652,-0.020527342,0.002325363,-0.056256536,-0.0152986795,-0.0006728726,0.040618964,0.023323225,0.051318355,-0.04858299,0.0045448216,0.041151512,-0.00027024592,-0.023867877,0.041441992,-0.028152475,-0.016787397,-0.033623207,0.0040243757,-0.021689268,-0.014185169,-0.02677269,0.014269892,0.027014758,0.012375712,-0.07170046,0.058919284,-0.011558734,-0.0051015774,-0.03480934,0.018469768,0.02137458,0.009894518,-0.017888805,-0.034470443,0.008066907,-0.007855098,-0.0378836,0.0034918268,0.016678466,-0.0002099181,0.06681069,-0.0094709,0.005068293,-0.010941461,0.042773366,0.019776933,0.030040603,0.02137458,-0.03045212,0.015456024,0.049139746,-0.04393529,0.0021120408,-0.0011203197,-0.022258127,0.0068081548,0.034252584,0.0011581427,0.0346641,-0.030645773,0.0022905658,0.020091621,-0.0063784844,-0.02519925,-0.01615802,0.064922564,0.016024884,-0.006602397,0.01923228,0.016218537,0.07770374,-0.010457326,0.028079856,0.00051817624,-0.020454722,-0.05766053,-0.02280278,0.03517244,0.0228754,0.026264347,-0.0020273172,-0.064099535,0.011782646,0.0018760249,-0.009464848,0.06472891,0.026893724,-0.04507301,0.005119732,-0.042870194,0.01994638,0.012781176,0.054997787,-0.0006376972,-0.0307426,-0.015347093,0.028999712,0.0036310158,0.016218537,0.04379005,-0.0038882128,-0.035801817,0.006408743,0.029411228,-0.039263383,-0.029725917,-0.034083135,-0.01637588,0.05722481,-0.04207137,-0.010427067,-0.04454046,-0.07925297,0.011419545,0.02162875,-0.04221661,0.061436787,0.015540748,0.016932636,-0.015141336,0.06453525,0.025223456,-0.030839428,0.024194669,-0.029144954,0.012551211,0.0006055475,-0.021822404,-0.0189418,0.002500862,0.0067657926,-0.021967646,-0.038706627,-0.012369661,0.008835472,-0.049381815,0.02706317,-0.039699107,0.02294802,0.016533226,0.03449465,-0.030621566,-0.021713475,0.035680782,-0.0048383283,0.06501939,-0.017453082,-0.014996096,0.021422993,0.034010515,-0.028612405,-0.0118673695,0.059645485,-0.01211549,0.05160884,0.012962726,0.012914313,0.011141167,-0.049914364,-0.019716416,-0.0051046032,-0.025320284,-0.014257789,0.045799214,-0.017973527,0.011958146,0.010893048,0.004435891,0.004711243,0.05122153,-0.034881957,0.005168146,0.009567726,0.039844345,0.026821103,-0.00013975629,0.012539108,0.0036612742,-0.020914651,-0.026796896,0.022318644,-0.019389624,-0.0067536896,-0.005422317,0.02298433,-0.024436736,0.008417905,-0.000724312,-0.0493334,-0.046767484,0.014778234,0.010517842,0.031662457,-0.015383404,-0.037447877,-0.01304745,0.008193992,0.025126629,-0.013192691,0.0056492556,-0.011328769,0.014838751,-0.045992866,-0.017925115,0.014366719,0.022258127,0.04168406,0.00091531855,0.021495614,-0.007467789,0.057999425,0.01597647,0.019244384,-0.014826648,0.012091283,0.006759741,0.011195632,0.0013071657,-0.016932636,-0.03292121,-0.011480061,0.015516541,0.023214294,-0.011909732,0.013204794,0.043233294,0.017295739,-0.009144108,-0.006330071,-0.018530283,0.015928056,-0.0008835472,0.009337762,-0.011873421,-0.0013018704,0.0010688803,0.020745203,-0.0054707304,-0.023686327,-0.0070623257,0.0039124195,-0.0138704805,0.005858039,0.0056250487,-0.013180587,-0.014862958,0.027111584,0.0029290195,0.0016778319,-0.059258178,-0.006287709,-0.020345792,-0.0055433507,-0.013967307,-0.045169838,-0.0007364154,-0.010657031,0.033018038,-0.029072333,0.019571176,0.04621073,-0.024678804,-0.011952094,0.036528017,-0.036939535,-0.010390757,0.0026143314,0.013882584,-0.079979174,0.039457038,-0.003488801,0.026312761,-0.019087039,-0.046840105,-0.0035402405,0.013132174,-0.026288554,-0.023081157,0.0725719,-0.013253207,-0.042603917,0.04446784,-0.0066871205,0.014052032,0.020491032,0.014233582,0.0051106545,0.008157683,-0.025344491,0.06037169,-0.050350085,0.013906791,0.03493037,0.023528982,-0.004142384,0.024690907,0.017707253,-0.009652451,-0.007310445,-0.048510373,0.033502173,0.038803454,0.031057289,-0.028685024,-0.013313725,0.021967646,-0.027644133,0.029725917,-0.0056553073,-0.026724277,0.007770374,-0.025731798,-0.013253207,0.004904897,0.011056443,0.0034827492,-0.007304393,-0.017791977,-0.013071657,0.006499518,-0.037012156,-0.0039396523,-0.012829589,-0.016496915,0.0024706037,0.020442618,0.04228923,0.014403029,0.013374241,-0.0039366265,-0.05519144,-0.0046083643,-0.024424633,1.7599552e-05,0.011643457,0.019752726,0.008998867,-0.03764153,-0.05194773,0.04483094,-0.013374241,-0.022330748,-0.024158359,0.02766834,0.054562066,0.018009838,0.044080533,-0.0037127137,0.024122048,0.025029803,-0.0060244603,-0.012986933,-0.005440472,0.01698105,0.031154115,0.0026279476,-0.02283909,0.024049427,-0.0293144,-0.056256536,-0.01040286,-0.009803743,-0.019450141,-0.04100627,-0.018917592,-0.034300994,-0.030548947,0.0049412074,0.038537182,-0.033768445,-0.023081157,0.027547307,-0.030500533,0.014802441,-0.01687212,0.0015159491,0.015347093,-0.0017307842,0.02684531,0.01118958,-0.045847625,0.005618997,-0.028128268,-0.00398504,0.021822404,-0.014838751,-0.02084203,0.03691533,-0.01687212,-0.017235221,-0.013398448,-0.0017383489,-0.0038519027,-0.024037324,0.02155613,-0.026603242,-0.053496964,0.009434589,-0.037762564,-0.011643457,0.023855774,0.02426729,-0.033768445,0.017138395,-0.046162315,0.0029411227,-0.010741755,0.03882766,-0.0138704805,0.022851193,-0.011909732,0.008072958,-0.0065721385,0.016230641,0.0060032792,0.022718055,-0.033187486,-0.015807021,-0.037980426,-0.005815677,0.0029683553,0.013543689,0.0043814257,0.023819463,-0.015322886,-0.018397147,0.025586559,0.010778065,0.004015298,-0.010917254,-0.00829082,-0.011837112,-0.040231656,-0.006668966,0.04529087,-0.023165882,0.003273966,-0.024763528,0.015516541,-0.049309194,-0.012793279,0.008847575,-0.03531768,0.017126292,-0.0008101704,-0.005622023,-0.026288554,-0.020636274,-0.019450141,-0.020454722,-0.030016398,0.010759911,-0.024158359,0.009210677,0.02377105,-0.033913687,0.0050925,-0.08482053,-0.023577396,0.02344426,-0.011129064,-0.023008537,-0.013652619,0.010312085,0.024352012,-0.047832582,-0.015056612,-0.011086701,-0.007026016,-0.023069054,0.0062150885,0.0339621,-0.019522762,0.012169954,3.1393156e-05,0.010814375,0.0030893893,-0.020442618,0.027765168,-0.03509982,-0.01111090...', '2025-03-25 05:14:56.104+00'), ('87', 'https://ai.pydantic.dev/tools/', '5', 'Pydantic Tool Serialization', 'This section explains how Pydantic tools handle return types that can be serialized to JSON. It outlines how different models accept various return formats, such as semi-structured values or strings, and details the simplification of tool schemas when using parameters represented as objects in JSON schema.', '_(This example is complete, it can be run "as is")_ The return type of tool can be anything which Pydantic can serialize to JSON as some models (e.g. Gemini) support semi-structured return values, some expect text (OpenAI) but seem to be just as good at extracting meaning from the data. If a Python object is returned and the model expects a string, the value will be serialized to JSON. If a tool has a single parameter that can be represented as an object in JSON schema (e.g. dataclass, TypedDict, pydantic model), the schema for the tool is simplified to be just that object. Here's an example where we use [`TestModel.last_model_request_parameters`](../api/models/test/#pydantic_ai.models.test.TestModel.last_model_request_parameters) to inspect the tool schema that would be passed to the model. single_parameter_tool.py
                        
                                                from pydantic import BaseModel
                        
                        from pydantic_ai import Agent
                        from pydantic_ai.models.test import TestModel
                        
                        agent = Agent()
                        
                        
                        class Foobar(BaseModel):
                            """This is a Foobar"""
                        
                            x: int
                            y: str
                            z: float = 3.14
                        
                        
                        @agent.tool_plain
                        def foobar(f: Foobar) -> str:
                            return str(f)
                        
                        
                        test_model = TestModel()
                        result = agent.run_sync('hello', model=test_model)
                        print(result.data)
                        #> {"foobar":"x=0 y='a' z=3.14"}
                        print(test_model.last_model_request_parameters.function_tools)
                        """
                        [
                            ToolDefinition(
                                name='foobar',
                                description='This is a Foobar',
                                parameters_json_schema={
                                    'properties': {
                                        'x': {'type': 'integer'},
                                        'y': {'type': 'string'},
                                        'z': {'default': 3.14, 'type': 'number'},
                                    },
                                    'required': ['x', 'y'],
                                    'title': 'Foobar',
                                    'type': 'object',
                                },
                                outer_typed_dict_key=None,
                            )
                        ]
                        """', '{"source": "pydantic_ai_docs", "url_path": "/tools/", "chunk_size": 2900, "crawled_at": "2025-03-25T05:14:55.980315+00:00"}', '[-0.01474674,0.045190092,-0.038778465,-0.039752085,0.011564674,0.0038410393,-0.043694045,-0.016587116,0.017857566,0.024957849,0.022832515,-0.04882335,0.029659709,-0.03398162,-0.012312697,-0.013108214,-0.0071062194,0.024435421,-0.027285032,0.036142576,0.018379996,0.019709814,0.0049333903,0.016634608,0.033340458,0.0037579255,-0.03155945,0.03148821,0.018831184,0.020445963,-0.005215383,-0.019246753,-0.024387928,-0.0005450625,-0.009035644,-0.011926812,0.030704567,-0.0047879415,0.021419581,0.0355964,-0.012835126,-0.0031405096,0.0059901215,0.043955263,0.010917575,0.04236423,0.011618105,0.024649141,-0.029374748,-0.013096341,-0.03780485,0.060649235,0.029635962,-0.012965733,-0.010145805,-0.012395811,-0.02235758,0.035168957,-0.016670229,0.031084515,-0.029540975,-0.022986868,0.008062026,0.07755693,-0.04882335,-0.005918881,-0.05532996,0.05233787,-0.037021205,0.0051174276,0.0001554671,0.028686091,-0.048775855,0.023829877,-0.010288286,-0.055994872,0.01573223,0.073804945,0.014069958,-0.018700577,-0.025480278,-0.0072486997,0.005126333,0.0015984541,-0.041438103,-0.020825913,-0.04374154,-0.05513999,-0.018819312,-0.021752037,-0.008305431,-0.008893163,0.005868419,0.03721118,0.09147254,0.032723043,-0.02267816,-0.0076583317,0.00965306,0.010300159,0.061029185,0.023901118,-0.07712949,0.03060958,0.030752061,-0.012692645,0.019543586,0.0017913965,-0.030039657,0.010205172,-0.075372234,-0.015554131,-0.020635938,0.021918263,-0.10600556,0.0015479922,-0.045380067,0.030775806,0.0032918951,-0.025527772,-0.015043575,-0.007515851,0.015043575,-0.015209802,-0.007438674,0.012348318,-0.038920946,-0.035548907,-0.055994872,-0.021288974,0.02102776,-0.009979578,-0.0093443515,0.006186032,-0.0260502,-0.042387974,-0.0653036,-0.053620193,-0.0017854598,0.01295386,-0.0039004062,-0.028733585,-0.04343283,0.0027620455,-0.05570991,0.042316735,-0.015245423,0.014105578,0.0037490204,0.034599036,0.022891881,0.011196599,-0.0043070694,-0.008263874,-0.029351002,0.017513238,0.017988173,0.023556791,0.035976347,-0.022880008,-0.007604901,0.037401155,-0.054285105,0.02415046,-0.02341431,0.021229608,-0.003093016,-0.014687374,-0.042530455,-0.04167557,0.0036243498,-0.025219064,-0.037401155,0.0049779154,0.016420888,0.0009914275,-0.008667569,-0.067108355,-0.019911662,-0.01937736,-0.07271259,-0.011956496,-0.045617536,-0.014794234,-0.025694,-0.048324667,0.018949918,-0.011831826,-0.0068568783,0.024791623,-0.014485526,0.010751348,0.03205813,0.015696611,-0.005093681,-0.04039325,0.068723135,-0.012027736,-0.0027308778,-0.0029134313,0.024862863,0.051245518,0.022523805,-0.004615777,0.011077866,-0.036427535,-0.011600294,0.0070231054,-0.025124077,-0.038635984,-0.014794234,-0.0260502,0.02892356,-0.004752321,0.003674812,-0.0008007112,-0.026976325,0.018213768,-0.0015598655,0.025147824,0.03979958,0.01625466,0.0370687,0.010840398,-0.05371518,-0.0010181426,-0.035786375,-0.06269146,0.005933723,0.011950559,0.013488162,0.017299518,0.03521645,-0.018653084,0.018617464,-0.02369927,0.023497423,-0.011137232,-0.007129966,-0.057942104,-0.033008,-0.03127449,-0.0050639976,0.01038921,-0.013500036,0.02046971,0.028804826,-0.009118757,0.04139061,0.017762579,0.09280235,-0.035762627,0.01997103,-0.024411675,-0.01731139,-0.0122652035,0.017596353,-0.02678635,-0.052575335,-0.0055982997,0.017501365,0.017596353,-0.016800836,0.023829877,-0.011564674,-0.015755977,0.0039093113,-0.013927477,0.02011351,-0.007646458,0.057562158,0.07646458,0.04749353,-0.0016682103,-0.021431455,-0.0026611218,0.011523117,0.016622735,0.006886562,-0.03317423,0.018403742,0.019697942,0.02745126,0.04784973,0.01372563,-0.0065481705,0.010044881,0.016029065,-0.014390539,-0.01130346,0.02014913,0.010715728,0.030348364,-0.020101637,-0.030395858,-0.010745411,0.024031725,0.007492104,-0.007070599,-0.029635962,0.00023654004,-0.0097243,0.009385909,-0.00977773,0.011986179,-0.026525136,0.03699746,0.006726271,0.019021159,-0.008210444,0.026667617,0.04528508,-0.032176867,-0.01298948,-0.0046009356,-0.013856237,0.021455202,0.009035644,0.025670253,0.005452851,-0.050675597,-0.034955237,0.014984208,-0.020267863,-0.031037021,0.011920876,-0.028686091,0.0033008002,-0.005981216,0.0050432193,-0.005075871,-0.023746764,0.029849684,0.03744865,0.051625468,-0.0068153213,-0.033791646,0.0135475295,-0.005702192,0.04799221,-0.037971076,0.022737527,-0.038327277,-0.020647813,-0.0010812199,0.025314052,0.012965733,0.057657145,-0.045712523,-0.0074861674,0.04044074,-0.009843034,0.01209304,0.04901332,0.000927608,-0.013476289,-0.013393175,-0.023426183,-0.022310086,-0.007895799,-0.010323906,0.020754673,0.0110659925,0.0092078075,-0.073804945,0.025836479,-0.032699294,0.014996082,-0.057182208,-0.013808743,-0.016693976,0.005194605,-0.0225713,0.010840398,0.013321935,-0.031583197,-0.018854931,0.008626012,0.0045386003,-0.013108214,0.076892026,0.0077770655,0.015922206,-0.0055181542,0.040986914,0.025480278,0.03723493,0.03697371,-0.03640379,0.005446914,0.0008912457,-0.083636105,-0.018059414,-0.020790292,0.014414286,0.0064353733,0.0033482937,0.002043706,0.026453895,-0.019365486,-0.03429033,-0.003814324,0.0016889886,-0.013250695,-0.016159674,0.04680487,0.008465721,-0.010252666,0.0076583317,-0.03236684,0.064828664,-0.008744746,0.013642516,-0.0028941368,-0.0009595177,-0.060649235,0.015660992,0.043575313,0.040606968,0.0066787777,-0.013262568,-0.059936833,0.010876019,-0.0013268505,-0.018154401,0.08900287,0.035715133,-0.032628056,0.015803471,-0.011457814,0.042292986,0.020267863,0.033150483,-0.03851725,-0.011261903,-0.021312721,0.0026299541,0.0352402,-0.013535656,0.055092495,0.015601625,-0.045332573,-0.015043575,0.04015578,-0.030229632,-0.032485574,-0.030799553,0.010608867,0.014058084,-0.021692669,0.02773622,-0.017263899,-0.06919807,0.015031702,0.020576572,-0.043694045,0.026762603,0.0014544893,0.022773147,-0.0021980598,0.06820071,0.019994775,-0.0359526,0.016124053,-0.023461804,-0.034599036,0.0026922894,0.016765216,-0.0130844675,0.0061029186,-0.014117451,-0.00085191516,-0.009124694,-0.01146375,0.017442,-0.022737527,0.04492888,0.015886586,0.016682101,0.008299494,0.01141032,-0.02436418,-0.033767898,0.044572677,-0.04096317,0.095034555,0.0055537745,-0.0033304838,0.0048502767,0.011160979,-0.016587116,-0.030348364,0.031321984,-0.0116655985,0.017631972,0.021965757,-0.00199176,0.022856262,-0.018866803,-0.023105603,0.0057674954,-0.0076939515,0.030728314,0.043195363,-0.014331172,0.0055597113,0.04167557,-0.0034284391,-0.023200588,0.06487616,-0.052385364,-0.007824559,-0.009825224,0.0024800526,0.026905084,-0.016361522,-0.0159697,-0.0035620148,-0.0074268007,-0.007094346,0.007129966,-0.01966232,0.00965306,0.005901071,0.010187362,-0.0029668615,0.01123222,0.0026729952,-0.034694023,-0.021680797,-0.010365463,0.015554131,0.03429033,-0.0179763,-0.027949942,-0.028163662,9.03954e-05,0.012752012,-0.01786944,0.014271805,0.012122723,0.0075277244,-0.032841776,0.00014452133,0.013974971,0.045570042,0.04307663,0.0026744793,0.013333809,-0.012668899,0.04822968,-0.020410344,-0.0025542614,-0.04314787,0.020267863,0.026738856,0.0096174395,0.008275747,-0.020125384,-0.02330745,-0.0066906507,0.019614827,0.034361567,0.017477619,0.013286315,0.043836527,0.014022465,-0.01937736,0.005411294,-0.012217711,0.020980267,0.0032444017,0.0060851085,-0.012870747,0.014295552,-0.0050877444,0.016705848,0.0036302865,-0.035121463,-0.003324547,-0.0111728525,-0.0020155066,0.012918239,0.01573223,-0.030372111,-0.008050153,0.025741493,-0.009943957,-0.024625394,-0.031298235,-0.009118757,-0.024767876,-0.028234903,0.004286291,-0.02510033,-0.0046098405,0.011701218,0.031321984,-0.035905108,0.024744129,0.039823323,-0.044430196,0.0054676924,0.07086035,-0.03172568,-0.009486833,0.017596353,0.035786375,-0.0961744,0.02597896,-0.003107858,0.025694,-0.007646458,-0.04939327,0.00035935533,0.0114459405,-0.03450405,0.0030084183,0.058227066,-0.026097694,-0.028163662,0.018225642,0.010300159,0.007118093,0.010751348,0.01989979,0.018759944,0.009605566,-0.016575241,0.04139061,-0.035145212,-0.022226973,0.019686067,0.023853624,-0.0018774786,0.015589751,0.007866115,-0.025622759,-0.014153072,-0.045902494,0.024554154,0.0072783832,0.017323265,-0.022476312,-0.019246753,0.0030113866,-0.016978936,0.020054143,0.008050153,-0.006376006,0.018558096,-0.0023761606,-0.0073318137,0.0058565456,0.008168887,0.0099736415,-0.002396939,-0.007866115,-0.025931466,0.015910333,-0.060079314,-0.012372064,-0.019686067,0.0014574577,0.015364157,0.04801596,0.027403766,0.0112025365,0.020897152,-0.022416946,-0.055377454,-0.028282396,-0.042601697,-0.002267816,0.010733537,0.009605566,0.03875472,-0.031535704,-0.057989597,0.05262283,-0.05233787,-0.020588445,-0.05276531,-0.005215383,0.06758329,0.009178124,0.042079266,0.013405048,0.02088528,0.028781079,-0.012502671,-0.020920899,0.007604901,0.008002659,0.03317423,-0.0055033127,0.005886229,0.040179525,-0.039277148,0.013642516,-0.020339103,-0.0071062194,-0.023604283,-0.023438057,-0.024910357,-0.0039716465,-0.017525112,-0.016729595,0.01783382,-0.0036955902,-0.02134834,0.018356249,-0.006655031,-0.007260573,-0.019175513,-0.0111194225,0.024209827,0.027759967,0.017774453,-0.0038410393,-0.01541165,-0.0011064508,-0.0061800955,-0.014865475,0.024957849,-0.07014794,-0.0051322696,0.038422264,-0.018486856,-0.028472371,-0.024672888,-0.0038261975,-0.016017193,-0.02597896,-0.0068093846,-0.033554178,-0.027926195,0.023580536,-0.022381326,-0.0048235618,0.031108262,0.040773194,-0.021193987,0.00182108,-0.014034337,-0.02502909,-0.0060346466,0.05262283,0.009451212,0.002653701,0.009439339,0.0070052957,0.003238465,0.022915628,-0.0050016623,0.0031345729,-0.007587091,-0.01295386,-0.036712497,0.020303484,-0.020303484,-0.017358884,0.0010775095,0.024696635,-0.010466387,-0.030443352,0.03120325,0.0052450667,0.015755977,-0.020018522,-0.012348318,-0.0021357245,-0.03979958,0.002963893,0.03243808,-0.009670869,-0.0017839756,-0.0016607894,0.017050177,-0.0021149463,0.010691981,0.005642825,-0.037757356,0.008691316,0.034337822,0.0052866233,-0.05328774,-0.014901095,-0.031535704,-0.0014930778,-0.017536985,0.023948612,0.009848971,-0.0033275154,0.016195294,-0.023117475,-0.0013728598,-0.08691316,-0.03920591,0.037923582,0.008394482,0.00561611,-0.015696611,0.0079551665,0.018285008,-0.04552255,-0.028686091,-0.030372111,-0.005782337,-0.022036998,0.01196837,0.005841704,-0.0060583935,0.015221676,-0.036071334,-0.017157037,-0.019804802,-0.020386597,0.030253379,-0.025741493,-0.0...', '2025-03-25 05:14:56.1588+00'), ('88', 'https://ai.pydantic.dev/tools/', '6', 'Dynamic Function Tools in Pydantic', 'This section describes how to define dynamic function tools in Pydantic using a `prepare` function. The `prepare` method can be registered via various decorators or the Tool dataclass, and is used to customize the tool's definition during a run, allowing for modifications or complete omission of the tool.', '_(This example is complete, it can be run "as is")_ Dynamic Function tools Tools can optionally be defined with another function: `prepare`, which is called at each step of a run to customize the definition of the tool passed to the model, or omit the tool completely from that step. A `prepare` method can be registered via the `prepare` kwarg to any of the tool registration mechanisms:
              * [`@agent.tool`](../api/agent/#pydantic_ai.agent.Agent.tool) decorator
              * [`@agent.tool_plain`](../api/agent/#pydantic_ai.agent.Agent.tool_plain) decorator
              * [`Tool`](../api/tools/#pydantic_ai.tools.Tool) dataclass
The `prepare` method, should be of type [`ToolPrepareFunc`](../api/tools/#pydantic_ai.tools.ToolPrepareFunc), a function which takes [`RunContext`](../api/tools/#pydantic_ai.tools.RunContext) and a pre-built [`ToolDefinition`](../api/tools/#pydantic_ai.tools.ToolDefinition), and should either return that `ToolDefinition` with or without modifying it, return a new `ToolDefinition`, or return `None` to indicate this tools should not be registered for that step. Here's a simple `prepare` method that only includes the tool if the value of the dependency is `42`. As with the previous example, we use [`TestModel`](../api/models/test/#pydantic_ai.models.test.TestModel) to demonstrate the behavior without calling a real model. tool_only_if_42.py
                        
                                                from typing import Union
                        
                        from pydantic_ai import Agent, RunContext
                        from pydantic_ai.tools import ToolDefinition
                        
                        agent = Agent('test')
                        
                        
                        async def only_if_42(
                            ctx: RunContext[int], tool_def: ToolDefinition
                        ) -> Union[ToolDefinition, None]:
                            if ctx.deps == 42:
                                return tool_def
                        
                        
                        @agent.tool(prepare=only_if_42)
                        def hitchhiker(ctx: RunContext[int], answer: str) -> str:
                            return f'{ctx.deps} {answer}'
                        
                        
                        result = agent.run_sync('testing...', deps=41)
                        print(result.data)
                        #> success (no tool calls)
                        result = agent.run_sync('testing...', deps=42)
                        print(result.data)
                        #> {"hitchhiker":"42 a"}', '{"source": "pydantic_ai_docs", "url_path": "/tools/", "chunk_size": 2670, "crawled_at": "2025-03-25T05:14:55.895286+00:00"}', '[-0.047099315,0.045721684,0.01863698,-0.036364205,-0.011150996,0.0014279904,0.015907716,0.03623424,-0.0020615696,0.04392817,0.03579236,-0.03449271,0.05268781,-0.0071675694,-0.016154649,-0.0012630973,0.0017252853,0.014919981,-0.013750296,0.06342292,0.037143994,0.017324334,0.010319221,0.006400776,0.021964084,0.013041987,-0.017272348,0.03849563,-0.012372667,-0.0031029142,0.035298493,-0.017272348,-0.02851432,-0.025226206,-0.009500441,-0.013035488,0.042212628,0.036026295,-0.016635519,0.025837041,0.00054138544,-0.032985114,0.02595401,0.055001184,-0.0067581795,0.025265194,-0.00983835,0.0048509436,-0.0150499465,-0.024368437,-0.037637863,0.014049216,0.023107776,-0.015205904,-0.03698804,-0.016440572,-0.03545445,0.028332368,-0.011430421,0.008668665,-0.0022175277,-0.028800242,-0.010962547,0.057444528,-0.04169277,-0.008818124,-0.033089086,0.0263569,-0.04881485,-0.0020518224,-0.007265043,0.01607667,-0.025473138,0.01495897,0.024420422,0.016544543,0.0051141223,0.03885953,0.004581266,-0.013945243,-0.0022743873,-0.017311336,0.00088863564,0.010917059,-0.05375352,-0.06300703,-0.055936933,-0.010033297,-0.019806664,-0.027682543,0.00024673043,-0.024173489,0.0042628516,0.010780596,0.06300703,0.03321905,0.013854268,-0.022029066,-0.011196484,0.020131577,0.031945396,0.03449271,-0.06217525,0.009727879,0.06934932,0.013880261,-0.0033465985,-0.010819586,-0.040081203,0.055936933,-0.0530777,-0.023692619,-0.004366824,0.025512127,-0.044526007,-0.019754678,0.011254968,0.024914289,-0.01072861,-0.017051406,-0.033816893,-0.03207536,0.038287688,-0.02625293,0.0072455485,0.026668817,-0.008356749,-0.012730071,-0.042264614,-0.02405652,0.01499796,0.038703576,0.019741682,0.009916329,-0.010176259,-0.04670942,-0.020053599,-0.009506939,-0.022769867,0.02443342,0.018312067,-0.05068635,-0.0016473063,0.020261543,-0.01696043,0.06493051,-0.015738761,-0.0044642976,-0.02033952,0.04925673,0.016492557,-0.015283884,-0.010514168,-0.012541622,-0.039509356,0.028462334,-0.00087239,0.018870916,0.052245926,-0.023445684,-0.008954588,0.034986574,-0.027006725,0.018792938,-0.025577111,-0.025473138,0.036806084,-0.01295751,-0.06846556,-0.017350327,0.003200388,-0.010546659,-0.01807813,0.024121502,0.05071234,-0.023094779,-0.06368285,-0.02947606,-0.006790671,-0.023419691,-0.030307837,-0.0021444224,-0.045487747,0.01176833,-0.050036523,-0.054741256,0.014205174,-0.018649977,-0.017220361,0.031685464,0.005439035,0.029008185,0.031425536,0.0085387,0.029372089,-0.044500012,0.05921205,-0.00868816,-0.0018260082,-0.031113619,0.007804398,0.042446565,0.022107046,0.0056372317,0.03171146,-0.018753948,0.027682543,0.039665315,-0.010221747,-0.04117291,0.008811627,-0.041380852,0.03485661,0.015998691,-0.006404025,-0.010319221,-0.014504093,0.033946857,0.013334408,0.04125089,-0.011787825,-0.0009674269,0.043486286,-0.00070465397,-0.02223701,0.037845805,-0.06305902,-0.06778974,-0.009773367,0.059887867,0.026525855,0.01417918,0.022081053,-0.038105737,0.027422613,-0.04499388,-0.022639902,-0.046163566,-0.0043538273,-0.052141953,-0.02877425,-0.03631222,-0.0046982346,-0.0026009243,0.0119827725,0.017883183,0.004285596,0.017584264,0.022172028,0.012593607,0.08359348,-0.037429918,0.010546659,-0.03553243,-0.04213465,-0.009688891,0.01985865,-0.014673048,-0.041380852,-0.005000403,0.012879531,0.0044675465,-0.029086165,-0.006228572,-0.033608947,0.03667612,0.062643126,0.016479561,0.005461779,-0.02713669,0.078134954,0.06872549,0.05401345,-0.034986574,-0.024771327,-0.020105584,-0.010423193,0.024563383,0.012600106,-0.016869456,-0.02123628,0.014660051,0.01009828,0.027318642,0.0041003954,0.0056599756,-0.022678891,0.022587916,-0.0014336763,0.0014986588,0.016180642,0.046085585,0.041718762,0.018948896,-0.019754678,-0.0125221275,0.016050676,-0.014387125,0.00057428284,-0.030047907,0.00805783,0.017051406,0.01403622,-0.008083822,0.016050676,-0.05401345,0.029034179,-0.025460143,0.015933707,0.010572652,0.008525703,0.04759318,-0.046007607,-0.0073495205,-0.004867189,-0.0045650206,-0.017636249,-0.027318642,0.046527468,0.0069141374,-0.0036877566,-0.03831368,0.0077459137,-0.018948896,0.021860112,0.0042498554,0.00441881,-0.026304914,0.02713669,0.024303453,-0.041302875,-0.04317437,0.009000076,0.0061863335,0.030957662,0.01265859,0.0023117524,0.015192907,0.030983655,0.03719598,-0.04028915,0.016570536,-0.017272348,-0.05190802,0.019403774,0.051024254,0.001273657,0.012171222,-0.023900563,0.0066542076,0.05323366,-0.037221976,0.005471526,0.027630558,-0.021197291,-0.014932978,-0.030697731,-0.017558271,0.0057412037,0.00567947,-0.015608796,-5.3762862e-05,0.010631137,0.005146614,-0.05671672,0.046865378,0.0059978846,-0.014010226,-0.014660051,0.0041783745,0.014530086,0.068881445,-0.0063130497,0.014452107,-0.0059783896,-0.013015994,-0.008077324,0.035064556,0.04626754,-0.003411581,0.056924667,0.0030103142,-0.006693197,0.008506209,0.036208246,0.045695692,0.013093973,0.0053253155,-0.042212628,0.002149296,0.049698614,-0.08286568,-0.005260333,-0.025291188,-0.0033985847,0.01863698,-0.004376571,0.037429918,0.04551374,-0.015231897,-0.03587034,0.00045650205,-0.039925247,0.0048801857,-0.0018178853,0.07927865,0.029086165,-0.023692619,-0.01243765,0.0150499465,0.056664735,0.0128925275,0.05671672,-0.0047534695,-0.009396469,-0.03716999,0.005364305,0.017922172,0.028904215,0.008317759,-0.0029615774,-0.071532734,0.04904879,-0.01997562,-0.004162129,0.032725185,0.025564114,-0.0449159,0.04481193,-0.047827117,0.0007363329,-0.012476639,0.045279805,0.006456011,-0.015088935,-0.017948166,-0.020287536,0.005910158,0.025746064,-0.007700426,-0.00280237,-0.048788857,-0.0041816235,0.02469335,-0.06035574,0.009909831,-0.06441065,-0.029658012,0.011371937,0.0030687985,-0.02817641,-0.0008488339,-0.0044642976,0.005624235,0.028462334,-0.010013803,0.03215334,0.025759062,0.06550235,0.01180732,0.06477455,0.02613596,-0.031607486,0.048165027,-0.016271617,0.03597431,-0.0023994786,0.0018000151,-0.009201521,-0.025031257,0.005299323,0.005965393,0.0024157243,-0.011066519,0.0126910815,0.0039151954,0.023367705,-0.007576959,-0.022600912,0.007005113,0.014400121,-0.048165027,0.00749898,0.04811304,0.01971569,0.062019296,0.029502053,-0.0040971464,7.802976e-05,0.019364784,-0.0082072895,-0.02379659,0.066334136,-0.014906985,0.038339674,0.063266955,0.040575072,0.021067325,-0.009065058,0.024108507,-0.008350251,-0.006966124,0.003033058,0.037143994,0.01815611,0.004327834,0.03815772,0.0052148453,0.009968315,0.076783314,-0.06898542,0.025031257,-0.0013800658,0.02989195,-0.0156217925,0.012463643,0.01651855,-0.0076484396,0.0045585223,-0.025720073,-0.0071870643,-0.015543813,-0.0043928167,0.035324484,0.029372089,0.008584187,0.017194368,-0.008395739,-0.07096089,-0.006771176,-0.0069206357,0.014361132,0.019624714,-0.0029177142,-0.06773775,-0.0013491991,0.02023555,0.03277717,0.009916329,0.007713422,-0.010150266,0.028566305,0.008876609,-0.021691157,0.007823893,0.017883183,0.026928747,0.021002343,0.019780671,-0.01741531,0.05105025,-0.010130771,0.008187794,-0.013646324,0.032127347,-0.010273732,-0.02205506,-0.0024270962,-0.015764754,-0.054585297,0.009156033,-0.0076354435,0.0133993905,0.0072195553,0.013828275,0.033478983,0.018559001,-0.02205506,0.0050686346,-0.031763446,-0.018727956,-0.0011185112,-0.035116542,-0.0012038008,0.033582956,0.004184873,-0.009324988,-0.046033602,-0.04005521,0.0005202661,0.006166839,-0.011008034,-0.003671511,-0.00020510101,-0.031763446,-0.0100267995,0.0075119766,0.010501171,-0.012294688,-0.028488327,0.0016334975,0.0037592375,0.017740222,0.027708536,-0.063942775,-0.010520666,0.0032734931,0.020768406,-0.034284767,0.0067971693,0.047723144,-0.031607486,0.038781554,0.022444954,-0.022224015,-0.022912828,0.017272348,0.013321412,-0.07241649,0.010345213,0.016648516,0.009266504,-0.0040191673,-0.029216131,-0.014971967,0.0067776744,-0.016765485,0.005097877,0.06898542,-0.039327405,0.008980581,-0.0046787397,-0.018610988,-0.018234089,0.020079592,0.0018097626,0.02773453,0.023393698,0.016232628,0.06378682,-0.045487747,0.010917059,0.02349767,-0.006966124,-0.026005995,0.0031549002,0.007700426,-0.008746644,-0.0138022825,-0.057496514,0.035142533,-0.00065063726,0.018727956,-0.015023953,-0.007395008,0.032699194,-0.0047534695,0.018052138,0.016908446,-0.027396621,0.025551118,-0.025577111,-0.020625444,0.009610911,-0.0061538424,-0.016362593,-0.0022272752,-0.015361862,-0.02275687,0.031347558,-0.038001765,-0.00883762,-0.021743143,-0.00708959,0.0024011033,0.009818855,0.06129149,0.0107676,0.030593758,-0.006426769,-0.06898542,0.010059291,-0.0060823616,0.010351712,-0.0011396306,0.014075208,0.050556384,-0.031503513,-0.04819102,0.016375588,-0.01473803,-0.03152951,-0.012899025,0.008603683,0.054377355,-0.0055787475,0.0163366,0.032205325,0.0033628442,0.0022483943,-0.017051406,-0.04117291,0.03475264,-0.020378511,0.0009552427,0.033816893,0.005598242,0.01667451,-0.03917145,-0.032387275,-0.022301992,0.015764754,-0.01785719,-0.0050101504,-0.015413848,-0.025109237,0.010819586,0.022016069,0.04967262,-0.019403774,-0.0046202554,0.028228397,-0.009279501,-0.03152951,-0.016154649,-0.022665896,0.03277717,0.021834118,0.038547616,0.005517014,-0.037637863,-0.012405159,-0.031243585,0.004740473,0.009591416,-0.016050676,0.020066595,0.055417072,0.023094779,-0.035324484,-0.0037462409,0.0009723006,-0.023471678,-0.020560462,0.0330371,-0.0024937033,-0.048840843,0.025226206,-0.02669481,-0.0119177895,0.030359821,0.04325235,0.009273002,0.0155568095,0.002071317,0.033271037,0.0064982497,0.046943355,-0.026928747,0.018948896,-0.06513845,0.010046294,0.010065788,0.028462334,0.0056437296,-0.008883107,-0.041068938,-0.0010429691,-0.03259522,-0.009662897,0.008883107,-0.002302005,0.011118505,0.024173489,-0.0007375513,0.012509131,-0.02427746,-0.033582956,-9.3666175e-05,0.01611566,0.03173745,0.0028868474,-0.027968466,-0.022392968,0.014283152,-0.03797577,0.015608796,0.010696119,0.009045564,-0.029658012,0.005491021,0.03223132,-0.02947606,0.030645745,-0.0035350479,0.0010429691,-0.021652168,-0.00088701106,-0.018468026,0.018559001,-0.038729567,-0.0132304365,0.01254812,0.0077784047,0.020053599,0.00085289526,0.01525789,-0.123414755,-0.012606604,0.016687505,0.0030281844,-0.015270887,0.0404711,-0.015335869,0.0326732,-0.02223701,-0.025642093,-0.025603104,0.009721382,-0.019923633,-0.010072287,0.038287688,-0.0072715413,0.016947435,-0.0015587676,0.0023637384,-0.030827696,-1.8244598e-06,0.01681747,-0.0449159,0.0069206357,-0.025395159...', '2025-03-25 05:14:56.205877+00'), ('89', 'https://ai.pydantic.dev/tools/', '7', 'Customized Tool Example in Pydantic AI', 'This document provides a complete example of creating a customized tool using the `Tool` dataclass from Pydantic AI. It demonstrates altering the description of parameters based on dependencies, specifically illustrating a `greet` function that returns a greeting message.', '_(This example is complete, it can be run "as is")_ Here's a more complex example where we change the description of the `name` parameter to based on the value of `deps` For the sake of variation, we create this tool using the [`Tool`](../api/tools/#pydantic_ai.tools.Tool) dataclass. customize_name.py
                        
                                                from __future__ import annotations
                        
                        from typing import Literal
                        
                        from pydantic_ai import Agent, RunContext
                        from pydantic_ai.models.test import TestModel
                        from pydantic_ai.tools import Tool, ToolDefinition
                        
                        
                        def greet(name: str) -> str:
                            return f'hello {name}'
                        
                        
                        async def prepare_greet(
                            ctx: RunContext[Literal['human', 'machine']], tool_def: ToolDefinition
                        ) -> ToolDefinition | None:
                            d = f'Name of the {ctx.deps} to greet.'
                            tool_def.parameters_json_schema['properties']['name']['description'] = d
                            return tool_def
                        
                        
                        greet_tool = Tool(greet, prepare=prepare_greet)
                        test_model = TestModel()
                        agent = Agent(test_model, tools=[greet_tool], deps_type=Literal['human', 'machine'])
                        
                        result = agent.run_sync('testing...', deps='human')
                        print(result.data)
                        #> {"greet":"hello a"}
                        print(test_model.last_model_request_parameters.function_tools)
                        """
                        [
                            ToolDefinition(
                                name='greet',
                                description='',
                                parameters_json_schema={
                                    'additionalProperties': False,
                                    'properties': {
                                        'name': {'type': 'string', 'description': 'Name of the human to greet.'}
                                    },
                                    'required': ['name'],
                                    'type': 'object',
                                },
                                outer_typed_dict_key=None,
                            )
                        ]
                        """
                        

_(This example is complete, it can be run "as is")_  Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/tools/", "chunk_size": 2827, "crawled_at": "2025-03-25T05:14:52.042264+00:00"}', '[-0.029513095,0.051494732,-0.0071612657,-0.012490728,-0.0020934893,-0.016479846,-0.023334747,0.01779466,0.0024445318,0.01530545,0.015918178,-0.0061432426,0.040823042,-0.07046379,0.007154883,0.008048445,0.0021094459,0.03696796,-0.008935626,0.034695756,0.044422824,0.021062545,0.02915567,0.058515582,0.017705303,0.03370007,-0.030508779,0.03755516,0.0349,0.010256821,0.0036763716,-0.02494316,0.009171781,-0.025772898,-0.008144184,-0.011992886,0.011941825,0.007027231,0.007480395,0.0060443124,-0.033061814,-0.03507871,0.04480578,0.035257425,-0.036533944,0.009159016,0.00015358106,0.045699343,0.025134638,-0.008386723,-0.030942794,0.012752414,-0.014258705,-0.00048946484,-0.011463131,-0.028696124,0.01806273,0.032474615,-0.0046560992,-0.008361192,-0.008993069,-0.008910095,0.009165399,0.058770884,-0.040542208,-0.013569386,-0.045163203,0.022939026,-0.046184417,0.0067463974,0.008099507,0.05489027,-0.081646085,0.016479846,-0.023564521,-0.04470366,-0.012158833,0.049528897,0.041486833,-0.027572786,-0.01755212,-0.0122354245,-0.004675247,-0.0043018656,-0.028900366,-0.055809364,-0.028262107,-0.058975127,0.0049656546,-0.014233175,0.0011887574,0.005597531,0.0061560078,0.024394257,0.0838417,0.05351163,0.0136587415,-0.02240289,0.0061145206,0.0015262368,0.049401242,0.03638076,-0.033266056,0.028006803,0.044780247,-0.020934895,0.005166706,-0.018700987,-0.024930395,0.033929847,-0.0938496,-0.0065868325,0.056166787,0.0047486466,-0.06351953,0.009127103,-0.0098611,0.014756547,0.006874049,-0.03543614,-0.0234624,-0.022658193,0.025619715,-0.0434782,-0.008654792,0.013275786,-0.0054156273,-0.019403072,-0.06484711,-0.015867118,0.026526043,0.009701536,-0.021190198,0.026806876,-0.018381858,-0.025964374,-0.044499416,-0.0069123446,-0.031785294,0.039035916,0.0023408148,-0.028976956,-0.024611264,0.002385493,-0.026028201,0.03791258,-0.03852531,0.029793927,-0.038295537,0.04906935,0.023602815,0.020105157,-0.040899634,-0.007314448,-0.01784572,0.020692356,0.017169166,0.0011871617,0.039674178,-0.04283994,0.016977688,-0.0011919487,-0.031274687,0.0144374175,-0.0015908604,-0.023998536,0.009790893,-0.009688771,-0.06479605,-0.023921946,-0.0066698063,-0.028542941,-0.025836723,0.018471215,0.034542575,0.02166251,-0.05698376,-0.025811192,-0.0144757135,-0.03627864,-0.027291954,0.022607133,-0.05785179,-0.026551573,-0.041793197,-0.063111044,-0.0018190381,-0.015573518,0.008661174,0.03569144,-0.008839887,0.0044965344,0.030917265,-0.011054645,-0.010422769,-0.040440086,0.08001214,-0.022556072,0.016275603,-0.052490417,0.011341861,0.030023701,0.029615216,0.013326847,0.004145492,-0.03558932,-0.006290042,0.0047997073,-0.038933795,-0.012088625,0.014871433,-0.055094514,-0.017679773,0.042201683,-0.0075123077,-0.008795208,-0.04215062,0.022594366,-0.006028356,0.035487197,0.013786393,0.020462582,0.06745121,-0.0042508044,-0.032449085,-0.014054462,-0.015433102,-0.031632114,-0.009427085,0.03004923,-0.002479636,-0.010633394,0.032346964,-0.055094514,0.018764812,-0.03934228,0.0061847293,-0.035972275,-0.014297001,0.008699469,-0.042074032,-0.0043146308,0.00083532144,-0.017488295,0.004471004,0.015292685,0.01673515,-0.023283686,0.054481786,0.010467447,0.049605485,-0.036814775,0.028108925,-0.05785179,-0.02997264,-0.01567564,0.0022482672,-0.0626515,-0.04610783,-0.012075859,0.008265453,-0.003154595,-0.028823774,-0.0032008686,-0.0067400145,0.003122682,0.031708706,0.00692511,0.040337965,0.016901096,0.04541851,0.0075059254,0.018458448,0.0032997988,-0.01771807,0.0054283924,-0.00092148635,0.037580688,0.003354051,0.00035961904,-0.012663058,0.055094514,0.035385076,0.033802193,-0.046720557,0.051673446,-0.014667191,-0.0072953,-0.026245208,-0.019326482,0.0013945958,0.03484894,0.023334747,-0.017245756,-0.001000471,-0.011297183,0.03543614,0.0032232078,0.019747732,-0.06683848,-0.01782019,-0.0073463605,0.020909363,0.013467264,-0.020143453,0.005597531,0.018432919,-0.020194514,0.02319433,-0.028159985,0.02393471,0.05902619,-0.0014927281,-0.028645063,0.008259071,-0.032270372,0.035895683,-0.011941825,0.015177798,0.005565618,-0.041257057,0.003995501,0.028364228,-0.020513643,-0.015560754,0.03484894,0.013543855,-0.030508779,0.006854901,0.035359547,-0.02107531,-0.057545427,-0.021649744,0.053103145,0.031657644,0.012611997,-0.0035008504,0.026270738,0.04623548,0.050116092,-0.038882736,-0.009803657,-0.027598318,-0.059230432,-0.0008720213,0.019160533,0.033163935,-0.006797458,-0.02171357,0.034644697,0.018266972,-0.021509327,-0.013199195,0.04562275,-0.004550786,-0.04000607,-0.023232626,-0.035027653,-0.0011241336,0.01639049,-0.021151902,0.0054379664,0.0035678677,-0.00071165874,-0.067859694,0.030917265,0.019364776,-0.00016634625,-0.028798245,0.006905962,0.03278098,0.035921212,-0.059587855,0.021190198,-0.028696124,-0.019339247,0.027930211,-0.0023583667,0.020628529,-0.040899634,0.05067776,0.011616313,-0.0245985,0.016505377,0.026730286,0.05072882,0.015790526,0.024968691,-0.011507809,-0.040312435,0.04329949,-0.104674466,-0.015854353,-0.0030030084,-0.0063411025,0.00463376,0.0022961367,0.018266972,0.04416752,0.0046178037,0.0024955925,-0.017603181,-0.0030061996,-0.03755516,-0.0053741406,0.058209218,0.030381126,0.013275786,0.010633394,-0.0035168068,0.06770651,-0.0035774414,0.04258464,0.021266788,0.0034146854,-0.04983526,0.011073793,0.0107355155,-0.010971672,0.0030604517,-0.038270008,-0.07454865,0.04419305,-0.030764082,-0.00045595624,0.073782735,-0.0057985825,-0.078531384,0.019275421,-0.012509876,0.014360826,-0.0042157006,0.035334017,-0.041614484,-0.0051188366,-0.023079444,-0.031070447,0.04421858,0.029487563,-0.019632846,0.011475896,-0.036763716,0.0014057653,0.037478566,-0.026908997,0.010339795,-0.037861522,-0.020883834,0.025645245,0.0039540143,-0.014539539,0.015062911,-0.0053677578,0.015190563,0.031070447,8.4868494e-05,0.018981822,0.025389941,0.0477673,0.00060155906,0.08042063,0.030432187,-0.044601537,0.035410605,-0.03839766,0.0067272494,-0.026653694,0.012465198,-0.021177432,-0.038142357,0.009790893,0.06688954,-0.018586101,-0.013173665,-0.02383259,0.0011392923,-0.019352011,0.024624031,0.00364765,0.01713087,0.016696854,-0.00057443307,0.0271643,0.039572056,0.002778022,0.056626335,0.016428785,0.013824689,0.008661174,0.029564155,0.034772348,-0.0044358997,0.03755516,-0.014373592,0.011590783,0.033802193,0.024049597,0.015867118,-0.009714302,0.009356876,-0.01993921,-0.020462582,0.029462034,0.04628654,0.012005651,0.017437235,0.019709436,0.0007124566,0.0013028461,0.04769071,-0.068166055,-0.029896049,-0.0010084491,0.033266056,0.008367575,0.01358215,-0.008099507,0.010907846,-0.004222083,3.6949208e-05,0.011431218,-0.004624186,0.014565069,-0.00024313678,0.030942794,-0.03135128,-0.00015806883,0.0013315678,-0.012369459,0.0008488844,-0.010550421,-0.010141935,0.02639839,-0.005055011,-0.053817995,-0.017398939,0.02987052,0.0005991656,0.0030700255,-0.0018046772,-0.031964008,0.02999817,0.044397295,-0.015956474,0.011501427,0.017271288,0.0420485,0.02176463,-0.011316331,-0.020871067,0.044346232,-0.012107773,0.047486465,-0.009739832,0.0060698427,-0.006245364,-0.011565252,-0.0024365536,0.004665673,-0.0031162994,0.028976956,-0.026219677,0.023909181,0.022032699,0.003172147,0.043044183,0.04143577,-0.009235607,-0.0063283374,-0.04421858,0.0024684665,0.013684272,-0.019441368,-0.0039029536,0.021458266,-0.023730468,0.008342044,-0.016850036,-0.032525677,-0.03707008,0.012458815,-0.022313533,0.01318643,0.0023711321,-0.018075494,-0.0035870154,-0.0030795995,-0.0056900787,-0.028364228,-0.016505377,-0.0052241497,-0.016747914,0.0024509144,0.013505559,-0.017998902,-0.03438939,0.010256821,0.002592927,-0.043733504,0.02073065,0.035206363,-0.043835625,-0.007773994,0.0144757135,-0.01964561,-0.0434782,0.021636978,-0.0012206703,-0.051826626,0.009924927,-0.020194514,0.0039061448,-0.02592608,-0.033061814,-0.02427937,0.0037178583,-0.027572786,0.01665856,0.04789495,-0.025964374,0.008080359,-0.0017041514,0.00033049847,0.01358215,0.02277308,0.006388972,0.009765362,0.007403804,-0.027189832,0.047333285,-0.02025834,0.02314327,0.017628713,-0.02457297,-0.0042093177,0.017143635,0.020066861,-0.039495464,-0.0008165726,-0.06520454,0.011246122,0.013786393,0.030381126,-0.0019658376,0.00022179498,-0.0052975495,0.0058847475,0.01530545,0.028976956,0.0028992912,0.022607133,-0.025160167,0.010531273,0.004384839,0.022517776,-0.013097074,-0.029257791,-0.016773446,-0.0017121297,0.040414557,-0.033368178,-0.019786028,0.01678621,-0.009522824,0.0061847293,0.021956109,0.01649261,0.00712297,0.011341861,0.01755212,-0.023002854,-0.019811558,0.013939575,-0.014092757,0.013428968,-0.01318643,0.024777213,-0.071791366,-0.04340161,0.01755212,-0.008910095,-0.0058815563,-0.01636496,0.015050146,0.08042063,-0.027598318,0.04424411,0.026066495,-0.013033248,0.0036508413,0.005712418,-0.045392975,0.012184364,-0.011795025,0.017986137,-0.010550421,0.0003063643,0.022926262,-0.01776913,-0.008233541,-0.017922312,-0.013039631,-0.008769678,0.0030556647,0.008782444,-0.023436869,0.006152816,0.03781046,0.045878053,-0.018292502,-0.009510059,0.010135552,-0.017067045,0.0034912764,-0.03556379,0.004544404,-0.00016554842,0.0123311635,0.046158887,0.01882864,-0.011909912,-0.0038135974,-0.028900366,-0.02171357,-0.011086558,-0.026066495,0.017922312,0.011960973,0.010250439,-0.021943344,-0.025402706,0.010761046,-0.021879517,-0.028364228,0.013977871,-0.026755815,-0.042533576,0.021879517,-0.030279005,-0.0086292615,0.02780256,0.040312435,-0.0048762984,0.014156584,0.0052241497,-0.0017009601,0.009522824,0.033087343,-0.04130812,0.012746031,-0.032934163,0.009261138,-0.018930761,0.0072059436,0.024394257,0.025492063,-0.013326847,-0.017513826,-0.04059327,0.012458815,-0.00075952813,-0.01644155,0.00239028,0.023296451,-0.009931309,-0.023347512,0.0031641687,-0.0074293343,-0.021432735,0.030125823,0.027930211,-0.026934529,-0.037248794,0.009701536,0.02698559,-0.026092026,0.0076016644,0.015560754,0.0029056738,-0.014782078,-0.014373592,0.025836723,-0.032934163,-0.007633577,0.03719773,0.018152084,-0.044448353,-0.026219677,-0.031555522,-0.00478056,-0.025070813,0.003724241,-0.0066634235,-0.021598684,0.036202047,-0.008546287,0.019377543,-0.08848822,-0.010812107,0.018228676,0.0049560806,0.018305266,-0.004924168,0.015267154,0.0048220465,-0.026602633,-0.006159199,0.0024955925,0.030661961,-0.015867118,0.011680139,0.05055011,-0.028670592,-0.0029391826,0.0019722201,-0.0062294076,-0.006874049,-0.018726518,0.016339429,-0.050...', '2025-03-25 05:14:56.330291+00'), ('90', 'https://ai.pydantic.dev/troubleshooting/', '0', 'Troubleshooting Guide', 'This section provides troubleshooting information for PydanticAI, including solutions to common issues like Jupyter Notebook errors, API key configuration errors, and monitoring HTTPX requests.', 'Skip to content  [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  Troubleshooting  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../img/logo-white.svg) ](.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](..)
              * [ Installation  ](../install/)
              * [ Getting Help  ](../help/)
              * [ Contributing  ](../contributing/)
              * Troubleshooting  [ Troubleshooting  ](./) Table of contents 
                * Jupyter Notebook Errors 
                  * RuntimeError: This event loop is already running 
                * API Key Configuration 
                  * UserError: API key must be provided or set in the [MODEL]_API_KEY environment variable 
                * Monitoring HTTPX Requests 
              * Documentation  Documentation 
                * [ Agents  ](../agents/)
                * [ Models  ](../models/)
                * [ Dependencies  ](../dependencies/)
                * [ Function Tools  ](../tools/)
                * [ Common Tools  ](../common_tools/)
                * [ Results  ](../results/)
                * [ Messages and chat history  ](../message-history/)
                * [ Testing and Evals  ](../testing-evals/)
                * [ Debugging and Monitoring  ](../logfire/)
                * [ Multi-agent Applications  ](../multi-agent-applications/)
                * [ Graphs  ](../graph/)
                * [ Image, Audio & Document Input  ](../input/)
                * [ MCP  ](../mcp/) MCP 
                  * [ Client  ](../mcp/client/)
                  * [ Server  ](../mcp/server/)
                  * [ MCP Run Python  ](../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../cli/)
              * [ Examples  ](../examples/) Examples 
                * [ Pydantic Model  ](../examples/pydantic-model/)
                * [ Weather agent  ](../examples/weather-agent/)
                * [ Bank support  ](../examples/bank-support/)
                * [ SQL Generation  ](../examples/sql-gen/)
                * [ Flight booking  ](../examples/flight-booking/)
                * [ RAG  ](../examples/rag/)
                * [ Stream markdown  ](../examples/stream-markdown/)
                * [ Stream whales  ](../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../examples/chat-app/)
                * [ Question Graph  ](../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../api/agent/)
                * [ pydantic_ai.tools  ](../api/tools/)
                * [ pydantic_ai.common_tools  ](../api/common_tools/)
                * [ pydantic_ai.result  ](../api/result/)
                * [ pydantic_ai.messages  ](../api/messages/)
                * [ pydantic_ai.exceptions  ](../api/exceptions/)
                * [ pydantic_ai.settings  ](../api/settings/)
                * [ pydantic_ai.usage  ](../api/usage/)
                * [ pydantic_ai.mcp  ](../api/mcp/)
                * [ pydantic_ai.format_as_xml  ](../api/format_as_xml/)
                * [ pydantic_ai.models  ](../api/models/base/)
                * [ pydantic_ai.models.openai  ](../api/models/openai/)
                * [ pydantic_ai.models.anthropic  ](../api/models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../api/models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../api/models/cohere/)
                * [ pydantic_ai.models.gemini  ](../api/models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../api/models/vertexai/)
                * [ pydantic_ai.models.groq  ](../api/models/groq/)
                * [ pydantic_ai.models.instrumented  ](../api/models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../api/models/mistral/)
                * [ pydantic_ai.models.test  ](../api/models/test/)
                * [ pydantic_ai.models.function  ](../api/models/function/)
                * [ pydantic_ai.models.fallback  ](../api/models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../api/models/wrapper/)
                * [ pydantic_ai.providers  ](../api/providers/)
                * [ pydantic_graph  ](../api/pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../api/pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../api/pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../api/pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../api/pydantic_graph/exceptions/)
Table of contents 
              * Jupyter Notebook Errors 
                * RuntimeError: This event loop is already running 
              * API Key Configuration 
                * UserError: API key must be provided or set in the [MODEL]_API_KEY environment variable', '{"source": "pydantic_ai_docs", "url_path": "/troubleshooting/", "chunk_size": 4984, "crawled_at": "2025-03-25T05:14:56.026744+00:00"}', '[-0.009089604,-0.0006993345,0.036525838,-0.022950727,0.00058423204,0.010156917,-0.011984604,0.02389945,-0.0051098503,0.013017039,0.013847171,-0.07377717,-0.03454468,-0.022378704,0.0027537385,-0.001993365,-0.037028104,0.021136992,-0.004984284,0.077739485,0.05304478,0.029103475,0.015793448,0.03189384,0.01587716,0.020704485,-0.002424127,0.039065067,0.024485426,-0.013840196,0.04023702,-0.018486148,-0.04076719,0.0065852543,0.012305496,-0.0050331154,0.01071499,0.011475364,-0.009661628,0.028991861,-0.0056679226,-0.0508962,0.036972295,0.021304414,-0.044589985,0.010463857,-0.009040773,0.024778415,0.0223508,0.001607074,-0.070819385,0.021625305,-0.030024294,0.011287014,-0.022378704,-0.008126929,-0.02451333,-0.0047261757,-0.0069305617,-0.03577244,0.03175432,-0.0076665194,-0.025113259,0.05689548,-0.010477809,-0.027080463,-0.059099868,-0.0042343745,-0.06830806,-0.028684922,0.004175079,0.021388125,-0.026606102,-0.063229606,-0.02158345,-0.022378704,0.020746341,0.09107742,-0.022992583,-0.05248671,-0.013463496,0.034963235,-0.0033571543,0.008085074,-0.02228104,-0.038367476,-0.064178325,-0.007415387,-0.009159363,-0.0346842,-0.023160005,0.015863208,-0.03599567,0.0101708695,0.09582103,-0.0056574587,0.009612797,0.022769354,0.033623863,0.011796256,0.011259111,-0.04500854,-0.04333432,0.013533255,0.028308222,-0.010735918,0.01657475,-0.0173421,-0.026229402,-0.0049284766,-0.122329466,-0.004788959,-0.021471836,0.016825883,-0.08075307,-0.002792106,0.0020247565,0.004488995,-0.0044366755,-0.054551575,-0.037056006,0.005266808,0.027778054,-0.00069977046,0.009766267,-0.007854869,0.0040704403,-0.028768633,-0.05217977,-0.01441222,0.036135186,-0.020690534,0.03476791,-0.033595957,-0.008301327,-0.028084993,-0.02706651,-0.011775328,-0.026606102,0.035828248,0.042357694,-0.01596087,-0.002645612,0.017844364,-0.033009984,0.011231207,-0.027387403,-0.008901254,-0.03507485,-0.009787194,0.035605017,0.01841639,-0.044450466,-0.029131379,-0.026229402,0.0046808324,0.023104196,0.041604295,0.02274145,-0.04339013,-0.0281408,0.07087519,-0.028238462,-0.006686405,-0.019853426,-0.003805356,-0.031586897,-0.01206134,-0.0393162,-0.04696179,-0.014272701,-0.03091721,-0.021234654,0.018528003,0.011356773,-0.03337273,-0.029968487,-0.020146413,-0.01819316,-0.034907427,-0.041576393,-0.0016602654,-0.033540152,-0.0009478511,-0.02035569,-0.022071764,0.0039169705,0.017216533,-0.016686365,0.04364126,0.025699234,0.029577836,0.042413503,0.04132526,0.009284929,-0.017258389,0.0624483,-0.019560438,-0.0026595637,0.020160366,-0.0032403078,0.003001383,0.043111093,0.015542316,0.00528076,-0.028350078,-0.0045308503,0.01727234,-0.012472918,-0.036302608,0.044283044,-0.060550854,0.026313113,-0.0061980914,-0.015026099,-0.0017823437,-0.053128492,0.0073805074,0.0004974692,0.025782945,-0.034433067,0.03878603,0.02982897,-0.010498737,0.008447821,0.00039021467,0.041074127,-0.05505384,0.012110171,0.041771717,0.024178486,0.015779497,-0.0104568815,0.02158345,0.033735476,-0.05234719,0.034488875,-0.025043499,0.0030938138,0.001619282,0.00454829,0.014607545,-0.021988053,0.024038969,0.016756123,0.00085585634,-0.008147857,-0.047185022,0.03275885,0.04333432,0.03585615,0.009222146,0.027666438,0.0026979311,-0.017481618,-0.028629113,-0.01572369,-0.00998252,-0.038953453,-0.009410496,-0.004405284,0.039762657,-0.045817744,-0.016156197,0.00572373,-0.03808844,-0.023146052,0.014705207,-0.057425648,-0.04062767,0.03460049,0.03747456,0.05290526,-0.0047261757,-0.04285996,0.027387403,-0.010994026,0.042832058,-0.0030310308,0.01160093,0.0021834583,0.011998557,0.06228088,0.024680752,0.006770116,0.048580203,0.0035821272,-0.021388125,-0.009354688,0.00014856497,0.019937135,0.030889306,0.03306579,-0.020132462,0.0031252054,0.00078348134,0.06295057,0.0017744958,0.014774967,-0.011182375,0.0462363,0.019490678,-0.021471836,-0.029326703,0.0004017685,0.02991268,0.004318085,-0.013233292,0.04216237,-0.017077016,-0.03739085,-0.0012722306,0.0010088902,-0.02805709,0.0013489656,-0.024890028,0.07740464,-0.017174678,0.047129214,-0.026034078,-0.08097631,-0.060048588,0.013296075,0.008503628,-0.045120154,-0.004527362,0.03987427,0.018695425,-0.0021171873,-0.009759291,0.017983884,-0.04955683,-0.015932966,0.02652239,-0.019490678,-0.03739085,-0.0073247002,0.020244077,-0.0061387965,0.03878603,-0.042218175,-0.04492483,-0.060160205,-0.033651765,-0.03655374,-0.010338291,0.022964679,0.02667586,-0.007268893,0.0009696508,-0.0072409892,0.0080920495,0.005057531,0.034516778,-0.029494125,-0.0053156395,-0.010770797,-0.02035569,-0.014886581,0.026034078,-0.069033556,0.011335845,-0.0050889226,0.000807025,-0.004112296,0.021960149,-0.020369641,-0.03923249,-0.007638616,-0.003892555,0.045203865,-0.0032821633,-0.016086437,-0.014356412,-0.024890028,-0.0106243035,-0.009284929,0.0023962234,0.0041332236,0.019434871,0.033679668,0.0044924826,0.023955258,0.009361665,0.052626226,0.01672822,0.0005066251,0.0037809405,-0.023927353,0.054663192,0.058151145,-0.034823716,0.0017413603,-0.0017099687,0.02645263,0.003805356,0.0011614881,0.024080824,0.08365505,0.0075200256,-0.018988414,-0.001022842,-0.029940585,0.030945115,-0.008545483,0.008901254,0.07210296,0.036358416,-0.02212757,-0.034516778,0.018779136,-0.05287736,0.0058772,-0.015988775,-0.028740728,-0.053407528,0.0070038084,0.010449906,0.02112304,0.03462839,-0.0097523155,-0.080195,-0.04325061,0.01819316,-0.08309698,0.05558401,0.049277794,-0.06523866,0.0200348,-0.04871972,0.0016009702,0.018458243,0.027582727,0.0028287293,0.006655013,-0.0235088,-0.009243074,0.00046040973,0.011559075,0.003958826,0.034349356,-0.044896923,-0.022267088,0.04832907,-0.020188268,-0.013079822,0.0028984884,-0.049528927,-0.0040739286,-0.023006534,0.004980796,-0.02706651,0.011817183,0.006525959,-0.01510981,-0.04894295,0.06802902,-0.016379425,0.0400975,0.027722247,0.0354655,0.025573667,-0.042134464,0.03744666,-0.02258798,-0.0070107845,0.029856874,-0.0071572782,-0.008768712,-0.0095848935,0.04062767,-0.02320186,0.014049472,-0.052682035,-0.046626948,-0.037056006,0.012786834,0.014705207,-0.048496492,0.004401796,0.024192438,-0.024973739,0.006543399,0.02952203,0.002490398,0.06758257,-0.01764904,-0.02204386,-0.021709016,0.01129399,-0.026634006,0.011817183,0.037000198,-0.0173421,0.0071049593,-0.012410135,-0.032312393,-0.008161808,-0.013623943,-0.029131379,-0.015821353,-0.013993666,-0.015179569,0.029745258,0.012472918,-0.014468026,0.01764904,-0.020941667,0.0067736036,0.027359499,-0.046152588,0.0059818383,-0.0022253136,0.032396104,0.0017710079,0.032898366,-0.000803537,0.014705207,0.011273062,-0.0064422484,0.029242992,-0.03605148,-0.016184099,0.009026821,-0.00044580392,-0.02860121,-0.023383234,-0.009905785,-0.024345908,-0.032396104,0.008601291,-0.0033449463,0.012291544,-0.020927714,-0.054160926,0.032089163,0.0009888345,-0.014719159,-0.03864651,-0.02027198,-0.002861865,0.018528003,-0.020620774,-0.003446097,-0.0074293385,0.014886581,0.0037146693,-0.01395181,-0.010415026,0.033177402,0.073051676,-0.018765185,0.017788557,-0.021653209,0.02336928,0.014635448,-0.0057551214,-0.025141161,0.03521437,-0.0052423924,0.00034923124,-0.021150943,0.037641983,0.016979352,-0.013589063,0.02982897,0.031949643,-0.023411136,-0.036860682,-0.011154472,0.007192158,-0.0132402675,-0.01997899,0.0012513029,-0.011300966,-0.0037146693,-0.0033344824,-0.009703483,-0.009229122,-0.0040843925,-0.026103836,-0.02366227,0.0023212323,0.02952203,-0.058932446,0.000951339,-0.013484424,0.009633725,0.020369641,0.011663713,0.0077293026,-0.012954256,-0.011384677,-0.026801426,-0.01872333,0.009291905,0.045454998,-0.0054551577,-0.029159283,0.022518221,0.009570941,-0.0281408,0.00017614159,0.0065364228,-0.0048133745,0.01897446,0.008587339,0.021290462,-0.023690173,-0.020885859,-0.017300244,-0.015737642,0.00042029828,-0.033958703,-0.016393377,0.029856874,-0.023773884,0.013623943,0.04534338,-0.027666438,0.0034896964,0.010749869,0.007659544,-0.0077781337,-0.004775007,-0.0145656895,-0.0040076575,-0.055416588,-0.017621135,0.008594315,-0.019379064,0.04425514,0.03460049,0.011363749,-0.0009094836,0.021374173,-0.0065747905,-0.03127996,-0.010666159,-0.025782945,0.01788622,0.033651765,-0.011231207,-0.011642785,0.02982897,-0.037976827,-0.008873351,0.013533255,0.027917571,-0.007129375,0.003669326,-0.008273424,0.019867377,0.011273062,0.03663745,0.0008362366,0.003885579,-0.030861404,-0.023578558,0.03253562,-0.05042184,0.040878803,0.0056260675,-0.016086437,-0.030442849,0.03127996,0.020941667,0.032786753,0.019393016,-0.0005946959,-0.0039971936,0.028936053,0.016811932,0.025629474,-0.014021569,0.0009330273,0.02367622,-0.051203143,-0.023578558,0.033958703,-0.028322173,-0.02243451,-0.07986016,0.036274705,0.06434575,-0.018918654,0.023857595,0.025713185,-0.00087198813,0.022002004,0.016853787,-0.024094775,0.016602654,-0.0051621697,0.0025880607,-0.0092151705,-0.02367622,0.020899812,0.002432847,-0.1310354,-0.020983523,0.005716754,0.015905064,-0.0009905784,-0.02306234,-0.010449906,-0.0052214647,0.002936856,0.03415403,-0.02027198,-0.034516778,0.006818947,-0.016477088,0.009703483,-0.036274705,-0.0045901453,0.0027362986,0.030638175,-0.012884497,-0.004911037,-0.016770076,0.029075572,-0.009110532,0.006752676,-0.0017352563,-0.0339029,0.0115800025,0.031335764,-0.0077293026,0.0032594916,-0.012696147,0.00091994746,0.004618049,-0.018834943,0.011845087,-0.0050924104,-0.037809405,0.045148056,-0.025350438,0.0047401274,-0.013965761,-0.014579642,0.0007547057,-0.0040564886,-0.0047471034,-0.033428535,0.013289099,0.04601307,-0.008454797,-0.003303091,0.006822435,0.012431063,-0.009117507,-0.016993305,0.018876798,-0.010477809,0.011168424,0.022546124,-0.024387764,-0.021681113,-0.004562242,0.009633725,-0.038200054,0.0339308,-0.005793489,-0.017453713,0.04210656,-0.011956701,-0.018695425,-0.012145051,-0.0046424647,-0.017118871,0.010910315,0.023773884,0.02096957,-0.04062767,-0.014042497,-0.04534338,0.027652487,0.0008964038,-0.021262558,-0.008901254,-0.026424728,-0.005054043,0.012856592,-0.028238462,0.006093453,-0.01958834,-0.034321453,-0.03259143,-0.06295057,-0.0036937417,0.009738363,-0.026299162,0.017230485,-0.030498656,0.0037739645,-0.1117819,-0.011189352,-0.012556629,0.025155112,0.038953453,-0.018221064,0.005347031,0.03178222,-0.019699955,-0.027959427,0.014774967,0.010219701,-0.035549212,0.008126929,0.024262197,-0.016128292,0.043055285,8.109489e-05,0.015905064,0.013965761,-0.009054724,0.0023665756,-0.014914485,0.055556...', '2025-03-25 05:14:56.376311+00'), ('91', 'https://ai.pydantic.dev/troubleshooting/', '1', 'Troubleshooting PydanticAI', 'This section provides common solutions for issues encountered while using PydanticAI, including managing event loop conflicts in Jupyter notebooks with 'nest-asyncio'. It also suggests reaching out via Slack or GitHub for unresolved issues.', '* Monitoring HTTPX Requests 
Troubleshooting Below are suggestions on how to fix some common errors you might encounter while using PydanticAI. If the issue you're experiencing is not listed below or addressed in the documentation, please feel free to ask in the [Pydantic Slack](../help/) or create an issue on [GitHub](https://github.com/pydantic/pydantic-ai/issues). Jupyter Notebook Errors `RuntimeError: This event loop is already running` This error is caused by conflicts between the event loops in Jupyter notebook and PydanticAI's. One way to manage these conflicts is by using [`nest-asyncio`](https://pypi.org/project/nest-asyncio/). Namely, before you execute any agent runs, do the following: 
                        
                                                import nest_asyncio
                        
                        nest_asyncio.apply()
                        

Note: This fix also applies to Google Colab. API Key Configuration `UserError: API key must be provided or set in the [MODEL]_API_KEY environment variable` If you're running into issues with setting the API key for your model, visit the [Models](../models/) page to learn more about how to set an environment variable and/or pass in an `api_key` argument. Monitoring HTTPX Requests You can use custom `httpx` clients in your models in order to access specific requests, responses, and headers at runtime. It's particularly helpful to use `logfire`'s [HTTPX integration](../logfire/#monitoring-httpx-requests) to monitor the above.  Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/troubleshooting/", "chunk_size": 1568, "crawled_at": "2025-03-25T05:14:52.281455+00:00"}', '[-0.023709422,0.021728275,0.042556033,-0.021831192,0.02311765,-0.011462341,-0.009236769,0.03949426,0.0330877,-0.0007819253,0.0008635349,-0.05639832,-0.052333113,-0.026295202,-0.022886088,-0.00077066873,-0.008413436,0.03913405,-0.027736034,0.06257332,0.029279785,0.03836218,0.0023381375,0.029948743,0.03177551,0.00949406,0.012202054,0.018306298,0.029279785,0.009166013,0.01640234,-0.0054256367,-0.03036041,-0.0009905726,-0.009198175,-0.0062007275,0.01960562,0.019862913,-0.011764659,0.054082695,0.007963175,-0.016839735,0.0010444431,0.03836218,-0.027838951,-0.006319725,-0.013070414,-0.022281453,0.004390038,0.017958954,-0.03897968,0.04034332,-0.042221554,0.0087543465,0.018769423,0.021625359,0.0039944523,0.014151039,-0.007738045,-0.02732437,0.026989888,-0.03707572,-0.016749684,0.036278117,0.008239764,-0.0148971835,-0.025806349,-0.031749785,-0.0760554,-0.011642445,0.00067780254,0.0049528633,-0.017071297,-0.030103117,0.007114113,-0.029665722,-0.0019473758,0.08840539,-0.029485619,-0.0062875636,-0.0116681745,0.02373515,-0.0355577,-0.020300308,0.01780458,-0.039957386,-0.09344831,0.015553278,-0.025639107,-0.008059659,-0.002815735,0.029485619,-0.018589318,0.03560916,0.039442804,0.014176767,0.02558765,-0.0024346218,0.04114093,0.029459888,0.021921245,-0.046466865,-0.059537277,0.022898953,0.037101448,-0.023786608,0.0033158455,-0.0018557156,0.0028302076,-0.008040363,-0.10209331,-0.027298639,-0.03005166,-0.0029475968,-0.06663852,-0.04168124,-0.0014014352,0.00046232084,-0.010291664,-0.028610826,-0.036921345,0.007885988,0.011533096,-0.0102788,-0.010709763,-0.01132083,0.046415403,-0.058611028,-0.075232066,-0.034116868,0.04013749,-0.030540513,0.02819916,-0.049734466,-0.013392028,-0.065969564,0.015656194,0.0021210476,-0.036638323,0.0134692155,0.030566243,-0.018332027,-0.028404994,0.011314399,-0.054442905,0.024931556,0.000377093,-0.03342218,0.0073263785,0.028713742,0.028765202,0.033885304,-0.016904058,-0.028636556,-0.050609257,0.029151138,0.01547609,0.06560936,-0.0012012302,-0.046544053,-0.042401657,0.09288227,-0.008992341,0.0011401235,-0.029151138,-0.009217472,-0.002989407,-0.02732437,-0.030694889,-0.05202436,-0.026333796,-0.0025327143,0.021110777,0.061749984,0.038748115,-0.0423502,-0.014382601,-0.02148385,-0.026758326,-0.008837966,-0.053568114,-0.024648536,-0.038568012,0.022101348,-0.03949426,-0.022088485,0.001528473,0.02789041,-0.048705302,0.036869887,0.037899055,0.020416088,-0.012774528,0.03128666,-0.0070626545,-0.020776298,0.023966713,-0.006258618,-0.025381817,0.01008583,-0.027838951,0.014009528,0.020287443,0.015952079,0.031106556,-0.020068744,-0.022731714,-0.017251402,-0.0330877,-0.02969145,0.0061460533,-0.040986553,0.034837283,0.020673381,-0.0040555587,-0.011938331,-0.03162114,-0.005210155,0.0062264567,0.0168526,-0.018422078,0.01806187,0.030103117,-0.01839635,-0.0065287743,0.009391144,0.038053427,-0.031055097,-0.016080726,0.03218718,0.00935255,0.029485619,-0.00080363423,0.033962492,0.05578082,-0.0429677,0.028971035,-0.03859374,-0.0013660577,-0.026732598,0.0008068504,-0.014562705,-0.047856238,0.051303945,0.009191742,-0.0005925747,0.00086112285,-0.02940843,0.052796237,0.03257312,0.027067076,0.005255181,0.030386139,-0.029356971,0.014253954,-0.042813323,-0.00078875956,0.0055414177,-0.06771915,-0.018254839,0.030463327,0.048936862,-0.035068847,0.00239442,0.0013210316,-0.07224748,-0.011333696,-0.0057247384,-0.047907695,-0.01839635,0.04011176,0.048293635,0.036355305,-0.027375827,-0.017225673,0.04018895,-0.00704979,0.02494442,-0.020634787,4.8141672e-05,0.05086655,0.0039558583,0.04283905,0.03280468,0.020506142,0.053104986,-0.012298538,-0.028327806,-0.015540413,0.00012703773,-0.0025102012,0.039056864,0.0035281111,-0.005184426,0.025317494,0.008799373,0.031672597,0.009313956,-0.0068117953,-0.023104787,-0.0045122514,0.012420752,-0.07219602,-0.05768478,0.014176767,0.02662968,0.01777885,0.002989407,0.055317696,-0.010581117,-0.0061717825,-0.0004144807,-0.04564353,0.026784057,-0.021856923,-0.035712074,0.06638123,-0.009989346,0.03473437,-0.0049785925,-0.05758186,-0.05148405,0.0051072384,-0.0337052,-0.015193069,-0.023464995,0.04379103,-0.010034372,0.018666506,-0.0029025709,0.017547287,-0.016209371,0.0082654925,-0.0083619775,-0.015913486,-0.024133952,0.0071977326,-0.026076505,-0.016865464,0.052333113,-0.061492693,-0.0337052,-0.068233736,-0.03921124,-0.020274578,-0.0050589964,0.0029299082,0.02909968,-0.0017125972,-0.0047534625,-0.010722628,0.012542966,-0.008336248,0.031363845,-0.02513739,0.0054481495,-0.007184868,-0.003814348,-0.051972903,-0.008226899,-0.0791429,-0.008259061,0.007294217,0.0039172648,-0.0050043217,-0.0064998292,-0.0144083295,-0.031415306,-0.005435285,0.017199943,0.012131299,0.012787392,-0.0052391,-0.0008289614,-0.041089468,-0.005184426,0.018473538,0.026282337,0.03648395,0.0033673039,0.056912903,0.014845725,0.015733382,-0.031981345,0.049502905,0.032907598,-0.0041102334,-0.020493276,-0.015012966,0.007905285,0.037564576,-0.025767755,-0.028945306,-0.014961507,-0.011578122,-0.0061331885,0.014987236,0.036844157,0.081921645,0.006191079,-0.046749886,-0.030694889,-0.023207702,0.025021609,-0.024880098,-0.005721522,0.0023413536,0.055832278,0.00688255,-0.026989888,0.02359364,-0.03648395,0.0087543465,-0.019026713,-0.0021001427,-0.050351966,0.013417757,0.014022392,0.016891195,0.036586866,-0.0026002533,-0.07018915,-0.009288227,0.040857907,-0.07389415,0.03403968,0.008625701,-0.06689582,0.033911034,-0.04777905,-0.004682707,0.012735934,-0.012678044,-0.01865364,0.003348007,-0.022744577,0.038182072,-0.006676717,0.010510362,0.0067153107,0.02064765,-0.034245513,-0.022847494,0.048216447,-0.023516452,0.0001087459,-0.032084264,0.011089268,0.023773745,0.021869786,0.009918591,-0.02665541,0.0361752,0.04168124,-0.00012985186,-0.0813556,0.035917908,-0.0139966635,0.016132183,0.038670927,0.007783071,0.034837283,-0.03800197,0.017817443,-0.0049560796,0.01901385,-0.0101437215,-0.010336691,-0.009191742,-0.021380933,-0.0007791111,-0.015540413,0.035995096,-0.070600815,-0.045540612,-0.025973588,0.0070883837,0.00941044,-0.033010513,0.006869686,-0.011333696,-0.016916923,0.010394581,0.012324268,0.027916139,0.033242077,-0.008940883,-0.013533538,0.004209934,0.01547609,-0.042813323,0.023477858,0.041449677,-0.0139966635,-0.013687913,0.009313956,-0.020261714,-0.008979477,0.013224788,-0.016955517,-0.03283041,-0.033267803,-0.014614163,0.044228427,-0.009513357,0.013199059,-0.014048122,-0.0337052,0.014073851,0.03311343,0.00093107397,0.019991558,0.022873223,0.00323705,-0.03434843,0.024597077,0.011230779,0.0048628114,-0.035068847,-0.007937446,0.008464893,-0.04345655,-0.0306177,-0.012916039,-0.0015469658,-0.037255824,-0.027118536,-0.0111407265,0.008992341,-0.0060045426,-0.014562705,-0.015012966,0.0020261714,-0.019348329,-0.03648395,0.021818329,0.010510362,-0.016994111,-0.059897486,-0.009056664,-0.011874007,0.02879093,-0.009256066,0.01409958,0.016157912,0.0057858448,0.0035152466,0.012253513,-0.00941044,0.018422078,0.03275322,-0.0180876,0.012420752,-0.0032740356,0.0139580695,0.0324702,-0.008349112,-0.04970874,-0.0027208587,0.0045765745,-0.008998774,-0.012851716,0.012465778,0.0116874715,-0.009455467,0.016479528,0.014588434,-0.02822489,-0.03676697,0.0034798689,-0.00057770003,0.0018975256,-0.012073409,-0.0001821142,0.029382702,-0.010799815,-0.00076222635,0.006232889,0.0023204486,0.011462341,-0.010150154,-0.013816559,0.015334579,0.066947274,-0.06010332,-0.008040363,0.010452472,0.022821765,-0.0022979355,0.044048324,0.0014014352,-0.014035257,-0.023799473,-0.014382601,-0.00856781,0.014987236,0.028636556,0.007641561,0.018460672,0.017894631,0.011764659,-0.019065307,-0.011211482,-0.01502583,-0.025021609,0.009153149,0.042736135,0.04538624,-0.0052391,-0.017534424,-0.013662185,-0.026938431,0.0016161129,-0.022590203,-0.009783513,0.008895857,-0.009030935,0.024867233,0.037950512,-0.026603952,0.041089468,-0.012993226,0.008825102,-0.023966713,-0.02252588,0.0015228447,-0.019682808,-0.037847593,-0.03527468,0.017032703,-0.0016949085,0.03342218,0.03272749,-0.0009214256,-0.0067989305,0.0018653641,-0.031183742,-0.040008843,-0.008452029,-0.05212728,-0.012928903,0.019567026,0.017675932,0.0017640556,0.037796136,-0.050995197,-0.004168124,0.028996764,0.05274478,-0.003817564,0.0055317697,-0.01822911,0.039159782,0.02328489,0.024095358,0.010092263,-0.010716195,-0.017032703,0.003434843,0.02974291,-0.05150978,0.04417697,-0.0058405194,-0.00926893,-0.0016000322,0.02297614,0.00941044,0.01564333,0.031183742,-0.014691351,-0.03277895,0.053413738,0.015141611,0.027555931,-0.02884239,-0.01072906,0.05516332,-0.052436028,-0.025356088,0.017392913,-0.015411767,-0.018036142,-0.037255824,0.0058244388,0.040600616,-0.034425616,0.01348208,0.020210255,-0.01530885,0.0006291584,0.03177551,-0.026552493,-0.02822489,-0.0115909865,0.005190858,-0.0044961707,-0.04901405,0.010703331,0.0115909865,-0.04788197,-0.017148485,0.015437496,0.03730728,0.014253954,-0.0054803113,-0.01775312,-0.016646767,0.0010122816,0.047367383,0.0036728377,-0.059279986,0.0057954933,-0.025008744,0.02451989,-0.04018895,0.0010959015,-0.0015702829,0.055832278,0.005232668,-0.025356088,0.016698224,0.016994111,-0.0029154355,-0.019991558,-0.0016965165,-0.015411767,0.022371504,0.03730728,-0.007879555,0.014112445,-0.050454885,-0.029382702,-0.0013395244,-0.037358742,0.0111021325,-0.012690908,-0.033293534,0.031724054,-0.04633822,-0.0015678707,-0.01763734,-0.012530101,0.011365857,0.03005166,0.026603952,-0.006155702,0.0022979355,0.032933325,0.0002727693,-0.025060203,0.0037789703,0.010304528,-0.009346117,0.009211039,0.011256508,0.00020311966,-0.009404008,0.023516452,0.0017769202,-0.04132103,-0.021985568,-8.432331e-05,-0.011751794,0.023259161,-0.002259342,-0.015669059,0.036638323,-0.0027530203,0.0060785143,-0.005451366,0.002503769,-0.052693322,-0.002995839,0.038207803,0.021638224,-0.03584072,-0.027350098,-0.022294318,0.046775613,-0.0028655853,-0.012961064,-0.02463567,-0.025664838,-0.030977909,0.003836861,-0.03344791,-0.015038694,-0.026115097,-0.028945306,-0.01654385,-0.056141026,-0.023876661,-0.01775312,-0.030257493,0.0007167983,-0.03128666,0.0017174215,-0.08979477,0.023992442,-0.010066534,0.022989005,0.029073952,-0.016530985,0.012793825,0.035429053,-0.031080825,-0.019142495,0.01766307,0.03254739,-0.026526764,3.977467e-05,0.033525094,-0.026938431,0.024031036,0.022873223,0.022358641,0.008001769,-0.0004168928,-0.0020953184,0.0040...', '2025-03-25 05:14:56.429237+00'), ('92', 'https://ai.pydantic.dev/api/exceptions/', '0', 'PydanticAI Exceptions Documentation', 'This section provides an overview of the exceptions in PydanticAI, including various categories and how to handle them effectively within the framework.', 'Skip to content  [ ![logo](../../img/logo-white.svg) ](../.. "PydanticAI") PydanticAI  pydantic_ai.exceptions  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../../img/logo-white.svg) ](../.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](../..)
              * [ Installation  ](../../install/)
              * [ Getting Help  ](../../help/)
              * [ Contributing  ](../../contributing/)
              * [ Troubleshooting  ](../../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../../agents/)
                * [ Models  ](../../models/)
                * [ Dependencies  ](../../dependencies/)
                * [ Function Tools  ](../../tools/)
                * [ Common Tools  ](../../common_tools/)
                * [ Results  ](../../results/)
                * [ Messages and chat history  ](../../message-history/)
                * [ Testing and Evals  ](../../testing-evals/)
                * [ Debugging and Monitoring  ](../../logfire/)
                * [ Multi-agent Applications  ](../../multi-agent-applications/)
                * [ Graphs  ](../../graph/)
                * [ Image, Audio & Document Input  ](../../input/)
                * [ MCP  ](../../mcp/) MCP 
                  * [ Client  ](../../mcp/client/)
                  * [ Server  ](../../mcp/server/)
                  * [ MCP Run Python  ](../../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../../cli/)
              * [ Examples  ](../../examples/) Examples 
                * [ Pydantic Model  ](../../examples/pydantic-model/)
                * [ Weather agent  ](../../examples/weather-agent/)
                * [ Bank support  ](../../examples/bank-support/)
                * [ SQL Generation  ](../../examples/sql-gen/)
                * [ Flight booking  ](../../examples/flight-booking/)
                * [ RAG  ](../../examples/rag/)
                * [ Stream markdown  ](../../examples/stream-markdown/)
                * [ Stream whales  ](../../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../../examples/chat-app/)
                * [ Question Graph  ](../../examples/question-graph/)
              * API Reference  API Reference 
                * [ pydantic_ai.agent  ](../agent/)
                * [ pydantic_ai.tools  ](../tools/)
                * [ pydantic_ai.common_tools  ](../common_tools/)
                * [ pydantic_ai.result  ](../result/)
                * [ pydantic_ai.messages  ](../messages/)
                * pydantic_ai.exceptions  [ pydantic_ai.exceptions  ](./) Table of contents 
                  * exceptions 
                  * ModelRetry 
                    * message 
                  * UserError 
                    * message 
                  * AgentRunError 
                    * message 
                  * UsageLimitExceeded 
                  * UnexpectedModelBehavior 
                    * message 
                    * body 
                  * ModelHTTPError 
                    * message 
                    * status_code 
                    * model_name 
                    * body 
                  * FallbackExceptionGroup 
                * [ pydantic_ai.settings  ](../settings/)
                * [ pydantic_ai.usage  ](../usage/)
                * [ pydantic_ai.mcp  ](../mcp/)
                * [ pydantic_ai.format_as_xml  ](../format_as_xml/)
                * [ pydantic_ai.models  ](../models/base/)
                * [ pydantic_ai.models.openai  ](../models/openai/)
                * [ pydantic_ai.models.anthropic  ](../models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../models/cohere/)
                * [ pydantic_ai.models.gemini  ](../models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../models/vertexai/)
                * [ pydantic_ai.models.groq  ](../models/groq/)
                * [ pydantic_ai.models.instrumented  ](../models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../models/mistral/)
                * [ pydantic_ai.models.test  ](../models/test/)
                * [ pydantic_ai.models.function  ](../models/function/)
                * [ pydantic_ai.models.fallback  ](../models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../models/wrapper/)
                * [ pydantic_ai.providers  ](../providers/)
                * [ pydantic_graph  ](../pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../pydantic_graph/exceptions/)
Table of', '{"source": "pydantic_ai_docs", "url_path": "/api/exceptions/", "chunk_size": 4999, "crawled_at": "2025-03-25T05:14:53.327912+00:00"}', '[-0.011920278,-0.00013434552,0.04086116,-0.01417408,0.0025483344,0.010742153,-0.02391373,0.02779203,-0.0022501445,0.012161757,0.006069902,-0.08330291,-0.023474678,-0.018601194,0.014152128,-0.0053125364,-0.022420952,0.009629887,-0.0032947238,0.06451146,0.05795494,0.015088774,0.017796265,0.018088967,0.003433757,0.022362411,0.0010464087,0.045690738,0.008122473,-0.03535837,0.039661083,-0.026606586,-0.04080262,0.00026663297,0.009629887,0.00069745333,0.0034209513,0.017547468,-0.009659157,0.012608127,0.0093664555,-0.05125207,0.03884152,0.01625958,-0.0673214,0.011159253,0.013691123,0.027528597,0.0053052185,-0.010683613,-0.075868286,0.0021659927,-0.02201117,0.016157135,-0.020767188,-0.01930368,-0.032694783,0.0065931063,0.0006238205,-0.020664742,0.018747546,-0.009395725,-0.01492047,0.051310614,-0.03600231,-0.016303485,-0.066443294,0.011473907,-0.05783786,-0.014042365,0.015805893,0.04214905,-0.025948009,-0.0609405,-0.027704218,-0.019406125,0.04586636,0.09653303,-0.007460235,-0.055291355,-0.018264588,0.038578086,-0.0011598306,0.0052613136,-0.020694012,-0.029592143,-0.04381745,0.0006343395,-0.004983247,-0.042207588,-0.027118815,-0.0028373774,-0.033514347,0.011393415,0.09758675,-0.0018769498,-0.0010473233,0.010368958,0.01221298,0.014181399,0.015381476,-0.03928057,-0.04732987,0.032460622,0.020796457,-0.01867437,0.019947622,-0.026796842,-0.02442596,0.009929906,-0.1255105,-0.00116166,-0.032050837,0.032285,-0.07563412,0.0045698057,-0.0022135568,0.012337377,0.009842095,-0.042061236,-0.030001927,0.014408242,0.028362798,-0.0034868093,0.031377625,0.015205855,-0.007335837,-0.033163104,-0.046188332,-0.022581939,0.031758137,-0.0025062584,0.034187563,-0.02302099,-0.015454651,-0.014591181,-0.0325777,-0.008276141,-0.040187947,0.02391373,0.03412902,-0.030031197,-0.0040722126,0.019801272,-0.027923744,0.016771808,-0.036558446,-0.0072004623,-0.03600231,0.015498556,0.029138457,0.019713461,-0.039192762,-0.04601271,-0.03606085,0.0040612365,0.013830156,0.039602544,0.018835356,-0.051134992,-0.02963605,0.055496246,-0.03073368,-0.003442904,-0.0256114,-0.0119861355,-0.05432544,-0.01804506,-0.06462854,-0.057252456,-0.014086271,-0.023621028,-0.024396688,-0.007061429,0.02400154,-0.039602544,-0.026621222,-0.032285,-0.026943194,-0.04434431,-0.023299057,0.012710572,-0.03708531,-0.02290391,-0.005652802,-0.014986328,-0.0011506836,0.024791837,-0.021747738,0.053769305,0.018923167,0.03222646,0.056579243,0.036470633,0.02823108,-0.02733834,0.049964186,-0.014357019,0.016157135,0.02883112,-0.0083566345,0.00360389,0.04937878,0.008239553,-0.00399172,-0.03167033,0.015571732,0.017240131,-0.015205855,-0.02635779,0.041797806,-0.06334066,0.023840556,-0.0032965532,-0.025304064,0.002019642,-0.053857118,-0.00089228293,-0.0054369345,0.035270557,-0.02883112,0.05643289,0.028362798,-0.009095706,-0.0008419748,0.018337764,0.03887079,-0.08025881,0.008942038,0.05057886,0.01694743,0.01352282,-0.014949741,-0.003911227,0.006450414,-0.055320624,0.022860004,-0.0020415946,0.0026398036,-0.005810129,0.010661661,0.0007294676,-0.0008223089,0.030294629,0.019098787,-0.00035307146,-0.012564221,-0.046393223,0.015922973,0.03433391,0.054823034,0.0055027925,0.024206432,0.005685731,-0.004990564,-0.015542462,-0.014686309,-0.0131276725,-0.026548047,0.008422492,-0.017913345,0.03711458,-0.018235317,-0.012059311,-0.022435587,-0.031611785,-0.017313307,0.016669363,-0.04252956,-0.051603314,0.03401194,0.030236088,0.0612332,-0.010120162,-0.056667052,0.023723474,-0.010822646,0.041944157,0.0035307144,0.008993261,-0.00058814755,-0.0021605047,0.061877143,0.016683998,0.010566533,0.043144234,0.011364144,-0.018732911,-0.01605469,-0.0051698443,0.02138186,0.024894282,0.035299826,-0.037992682,0.027806664,-0.02138186,0.061116118,-0.003779511,0.03775852,-0.006885808,0.060530715,0.012534951,-0.013361834,-0.020181784,0.004613711,0.00768342,0.0057552475,-0.011400732,0.05900867,-0.025626035,-0.033777777,0.008466397,-0.014247256,-0.034655884,-0.0049942234,-0.030792221,0.063926056,-0.02468939,0.052393608,-0.012710572,-0.06322357,-0.05233507,0.013039862,0.02454304,-0.058745235,0.01784017,0.028611593,0.0032892355,-0.012220297,-0.009820143,0.011547083,-0.036236472,-0.01608396,0.017079145,-0.0014378972,-0.034890044,-0.025172349,0.028523782,-0.019259773,0.03038244,-0.04709571,-0.05227653,-0.06375044,-0.017635278,-0.020181784,0.006055267,0.01057385,0.04103678,0.0005666522,0.0123886,-0.0051808204,-0.009732332,0.01519122,0.04097824,-0.036412094,-0.0026434625,-5.0679704e-05,-0.01694743,-0.011627576,0.049671482,-0.06937031,-0.0046320045,-0.0062272293,0.002186116,-0.006885808,0.025069902,-0.018952437,-0.02034277,-0.0063662627,-0.0036459658,0.033309456,-0.0049100714,-0.018996341,-0.025860198,-0.027513962,-0.026489506,-0.028245715,0.0014744849,0.0007747449,0.014488735,0.03240208,0.010178702,0.012022723,0.0103396885,0.051310614,0.005060081,-0.00025565666,0.0070065474,-0.023708839,0.05453033,0.054793764,-0.023840556,-0.0029947045,-0.009798191,0.018952437,0.00491373,-0.0011269016,0.015205855,0.07639515,0.0046868864,-0.0059857504,0.009564029,-0.022552667,0.013003274,-0.020972079,0.018952437,0.068960525,0.0211477,-0.0005401262,-0.02736761,0.032958213,-0.04214905,0.014196034,-0.029211631,-0.027631043,-0.0581891,0.019084152,0.019406125,0.025055267,0.031494707,-0.018528018,-0.07657077,-0.04100751,0.0020159832,-0.06966301,0.061994225,0.060296554,-0.045310225,0.01313499,-0.049583673,0.0058064703,0.025391875,0.039719623,0.00051771617,0.016157135,-0.029943386,-0.0009503659,0.01792798,0.013032544,0.0025977278,0.033543617,-0.05125207,-0.022055075,0.050227616,-0.027411517,-0.027572501,0.00026388888,-0.033572886,-0.0016546794,-0.029650684,0.00348498,-0.017049875,-0.014693626,-0.0066223764,-0.023401503,-0.04973002,0.07979049,-0.0044929716,0.061994225,-0.001962931,0.04607125,0.033572886,-0.051310614,0.026138265,-0.024821106,-0.007829771,0.02016715,-0.010164067,-0.005682072,-0.0020214713,0.046334684,-0.033426538,-0.006132101,-0.03737801,-0.016508378,-0.026050454,0.022289237,0.0075224345,-0.028640864,-0.005477181,0.024030812,-0.029445793,0.008751782,0.016566917,-0.0070358175,0.07059965,-0.021045255,-0.031319086,-0.009732332,0.020986713,-0.03073368,0.0021092817,0.038343925,-0.019098787,0.013976507,-0.012264202,-0.027806664,-0.006743116,-0.030177549,-0.03193376,0.0003039067,-0.006578471,-0.017957252,0.03910495,-0.0011031196,-0.022318507,0.014422878,-0.010039669,0.0014927788,0.030177549,-0.05581822,-0.0015037551,-0.0056893895,0.037056036,0.017430387,0.03556326,-0.001870547,0.021352591,0.002380031,-0.0052247257,0.029314078,-0.035270557,-0.020459851,0.012571539,0.0028428654,-0.021616023,-0.021337956,-0.012417871,-0.02719199,-0.018235317,0.021659927,0.010237243,0.025143078,-0.026021183,-0.058511075,0.027601773,0.00061284425,-0.007968805,-0.036470633,-0.02624071,0.0030934913,0.018249953,-0.029372618,0.005012517,0.0007966975,0.012893511,0.007829771,-0.006787021,-0.005279607,0.0306166,0.068433665,-0.009725015,0.023416137,-0.029504335,0.024235703,0.022084344,-0.018893896,-0.01778163,0.03041171,0.00428808,0.003124591,-0.012571539,0.03208011,0.014357019,-0.017488929,0.029299442,0.026870018,-0.014649721,-0.033543617,-0.019186597,0.0003235726,-0.01307645,-0.027557867,-0.0011662334,-0.013142307,-0.010712883,-0.0010592144,-0.010332371,-0.011188523,-0.006051608,-0.032636244,-0.023811284,0.0014040535,0.024879646,-0.053447336,0.0060113617,-0.017547468,0.007423647,0.016069325,0.017635278,0.018367033,-0.016786443,-0.0072150975,-0.028187176,-0.016157135,-0.0030221452,0.044988256,-0.011898325,-0.03887079,0.023840556,0.00720778,-0.03752436,-0.005813788,0.033455808,-0.0036880418,0.012556904,-0.00021140839,0.0043685734,-0.018996341,-0.01706451,-0.011686116,-0.005316195,0.0020946467,-0.03690969,-0.015952244,0.025099173,-0.039865974,0.023430772,0.06708723,-0.03901714,-0.0011927595,0.004983247,0.0152790295,0.005393029,-0.0035362027,-0.010654342,-0.0068162913,-0.049876373,-0.013215483,0.0037008475,-0.016523013,0.043319855,0.048939727,0.012520316,-0.008554208,0.017284038,0.0030550743,-0.0345388,-0.00031305364,-0.029577509,0.01942076,0.036704797,-0.009644521,-0.024089351,0.034977857,-0.025230888,-0.009783555,0.010090892,0.008663971,-0.011788562,0.01277643,0.0014049683,0.010800693,4.4219683e-05,0.025918737,-0.014810707,0.009190834,-0.027060274,-0.027396882,0.021791643,-0.057398807,0.03582669,0.016874254,-0.014378972,-0.01930368,0.02400154,0.03073368,0.04083189,0.004653957,0.0029947045,-0.010698248,0.031436164,0.026606586,0.034597345,-0.0034355866,-0.008276141,0.010815329,-0.04610052,-0.01804506,0.02787984,-0.015352205,-0.006179665,-0.08716657,0.02474793,0.07580975,-0.023547854,0.018249953,0.02054766,0.011400732,0.029036012,0.010010399,-0.031816676,0.014547275,0.0016830349,0.0036642598,-0.010786058,-0.024177162,0.012198344,-0.004771038,-0.10150896,-0.019186597,0.0025154054,0.0019739072,0.004653957,-0.027894475,0.0026910265,-0.010317735,0.012154439,0.026577316,-0.03576815,-0.030001927,0.013061814,-0.0139691895,0.017854804,-0.018088967,0.00092612655,0.0045039477,0.029914116,-0.006662623,-0.025889467,-0.022611208,0.038168304,-0.005440593,0.011203159,-0.0024385713,-0.03041171,-0.0069553247,0.02888966,-0.027060274,-0.013003274,0.009761603,0.0029325054,0.0009137782,0.0003551295,0.004097824,-0.007423647,-0.041417293,0.0425881,-0.02180628,0.010625073,-0.011276334,-0.017298672,-0.012534951,-0.025025997,-0.020972079,-0.039192762,0.009271327,0.055730406,-0.01319353,-0.0016784614,0.012900828,0.013874061,-0.016508378,-0.018937802,0.012769112,-0.020898903,0.0059308684,0.014657039,-0.0353291,-0.0048588486,-0.0020781823,0.02466012,-0.027557867,0.032958213,-0.0056564608,-0.010303101,0.026167534,-0.019010976,-0.025186984,-0.004577123,-0.0152790295,-0.016069325,0.017357212,0.01497901,0.01786944,-0.034597345,0.0022812441,-0.0375829,0.018103601,-0.005144233,-0.013837474,-0.006951666,-0.004789332,-0.003892933,0.009637204,-0.011459272,-0.0022867322,-0.027148085,-0.043319855,-0.029826306,-0.04747622,0.009044483,0.016713269,-0.023094166,0.009981128,-0.032928944,-0.001197333,-0.10221144,-0.011298287,-0.004584441,0.0086347,0.049905643,-0.023225881,0.000988783,0.0356218,-0.012395918,-0.02048912,0.0074456,0.005433276,-0.024704026,-0.006966301,0.03216792,-0.015527827,0.038080495,-0.0074199885,0.02063547,0.010625073,-0.013932602,0.009044483,-0.010068939,0.0...', '2025-03-25 05:15:03.471862+00'), ('93', 'https://ai.pydantic.dev/api/exceptions/', '1', 'Pydantic AI Exceptions Overview', 'This document outlines various exceptions in the `pydantic_ai` module, including `ModelRetry`, `UserError`, `AgentRunError`, `UsageLimitExceeded`, `UnexpectedModelBehavior`, `ModelHTTPError`, and `FallbackExceptionGroup`. Each exception is accompanied by a brief description, detailing its usage and relevant attributes.', 'contents 
              * exceptions 
              * ModelRetry 
                * message 
              * UserError 
                * message 
              * AgentRunError 
                * message 
              * UsageLimitExceeded 
              * UnexpectedModelBehavior 
                * message 
                * body 
              * ModelHTTPError 
                * message 
                * status_code 
                * model_name 
                * body 
              * FallbackExceptionGroup 
`pydantic_ai.exceptions` ModelRetry Bases: `[Exception](https://docs.python.org/3/library/exceptions.html#Exception)` Exception raised when a tool function should be retried. The agent will return the message to the model and ask it to try calling the function/tool again. Source code in `pydantic_ai_slim/pydantic_ai/exceptions.py`
                        
                                                22
                        23
                        24
                        25
                        26
                        27
                        28
                        29
                        30
                        31
                        32
                        33

| 
                        
                                                class ModelRetry(Exception):
                            """Exception raised when a tool function should be retried.
                        
                            The agent will return the message to the model and ask it to try calling the function/tool again.
                            """
                        
                            message: str
                            """The message to return to the model."""
                        
                            def __init__(self, message: str):
                                self.message = message
                                super().__init__(message)
                          
  
---|---  
message `instance-attribute`
                        
                                                message: [str](https://docs.python.org/3/library/stdtypes.html#str) = message
                        

The message to return to the model. UserError Bases: `[RuntimeError](https://docs.python.org/3/library/exceptions.html#RuntimeError)` Error caused by a usage mistake by the application developer  You! Source code in `pydantic_ai_slim/pydantic_ai/exceptions.py`
                        
                                                36
                        37
                        38
                        39
                        40
                        41
                        42
                        43
                        44

| 
                        
                                                class UserError(RuntimeError):
                            """Error caused by a usage mistake by the application developer  You!"""
                        
                            message: str
                            """Description of the mistake."""
                        
                            def __init__(self, message: str):
                                self.message = message
                                super().__init__(message)
                          
  
---|---  
message `instance-attribute`
                        
                                                message: [str](https://docs.python.org/3/library/stdtypes.html#str) = message
                        

Description of the mistake. AgentRunError Bases: `[RuntimeError](https://docs.python.org/3/library/exceptions.html#RuntimeError)` Base class for errors occurring during an agent run. Source code in `pydantic_ai_slim/pydantic_ai/exceptions.py`
                        
                                                47
                        48
                        49
                        50
                        51
                        52
                        53
                        54
                        55
                        56
                        57
                        58', '{"source": "pydantic_ai_docs", "url_path": "/api/exceptions/", "chunk_size": 4139, "crawled_at": "2025-03-25T05:15:00.859449+00:00"}', '[-0.019659562,0.04781282,-0.0053473297,-0.010378531,-0.0063165887,0.016701085,-0.0111658685,-0.0018937837,-0.014398721,-0.03445195,-0.030395973,-0.07043086,0.010754306,-0.004387017,-0.017977525,0.0014919138,0.0026915588,0.018072959,-0.008201426,0.047574233,0.026554724,0.007736181,-0.019409046,0.021448964,0.02755679,0.007992662,-0.0023590282,0.0014643272,8.616157e-05,-0.0032179412,0.005502411,-0.02917918,-0.058692385,-0.033473745,0.003554945,-5.312287e-05,-0.00038807656,0.00049693184,-0.010939211,0.0015791472,0.008284931,-0.030944724,0.034952983,0.05129619,-0.04924434,0.03705255,0.024765322,0.008672635,-0.00041752713,-0.007795828,-0.030228963,0.02645929,0.018108748,0.008529482,-0.028057823,-0.022200514,-0.006489564,0.04774124,-0.0059050266,-0.039844017,0.014816248,-0.0013882776,-0.024693746,0.014160134,-0.020888286,0.0056574927,0.003065842,0.010533613,-0.052775428,0.006948844,-0.007259007,0.02408535,-0.0077779335,-0.009632947,0.005609775,-0.035334725,0.038412496,0.051343907,0.030324398,-0.036241353,0.0020473741,-0.013432444,-0.021592116,0.03271027,-0.03175592,-0.01604497,-0.087704554,-0.031469617,-0.0060750195,-0.057547167,-0.012185827,-0.009448042,0.0117086535,0.035454016,0.09247629,-0.0011094292,-0.042420756,-0.027461356,0.027604507,0.014995188,0.04774124,-0.0006952572,-0.04285021,0.05477956,0.009668735,-0.05182108,-0.017249834,-0.042802494,-0.042253744,-0.0015731825,-0.057404015,0.007533382,-0.047502656,0.00994311,-0.06456162,-0.02681717,-0.0371957,0.05578162,-0.0029405837,0.020924073,-0.029155321,-0.0020130773,0.015973395,-0.0066506104,0.017488422,0.030562986,-0.00073924667,-0.018168394,-0.0793063,-0.0022934168,0.02917918,0.026483148,-0.008571235,0.0022770138,-0.0028764636,-0.026960323,-0.028702008,0.03065842,-0.053538907,-0.018275758,0.012018817,-0.026650159,-0.037672874,0.014792389,0.011273232,0.025600377,-0.024765322,-0.031994507,-0.006441847,0.045856405,-0.011923381,0.017297553,-0.011821982,-0.02005323,-0.048671734,-0.02282084,0.018096818,0.02517092,-0.0009111038,-0.029918801,-0.05086673,0.041728854,-0.027198909,-0.00035471166,-0.013909617,-0.01105254,-0.049530644,-0.06088738,-0.038173907,-0.08527096,0.009966969,-0.0014158643,-0.03249554,-0.016569862,0.048242275,-0.025767388,-0.0113209495,-0.043828417,-0.004136501,-0.015937606,-0.015651302,0.0057916977,-0.020077089,-0.021425106,-0.0055710045,-0.043732982,0.019075025,0.013742607,0.017416846,0.031851355,0.02208122,0.01808489,0.03616978,0.02008902,0.0052697887,-0.012704753,0.020733204,-0.022427171,0.014744672,0.014553802,-0.020912144,-0.008457907,0.045188364,-0.007097961,0.018466627,-0.05401608,-0.004819456,0.03044369,-0.032447822,0.006060108,0.011428313,-0.022200514,0.024574453,-0.057022274,0.0027333114,0.007426018,0.0053383824,0.001984745,-0.035263147,0.0040112427,-0.0022665758,0.03469054,0.036408365,0.012788259,-0.0034177578,0.02260611,0.0037189736,-0.04726407,-0.025433365,0.055065863,-0.015567797,-0.014995188,0.018860297,-0.047168635,0.05163021,-0.046047278,0.023298014,0.027246626,0.030873148,-0.032519396,0.010682729,0.010802023,-0.0067400807,0.0697151,0.03726728,0.012657036,0.0054099583,-0.02588668,0.017619645,0.0191466,0.087322816,-0.0054010116,0.017810514,-0.008559306,-0.014386792,0.014947471,0.003304429,0.003492316,-0.050389558,-0.007461806,0.013002987,0.00085816736,-0.0053682057,0.0098118875,-0.046094995,-0.027270485,0.045283798,-0.002560336,-0.004070889,-0.02917918,0.0016164264,0.013754536,0.03781603,-0.020196384,-0.019194318,0.027819235,-0.00057670934,0.020673556,0.012692824,-0.018693285,0.033521462,0.0339032,0.015007118,-0.024479019,0.005538199,0.017440705,0.021365458,-0.009400325,0.013527879,-0.025123203,-0.024312008,-0.013181928,0.018347334,-0.0059080087,-0.0020011477,-0.02081671,0.009292961,-0.012967199,0.013038775,-0.014482226,0.044114724,0.0034624927,-0.032757986,-0.03316358,-0.007921086,-0.015317281,0.023966057,-0.023321873,0.056640536,0.001798349,0.017058965,0.014255568,-0.054493252,-0.019540269,0.0023769222,-0.00079479266,0.039152116,-0.011511819,0.03228081,0.026936464,-0.0017058965,-0.01661758,0.0019623775,0.014160134,-0.050389558,0.038078472,0.008994727,0.0049655903,-0.011762335,-0.0049327845,-0.024001844,-0.038627222,-0.02810554,0.030801572,0.059408143,-0.019826574,-0.032901138,0.02574353,0.023775186,0.02937005,-0.009066303,-0.0051236544,-0.042730916,-0.019397117,-0.010414319,0.011064469,-0.01258546,0.043732982,0.004190183,0.03488141,0.008004591,-0.01084974,0.028081682,0.02478918,-0.0565451,-0.013277362,0.007795828,-0.008195461,-0.019265894,0.028916735,-0.07205325,0.01806103,0.009400325,0.007885298,0.002436569,0.031827495,0.005547146,-0.046071135,-0.02316679,0.010599224,-0.017392987,-0.0036295035,-0.01863364,0.005767839,-0.0049059438,-0.010438178,-0.03228081,0.019910078,-0.013050705,0.01606883,0.07353249,0.0023456076,-0.019003449,-0.010342743,0.04800369,0.008785963,0.003402846,0.002180088,-0.04578483,0.028606573,0.038531788,-0.023250295,-0.010927281,-0.0053473297,0.030324398,0.02445516,-0.021782987,0.023846762,0.0426832,-0.01678459,0.004387017,-0.010318885,-0.01642671,0.060839664,0.015209916,0.038937386,0.04726407,0.025624236,0.032757986,0.026769454,0.03815005,0.002339643,-0.001896766,-0.025290214,-0.023465024,-0.054874994,0.054731842,0.028033964,0.04871945,0.015889889,-0.01405277,-0.08579586,-0.022761192,0.0030688243,-0.025433365,0.05000782,-0.0069249854,-0.060123906,0.036909398,-0.06518195,0.03337831,0.0068534096,0.049482927,-0.037720595,0.010026615,-0.038436353,0.036742385,-0.01441065,-0.010056439,-0.003438634,0.036933254,-0.030252822,0.00047232755,0.03612206,-0.0008700967,-0.0076407464,-0.010867635,-0.012645107,0.03554945,-0.027055757,-0.038197767,-0.028391844,-0.051534776,-0.038388636,-0.03996331,-0.045593962,0.04891032,0.008845611,0.0765864,-0.023202578,0.019957796,0.013671031,0.010629048,0.0028600607,-0.027437497,0.014195922,-0.00026934227,-0.013551737,-0.0033551287,0.0068534096,-0.015376927,0.03884195,0.027222767,-0.022641899,0.013360868,-0.004777703,0.014577661,0.014804319,0.013981193,-0.0046673566,-0.006310624,-0.024371654,0.0013226663,0.010533613,-0.03943842,0.05349119,-0.0054367995,-0.0371957,-0.03099244,0.055877056,-0.031064017,-0.005132601,0.025027769,-0.0108557055,0.02115073,0.039486136,0.014732743,0.0014762566,-0.0193494,-0.06260521,-0.043112658,-0.008380366,0.0018460663,-7.99173e-05,-0.014899753,0.018037172,0.030944724,0.0032716233,0.015746737,0.061555427,-0.04688233,-0.0052041775,0.041036952,0.026936464,0.007503559,0.004652445,-0.0027243644,-0.0032119765,-0.021365458,-0.0069070915,0.053395752,-0.0023709575,-0.016832307,-0.005538199,-0.0145299435,-0.023596248,0.018383123,0.028248692,-0.009251208,-0.0050371666,0.012370732,0.030777713,0.0020727238,-0.014565731,-0.0053890822,-0.00938243,-0.017416846,-0.015782526,-0.00739023,-0.04432945,0.042945646,0.038102333,-0.05091445,0.004679286,0.00710989,0.03590733,-0.009185596,-0.00034464628,-0.00035750758,0.013408585,0.00040112427,0.011523749,0.035644885,-0.056497384,0.046262003,-0.0118995225,-0.035859615,-0.019051166,-0.0045063104,0.0024484983,-0.013217716,0.0047657737,0.037362713,0.015985323,-0.0360982,0.03554945,0.02626842,0.004181236,-0.0068295505,0.009531547,-0.008911221,0.011821982,-0.03855565,-0.013301221,0.005398029,-0.019743068,0.02371554,-0.011195691,-0.004023172,0.030515268,-0.0029823366,-0.005910991,0.004431752,0.037147984,-0.058119774,0.027676083,-0.04394771,0.0022173673,0.0044854344,0.0047806855,0.014816248,-0.034714397,0.004694198,0.005740998,-0.008249143,-0.009495759,0.02227209,0.014816248,-0.016522145,0.01841891,0.01658179,-0.02571967,-0.012549672,0.03120717,0.0073604067,0.0028302374,0.008893328,0.0018863279,-0.06036249,-0.0013599455,-0.008547377,-0.016116546,-0.0074319826,-0.024383584,-0.015543938,0.0016343205,-0.0073484774,-0.009871534,0.06341641,-0.028511137,-0.011082362,0.010825882,0.021055296,-0.0046494626,-0.0266263,0.031827495,-0.018860297,-0.05000782,0.009978898,0.018156465,0.02829641,0.0065253526,0.02937005,-0.014386792,-0.03175592,0.023417307,-0.002294908,-0.007515488,-0.017929807,-0.0050938306,-0.0063762357,0.04230146,0.008320719,-0.004014225,0.0056783687,-0.012239509,1.3851555e-05,0.025385648,0.013468232,0.0050401487,-0.0046733213,-0.017750867,0.0070502437,0.0090364795,0.0048641907,-0.0028600607,0.0074498765,0.022045432,-0.015603585,-0.0010863161,-0.03795918,0.033426028,-0.015854102,0.020709345,0.0149594005,0.02536179,0.004282635,-0.0063822004,0.039748583,-0.0047836676,-0.015030976,0.009907322,0.042444613,0.031803638,-0.015722878,0.0075751347,0.03359304,-0.03216152,-0.022761192,0.023393448,-0.026888747,-0.034618963,-0.07534575,0.02717505,0.04869559,-0.029966518,0.004548063,0.011732512,0.02426429,0.009418218,0.0059944964,-0.02481304,-0.0069607734,-0.018919943,-0.00041640873,-0.003802479,-0.028224833,-0.00023821414,0.0055799517,-0.028940594,-0.007062173,-0.014565731,-0.023787117,0.0109332455,-0.04325581,-0.0031075948,0.007008491,-0.0044257874,0.034714397,-0.019957796,-0.010068368,0.022152796,-0.014386792,0.044281732,-0.03187521,-0.02607755,0.0041454476,0.07701586,0.02372747,-0.0008611497,-0.0045242044,0.039867874,-0.005326453,-0.00090513914,-0.011827947,-0.03977244,-0.012835977,0.03998717,-0.0310163,-0.011487961,-0.010342743,-0.0049745375,-0.01458959,-0.014613449,0.0026766472,-0.048814885,-0.015162199,0.04740722,0.0028555873,0.004282635,0.03793532,-0.0006587236,-0.016701085,-0.03793532,-0.0011407437,0.007318654,-0.012573531,0.038102333,0.0055531105,-0.033688474,0.007557241,0.0074916296,-0.0034952983,0.02006516,0.007205325,-0.025648095,0.005916956,0.0025006891,-0.06847445,0.009340678,-0.014875894,0.025815105,-0.034404233,0.039008964,0.010259238,-0.008046344,0.0075810994,0.019659562,-0.016701085,-0.004721039,-0.015854102,-0.010992892,0.0031433827,0.025504943,0.016450569,-0.0350007,0.021079155,-0.009638912,-0.0058274856,-0.002631912,-0.007879334,0.0034505634,-0.018705215,-0.0073007597,0.0053652236,-0.0109332455,-0.061269123,-0.00647167,-0.06518195,-0.008273002,-0.0277238,-0.03132646,0.052298255,-0.013050705,-0.0017446668,-0.015627444,-0.005078919,-0.0732939,0.012012851,0.0028690079,0.013527879,0.023107143,-0.038388636,-0.008165637,0.014828177,-0.026363855,-0.0277238,0.003766691,0.016164264,-0.012680895,-0.019361328,0.047168635,0.031111734,-0.0056485455,-0.006877268,0.029513203,-0.008958939...', '2025-03-25 05:15:03.524973+00'), ('94', 'https://ai.pydantic.dev/api/exceptions/', '2', 'AgentRunError Class and UsageLimitExceeded Exception', 'The `AgentRunError` class is a base class for runtime errors that occur during an agent run, featuring a customizable error message. An example of a specific error derived from this class is `UsageLimitExceeded`, which is raised when a model's usage exceeds predefined limits.', '| 
                        
                                                class AgentRunError(RuntimeError):
                            """Base class for errors occurring during an agent run."""
                        
                            message: str
                            """The error message."""
                        
                            def __init__(self, message: str):
                                self.message = message
                                super().__init__(message)
                        
                            def __str__(self) -> str:
                                return self.message
                          
  
---|---  
message `instance-attribute`
                        
                                                message: [str](https://docs.python.org/3/library/stdtypes.html#str) = message
                        

The error message. UsageLimitExceeded Bases: `AgentRunError` Error raised when a Model's usage exceeds the specified limits. Source code in `pydantic_ai_slim/pydantic_ai/exceptions.py`
                        
                                                61
                        62

| 
                        
                                                class UsageLimitExceeded(AgentRunError):
                            """Error raised when a Model's usage exceeds the specified limits."""
                          
  
---|---  
UnexpectedModelBehavior Bases: `AgentRunError` Error caused by unexpected Model behavior, e.g. an unexpected response code. Source code in `pydantic_ai_slim/pydantic_ai/exceptions.py`
                        
                                                65
                        66
                        67
                        68
                        69
                        70
                        71
                        72
                        73
                        74
                        75
                        76
                        77
                        78
                        79
                        80
                        81
                        82
                        83
                        84
                        85
                        86
                        87
                        88

| 
                        
                                                class UnexpectedModelBehavior(AgentRunError):
                            """Error caused by unexpected Model behavior, e.g. an unexpected response code."""
                        
                            message: str
                            """Description of the unexpected behavior."""
                            body: str | None
                            """The body of the response, if available."""
                        
                            def __init__(self, message: str, body: str | None = None):
                                self.message = message
                                if body is None:
                                    self.body: str | None = None
                                else:
                                    try:
                                        self.body = json.dumps(json.loads(body), indent=2)
                                    except ValueError:
                                        self.body = body
                                super().__init__(message)
                        
                            def __str__(self) -> str:
                                if self.body:
                                    return f'{self.message}, body:\n{self.body}'
                                else:
                                    return self.message
                          
  
---|---  
message `instance-attribute`
                        
                                                message: [str](https://docs.python.org/3/library/stdtypes.html#str) = message
                        

Description of the unexpected behavior. body `instance-attribute`
                        
                                                body: [str](https://docs.python.org/3/library/stdtypes.html#str) | None = [dumps](https://docs.python.org/3/library/json.html#json.dumps "json.dumps")([loads](https://docs.python.org/3/library/json.html#json.loads "json.loads")(body), indent=2)', '{"source": "pydantic_ai_docs", "url_path": "/api/exceptions/", "chunk_size": 4362, "crawled_at": "2025-03-25T05:15:03.502006+00:00"}', '[-0.007087896,0.051103435,0.018787336,0.012234708,-0.010411266,0.024869397,-0.01721094,-0.024234133,-0.007017311,-0.020410787,-0.03112792,-0.04253914,-0.011422982,-0.03018679,-0.03625709,0.0016763903,0.003996867,0.031763185,-0.0144463675,0.024939982,0.023775332,0.0022101882,0.0091230925,0.02325771,-0.0021293098,-0.005702668,0.0016263927,0.009299555,0.0061350004,0.009464253,0.049221173,-0.010317153,-0.008146669,-0.001402874,0.010299507,-0.032798428,0.00440273,0.00057864876,0.019869637,-0.0053291568,0.030516185,-0.062867574,0.031998467,0.024210606,-0.08437243,0.020540193,0.032798428,0.03952752,0.001976376,0.0015528668,-0.022457749,-4.8481133e-06,0.027928075,0.015599253,-0.02745751,-0.011922958,-0.018916741,0.06682033,0.024116492,-0.026139924,0.0138699245,0.006340873,-0.042492084,0.01914026,-0.023551814,-0.009470135,-0.021304863,0.020963702,-0.046303663,0.022681266,0.013540528,0.00090878,-0.036586482,0.015752187,-0.010523026,-0.031880826,0.028939791,0.08630175,-0.005723255,-0.02161073,0.024798812,0.018610874,-0.031786714,0.045880158,-0.03536301,0.008923102,-0.053032756,-0.03428071,-0.014269905,-0.09966581,-0.038233463,-0.0077231596,-0.020763712,0.0240812,0.02717517,-0.015246329,-0.028633922,-0.026234038,0.019257901,-0.025622303,0.014611065,-0.0138699245,-0.020704892,0.04416259,-0.019210845,-0.036680598,-0.019410836,-0.00060916203,-0.048656493,-0.0109935915,-0.049315285,0.0068761413,0.0020631365,0.0126229245,-0.08672526,-0.0046527185,-0.032939598,0.046162494,0.018704986,0.026398735,-0.0223754,0.0027189874,-0.007840801,-0.01968141,-0.0019513771,0.007511405,0.019540241,-0.004149801,-0.043550856,-0.00020660776,0.020187268,-0.0006598949,-0.016022762,-0.0021425444,-0.007905504,-0.051762227,-0.017363874,-0.0033410166,-0.08169021,0.0005065934,-0.0012344997,-0.019034382,-0.022798909,0.013705226,-0.017481515,0.06879671,-0.019399071,-0.004361556,0.0012462639,-0.0011771495,0.009687771,0.03590416,-0.04552723,-0.03291607,-0.021704843,-0.0098171765,0.033574864,0.032280806,0.021022523,-0.043809667,0.0045497823,0.046609532,0.010717134,-0.017787384,-0.020504901,-0.025998754,-0.010117163,-0.05707962,-0.03621003,-0.05251513,0.023081247,-0.012028836,-0.0046350723,-0.026304623,0.035292428,-0.050068192,-0.050115246,-0.004937999,-0.028869206,-0.03470422,0.010075988,-0.009628951,-0.05472679,-0.0223754,-0.032398447,-0.033410165,0.0027748672,0.042280328,0.01803443,0.0050997557,-0.024492946,0.023128305,0.046186022,-0.0051497533,0.009758356,-0.0049879965,0.017822675,-0.022175409,-0.0054615033,0.0063232267,-0.0088583995,0.00064224866,0.068655536,-0.008993687,-0.006770264,-0.051621057,-0.02226952,0.00031634513,-0.04305676,0.014046386,0.030798525,-0.06352637,5.0089515e-05,-0.04470374,0.0027219285,-0.017587394,-0.00024576028,0.025245849,-0.03649237,0.012222944,0.015658073,0.028939791,0.027669264,-0.024116492,-0.0031822005,-0.002592523,-0.006087944,-0.017505044,-0.014622829,0.043950837,0.002735163,-0.040774517,0.022222465,-0.059338335,0.026445793,-0.018293241,0.00826431,0.023669455,0.06009124,-0.03086911,-0.01914026,0.0017425636,0.0125993965,0.052091625,0.018822627,0.020163741,0.0023351824,-0.028445696,0.024916453,0.03428071,0.04404495,-0.016340394,0.01982258,-0.016469799,-0.041598007,0.0017087416,0.005499737,-0.0071349526,0.002958682,-0.029245658,0.012634689,0.0125758685,-0.030280903,-0.0010095105,-0.033527806,-0.043692026,0.06630271,-0.036727652,-0.02249304,-0.022140115,0.02189307,-0.008340777,0.015693367,-0.04428023,-0.024822341,0.028233942,0.000885987,0.062585235,0.0010117162,-0.034633636,0.008287839,0.07331414,0.013905217,0.012281765,-0.006370283,0.042868536,0.00080143224,-0.050821096,-0.0045056664,-0.02442236,0.018669695,0.054397397,-0.007193773,-0.015952177,-0.003385132,-0.0024939983,0.020410787,0.008534885,0.024351776,-0.027504565,0.00064702786,-0.0056173783,-0.020057863,-0.0023498875,-0.023963558,0.025434077,0.046586003,-0.03265726,0.028069245,-0.04611544,5.7947593e-05,0.020587249,-0.048468266,-0.0055467933,-0.011270048,-0.028069245,0.023787096,0.0072231838,0.02414002,0.027833961,0.011322987,-0.012352349,0.04538606,-0.015516904,-0.04557429,0.04211563,-0.014281669,0.02839864,0.012234708,-0.0005643112,-0.024116492,-0.047244795,0.006058533,0.036586482,0.04305676,-0.02339888,-0.028610395,0.06009124,0.008029027,0.037268803,-0.010981827,0.011023002,-0.03839816,-0.0023175362,-0.008640762,-0.048656493,-0.008676055,0.03251609,-0.01721094,0.024034142,-0.009681889,-0.006382047,-0.0039498108,0.024375303,-0.029904451,0.005443857,0.024092965,-0.020257853,0.0055173826,0.014022858,-0.059573617,-0.00894663,0.014763999,0.007264358,-0.033174884,0.005861484,-0.025010567,-0.033151355,-0.024116492,0.009628951,-0.027645735,-0.013611113,-0.00902898,-0.028610395,-0.030916167,-0.029198602,-0.028516281,0.021646023,-0.011622973,0.019269666,0.058773655,0.05858543,-0.014022858,0.018563816,0.059150107,0.0361865,0.027645735,0.0020293146,-0.0187991,0.020446079,0.0470801,-0.0058967764,-0.018787336,0.001613158,0.0051526944,0.058538374,-0.0139169805,0.004346851,0.04773889,-0.0073290607,-0.018422646,-0.025481133,0.015258092,0.044915497,-0.00018510142,0.0021513675,0.03844522,0.044256706,0.0044939024,0.030210318,0.060938258,0.01741093,-0.0017484457,-0.0268693,0.012081774,-0.059432447,-0.008340777,-0.016446272,0.045056667,0.031457316,0.020116683,-0.068137914,-0.037386443,-0.0078055086,-0.020904882,0.059479505,0.024916453,-0.09114858,-0.009181913,-0.023093011,0.00030458102,0.019375542,0.0048997654,-0.009464253,0.040421594,-0.013634642,0.034515996,-0.030351488,-0.026116397,-0.00072055374,-0.0071290703,-0.002629286,0.011775907,0.051385775,-0.031410262,-0.011675911,0.004038042,-0.037104107,0.04413906,-0.026634019,-0.017528573,-0.019352015,-0.07157304,-0.008293721,-0.057973694,-0.030375017,0.05279747,0.003211611,0.013646405,-0.008581942,0.0027616324,0.028045716,0.00075584615,0.0065526273,-0.060938258,-0.02745751,-0.002238128,-0.03870403,0.0012418523,-0.019857872,0.015481612,0.032351393,0.069220215,-0.023916502,0.0062879343,-0.043974366,0.00036156358,0.010217158,0.019116731,-0.009905408,-0.024375303,-0.00089775113,0.0138934525,-0.023563577,-0.057550184,0.029951507,-0.011581798,-0.03058677,-0.013469943,0.030986752,-0.030327959,-0.016763903,0.04682129,-0.011052412,0.045221362,0.03390426,-0.008387834,-0.0138699245,-0.01982258,-0.070349574,0.005535029,-0.04319793,0.0007363618,0.017528573,0.014411075,-0.03388073,0.01343465,0.004376261,0.017163884,0.061267655,-0.047385965,-0.0059555974,0.027269283,0.0056291423,0.0075819897,-0.0019219668,-0.0008823107,-0.004670365,-0.03757467,-0.021881305,0.05599732,0.0072173015,-0.011175935,-0.027692791,-0.010087752,-0.013705226,-0.018952034,0.021963654,0.017563865,-0.020528428,0.008934867,0.042468555,-0.0113288695,0.029339772,-0.007264358,0.022610681,0.032539617,-0.012422934,-0.019293195,-0.031174978,-0.010228922,0.035174787,0.0049056476,0.020151976,0.0019528477,0.008440772,-0.015493376,0.017399168,0.009776003,0.039080482,-0.009875998,-0.014693414,0.03870403,-0.07157304,0.025481133,0.0041556833,-0.03536301,-0.019951986,0.013469943,0.02661049,-0.015881592,-0.030327959,0.024304718,0.021034287,-0.01962259,0.02715164,0.013422887,0.04359791,-0.007629046,0.016069818,0.02331653,0.0052232794,-0.01681096,0.005449739,-0.0013594937,-0.040892158,0.028281,-0.01741093,-0.002723399,-0.0012006778,-0.00072423,-0.0111877,0.013622877,0.031222034,-0.027622206,-0.009864233,-0.0023984145,0.017140355,0.010017168,0.004861532,0.005129166,-0.011175935,-0.006940844,-0.009205442,0.0011352397,-0.0082113715,0.012105303,0.011911195,-0.015869828,0.026822245,0.0361865,-0.029339772,-0.050538756,-0.004726244,-0.007893739,-0.016858017,-0.0051556355,-0.0024425301,-0.044374347,0.017563865,-0.02223423,-0.0050732866,-0.028469225,-0.03018679,-0.041080385,0.0045203716,-0.026704604,0.00039593692,0.0702084,-0.039033424,0.019893166,-0.003626297,-0.0032086698,0.002217541,-0.023587106,0.024328247,-0.039409876,-0.024516473,-0.001181561,0.0268693,-0.0067290897,0.012317058,0.008505475,0.016258044,0.0069643725,0.031386733,-0.030963223,-0.0194226,-0.012434699,-0.008146669,-0.023704747,0.04898589,0.0028792738,-0.016069818,0.024728227,-0.030892638,-0.012317058,-0.0014278728,0.018846156,-4.567796e-05,0.004120391,-0.008252546,-0.0061526466,-0.018105015,0.000299618,-0.014952226,-0.0144463675,0.010087752,0.021304863,0.0113288695,-0.049221173,0.03853933,0.003205729,-0.0025969346,0.002598405,-0.011928841,0.0011425924,-0.043668497,0.03319841,-0.04239797,-0.0001361148,0.0068349666,-0.01169944,0.0194226,-0.0104171485,0.0055644396,0.0031704365,-0.03112792,-0.06263229,0.052750416,-0.011264167,-0.025457604,-0.029410357,0.015528668,0.028798621,-0.012446463,-0.0211284,0.028492752,0.03675118,0.046444833,-0.006411458,0.019363778,-0.024775283,0.017399168,0.019410836,-0.0011212699,-0.026163453,-0.024775283,0.029692696,-0.043292046,-0.00610559,-0.018528525,-0.022363635,0.02189307,0.00479977,-0.017422695,-0.020928409,0.0073702354,0.0181756,-0.016458035,-0.020151976,0.030069148,-0.018822627,0.024057671,-0.045080192,-0.010552436,-0.0036645303,0.038515802,0.017669743,-0.012446463,-0.018022666,0.007946678,-0.019352015,-0.009423078,-0.042821478,-0.017363874,0.006211467,0.06357343,-0.03964516,-0.01865793,-0.0026998706,-0.019328486,-0.025269378,-0.028210415,0.011546506,-0.013599349,-0.03428071,0.051338717,-0.007676103,0.0119994255,0.0054850313,0.04404495,0.004067452,-0.007981971,-0.012881736,-0.0005451945,-0.016446272,0.040656876,-0.0039380467,0.0012433229,0.0011396513,0.007029075,-0.033668976,-0.0011300929,0.041127443,0.010381856,0.009552483,0.026986944,-0.060561806,-0.0040939217,-0.024869397,0.008817225,-0.0013977272,0.03018679,-0.0031116158,-0.030351488,-0.021998947,-0.015175744,-0.011093587,0.029810337,-0.026657548,0.019328486,-0.009464253,0.04279795,0.0016072759,-0.038868725,-0.01073478,-0.054256227,-0.00017738121,0.0041056857,-0.013211132,0.016116876,0.0027616324,0.0316926,0.005458562,0.024234133,-0.015446319,-0.008999569,-0.045080192,-0.023210654,-0.006464396,0.008299602,0.02745751,0.0048468267,0.0036145328,0.029786808,0.022845965,-0.06682033,-0.010017168,0.011940605,0.012964085,0.022963606,-0.037951123,-0.0032851368,0.03679824,-0.007358471,-0.030963223,0.0025836998,0.010040696,0.014081678,-0.0175521,0.06724384,-0.020151976,-0.012775859,-0.006523217,-0.00118523...', '2025-03-25 05:15:03.622167+00'), ('95', 'https://ai.pydantic.dev/api/exceptions/', '3', 'ModelHTTPError in Pydantic AI', 'The ModelHTTPError class, inheriting from AgentRunError, is raised when a model provider responds with a 4xx or 5xx status code. This indicates there was an error in the HTTP request to the model.', 'The body of the response, if available. ModelHTTPError Bases: `AgentRunError` Raised when an model provider response has a status code of 4xx or 5xx. Source code in `pydantic_ai_slim/pydantic_ai/exceptions.py`
                        
                                                 91
                         92
                         93
                         94
                         95
                         96
                         97
                         98
                         99
                        100
                        101
                        102
                        103
                        104
                        105
                        106
                        107
                        108
                        109
                        110
                        111

| 
                        
                                                class ModelHTTPError(AgentRunError):
                            """Raised when an model provider response has a status code of 4xx or 5xx."""
                        
                            status_code: int
                            """The HTTP status code returned by the API."""
                        
                            model_name: str
                            """The name of the model associated with the error."""
                        
                            body: object | None
                            """The body of the response, if available."""
                        
                            message: str
                            """The error message with the status code and response body, if available."""
                        
                            def __init__(self, status_code: int, model_name: str, body: object | None = None):
                                self.status_code = status_code
                                self.model_name = model_name
                                self.body = body
                                message = f'status_code: {status_code}, model_name: {model_name}, body: {body}'
                                super().__init__(message)
                          
  
---|---  
message `instance-attribute`
                        
                                                message: [str](https://docs.python.org/3/library/stdtypes.html#str)
                        

The error message with the status code and response body, if available. status_code `instance-attribute`
                        
                                                status_code: [int](https://docs.python.org/3/library/functions.html#int) = status_code
                        

The HTTP status code returned by the API. model_name `instance-attribute`
                        
                                                model_name: [str](https://docs.python.org/3/library/stdtypes.html#str) = model_name
                        

The name of the model associated with the error. body `instance-attribute`
                        
                                                body: [object](https://docs.python.org/3/library/functions.html#object) | None = body
                        

The body of the response, if available. FallbackExceptionGroup Bases: `ExceptionGroup` A group of exceptions that can be raised when all fallback models fail. Source code in `pydantic_ai_slim/pydantic_ai/exceptions.py`
                        
                                                114
                        115

| 
                        
                                                class FallbackExceptionGroup(ExceptionGroup):
                            """A group of exceptions that can be raised when all fallback models fail."""
                          
  
---|---  
 Pydantic Services Inc. 2024 to present', '{"source": "pydantic_ai_docs", "url_path": "/api/exceptions/", "chunk_size": 3841, "crawled_at": "2025-03-25T05:14:53.398114+00:00"}', '[-0.036530156,0.0071443147,0.010915848,-0.005363774,0.01459877,-0.0010758009,-0.020768356,-0.0136351185,0.041337337,-0.020834815,-0.029374763,-0.07842132,-0.012117644,-0.05582534,-0.024545427,-0.006911709,0.02372577,0.027159473,0.0053166994,0.034580696,-0.009492523,-0.034248404,0.020048387,-0.01459877,0.010090652,0.027602531,-0.009232227,-0.034868687,-0.017046668,0.01578395,0.01878567,-0.016647914,-0.010960154,-0.0061640483,0.010827237,-0.01600548,-0.026339814,0.012981608,0.005859446,0.0125939315,0.009016236,-0.03185589,0.0054634623,0.03019442,-0.069693066,0.026561344,0.03147929,-0.0006867403,-0.01041187,0.022440901,-0.027491765,-0.0102623375,0.009630979,0.016071938,-0.012948378,-0.029308304,0.00290757,0.02516571,0.00356385,-0.039631564,-0.023659311,-0.0071996967,-0.049844056,-1.4289062e-05,-0.01041187,-0.033561666,-0.006917247,-0.0024160522,-0.060123008,0.02029207,0.020369604,0.030305186,-0.008035969,0.036286473,-0.0029020316,-0.018619524,0.039520796,0.02919754,0.02441251,-0.020856969,-0.0026528114,0.01931734,-0.008069199,-0.019494563,-0.003104177,-0.015739646,-0.055337977,0.00078573613,-0.050464336,-0.0148424525,-0.0019549946,0.005529921,-0.024877721,0.03429271,0.024545427,-0.010511558,-0.02310549,0.012782231,0.026583496,-0.00026496963,-0.011281371,0.0040318305,-0.023282712,0.037837178,-0.007891975,-0.0074821464,0.015451658,-0.0076150643,0.0059979013,0.014166788,-0.027181625,0.014632,-0.019771475,-0.0041509024,-0.09605503,-0.031434983,-0.03429271,-0.008894395,-0.014465853,0.02629551,-0.002525432,-0.009946658,0.014510158,-0.03376104,-0.011707814,0.04700848,0.03209957,-0.04745154,-0.04273297,0.0004897871,0.016991286,-0.00090896175,0.001200411,-0.026583496,-0.015916869,-0.0037272277,-0.004289358,0.0012641007,-0.028089894,-0.03316291,-0.012405632,-0.0136351185,0.0013007914,-0.0015576268,0.009968811,0.013446818,-0.02185385,-0.028023435,0.0026181976,0.033473052,-0.0010432638,0.049312387,-0.0053720814,0.03750488,-0.04691987,-0.025564462,0.033517357,0.012782231,0.0019951467,-0.035754804,-0.049223773,0.030460257,-0.056622848,-0.030083656,-0.03079255,0.058306467,-0.03466931,-0.003538928,-0.042245608,-0.07505407,0.040694904,0.057730492,-0.03564404,-0.024501123,0.043353252,-0.02669426,0.005792987,-0.03633078,-0.0052502407,-0.06415484,-0.0042062844,0.018409071,-0.040052466,0.020746203,-0.02447897,-0.0593255,-0.00040498294,0.080813825,0.0019799166,0.018553065,-0.016437462,0.004945638,0.038368847,-0.033118606,-0.0016988516,-0.028289272,-0.0136905005,-0.021244643,0.013989565,0.024855569,0.006324657,0.039122045,0.011807503,-0.025719533,0.009675285,-0.04745154,-0.05392019,0.017212814,-0.00581514,0.03207742,-0.0028660332,-0.06707902,0.029308304,-0.019295188,0.0026500423,-0.041625325,-0.029972892,0.0019688401,-0.012771155,0.027846212,0.007028012,0.073946424,0.018242924,-0.02554231,-0.018032473,0.04348617,0.015407352,-0.02873233,-0.025874604,-0.010705396,0.026317662,0.031944502,0.008661789,-0.014654152,0.014742764,-0.05055295,0.025121404,0.035555426,0.063800395,-0.03535605,0.013889877,-0.028466495,0.00412598,0.059635643,0.04767307,0.009464832,0.0148978345,-0.03991955,-0.021344332,0.013768036,0.051128924,-0.023703618,0.02254059,-0.024080217,-0.028311424,-0.0041619786,0.023814382,-0.017711254,-0.02722593,-0.03475792,-0.011663509,0.024124524,-0.031368524,-0.007736905,-0.05192643,-0.037992246,0.0239473,-0.061540794,-0.01628239,0.0035195441,0.029839974,0.006546186,0.061850935,-0.004508118,-0.021831697,0.010085114,-0.0033367826,0.03267555,0.008412569,-0.036884602,0.033893958,-0.0032620165,0.039410032,0.02478911,-0.019904394,0.029640598,0.004607806,-0.04598945,0.0028826478,0.022706736,-0.008119043,0.008506719,-0.034890838,-0.02988428,0.020646516,0.004463812,0.01041187,-0.022407671,0.06871834,0.023526395,0.024501123,0.029463375,-0.028843094,-0.04463812,-0.013590813,-0.005898213,0.023526395,-0.013247442,-0.0059037516,-0.03901128,-0.00029612216,0.030836856,-0.07540852,0.0076095257,-0.05529367,-0.0019314572,-0.0006992013,0.0148978345,-0.0019106888,-0.001453785,0.0036995367,-0.019273035,-0.017921707,0.019682864,-0.03079255,0.011641356,0.0058815987,0.010539249,0.011818579,0.017024513,-0.026672108,-0.054230332,-0.019970851,0.019970851,0.05573673,-0.02751392,-0.044283673,0.020580057,0.004101058,0.03147929,-0.010157111,0.006861865,-0.04523625,-0.01935057,0.0031152535,-0.029773517,-0.017644797,0.037903637,-0.021000963,0.016692221,0.0066791032,0.0010190341,0.025918908,0.02691579,-0.034935147,-0.015108287,0.0067566386,0.0186306,-0.028865246,0.01737896,-0.057641882,-0.028776634,0.003442009,0.022950418,-0.017556185,0.07341476,-0.0057431427,-0.0429545,0.031590056,0.011685662,-0.05795202,-0.016559303,-0.015994404,-0.028488647,-0.018121084,-0.009802665,-0.03604279,0.0486478,-0.022906113,0.010904771,0.0782884,0.023925146,-0.024966333,0.024058064,0.0653511,0.024456816,-0.010146035,-0.021931384,-0.04432798,0.0123724025,0.01888536,-0.0038629144,0.00800274,-0.008030431,0.020923426,0.0075984495,0.016658992,0.013612965,0.055337977,-0.0065904916,-0.013391436,-0.009714053,0.03088116,0.045900837,0.020801585,0.012206255,0.031368524,-0.005554843,0.011292447,-0.0004856334,0.077756725,-0.035378203,0.004358586,-0.054274637,-0.0017168508,-0.037394118,0.008113504,0.043862768,0.059103973,-0.010954616,-0.022906113,-0.06495234,-0.023814382,-0.023925146,-0.04073921,0.021610167,-0.042555746,-0.04842627,0.03209957,-0.026472732,0.0148424525,-0.03376104,0.005388696,-0.014521235,0.054629084,-0.033938263,-0.00033938955,-0.032143876,0.01950564,0.007681523,0.010744163,0.0073381527,0.0068507884,-0.014576617,0.031036232,0.009426065,-0.012294867,-0.022463053,0.015939021,-0.007952896,-0.007072318,0.030327339,-0.038147315,-0.03276416,-0.044261523,-0.010467252,0.01931734,-0.0053665433,0.06738916,-0.016858367,-0.0065351096,-0.0036220013,0.024922028,-0.037815023,-0.05361005,-0.043862768,-0.0425779,-0.0231941,0.0036026177,-0.012892996,-0.026206898,0.022950418,0.044793192,0.016149474,0.018176466,-0.047717378,0.01650392,0.019981928,0.041293032,0.018907512,0.009403911,-0.028355729,-0.005319468,-0.028333576,-0.033450898,0.021909231,-0.0072218496,0.013779112,-0.011325677,0.023016877,-0.03048241,-0.013081295,0.031523596,-0.0089996215,-0.004239514,0.0020643747,-0.033783194,0.0376378,-0.027403153,-0.06854112,-0.024922028,-0.022186143,-0.026716413,-0.0016462384,-0.009132539,0.0361314,0.018985046,0.03757134,-0.030703938,0.03482438,-0.037150435,0.007520914,0.013092372,-0.004123211,-0.035909873,0.017013438,0.026805025,-0.014022795,-0.04647681,-0.0012017955,0.035909873,-0.016780833,0.0072606173,-0.008362724,-0.01984901,0.00453304,-0.0018525374,-0.014543388,0.0074046114,0.014388317,0.014853529,0.029751362,0.00011638933,0.01713528,0.026361967,0.018863207,0.022529513,-0.021000963,-0.01809893,-0.043752003,-0.012494244,0.010771854,-0.033716734,0.017855247,0.017356807,0.010018655,-0.033716734,0.010528172,0.0025185093,-0.0078199785,0.027115166,0.0036026177,0.012837613,-0.040872127,0.010511558,0.03309645,0.0011124916,-0.007742443,0.0024963564,0.04388492,-0.011336753,0.0050730174,0.06654735,0.047938906,-0.0315679,0.031346373,-0.019184424,0.068851255,-0.012981608,-0.019018276,0.0040401374,0.01737896,-0.011896115,0.015108287,0.0046410356,-0.007919666,0.013203137,-0.025121404,0.010899234,0.025564462,0.008517795,-0.0031401755,-0.012073338,0.0042810505,-0.03808086,0.013180983,-0.0017279272,0.0075541437,-0.018242924,0.02600752,0.025054945,-0.011009998,0.0049539455,0.019029353,0.021366484,0.003976448,0.016647914,0.024368204,-0.025121404,0.04705279,0.028577259,-0.041182265,-0.024634039,0.022817502,-0.018564142,-0.0057597575,0.02250736,0.019195499,-0.024301747,-0.009398374,-0.006474189,0.031434983,-0.017024513,-0.030548869,0.020978808,-0.021388639,-0.020480368,-0.01756726,0.03147929,-0.04842627,0.014155712,0.0034143177,0.00781444,-0.012605008,-0.0061751246,-0.007177544,0.028754482,-0.008340572,-0.012139796,0.02966275,0.01600548,0.0049400995,0.027048707,-0.006895094,-0.015374122,0.032742005,-0.0125385495,-0.02204215,-0.015196899,-0.017445419,0.0017016206,0.022086455,-0.02200892,-0.033362288,-0.01875244,-0.034868687,-0.021089574,0.024501123,0.0010543403,-0.01544058,0.036508,-0.048603494,-0.071908355,0.022208296,-0.0036967674,-0.019062582,-0.013059143,0.024634039,-0.016371002,-0.008235346,-0.027181625,0.035444662,-0.0036829219,0.016127322,0.022175066,0.018497683,0.041691784,0.014543388,0.038413152,-0.0022083686,0.016891597,0.028156353,0.044748884,0.0065738773,-0.0029186464,-0.010101728,0.002776037,-0.011951497,-0.0047656456,0.008639636,0.0041149035,-0.011093072,-0.045214098,0.0045247325,0.036441542,-0.016969131,0.024368204,0.03329583,0.001722389,0.03329583,-0.0044222753,-0.011663509,0.0019702248,-0.0070169354,0.0023426707,0.0027981899,-0.060477454,0.019018276,0.0068064826,-0.029906433,-0.0002878148,-0.0041841315,0.0007981972,0.022673506,-0.019405952,-0.0041342876,-0.04652112,0.041359488,0.034115486,-0.031368524,-0.036220014,0.038058706,-0.023016877,0.044062145,-0.06211677,0.010101728,0.016725449,0.048692103,0.00029889127,-0.031279914,-0.0045690383,-0.018010318,-0.0012031802,-0.0067677153,-0.0050037894,-0.034403473,-0.035422508,0.040340457,-0.02797913,-0.023991605,0.00013135985,0.01391203,-0.011148454,0.006036669,0.015894715,-0.0065295715,0.008058122,0.018996123,0.003943219,-0.0012343327,-0.0024368204,0.013402512,-0.025032792,-0.0034586235,0.005388696,-0.023482088,-0.013025913,0.027026555,0.01972717,-0.015163669,0.00037244585,0.0049650217,0.00765937,-0.009414989,0.03916635,0.013025913,-0.021543708,0.016514998,-0.04904655,0.018741366,0.0015354739,-0.0071720057,0.029086776,0.0013720961,0.01684729,-0.039963856,-0.022230448,-0.005261317,-0.011342292,-0.0372612,-0.020214533,-0.007986126,-0.015230129,0.030127963,0.04811613,-0.015606727,-0.0022651355,-0.022031073,-0.0037493806,-0.027048707,0.014366165,0.012826537,0.0051560905,0.006917247,0.024168829,0.011364445,-0.0077922875,-0.02063544,-0.039720174,-0.0047628763,-0.0110543035,0.0032038651,0.028089894,-0.0195721,0.00412598,-0.018386919,0.011259219,-0.07598449,-0.00021702933,0.03125776,0.028333576,0.027137319,-0.019804705,0.000758045,0.016858367,-0.020679744,-0.014698458,0.018043548,0.008301805,0.00856764,-0.021643396,0.034647156,-0.011885039,-0.01025126,-0.015584575,-0.017500801,0.00687848,0.0190072,-0.03367243,-0....', '2025-03-25 05:15:03.676974+00'), ('96', 'https://ai.pydantic.dev/api/agent/', '0', 'PydanticAI Agent Documentation', 'This section provides access to various elements of the PydanticAI framework, including installation instructions, troubleshooting, gaining assistance, contributing, and detailed documentation on agents, models, dependencies, and tools.', 'Skip to content  [ ![logo](../../img/logo-white.svg) ](../.. "PydanticAI") PydanticAI  pydantic_ai.agent  Type to start searching [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository") [ ![logo](../../img/logo-white.svg) ](../.. "PydanticAI") PydanticAI  [ pydantic/pydantic-ai  ](https://github.com/pydantic/pydantic-ai "Go to repository")
              * [ Introduction  ](../..)
              * [ Installation  ](../../install/)
              * [ Getting Help  ](../../help/)
              * [ Contributing  ](../../contributing/)
              * [ Troubleshooting  ](../../troubleshooting/)
              * Documentation  Documentation 
                * [ Agents  ](../../agents/)
                * [ Models  ](../../models/)
                * [ Dependencies  ](../../dependencies/)
                * [ Function Tools  ](../../tools/)
                * [ Common Tools  ](../../common_tools/)
                * [ Results  ](../../results/)
                * [ Messages and chat history  ](../../message-history/)
                * [ Testing and Evals  ](../../testing-evals/)
                * [ Debugging and Monitoring  ](../../logfire/)
                * [ Multi-agent Applications  ](../../multi-agent-applications/)
                * [ Graphs  ](../../graph/)
                * [ Image, Audio & Document Input  ](../../input/)
                * [ MCP  ](../../mcp/) MCP 
                  * [ Client  ](../../mcp/client/)
                  * [ Server  ](../../mcp/server/)
                  * [ MCP Run Python  ](../../mcp/run-python/)
                * [ Command Line Interface (CLI)  ](../../cli/)
              * [ Examples  ](../../examples/) Examples 
                * [ Pydantic Model  ](../../examples/pydantic-model/)
                * [ Weather agent  ](../../examples/weather-agent/)
                * [ Bank support  ](../../examples/bank-support/)
                * [ SQL Generation  ](../../examples/sql-gen/)
                * [ Flight booking  ](../../examples/flight-booking/)
                * [ RAG  ](../../examples/rag/)
                * [ Stream markdown  ](../../examples/stream-markdown/)
                * [ Stream whales  ](../../examples/stream-whales/)
                * [ Chat App with FastAPI  ](../../examples/chat-app/)
                * [ Question Graph  ](../../examples/question-graph/)
              * API Reference  API Reference 
                * pydantic_ai.agent  [ pydantic_ai.agent  ](./) Table of contents 
                  * agent 
                  * Agent 
                    * model 
                    * __init__ 
                    * end_strategy 
                    * name 
                    * model_settings 
                    * result_type 
                    * instrument 
                    * instrument_all 
                    * run 
                    * iter 
                    * run_sync 
                    * run_stream 
                    * override 
                    * system_prompt 
                    * result_validator 
                    * tool 
                    * tool_plain 
                    * is_model_request_node 
                    * is_call_tools_node 
                    * is_user_prompt_node 
                    * is_end_node 
                    * run_mcp_servers 
                  * AgentRun 
                    * ctx 
                    * next_node 
                    * result 
                    * __aiter__ 
                    * __anext__ 
                    * next 
                    * usage 
                  * AgentRunResult 
                    * all_messages 
                    * all_messages_json 
                    * new_messages 
                    * new_messages_json 
                    * usage 
                  * EndStrategy 
                  * RunResultDataT 
                  * capture_run_messages 
                  * InstrumentationSettings 
                    * __init__ 
                * [ pydantic_ai.tools  ](../tools/)
                * [ pydantic_ai.common_tools  ](../common_tools/)
                * [ pydantic_ai.result  ](../result/)
                * [ pydantic_ai.messages  ](../messages/)
                * [ pydantic_ai.exceptions  ](../exceptions/)
                * [ pydantic_ai.settings  ](../settings/)
                * [ pydantic_ai.usage  ](../usage/)
                * [ pydantic_ai.mcp  ](../mcp/)
                * [ pydantic_ai.format_as_xml  ](../format_as_xml/)
                * [ pydantic_ai.models  ](../models/base/)
                * [ pydantic_ai.models.openai  ](../models/openai/)
                * [ pydantic_ai.models.anthropic  ](../models/anthropic/)
                * [ pydantic_ai.models.bedrock  ](../models/bedrock/)
                * [ pydantic_ai.models.cohere  ](../models/cohere/)
                * [ pydantic_ai.models.gemini  ](../models/gemini/)
                * [ pydantic_ai.models.vertexai  ](../models/vertexai/)
                * [ pydantic_ai.models.gr', '{"source": "pydantic_ai_docs", "url_path": "/api/agent/", "chunk_size": 5000, "crawled_at": "2025-03-25T05:14:52.059651+00:00"}', '[-0.002590487,0.0072207833,0.022055438,-0.018372448,-0.0071074604,0.014016606,-0.0064664786,0.022834532,0.006218585,0.008747099,0.015893513,-0.07705946,-0.021219682,-0.030115517,0.022239586,-0.0057582115,-0.028415676,0.0008264592,-0.013272925,0.057737935,0.048502132,0.011856391,0.014165342,0.016885087,0.007925509,0.0050322376,-0.0013403955,0.050428618,0.0038033943,-0.039521303,0.04306264,-0.022126265,-0.038643055,0.004610819,0.01026279,-0.0015581877,0.0043735495,0.020553911,-0.011955549,0.015525215,0.009823665,-0.0481055,0.051193547,0.017763339,-0.06368738,-0.016077664,0.0069835135,0.023514468,0.0112826945,-0.016913418,-0.07218658,0.008392965,-0.014023689,0.024987664,-0.023882767,-0.007493466,-0.021814628,0.0038175597,-0.010631089,-0.020072289,0.008258395,-0.01333667,-0.0023195748,0.062157523,-0.038813036,-0.028472338,-0.056491382,0.013570398,-0.057737935,-0.021219682,0.015171082,0.050343625,-0.031758696,-0.047085598,-0.040399555,-0.021148855,0.03144706,0.08079911,-0.0023797774,-0.036206614,-0.01885407,0.030937107,0.005396995,0.0046001947,-0.024392718,-0.03224032,-0.04388423,-0.0055351076,-0.0072668204,-0.048728775,-0.03161704,0.0008875472,-0.027268283,0.009434118,0.09303797,0.016658442,-0.008159237,0.012592989,0.022678712,0.021262178,0.025681766,-0.04838881,-0.041136153,0.042071067,0.020936375,-0.018230796,0.023911098,-0.021417998,-0.023896933,0.014675294,-0.13315421,0.005393454,-0.020823052,0.03141873,-0.076096214,0.00070915243,0.014547806,0.018018315,0.013959944,-0.05623641,-0.034535103,0.026843322,0.025582608,-0.005414702,0.030512147,0.008315056,-0.014144094,-0.033713516,-0.039606296,-0.026446695,0.028415676,-0.0036652822,0.008506288,-0.017409205,-0.01699841,-0.017210891,-0.025129316,-0.017168395,-0.056066424,0.039691288,0.028571496,-0.02757992,-0.009497862,0.026489189,-0.041504454,0.023160335,-0.037509825,-0.013209182,-0.040002927,0.00922872,0.02757992,0.008400048,-0.041306138,-0.041731097,-0.04059787,0.022267917,0.010503601,0.035186708,0.019052384,-0.04269434,-0.020539746,0.062724136,-0.027154962,-0.0017565024,-0.013251677,-0.017904993,-0.03530003,-0.015213577,-0.0613076,-0.040881176,-0.00983783,-0.020270605,-0.024406884,0.0004643576,0.014179507,-0.04020124,-0.045612402,-0.023358649,-0.037594818,-0.042524356,-0.02481768,0.011148124,-0.03192868,-0.026234213,-0.011226034,-0.006604591,-0.0053651235,0.021049699,-0.013301256,0.056831352,0.026489189,0.029265597,0.06856026,0.039181337,0.018712416,-0.023698617,0.060344357,-0.0114526795,0.021842958,0.016984245,-0.0034740502,0.0046001947,0.044167537,0.011665159,0.0027622418,-0.04677396,0.023372814,0.02892563,-0.0019105505,-0.013712051,0.062384166,-0.069750145,0.037509825,-0.016941749,-0.035894975,-0.0068560257,-0.048502132,0.0012199901,-0.0060344357,0.03510172,-0.016021002,0.04428086,0.028514834,-0.0139032835,-0.009540358,0.02107803,0.0360083,-0.059267793,0.017210891,0.029378919,0.019009888,0.011948466,0.001516577,-0.004763096,0.010723164,-0.06340407,0.035016727,-0.005393454,0.008237147,-0.029180605,0.0029375379,0.007036634,0.0073163994,0.006101721,0.007819269,0.007029551,-0.002206252,-0.032806933,0.030115517,0.033260223,0.058247887,0.018599095,0.020143116,-0.0017423371,-0.005510318,-0.013527902,-0.02153132,-0.020851383,-0.0221121,0.0033182313,-0.012741725,0.027424103,-0.02222542,-0.023358649,-0.027537424,-0.02980388,-0.015907679,0.014972767,-0.035781655,-0.052213453,0.028599825,0.018301621,0.0588145,-0.014746121,-0.047793865,0.020185612,-0.004642691,0.039832942,-0.006597508,0.019803148,-0.016021002,0.0042673093,0.058701176,0.032976918,0.004412504,0.024378553,0.0044372934,-0.018896567,-0.0046497737,-0.0052093044,0.02010062,0.024038585,0.04269434,-0.050825246,0.023372814,-0.025129316,0.06170423,-0.0055988515,0.028019046,-0.023542799,0.069410175,0.025582608,-0.0036015383,-0.02025644,0.002222188,0.010206129,0.0028011964,-0.011884722,0.053290017,-0.037113197,-0.033401877,0.038019776,-0.017225057,-0.038019776,0.007790938,-0.02718329,0.058191225,-0.035328362,0.053714976,-0.008187568,-0.06544388,-0.050711926,0.022154596,0.012359261,-0.042835996,0.026248379,0.030257171,0.005921113,-0.0032119914,-0.0028897298,0.010638172,-0.04606569,-0.017706677,0.0094695315,-0.012338013,-0.030568808,-0.029463911,0.02861399,-0.016800096,0.038728043,-0.042892657,-0.05102356,-0.059891067,-0.012932957,-0.011346439,0.011969714,0.024406884,0.028500669,-0.009604102,0.015851017,-0.0048410054,-0.003980461,0.024151908,0.040456217,-0.03481841,-0.01076566,-0.006048601,-0.0085133705,-0.021502988,0.038274754,-0.06793698,-0.0067710336,0.007861765,0.006604591,-0.011516423,0.01885407,-0.025228474,-0.021786297,-0.0094199525,-0.008442543,0.053941622,-0.0051066056,-0.036546584,-0.022324579,-0.01672927,-0.022310413,-0.030115517,-0.0052942964,0.009851996,0.022197092,0.046887282,0.020851383,0.018783243,0.01660178,0.044960797,0.008407131,0.0002890615,0.00713225,-0.0091012325,0.048983753,0.060174372,-0.033741847,-0.0030544018,-0.002648919,0.013301256,0.0145903025,0.0075501273,0.013740382,0.06317743,0.00010740207,-0.016984245,0.025738427,-0.026843322,0.008392965,-0.01861326,0.016488459,0.055698127,0.017678346,-0.0036581997,-0.02500183,0.044139206,-0.043714244,0.024789348,-0.02010062,-0.021602146,-0.0488421,0.0068737324,0.012890461,0.010404443,0.029662225,-0.018910732,-0.078079365,-0.036149953,0.009285382,-0.061930876,0.056434724,0.07190327,-0.043714244,0.018230796,-0.041107822,0.0072668204,0.031192083,0.03561167,-0.0015041822,-0.005814873,-0.023712782,-0.012486749,0.019165708,0.009703259,0.02049725,0.04351593,-0.055556472,-0.022763705,0.055726457,-0.028033212,-0.026446695,0.0030933565,-0.041221146,-0.0127771385,-0.020908045,0.0038990104,-0.014816948,-0.022282083,0.015397727,-0.0142220035,-0.054536566,0.076832816,-0.002381548,0.060174372,0.008322138,0.05136353,0.018655755,-0.05464989,0.024619365,-0.029860541,-0.006112345,0.013818291,-0.018259127,-0.009568688,0.0057050916,0.057312973,-0.052043468,-0.008647941,-0.041476123,-0.03187202,-0.021672973,0.0119201355,0.011757234,-0.03450677,-0.008839173,0.020426422,-0.044875804,-0.0063460735,0.026574181,-0.020143116,0.06295078,-0.018485771,-0.020624738,-0.010822321,0.023273656,-0.01365539,0.011481009,0.052836727,-0.017749174,0.018627426,-0.01065942,-0.016389301,0.011544754,-0.0385014,-0.030115517,0.0022452066,-0.0072597377,-0.012784221,0.035838317,0.0017520757,-0.019052384,0.0133650005,-0.016275978,-0.003528941,0.041221146,-0.058701176,0.0052199285,-0.0057050916,0.044365853,0.012663816,0.036291607,0.010411526,0.024916837,0.012160947,-0.0113322735,0.031362068,-0.032778602,-0.0151285855,0.015539381,0.012819635,-0.018244961,-0.022763705,-0.029520573,-0.033798505,-0.016375136,0.016318474,0.014236169,0.036688235,-0.016615946,-0.05753962,0.033430208,0.0060450598,0.0038990104,-0.056888014,-0.017621685,0.0005666137,0.017650016,-0.037056535,-0.004306264,-0.0039238,0.019038219,0.008810842,-0.007953839,0.0014590302,0.013202099,0.07348979,-0.012947123,0.023585295,-0.020780556,0.026361702,0.019279031,-0.015241908,-0.021757966,0.04028623,-0.00058564835,-0.0051632673,-0.019279031,0.02840151,0.010213211,-0.012706311,0.022395406,0.03524337,-0.025440954,-0.031305406,-0.00962535,0.015270239,-0.0083788,-0.02049725,-0.007528879,-0.008371717,-0.001174838,-0.00986616,-0.009674929,-0.01803248,-0.0076067885,-0.020228108,-0.027381606,0.00493308,0.0221121,-0.03399682,0.004139821,-0.03022884,0.010609841,0.02195628,0.02277787,0.014760287,-0.010829404,0.0026949563,-0.029973865,-0.0406262,0.0017113504,0.043827567,-0.007592623,-0.03303358,0.02158798,0.020553911,-0.033798505,-0.005719257,0.03935132,-0.0012722248,-0.0057369634,0.0016051104,-0.000514379,-0.031192083,-0.0081946505,-0.007812186,0.0022469773,0.002765783,-0.030993769,-0.016913418,0.02980388,-0.036971543,0.024959333,0.06402735,-0.028911464,-0.009320796,-0.0030632552,0.01672927,0.007252655,0.005180974,-0.013159603,-0.01073733,-0.034676757,-0.008817925,0.012855048,-0.029747218,0.04059787,0.036206614,0.015737696,-0.010517767,-0.002169068,0.0024470629,-0.030937107,-0.002680791,-0.027919888,0.026390033,0.036801558,-0.0036263275,-0.022182927,0.021063864,-0.01593601,-0.0137828775,0.009299547,0.0100573925,-0.022168761,0.004887043,0.0050216136,0.006668335,-0.004093784,0.022862863,-0.016771765,0.0021230306,-0.021488825,-0.01757919,0.019392353,-0.046660636,0.035838317,0.012415922,-0.013449992,-0.021432163,0.027820732,0.038586393,0.047057267,0.009129563,0.014484062,-0.005180974,0.021517154,0.02049725,0.036291607,0.00022232947,-0.0045435335,0.016247647,-0.040314563,-0.028047377,0.02442105,-0.013329587,-0.011806813,-0.07371644,0.028061543,0.060514342,-0.011877639,0.012380509,0.016856758,0.022409571,0.03300525,0.009037488,-0.026602512,0.0077696904,0.009632433,0.008853339,-0.0025444496,-0.020454753,0.01365539,-0.010085723,-0.11196286,-0.020242274,0.008215899,-0.0022576014,0.018089142,-0.031787027,0.0003253602,-0.014802783,0.009816582,0.027324945,-0.031758696,-0.027608251,0.0006710831,-0.0128338,0.009830748,-0.017777504,-0.0043133465,0.010666503,0.01723922,0.0023992548,-0.026205882,-0.031333737,0.026871653,-0.0067781163,0.012352178,0.0024452922,-0.036943212,-0.00790426,0.032920256,-0.021729635,0.0027356816,0.004925998,0.0030313833,-0.0010694833,-0.00039242423,-0.0008937445,-0.008548784,-0.053544994,0.044819143,-0.017933324,0.014661129,-0.0050534857,-0.015978506,-0.0044195866,-0.025710097,-0.02235291,-0.040881176,0.011431431,0.065613866,-0.01736671,-0.0033377088,8.936339e-05,0.013202099,-0.014193673,-0.0058644516,0.019760652,-0.011381852,0.0013288861,0.011020636,-0.027565755,-0.0066860416,0.0074793007,0.011544754,-0.024945168,0.034620095,-0.012819635,-0.0020823053,0.014887774,-0.0016458357,-0.033685185,-0.0053155445,-0.012352178,-0.009936987,0.008860421,0.02274954,0.019279031,-0.03561167,0.01097814,-0.04297765,0.021998776,-0.004462083,-0.014200755,-0.005510318,-0.0130958585,-0.0025355963,0.014469897,-0.011197703,0.00766345,-0.019080715,-0.043827567,-0.026177552,-0.046462324,0.0181883,0.009072902,-0.022027107,0.01678593,-0.025115151,0.0023195748,-0.09264134,-0.008839173,-0.0042141895,0.0039769197,0.04394089,-0.021786297,0.0075217965,0.056151416,-0.022423737,-0.01551105,0.008839173,0.011381852,-0.024435215,-0.0128338,0.035696663,-0.013032115,0.04011625,-0.0037538155,0.010886066,0.0031340818,-0.016757...', '2025-03-25 05:15:03.726139+00'), ('97', 'https://ai.pydantic.dev/api/agent/', '1', 'Pydantic AI Agent API Documentation', 'This document outlines the structure and components of the Pydantic AI Agent API, including links to various models, providers, and graphical representations related to the API's functionality.', 'oq  ](../models/groq/)
                * [ pydantic_ai.models.instrumented  ](../models/instrumented/)
                * [ pydantic_ai.models.mistral  ](../models/mistral/)
                * [ pydantic_ai.models.test  ](../models/test/)
                * [ pydantic_ai.models.function  ](../models/function/)
                * [ pydantic_ai.models.fallback  ](../models/fallback/)
                * [ pydantic_ai.models.wrapper  ](../models/wrapper/)
                * [ pydantic_ai.providers  ](../providers/)
                * [ pydantic_graph  ](../pydantic_graph/graph/)
                * [ pydantic_graph.nodes  ](../pydantic_graph/nodes/)
                * [ pydantic_graph.persistence  ](../pydantic_graph/persistence/)
                * [ pydantic_graph.mermaid  ](../pydantic_graph/mermaid/)
                * [ pydantic_graph.exceptions  ](../pydantic_graph/exceptions/)
Table of contents 
              * agent 
              * Agent 
                * model 
                * __init__ 
                * end_strategy 
                * name 
                * model_settings 
                * result_type 
                * instrument 
                * instrument_all 
                * run 
                * iter 
                * run_sync 
                * run_stream 
                * override 
                * system_prompt 
                * result_validator 
                * tool 
                * tool_plain 
                * is_model_request_node 
                * is_call_tools_node 
                * is_user_prompt_node 
                * is_end_node 
                * run_mcp_servers 
              * AgentRun 
                * ctx 
                * next_node 
                * result 
                * __aiter__ 
                * __anext__ 
                * next 
                * usage 
              * AgentRunResult 
                * all_messages 
                * all_messages_json 
                * new_messages 
                * new_messages_json 
                * usage 
              * EndStrategy 
              * RunResultDataT 
              * capture_run_messages 
              * InstrumentationSettings 
                * __init__ 
`pydantic_ai.agent` Agent `dataclass` Bases: `[Generic](https://docs.python.org/3/library/typing.html#typing.Generic "typing.Generic")[[AgentDepsT](../tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT"), [ResultDataT](../result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")]` Class for defining "agents" - a way to have a specific type of "conversation" with an LLM. Agents are generic in the dependency type they take [`AgentDepsT`](../tools/#pydantic_ai.tools.AgentDepsT) and the result data type they return, [`ResultDataT`](../result/#pydantic_ai.result.ResultDataT). By default, if neither generic parameter is customised, agents have type `Agent[None, str]`. Minimal usage example:
                        
                                                from pydantic_ai import Agent
                        
                        agent = Agent('openai:gpt-4o')
                        result = agent.run_sync('What is the capital of France?')
                        print(result.data)
                        #> Paris', '{"source": "pydantic_ai_docs", "url_path": "/api/agent/", "chunk_size": 3262, "crawled_at": "2025-03-25T05:14:52.044251+00:00"}', '[-0.020192096,0.039311603,0.019082092,-0.021164907,0.013070609,0.03916194,-0.001973687,-0.009285371,0.0074457573,-0.0056778574,0.013207801,-0.07118992,-0.003072778,-0.02711403,-0.01345724,-0.026265938,-0.009965092,0.015066122,0.025218293,0.049638383,0.06245955,0.015777024,0.02047895,0.0051571536,-0.014380164,0.0010702497,-0.022985814,0.04285364,-0.0018926192,-0.0035264452,0.060613703,-0.013369936,-0.00503867,0.0029823564,0.014542299,-0.02634077,0.01645051,0.020192096,-0.009191831,0.037814967,0.0038413622,-0.022125248,0.05223255,0.031728655,-0.04699433,-0.0059958925,-0.0011708048,0.041282173,-0.0088052,-0.013033194,-0.06874542,0.01447994,-0.0013586637,0.010439026,-0.014018478,0.007508117,-0.014230501,0.030755842,0.01607635,-0.028560778,-0.0056809755,-0.0045803254,0.0056622676,0.063257754,-0.027712684,-0.019418834,-0.06206045,0.023447275,-0.07158902,0.0119730765,0.043502178,0.03659272,-0.05477683,-0.018283887,-0.034622148,-0.03252686,0.031179888,0.067348555,-0.0018442904,-0.024008514,-0.0008862883,0.015777024,0.0028903757,-0.0043901284,-0.015303089,-0.02392121,-0.036667548,-0.04133206,-0.022511879,-0.058967404,-0.028485946,-0.0058025774,-0.0029246735,0.03130461,0.080518946,0.0233475,0.006984295,-0.0043090605,-0.011274648,0.022000529,0.03137944,-0.015926687,-0.044549823,0.028885048,0.022437047,-0.026964366,-0.0077014323,-0.014367692,-0.058967404,0.019955128,-0.03392372,-0.0025629867,0.005029316,0.019568497,-0.100573845,-0.0135819595,-0.004203049,0.023958625,0.029708197,-0.030381683,-0.013195328,0.03272641,0.0023369326,0.0065727206,0.040783294,0.011305828,-0.0073833973,-0.035570014,-0.013020721,-0.043053187,-0.0017195708,-0.014280389,-0.02347222,-0.014355221,-0.024120761,-0.0018879422,-0.025866834,-0.005609262,-0.026565265,0.014816683,0.011617626,-0.02136446,-0.016550284,0.03043157,0.009173123,0.03190326,-0.043552067,0.033524614,-0.027488189,0.051010296,0.025816947,0.033025738,-0.05477683,-0.025193349,-0.02895988,0.04604646,-0.005771397,0.009422562,0.053729184,-0.051683784,-0.0026908242,0.039910257,-0.02079075,-0.021701202,-0.03936149,-0.0043059424,-0.049239278,-0.015253201,-0.021489179,-0.017884783,-0.0027064143,-0.009010987,-0.03444754,0.029932693,-0.010819421,-0.054527387,-0.05537548,-0.0025271298,-0.03694193,-0.027712684,-0.0080880625,-0.013182856,-0.040209584,-0.023397388,-0.0069780587,0.0019409481,-0.019306587,-0.009416326,-0.020416591,0.039885312,0.037914746,0.028485946,0.05218266,0.04681972,-0.012933417,-0.01582691,0.037415866,-0.025155934,0.051584005,0.020828165,0.018895011,-0.01620107,0.027263694,0.014841626,0.016350733,-0.041282173,0.030930448,0.005278755,-0.0019113271,-0.026265938,0.02182592,-0.053928733,0.0011255939,-0.023310084,-0.041431837,-0.0039349017,-0.046345785,0.011661278,-0.020391647,0.025056157,-0.012715158,0.02678976,0.036642604,-0.04312802,-0.06046404,0.005478306,-0.04063363,-0.05791976,-0.01951861,0.022112776,-0.022474464,-0.015976574,0.015203313,-0.013120497,0.018907484,-0.053180415,0.014866571,-0.0009494276,0.011249703,-0.041481722,-0.032626636,-0.015066122,0.037415866,-0.008487166,-0.006242214,0.026265938,0.018932428,-0.019556025,0.044350274,0.040982846,0.03863812,0.0009884024,0.0051384456,-0.017173883,-0.036667548,0.015589944,-0.0054595983,-0.04178105,-0.061761122,0.036667548,0.013132969,0.011486671,0.019755578,-0.0062328596,-0.03137944,-0.026116274,0.0023681126,-0.026240993,-0.011318299,-0.008730369,0.009578462,-0.004904596,0.03659272,-0.048316356,-0.050212093,0.018857596,0.022886038,0.0034734395,0.0031366968,0.0073272735,-0.0048328824,0.04125723,0.048341297,0.037016764,-0.02322278,0.010407846,-0.00076663546,-0.029284151,-0.012652799,0.026166162,0.038812723,0.0409579,0.045647357,-0.025891779,-0.00011351428,-0.052581765,0.018134223,0.014741851,0.019680746,-0.023035701,0.033125512,0.02353458,0.0043340046,-0.0151409535,0.0062921015,0.003058747,-0.018745348,0.0022527468,0.026290882,-0.02985786,-0.0124407755,0.069393955,-0.01004616,-0.007520589,-0.026864592,-0.026689984,0.045821965,-0.015976574,0.03903722,-0.002531807,-0.07014228,-0.026764816,0.04292847,-0.01958097,-0.05587436,0.009029696,-0.009297842,0.024070874,-0.038862612,0.021576483,0.01511601,-0.030930448,-0.009010987,0.045073647,0.02111502,-0.0009470891,-0.040209584,0.037141483,0.024457505,0.050785802,-0.047992084,-0.028560778,-0.028485946,0.001951861,-0.024681998,0.060613703,0.031479213,0.059017293,-0.046345785,-0.0014085515,0.0015839383,-0.011031444,0.004773641,0.012340999,-0.02998258,0.0006875165,-0.019119507,-0.022037944,-0.044923984,0.036193613,-0.07707668,-0.004103273,-0.019406362,0.0028342518,-0.06136202,-0.015153426,-0.010950376,0.000488355,-0.0056622676,0.023272669,0.060813252,-0.0037353507,-0.03424799,-0.018159166,0.021289628,-0.020229511,-0.05562492,-0.011312064,-0.0076577803,0.0023712304,0.033100568,0.028660553,0.011761053,0.014492412,0.028660553,0.037740137,-0.027188862,0.019892769,-0.011941897,0.03654283,0.038513396,-0.03641811,-0.00503867,0.017261187,-0.011305828,0.022599183,-0.011287119,0.009391382,0.034921475,-0.016799724,-0.0046052695,0.0053691766,0.0019113271,0.0059428867,-0.0019191221,0.002815544,0.056024022,0.023784019,0.023260197,-0.0023229017,0.07383397,-0.002793718,0.0020313696,-0.020117264,-0.033399895,-0.034547314,-0.0118920095,-0.012920946,0.036966875,0.025592452,-0.0060925502,-0.082963444,0.015240729,0.03943632,-0.02475683,0.03325023,0.013719151,-0.00934773,-0.023172893,0.021526594,0.010825657,0.051584005,0.007832387,-0.045647357,-0.0067909798,-0.03579451,-0.007420813,0.015066122,-0.008044411,0.005796341,0.024931438,-0.034223046,0.04010981,0.06355708,-0.044923984,-0.020366702,-0.007495645,-0.040658575,0.044749375,-0.059017293,-0.02985786,0.01882018,-0.068346314,0.019144451,-0.016625116,-0.07298588,0.06340742,0.023833906,0.04637073,-0.00965953,0.05153412,0.005821285,-0.03043157,0.028461002,-0.047318596,0.022087833,0.00448055,-0.025143461,-0.038064405,0.021065133,0.041955657,-0.04387634,-0.0024554161,-0.02863561,0.016999274,-0.006454237,0.032950904,0.026939424,0.0045242016,-0.010688466,0.04484915,-0.02813673,-0.0032021746,0.030656066,-0.010127228,0.034148213,0.0002858806,-0.05143434,-0.012590439,0.034921475,0.0017678996,0.009210539,0.06450495,-0.012833642,0.09468708,0.011916953,0.004493022,0.007913455,-0.041955657,-0.036143728,0.008331266,-0.018470965,-0.00053044787,0.04859074,-0.009191831,-0.012958362,-0.0001770433,-0.00058735115,-0.014380164,0.051633894,-0.036318332,0.009590933,0.012509371,0.016462982,0.008050647,-0.010545038,-0.011592682,0.010214531,-0.029683253,0.0059522404,0.019381419,-0.032102812,-0.009821665,-0.009004751,0.015003762,0.012702687,0.0035888052,-0.03968576,-0.0005253811,-0.01671242,0.021900753,0.007027947,0.026116274,0.014267917,-0.022611655,0.03342484,0.02564234,0.04235476,-0.042130265,-0.020391647,-0.026465489,0.022125248,-0.030855617,-0.0097780125,-0.008605649,0.012515607,0.026440544,-0.01068223,0.0017491917,0.009029696,0.06330764,0.026565265,0.029458757,-0.036143728,0.024420088,0.0006095668,-0.008761548,-9.51961e-05,0.018171638,-0.006716148,-0.00390684,-0.022461992,0.016512869,-0.014729379,-0.011536558,0.038189128,0.027463246,-0.011149928,-0.021576483,0.004203049,-0.003043157,-0.00086991885,-0.00937891,-0.019368947,0.002502186,0.003320658,0.014891515,-0.01849591,-0.03382394,1.2197913e-05,-0.0032302365,-0.034921475,0.014367692,-0.0023119887,0.008524582,-0.025168406,-0.020366702,0.004199931,-0.010520094,-0.02418312,-0.0013594431,-0.023509635,-0.00069180375,-0.029882805,-0.04968827,-0.0024865961,0.022723902,0.015552528,-0.04859074,0.034622148,0.037291147,-0.008530817,-0.03330012,0.05033681,-0.0010063308,-0.017972087,0.006317045,0.017710177,-0.056473013,0.02455728,0.01164257,0.00883638,0.008792728,-0.038239013,-0.025617396,0.01741085,-0.051135015,0.024257952,0.06360697,-0.023659298,0.006136202,0.04262914,-0.002776569,0.017236242,-0.010501387,0.03240214,-0.014230501,-0.0063076913,-0.0077637923,0.04554758,-0.052581765,0.0073272735,0.008861324,0.034971364,-0.03023202,-0.03335001,-0.02998258,-0.027138975,-0.015602416,-0.035644848,-0.0025489558,0.034721922,0.001671242,-0.0034547315,0.0031522866,-0.0073335096,-0.02289851,-0.0009806075,0.018832652,-0.02678976,-0.010052396,-0.015789496,-0.0048734164,-0.0016229132,0.0007459788,0.02500627,-0.00023696714,-0.012577967,0.008811437,0.025667284,-0.036916986,0.009865317,0.03813924,-0.01161139,-0.0032614162,0.028934935,0.036268447,0.029882805,0.018645573,-0.006391877,-0.006660024,0.0043683024,0.039461266,0.031404383,-0.0043028244,0.00441819,0.005892999,-0.0077637923,-0.04160644,0.017872311,-0.010869309,-0.020890525,-0.048116803,0.03751564,0.056522902,-0.021576483,-0.008717896,0.021776034,0.018059392,0.029358983,0.00027262914,-0.0015137836,-0.038488455,0.021900753,0.031603936,-0.00021786947,-0.010320543,0.010289363,-0.011661278,-0.023310084,-0.04030936,-0.007458229,0.0001342684,0.015752079,-0.017947143,-0.007925928,-0.014854099,0.0076827244,0.009198067,-0.040084865,-0.014267917,0.014903987,-0.0024070872,0.026640097,-0.011661278,-0.0070154746,0.005337997,0.052831203,0.0001864947,-0.008967335,-0.043003302,0.026814703,-0.030631121,0.014454996,0.0145921875,-0.029882805,-0.0071090143,0.04422555,-0.031279664,-0.011761053,0.008406098,0.0024476212,0.006357579,-0.022349743,-0.015303089,-0.022474464,-0.05677234,0.03130461,-0.044375215,0.007900984,0.0028467237,-0.003616867,-0.015427808,-0.007819916,-0.011012737,-0.0017024219,-0.0054128286,0.060064934,-0.0002685368,0.012871058,-0.009578462,0.009235483,-0.033699222,-0.0042965887,0.032551803,0.015290617,0.0008987603,-0.034073383,-0.032127757,-0.0051446813,0.015303089,-0.0040596216,-0.016462982,0.040608685,0.0064667086,-0.017747592,0.006628844,-0.011187344,-0.014118253,0.010838129,-0.01742332,-0.010320543,-0.0068221595,0.029284151,0.01568972,-0.03604395,0.017385906,-0.03966082,0.01671242,0.0016010873,0.0063045733,0.017298602,-0.00049342174,0.0233475,0.017884783,0.013108025,0.00663508,-0.025330542,-0.040833183,-0.024781775,-0.05098535,0.02009232,-0.00883638,-0.006416821,0.016275901,-0.011655042,0.00666626,-0.06949373,-0.010457735,0.017385906,-0.021040188,0.036068894,-0.025742115,0.014267917,0.030855617,-0.0078760395,-0.021489179,0.0008543289,0.013519599,-0.016887028,-0.008643065,0.032052923,-0.02768774,-0.001122476,0.008574469,0.04113251,0.0064292927,-0....', '2025-03-25 05:15:03.781249+00'), ('98', 'https://ai.pydantic.dev/api/agent/', '2', 'Pydantic AI Agent Source Code', 'This document appears to provide a reference to the source code for the Pydantic AI agent, located in 'pydantic_ai_slim/pydantic_ai/agent.py'.', 'Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
                        
                                                  75
                          76
                          77
                          78
                          79
                          80
                          81
                          82
                          83
                          84
                          85
                          86
                          87
                          88
                          89
                          90
                          91
                          92
                          93
                          94
                          95
                          96
                          97
                          98
                          99
                         100
                         101
                         102
                         103
                         104
                         105
                         106
                         107
                         108
                         109
                         110
                         111
                         112
                         113
                         114
                         115
                         116
                         117
                         118
                         119
                         120
                         121
                         122
                         123
                         124
                         125
                         126
                         127
                         128
                         129
                         130
                         131
                         132
                         133
                         134
                         135
                         136
                         137
                         138
                         139
                         140
                         141
                         142
                         143
                         144
                         145
                         146
                         147
                         148
                         149
                         150
                         151
                         152
                         153
                         154
                         155
                         156
                         157
                         158
                         159
                         160
                         161
                         162
                         163
                         164
                         165
                         166
                         167
                         168
                         169
                         170
                         171
                         172
                         173
                         174
                         175
                         176
                         177
                         178
                         179
                         180
                         181
                         182
                         183
                         184
                         185
                         186
                         187
                         188
                         189
                         190
                         191
                         192
                         193
                         194
                         195
                         196
                         197
                         198
                         199
                         200
                         201
                         202
                         203
                         204
                         205
                         206
                         207
                         208
                         209
                         210
                         211
                         212
                         213
                         214
                         215
                         216
                         217
                         218
                         219
                         220
                         221
                         222
                         223
                         224
                         225
                         226
                         227
                         228
                         229
                         230
                         231
                         232
                         233
                         234
                         235
                         236
                         237
                         238
                         239
                         240
                         241
                         242', '{"source": "pydantic_ai_docs", "url_path": "/api/agent/", "chunk_size": 4975, "crawled_at": "2025-03-25T05:14:52.044822+00:00"}', '[-0.0055183596,0.00016926312,0.02343264,0.009990134,-0.012565821,0.04909437,0.017914282,0.02490058,-0.008155212,-0.004862545,0.018838538,-0.07182023,0.01110468,0.00030072342,-0.03177814,-0.011641565,0.026844237,-0.0018434176,-0.008902772,0.013367751,0.03751397,0.019327851,0.0037038252,0.013659979,-0.020632684,-0.04112945,0.01682692,-0.029114105,0.020102596,-0.029494682,0.027714128,-0.02867916,0.0060926224,-0.0040096454,-0.012654169,-0.038139205,-0.022848185,0.031615037,-0.017234681,-0.014991997,-0.00969111,-0.08416178,0.030609228,0.0417275,-0.07981233,0.05850005,-0.011893017,0.038601335,-0.00018678408,-0.012307573,-0.034170337,0.01575315,-0.00686397,0.016473528,-0.039145015,-0.0019623477,-0.001035542,0.0131027065,0.0044242023,-0.016120134,0.015209469,-0.025919981,-0.011553217,0.053416636,-0.022372464,-0.023568561,-0.04523424,0.018607475,-0.0072989142,-0.021869559,0.0132861985,0.051948696,-0.025539404,-0.047137123,-0.0282714,-0.049991447,0.03629069,0.08910928,-0.034904305,-0.033490736,-0.025362708,0.0141900685,0.0054707876,0.002259673,-0.022127807,0.005606708,-0.05545544,-0.03884599,-0.004808177,-0.041890603,0.010649347,0.021679271,-0.021026853,-0.027836455,0.087967545,0.0019470567,0.02760539,-0.018322041,0.0065071792,0.0025705907,0.019640468,-0.036127586,-0.024533594,0.07655025,-0.0054232157,0.002784665,-0.0024652525,-0.021624902,-0.014570644,0.006884358,-0.07981233,0.0067518353,-0.019219115,0.0131027065,-0.013700755,-0.031180091,0.018879315,0.030935436,0.012810478,-0.001040639,-0.042515837,-0.014896853,-0.023527786,0.023405457,0.0152774295,0.015861886,0.024968538,-0.08340063,-0.03822076,-0.022997696,-0.006945522,-0.026803462,0.011437684,-0.018797763,-0.02450641,-0.031615037,-0.0076862867,0.007869779,0.002125452,0.015209469,0.016324015,0.021624902,-0.010064891,0.04455464,-0.016459934,0.032756764,-0.06317571,-0.004872739,0.0051479773,0.06268639,0.0035475171,0.021026853,-0.040612955,-0.033273265,-0.03862852,0.022630712,-0.008807628,0.031316012,0.05964178,-0.026015125,-0.0199259,0.0315063,0.03498586,-0.00716979,-0.012871643,-0.0282714,-0.0073668743,-0.023881178,-0.05559136,-0.023976322,0.00871928,-0.014108516,0.004284884,0.022535568,0.03930812,-0.03175096,0.011498848,-0.006395045,-0.070026085,-0.055373885,-0.032593664,-0.027578207,-0.040096458,-0.02127151,-0.016310424,-0.04368475,0.023663705,0.023323905,0.005698454,0.060674775,0.039688695,0.010812451,0.020836566,-0.0074144467,0.007944535,-0.0060280603,0.040477034,-0.050290473,-0.008026088,-0.023201577,-0.022984104,-0.0121988375,0.024071466,0.035991665,0.01716672,-0.059533045,-0.0039178994,-0.04833322,0.0054266136,0.022386055,0.058391314,-0.07040666,0.040939163,-0.028624792,-0.018009426,0.021094814,-0.034306258,0.023609336,-0.0025094266,-0.038003284,-0.009364901,0.0040877997,0.022087032,-0.012015345,-0.011560013,-0.0016845609,-0.0071629942,-0.021094814,0.012803682,0.004128576,0.0039722677,-0.020483173,0.019871533,-0.013564835,0.025661733,-0.038411047,0.019096786,-0.0012096897,0.014543461,0.017017208,-0.004213526,-0.021176366,0.032620847,0.0046246843,-0.039960537,0.032811135,0.019504547,-0.007122218,0.023201577,0.027102487,0.016432751,0.0075163865,0.023351088,-0.01689488,-0.0810628,0.027374327,0.020578317,-0.036698453,-0.0117910765,0.03754116,-0.026585989,0.034550913,-0.02193752,-0.009235777,0.016609447,-0.046131313,0.021434614,0.020632684,-0.010187218,-0.016636632,0.02490058,0.024397675,0.033273265,0.002105064,-0.06828631,-0.000699989,0.013326975,0.032593664,0.0144619085,0.005130987,-0.019327851,0.04811575,0.043467276,-0.016446343,0.022793816,0.030989803,-0.009772662,0.0006490189,-0.008372684,-0.0026674338,-0.0004549079,0.027156854,0.016949248,-0.010248383,0.008780444,-0.023378273,0.023106433,-0.0018587087,0.033082973,-0.010227994,0.040748872,0.022250134,0.00034808312,-0.035692643,-0.034034416,0.01609295,0.010941575,0.021692863,0.027292775,-0.033572286,-0.01386386,0.042651758,-0.038682885,-0.0642087,-0.0119745685,-0.033545103,0.06844941,0.008794037,0.04368475,0.021230735,-0.073614374,-0.014230844,0.027809272,-0.017601665,-0.052682668,-0.00899112,-0.008365888,-0.02099967,0.014122108,-0.026871422,-0.009745478,-0.031397562,-0.01655508,0.010540611,0.012110489,-0.016935656,-0.022236543,0.014502685,-0.019151155,0.024723884,-0.07551726,-0.031886876,-0.04509832,-0.00972509,-0.029983994,0.051731225,-0.0009777759,0.039906166,0.037649892,-0.018566698,0.0053042853,0.0009386988,0.014991997,0.037867367,-0.051513754,-0.06921056,0.003561109,-0.025226787,-0.010900799,0.023921954,-0.06426307,0.008501808,0.02423457,-0.0023921954,-0.043603197,0.010003726,0.009310533,-0.056325328,0.015725967,0.027211223,0.029331578,-0.023718074,-0.03642661,-0.011267784,0.011865833,-0.044065326,-0.03854697,0.018512331,-0.012932806,0.023840401,0.020700645,0.018240489,-0.011879425,0.03465965,0.032865502,0.012042529,0.010506631,0.013524059,-0.032892685,-0.0044377944,0.029983994,-0.014529869,-0.004081004,0.021747231,-0.017778361,-0.030772332,0.0016743669,-0.0023157403,0.021108406,0.022562752,-0.017601665,0.0041795457,0.045614816,-0.02086375,-0.027972376,0.032077163,-0.0030106322,0.033273265,0.02113559,0.012321166,0.00713581,-0.009480434,0.035013042,-0.043467276,0.010778471,-0.06246892,-0.01389784,0.019355034,-0.01938222,0.036317874,0.008399867,-0.056651536,-0.013795899,0.02443845,-0.015698781,0.03963433,0.019898716,-0.020687053,0.051323466,-0.032702398,0.023310313,0.04450027,0.020048229,-0.04430998,0.028244216,-0.025294747,-0.009990134,0.034360625,-0.020048229,-0.015073549,-0.015603638,-0.06355628,-0.0340616,0.0014229146,-0.022318095,-0.028978186,0.0263957,-0.007699879,0.025525812,-0.011512441,-0.011227008,-0.018566698,-0.0052804993,0.0071833823,-0.02181519,-0.053552557,0.015630823,-0.012443493,0.042515837,0.018023018,0.04757207,-0.022331687,-0.035855748,0.017859913,-0.04314107,0.010010522,-0.001440754,-0.0145978285,0.003673243,0.016133728,0.015019181,-0.013041543,0.023079248,-0.016541487,-0.013034746,-0.033137344,0.035312068,-0.005786802,-0.0034608678,-0.0100241145,-0.0033283457,-0.05936994,0.0014713361,0.007217362,0.017873505,0.046294417,0.0024159814,0.0061028167,0.013048339,0.00837948,-0.023786034,-0.0012181847,0.06507859,-0.015861886,0.022426832,0.00095483934,0.013435711,0.015059957,-0.024180202,-0.029739339,0.010819247,0.0052329274,0.021584127,-0.013829879,0.0040844018,-0.013129891,0.015562862,0.01255223,-0.013462895,0.040477034,-0.016609447,-0.007217362,-0.011553217,-0.019164747,0.007910555,0.022807408,0.03128883,-0.010778471,-0.048142932,-0.0005933766,0.004648471,-0.029521866,-0.016256055,-0.029902441,-0.013571631,-0.027102487,-0.007998903,-0.06225145,0.0060790307,-0.012463882,0.012708538,-0.016106542,0.015467718,0.030446123,-0.06839504,0.029848075,0.043521646,0.025362708,-0.020822974,0.01399978,-0.020632684,0.008325112,-0.026613174,-0.023310313,0.014638605,-0.004777595,0.00044174062,0.023378273,-0.015834702,-0.019640468,0.044473086,0.027020935,0.023323905,-0.03229464,0.015984215,-0.015793927,0.008569768,0.00019920804,0.02517242,0.002764277,0.008461032,-0.009412473,0.019341443,-0.01275611,-0.0023327302,0.018403593,0.024547186,-0.027184037,0.013558039,0.004862545,-0.018974459,-0.015984215,-0.038927544,-0.013381343,-0.009854214,0.009806642,0.023364682,-0.011070699,-0.0007547818,-0.010778471,-0.019123971,-0.037785813,0.048713796,0.025036499,0.013761919,0.019667652,-0.013904636,0.030636411,-0.025797652,0.014489093,0.016228871,0.00999693,-0.006449413,-0.018621067,-0.0030548063,-0.013789103,0.015114325,-0.014162884,-0.042026524,0.035801377,0.016691,-0.032484926,-0.028380137,0.031805325,0.0054130214,-0.006466403,-0.009147429,-0.0019572508,-0.034822755,0.028624792,-0.011260988,0.019368628,0.026436478,-0.03175096,-0.011451276,0.016500711,-0.039743066,0.015440534,0.08073659,-0.038030468,0.027020935,0.01299397,-0.008257152,-0.0041761477,-0.010873616,-0.0047062365,-0.0008469527,-0.035393618,-0.03427907,0.012599802,-0.047218673,0.014217252,0.02632774,0.029032553,-0.004950893,-0.007733859,-0.008501808,0.008957141,0.006578537,-0.055727277,-0.02188315,0.012987174,0.023663705,0.0066770795,-5.829702e-05,-0.011702728,-0.027741311,0.0036664472,0.025974348,-0.030881068,-0.0025281156,-0.030554859,-0.009765866,0.02544426,0.019395811,-0.0055591357,-0.016337607,-0.022589935,0.016704591,-0.0004421654,-0.04422843,0.0091678165,0.016867695,0.004780993,-0.010744492,0.0026266577,0.010955167,0.004954291,0.010037706,-0.0064596073,0.019939492,0.058065105,0.03177814,0.04556045,-0.04131974,0.022780225,0.012022141,-0.007074646,-0.022290912,0.03359947,-0.019123971,0.007040666,-0.046212867,0.025321933,0.024003506,-0.013571631,-0.0010397895,0.010187218,-0.002161131,0.012192042,0.0044276,-0.013585223,-0.022399647,0.028787896,0.036671266,-4.6032346e-05,-0.035719827,-0.00086776546,-0.008495012,-0.018974459,-0.049773972,-0.014230844,0.017520113,0.028189847,-0.011593993,-0.027537432,-0.006622711,0.0038567355,0.007081442,-0.0052499175,-0.013748327,0.022657895,-0.023038473,-0.016582264,-0.04072169,-0.007278526,-0.008141619,0.019341443,0.01461142,-0.042787675,0.00034850786,0.0007428888,-0.0055115637,-0.016623039,-4.9775463e-05,-0.014244436,0.00054410554,0.025824837,-0.009249369,0.0029562642,-0.02443845,0.0030089333,-0.0076455106,-0.017329825,-0.014815301,-0.019409403,-0.06698147,0.04825167,-0.058663156,0.005022251,-0.024574371,-0.006476597,-0.010894003,-0.019735612,0.0017703605,0.0026436478,0.0016769153,0.033898495,-0.013041543,0.007699879,-0.004152362,0.011825057,-0.008270743,-0.007591143,0.017180312,0.019056011,0.018947275,-0.004818371,-0.035556722,-0.010642551,-0.017533705,-0.023052065,-0.016446343,0.0066804774,0.007054258,0.0039314916,0.009949358,-0.016731776,-0.016283238,0.01582111,-0.02510446,-0.011328948,0.009514414,0.047816724,0.011118271,-0.03966151,-0.026151044,-0.052084617,0.012266797,0.0038601335,-0.035910115,0.017357009,-0.009439657,0.0059974785,-0.0011468267,-0.01171632,-0.0054062256,0.009358105,-0.008325112,-0.0347412,-0.06486112,0.032349005,0.005392634,-0.0030021372,0.01171632,0.017003616,0.030473307,-0.10319061,-0.0039043075,-0.0026453468,0.007992107,0.044935215,-0.03629069,0.008060067,0.046539072,-0.018852131,0.0038329493,0.0060654385,0.034632467,-0.021230735,-0.041972157,0.0730707,-0.013225035,-0.00028564478,-0.007156198,0.026083086,0.0038941135,-0.053498186,0.0...', '2025-03-25 05:15:03.867557+00'), ('99', 'https://ai.pydantic.dev/api/agent/', '3', 'Pydantic Agent API Documentation', 'This section appears to be part of the Pydantic Agent API documentation but does not provide specific information or details regarding the API's features or functionalities.', '243
                         244
                         245
                         246
                         247
                         248
                         249
                         250
                         251
                         252
                         253
                         254
                         255
                         256
                         257
                         258
                         259
                         260
                         261
                         262
                         263
                         264
                         265
                         266
                         267
                         268
                         269
                         270
                         271
                         272
                         273
                         274
                         275
                         276
                         277
                         278
                         279
                         280
                         281
                         282
                         283
                         284
                         285
                         286
                         287
                         288
                         289
                         290
                         291
                         292
                         293
                         294
                         295
                         296
                         297
                         298
                         299
                         300
                         301
                         302
                         303
                         304
                         305
                         306
                         307
                         308
                         309
                         310
                         311
                         312
                         313
                         314
                         315
                         316
                         317
                         318
                         319
                         320
                         321
                         322
                         323
                         324
                         325
                         326
                         327
                         328
                         329
                         330
                         331
                         332
                         333
                         334
                         335
                         336
                         337
                         338
                         339
                         340
                         341
                         342
                         343
                         344
                         345
                         346
                         347
                         348
                         349
                         350
                         351
                         352
                         353
                         354
                         355
                         356
                         357
                         358
                         359
                         360
                         361
                         362
                         363
                         364
                         365
                         366
                         367
                         368
                         369
                         370
                         371
                         372
                         373
                         374
                         375
                         376
                         377
                         378
                         379
                         380
                         381
                         382
                         383
                         384
                         385
                         386
                         387
                         388
                         389
                         390
                         391
                         392
                         393
                         394
                         395
                         396
                         397
                         398
                         399
                         400
                         401
                         402
                         403
                         404
                         405
                         406
                         407
                         408
                         409
                         410
                         411
                         412
                         413
                         414
                         415', '{"source": "pydantic_ai_docs", "url_path": "/api/agent/", "chunk_size": 4991, "crawled_at": "2025-03-25T05:14:53.390404+00:00"}', '[0.014598905,-0.03307146,0.04213549,0.00028636094,-0.010396074,0.016061092,0.022583518,-0.009194171,0.008466906,-0.027391128,0.0723285,-0.003615277,-0.0072573475,0.012241033,0.057966918,-0.014162546,0.054874122,-0.008612359,-0.017178785,0.059161164,0.022124194,0.002055483,-0.023624657,-0.029963354,-0.008420973,-0.028585376,0.0019483069,-0.012753947,0.0644281,-0.07024623,0.018418964,-0.045105793,0.004581775,-0.008773123,-0.007115722,-0.019062022,0.003976996,-0.0055540144,-0.010732913,-0.00636549,-0.0002118401,-0.02970307,0.017576868,0.03717477,-0.015004643,-0.0037990073,-0.041216835,-0.032183427,-0.000557411,0.006461183,0.0155788,0.0020784494,-0.00448991,0.122364394,-0.029090634,0.006702329,-0.0789428,0.021741422,0.050280865,-0.028968148,0.044187143,-0.048504803,0.001450704,-0.014889811,-0.04026756,0.0027310746,-0.04752491,-0.0037033143,0.056680802,-0.015418036,-0.024803594,0.05374112,0.014430486,-0.0075559095,0.039226424,-0.023900252,0.03689917,-0.005316696,-0.02119023,-0.016719459,0.02296629,0.018128058,0.015104163,-0.05257749,0.0054047336,0.018464897,-0.014246755,0.015754875,-0.0053434903,-0.07024623,-0.04914786,-0.0026009323,-0.066877834,0.018219924,0.035827413,-0.04951532,0.049760297,-0.0078085386,-0.024451444,-0.006128172,0.038185284,-0.052455008,0.021588312,0.036439847,0.0052133477,0.0231194,-0.0021664868,-0.013335759,-0.017117541,0.004030584,-0.061029088,-0.0021262956,-0.033010215,0.0051521044,0.06681659,0.015425691,0.019904118,-0.0069664414,-0.0076056696,0.012554905,-0.0128305005,-0.045810092,0.019184507,-0.02013378,0.021144297,-0.016887879,0.0055961194,-0.04394217,-0.023731833,-0.02563038,0.041400567,-0.062192712,0.0062621417,-0.035337467,-0.010426695,0.011016164,-0.013067819,0.0373585,-0.0032191083,0.012156823,0.020240957,0.012064958,0.004535842,0.009416179,0.049974646,0.016137647,-0.028202605,-0.007498494,0.0044057,0.0013071647,-0.01675008,0.008964509,-0.01904671,-0.006510943,0.02742175,-0.03650109,0.011613287,0.02437489,0.0060784114,0.0359499,0.003965513,-8.205664e-05,0.023548102,0.012907055,-0.038675234,0.011888883,-0.009247759,-0.009293692,-0.07085866,0.016290756,0.027758589,-0.023823699,-0.028187294,-0.005795161,0.021726111,-0.017592179,-0.00068563945,-0.010174067,-0.012937677,0.014851535,-0.030376747,-0.017178785,-0.0015511815,0.0041990033,-0.0042372807,-0.050158378,0.004164554,-0.022537585,0.025400717,-0.01281519,-0.038185284,-0.016275445,0.024972012,0.04253357,-0.01541038,-0.062621415,0.02083808,-0.05499661,0.025339473,-0.018725181,-0.008045857,0.0045281867,0.049821537,-0.0010842002,-0.010434351,-0.026809316,-0.047555532,0.0025760522,0.025722245,-0.028416956,0.08996662,-0.023303129,-0.0129606435,0.009209482,-0.0210065,0.01459125,0.00284782,0.02599784,-0.0387671,-0.0050028237,0.012516628,0.017132852,-0.0055004265,0.0037626438,0.05037273,0.00507555,0.026196882,0.031096356,0.019245751,0.033224568,-0.00040836935,-0.012922366,-0.021144297,-0.032336537,-0.014085991,-0.03399011,0.004443977,0.00093109166,-0.0061549656,-0.019842874,-0.03435757,-0.018939534,-0.016627595,0.0020057226,-0.03236716,-0.0024210298,0.0020707939,-0.014001781,-0.023073466,0.015180718,-0.010028614,0.010250621,0.04734118,-0.044095278,-0.023915563,-0.01361901,0.04323787,-0.015203684,0.011268793,0.022369167,-0.04593258,0.016857257,-0.029335609,-0.012991264,-0.023900252,0.014078336,0.008757812,0.033683892,-0.016321376,-0.028784417,0.028707862,-0.017285962,0.07251223,0.04094124,-0.06559172,-0.05499661,-0.008673602,0.036409225,0.012623804,-0.0032746103,-0.022108883,0.0054736324,-0.00596358,-0.024635173,0.02902939,0.04256419,0.02475766,0.029412162,-0.009913782,-0.01866394,-0.04893351,-0.0085893925,0.0072496925,-0.010985542,-0.0061319997,0.021236163,0.005155932,-0.015295549,0.03971637,0.022445722,0.032152805,0.040083833,0.01976632,-0.034143217,-0.03882834,0.014912778,0.039624505,-0.0073032803,0.021328028,-0.0236859,-0.0135730775,0.009033407,-0.041737404,-0.027835144,-0.009155895,-0.035337467,0.07183856,0.0061434824,0.02634999,0.0044554602,0.023058156,-0.01095492,0.036562335,0.03097387,0.015326171,0.031448506,-0.033224568,0.018541452,0.05389423,-0.028769106,-0.039195802,-0.069572546,-0.009446801,0.03521498,0.0051521044,-0.042227354,0.028707862,0.0143309655,0.010595115,-0.032428402,-0.03613363,-0.010931954,-0.0104113845,-0.045901958,-0.0108477445,-0.017944328,-0.024956701,-0.010464973,0.05965111,-0.030009286,-0.014078336,0.017913707,-0.004091827,0.027666723,0.031632237,-0.026962426,0.033377673,-0.040114455,-0.008153033,0.033837,-0.019597901,0.05074019,0.016351998,-0.01547928,-0.028309781,0.023058156,-0.005014307,0.004206659,0.04005321,-0.022017017,0.0105721485,0.0038449396,-0.029948043,0.021971084,-0.0108477445,0.029151877,-0.03634798,-0.005266936,0.04185989,0.051107652,-0.02422178,-0.0022105055,0.037389122,-0.0069243363,0.0775342,-0.011643909,0.0009894643,0.019965362,-0.012884089,-0.04911724,0.013511834,0.0224151,0.02722271,-0.009025752,0.0190314,-0.027467683,0.038369015,0.078575335,0.0072190706,-0.004298524,-0.026334679,-0.00014808473,0.017576868,-0.007869782,-0.041339323,0.004252591,0.0016210373,0.00079042313,0.03827715,0.008642981,-0.017148163,0.010350142,0.044738334,-0.019659145,-0.00043827336,-0.020363444,-0.01795964,0.018480208,-0.012807534,0.006323385,0.015877362,-0.028309781,-0.059375517,0.013220928,-0.021833286,0.03346954,0.033530783,-0.01817399,0.026181571,-0.08604703,0.0022009362,0.055272207,-0.008949198,0.06357069,0.014307999,0.024145227,-0.005990374,-0.00413776,0.03772596,-0.012891744,-0.02899877,-0.0263653,-0.032612134,-0.034112595,-0.088190556,0.017530935,-0.0131214075,0.0034621682,0.0016593145,0.023793077,-0.0054238723,-0.006798022,-0.016596973,0.0008042986,-0.021925151,0.027207399,-0.001007646,-0.03209156,0.015448658,-0.0038200596,-0.027727967,-0.005079378,0.017071608,0.0025186364,0.016443864,0.0062353476,-0.020562485,-0.036929794,0.07428829,-0.022399789,0.0033569061,-0.017684044,-0.009393212,-0.044401493,0.022935668,-0.012991264,0.039257046,-0.010426695,0.04682061,-0.021603623,-0.01976632,-0.08053512,-0.006824816,0.0031750896,-0.0029990147,0.05469039,-0.0058755428,-0.00837504,-0.018219924,0.005370284,-0.034480058,0.030545166,0.015800808,-0.019597901,-0.0047501945,0.00515976,0.009071684,-0.04734118,-0.011046786,-0.028386334,-0.02437489,-0.0069243363,-0.011797017,-0.05805878,0.074717,-0.0387671,0.022797871,0.01604578,-0.031999696,0.019858185,0.002055483,-0.0044784267,-0.04127808,-0.017990261,-0.0009516656,0.045442633,0.014338621,-6.3276915e-05,-0.045840714,0.010510906,-0.031417884,-0.0046583293,0.020899324,-0.027727967,-0.009171206,-0.017209407,-0.027207399,-0.12358926,0.003707142,-0.006369318,0.00043372795,-0.004164554,-0.0018822788,0.024910768,-0.027452372,0.016351998,0.043023515,0.027130844,0.0013416142,-0.031969074,-0.014706081,-0.0010889849,-0.003950202,-0.00711955,0.010020958,-0.019352928,0.0025186364,-0.015173063,-0.024007428,0.014797946,0.013710875,-0.0021262956,0.02296629,-0.006878404,-0.026533721,-0.021649556,0.027697345,-0.0068860594,-0.007115722,-0.025186365,0.02047062,0.007774089,0.017760597,-0.018112747,-0.009630531,0.0134276245,0.007931026,-0.060753495,0.010824778,0.0030258088,-0.023915563,1.6536926e-05,-0.016214201,-0.025079189,-0.036715444,0.01192716,-0.011858261,0.011567355,0.0057262615,-0.035337467,-0.04296227,-0.0035214978,-0.00448991,0.0018296478,-0.005221003,0.008244898,-0.0125242835,0.029442783,-0.000325595,-0.0027980597,-0.014530006,0.007854471,0.0049454076,0.003800921,0.003747333,-0.033745136,0.0046123965,-0.011092718,-0.0029224604,0.023027534,0.007441078,-0.037634093,0.0017798875,-0.02939685,0.008956853,-0.02190984,-0.020103158,-0.0046545016,-0.025691623,0.01939886,-0.009661153,0.024512688,-0.0025569135,-0.006702329,-0.0114601785,0.05257749,-0.007908059,-0.018801736,0.026258126,-0.00128994,0.0033741307,0.03686855,0.03224467,0.02347155,0.042778544,0.011697497,0.0033798723,-0.022568207,0.008681257,0.011858261,-0.024788283,-0.042074244,0.03395949,0.015295549,0.0014229531,0.008382696,0.0058793705,0.015418036,0.005871715,-0.022200746,0.00978364,0.018755803,0.021435205,0.008933887,0.035306845,0.017745286,-0.009638187,0.0153950695,-0.06424437,-0.0413087,-0.007146344,-0.015134785,-0.006656396,0.036041766,0.040665645,-0.03132602,-0.02544665,-0.044034034,-0.012409452,-0.018556762,0.008620014,0.014752014,-0.0030908799,-0.013848673,-0.04308476,-0.0026545203,-0.0013904175,0.008313797,0.012593183,0.0092018265,0.01469077,0.07637057,0.015081197,0.0203022,0.006070756,0.014223789,-0.004646846,0.0026028461,-0.029151877,0.020593107,-0.029993976,0.011108029,-0.043452222,-0.0055501866,0.021373961,-0.00054114324,0.031019803,0.006476494,0.015999848,0.03132602,-0.008290831,-0.0047080894,0.04427901,0.006652569,0.01797495,-0.018908912,-0.012715669,-0.04767802,-0.029519338,-0.07275721,-0.013795085,-0.0155558335,-0.037450362,0.008842022,-0.010510906,-0.07061369,-0.031877212,0.042441703,0.0018861066,0.017929018,0.012700358,0.020669661,0.00030382487,-0.046881855,-0.01584674,0.026533721,0.011176928,-0.031785347,0.022797871,-0.031417884,0.04072689,0.030514544,0.036562335,-0.016642906,0.007134861,0.0064879768,-0.002204764,-0.005385595,0.009592254,0.028462889,-0.0062621417,0.006625775,0.023456238,0.022889735,-0.0142391,-0.0035521195,-0.0250945,-0.008788434,0.015349138,0.021128986,-0.0026947113,-0.041247457,-0.0020995017,-0.036103006,0.007999924,0.0040344116,0.012141512,0.006675535,0.0016554868,-0.024129916,-0.020516552,0.016244823,0.031004492,-0.016673526,0.014453452,-0.04985216,0.0102659315,-0.0005497556,-0.052118167,-0.008972164,0.028416956,-0.023747144,-0.010342486,-0.022338545,0.016887879,-0.0060516177,-0.038583368,-0.03885896,0.03325519,0.013756808,-0.023042845,0.02155769,0.008038201,-0.0006310945,0.025400717,-0.029948043,0.001799026,0.025017945,-0.0046009133,-0.009523355,-0.03346954,0.005795161,0.006878404,0.008642981,-0.02722271,-0.011521422,0.048137344,0.039103936,-0.0051521044,-0.03613363,-0.0032114529,-0.01388695,0.0040688612,0.0018573987,-0.00069760106,-0.0070583066,0.013772119,-0.1335107,0.028187294,0.036194872,0.02047062,0.017775908,-0.00494158,0.0056879846,0.06791898,-0.0010985542,-0.008198965,-0.0015511815,0.009033407,0.0069664414,-0.059375517,0.044432115,0.017285962,0.018985467,-0.008206621,-0.033040836,-0.02420647,-0.020929946,-0.018572073,0.040298...', '2025-03-25 05:15:03.921272+00'), ('100', 'https://ai.pydantic.dev/api/agent/', '4', 'Pydantic API Agent', 'This document details the API for the Pydantic Agent, outlining its endpoint structure and usage for efficient integration.', '416
                         417
                         418
                         419
                         420
                         421
                         422
                         423
                         424
                         425
                         426
                         427
                         428
                         429
                         430
                         431
                         432
                         433
                         434
                         435
                         436
                         437
                         438
                         439
                         440
                         441
                         442
                         443
                         444
                         445
                         446
                         447
                         448
                         449
                         450
                         451
                         452
                         453
                         454
                         455
                         456
                         457
                         458
                         459
                         460
                         461
                         462
                         463
                         464
                         465
                         466
                         467
                         468
                         469
                         470
                         471
                         472
                         473
                         474
                         475
                         476
                         477
                         478
                         479
                         480
                         481
                         482
                         483
                         484
                         485
                         486
                         487
                         488
                         489
                         490
                         491
                         492
                         493
                         494
                         495
                         496
                         497
                         498
                         499
                         500
                         501
                         502
                         503
                         504
                         505
                         506
                         507
                         508
                         509
                         510
                         511
                         512
                         513
                         514
                         515
                         516
                         517
                         518
                         519
                         520
                         521
                         522
                         523
                         524
                         525
                         526
                         527
                         528
                         529
                         530
                         531
                         532
                         533
                         534
                         535
                         536
                         537
                         538
                         539
                         540
                         541
                         542
                         543
                         544
                         545
                         546
                         547
                         548
                         549
                         550
                         551
                         552
                         553
                         554
                         555
                         556
                         557
                         558
                         559
                         560
                         561
                         562
                         563
                         564
                         565
                         566
                         567
                         568
                         569
                         570
                         571
                         572
                         573
                         574
                         575
                         576
                         577
                         578
                         579
                         580
                         581
                         582
                         583
                         584
                         585
                         586
                         587', '{"source": "pydantic_ai_docs", "url_path": "/api/agent/", "chunk_size": 4962, "crawled_at": "2025-03-25T05:14:51.767494+00:00"}', '[0.013880299,-0.042460993,0.034244716,-0.00177815,-0.011151759,0.021629049,0.030581113,-0.009810482,0.01469273,-0.040682845,0.05141306,-0.019881556,0.01585006,0.005522229,0.03212933,-0.02008083,0.08295989,-0.027346719,-0.029554078,0.05797382,0.025553241,0.02187431,-0.016355913,-0.04037627,-0.00021759822,-0.016647162,-0.01955965,-0.03869009,0.048469916,-0.06474918,0.019023139,-0.05245542,0.00889075,-0.011580968,-0.03823022,-0.0054685776,0.021475758,-0.009756831,-0.005131342,0.018057419,0.0003161581,-0.024940087,0.024112327,0.03157749,-0.043656647,-0.0062541827,-0.037555754,-0.026871525,0.0056256982,0.007308043,0.035654973,0.033447612,-0.008538186,0.11760316,-0.04236902,-0.016892424,-0.07333335,0.01168827,0.036727995,-0.013497078,0.051903583,-0.04705966,0.012883922,-0.03326367,-0.04457638,0.00662974,-0.03639076,-0.0021038887,0.058495,-0.0015395943,-0.02092392,0.047611497,0.033324983,-0.018547943,0.031255584,-0.014937992,0.030182563,-0.011021464,-0.017520908,-0.024081668,0.020464053,-0.0110904435,0.010998471,-0.034183398,-0.011810901,0.015926706,-0.01598802,-0.012929909,0.0050393688,-0.050523985,-0.018977152,0.015942033,-0.04617058,0.020831946,0.046262555,-0.034489978,0.06189801,-0.0087451255,-0.009074696,-0.013244151,0.051719636,-0.043258097,-0.018532615,0.053405814,0.0120178405,0.014631415,0.0014179213,-0.008101312,-0.02392838,0.028097834,-0.06153012,-0.019574977,-0.0434727,-0.002092392,0.05411094,0.007618453,0.02693284,-0.009427261,-0.009580549,-0.0031941552,-0.040100347,-0.033416957,0.0041426294,-0.02365246,0.03639076,-0.0070589487,0.016877096,-0.033754192,-0.035654973,-0.046139926,0.02746935,-0.057912502,0.02175168,-0.022886015,-0.00868381,0.015466838,-0.01681578,0.045741376,0.014677402,-0.0003520852,0.017091699,-0.006963143,0.029416118,0.008952065,0.024234958,0.013658031,-0.013681024,-0.045833346,-0.0061162226,0.035348393,-0.027760599,0.012523694,0.013688689,-0.0072467276,0.013688689,-0.047488865,0.010530939,0.029998615,-0.024679495,0.052762,0.008998052,-0.0213378,0.0018940746,0.033018406,-0.035869576,0.0060127527,-0.0024526205,0.0041962806,-0.063522875,-0.007377023,0.02651896,-0.038383514,-0.027040143,0.008331246,0.020617342,-0.030059932,0.014999308,-0.00040262257,-0.0067983577,0.010140053,-0.013090862,-0.018563272,-0.0011793656,-0.008814105,-0.020709315,-0.052670028,-0.0032554707,-0.02748468,0.021705693,-0.0015855809,-0.027729942,-0.009411932,0.008331246,0.04144929,0.017428935,-0.065117076,0.0164019,-0.06333893,0.0034777394,-0.014892005,-0.009741503,0.007603124,0.038475487,-0.00977216,-0.026595604,-0.019590307,-0.034643266,0.016034007,0.023882393,-0.020847276,0.08216279,-0.030673087,-0.0010232027,-0.0025216006,-0.035563,0.024234958,0.019912213,0.028113164,-0.039149955,-0.0035869577,-0.02448022,0.009166669,-0.007288882,0.004192448,0.05509199,0.028051848,0.011029128,0.017428935,0.016585847,0.016171968,0.0017024636,-0.009971435,-0.0065301023,-0.040652186,-0.03681997,-0.015336543,-0.01196419,-0.004499026,0.014585428,-0.021904968,-0.009473247,-0.010944819,-0.0018385074,0.0007999759,-0.015620127,-0.0073808553,-0.00032142742,-0.022119572,0.00081961596,0.0105232755,0.0037383302,0.019299058,0.021935625,-0.050493326,-0.02132247,-0.009105354,0.033784848,-0.03430603,0.025767844,0.020540698,-0.03964048,0.006579921,-0.023621801,-0.0016171967,-0.047795445,0.0087451255,-0.0013978021,0.025200676,-0.017965445,-0.019452346,0.018210707,-0.007357862,0.082591996,0.023805749,-0.05895487,-0.0598746,-0.016631834,0.05251674,0.021920297,0.008568843,-0.014838355,0.0021019725,-0.036574703,-0.02926283,0.042185076,0.0478261,0.0576979,0.01695374,0.009572885,-0.027300732,-0.05837237,0.007940359,-0.011404686,-0.01598802,-0.004219274,0.01552049,0.017888801,-0.008837098,0.03872075,0.018363997,0.029032895,0.046691764,-0.0010327832,-0.05043201,-0.03154683,0.00433424,0.02185898,-0.037954304,0.015497496,-0.02187431,-0.019850899,-0.0009230859,-0.057851188,-0.04951228,0.0027170437,-0.015221576,0.05659422,0.012761291,0.03596155,0.0077909026,0.021046551,0.00047663233,0.042338364,0.030535126,0.022303518,0.041725207,-0.027331391,0.009258643,0.04932833,-0.034949843,-0.036145497,-0.06122354,-0.0018749135,0.038168907,0.021828324,-0.052332792,0.027331391,-0.002266758,0.016754465,-0.03197604,-0.022380162,-0.0154515095,-0.010883504,-0.02746935,-0.018685903,-0.016754465,-0.009227985,0.013167507,0.026197053,-0.009649529,0.006020417,0.015137267,-0.021230496,0.029722696,0.01695374,-0.029523421,0.04896044,-0.031393543,0.007499654,0.034489978,-0.010776201,0.064442605,0.01469273,0.0024679494,-0.023821078,0.028327769,0.015742758,-5.5926455e-05,0.022579439,-0.04221573,0.019360375,-0.011182417,-0.01968228,0.011458336,-0.01860926,0.038168907,-0.030979663,0.01489967,0.037801016,0.049113728,-0.014754046,-0.02584449,0.034827214,-0.0058747926,0.09013381,-0.010507946,0.0029258998,0.037310492,-0.022441478,-0.043012835,0.015083617,0.025139362,0.030121246,-0.010768537,0.01913044,-0.024786796,0.016785122,0.060242493,-0.0034298366,0.0010490702,-0.030259207,-0.004801771,0.011381692,0.0064917803,-0.023269238,0.035716288,-0.021690363,0.017812157,0.04227705,-0.0005542348,-0.0056985104,0.011220739,0.03323301,-0.009227985,-0.0013374446,-0.020678658,0.012876258,0.022502793,-0.028680332,-0.0008497947,0.026089752,-0.02651896,-0.042154416,0.017061042,-0.0012425972,0.0328038,0.03844483,0.006212028,0.038076933,-0.09062433,0.0025196844,0.041204024,-0.0020943081,0.056747507,0.010247355,0.022058256,-0.018793205,0.02270207,0.018379325,-0.00935828,-0.015198583,-0.021767007,-0.03620681,-0.045312166,-0.08516725,-0.023161937,-0.002985299,0.020985235,-0.022732727,0.020034844,-0.0063040014,-0.024280943,-0.011488995,-0.007932695,-0.03225196,0.019345045,0.0013326544,-0.018088076,0.027040143,-0.011075115,-0.027530666,-0.014646743,0.0066144112,-0.0029872153,0.0071547544,-0.017321633,-0.018501956,-0.018823864,0.06468787,-0.027929217,0.00847687,-0.016846437,-0.0086224945,-0.034520634,0.01899248,-0.00690566,0.048837807,-0.0139952665,0.030519798,-0.036942597,-0.030673087,-0.059230786,-0.003523726,0.01443214,0.0003417861,0.044085857,0.008553514,-0.0026135738,-0.023805749,0.021966282,-0.020218791,0.031761438,0.02829711,-0.019697608,-0.013136849,-0.022594767,-0.014493455,-0.052578054,0.00063998066,-0.024434233,-0.03951785,-0.021506418,-0.025921134,-0.042093102,0.07517282,-0.022932002,0.03663602,0.008492199,-0.026856195,0.025905805,0.010415973,-0.02078596,-0.023039306,-0.011657612,-0.0164019,0.042123757,0.006825183,-0.01954432,-0.028327769,0.0049129054,-0.0072697205,-0.0023510668,-0.007120264,-0.017030384,0.0035256422,-0.0069976333,-0.00064237585,-0.11754184,-0.006120055,-0.00478261,0.0075034862,-4.5507608e-05,-0.010224362,0.013435762,-0.013956944,0.008047662,0.019176427,0.014409146,0.0077870702,-0.037555754,-0.0036904276,0.011833894,-0.03366222,-0.0020291603,0.008001675,-0.017842814,0.0016152806,-0.00233957,-0.014616086,0.016171968,0.01790413,-0.0005915989,0.037279833,-0.017199002,-0.011159424,-0.009465583,0.009235649,-0.020341422,-0.022349505,-0.030167233,0.01764354,0.008239272,0.014071911,-0.02720876,-0.013336125,0.028741648,0.027515337,-0.06591418,0.0010950568,0.010569262,-0.020617342,-0.0058556315,-0.009044038,-0.01496865,-0.02762264,0.0067677,-0.02352983,0.015742758,0.007311875,-0.030427825,-0.042307705,-0.012830271,-0.0036693504,0.010921826,-0.011810901,0.002264842,-0.0009403309,0.015489832,-0.0003245411,0.011994848,-0.017015055,0.015926706,0.023836406,0.0023893889,0.020341422,-0.013297802,0.0009216488,-0.0144014815,0.007863714,0.011511988,0.0065684244,-0.033110376,-0.0022265196,-0.017520908,-0.010898833,-0.024280943,0.00031184687,-0.010132389,-0.031454857,0.023621801,0.007641446,0.03593089,-0.0051888255,-0.02746935,-0.031148281,0.04892978,-0.009534563,-0.020188134,0.0139952665,-0.004970389,0.010002093,0.03430603,0.026733564,0.024311602,0.04414717,0.031424202,0.0037134208,-0.037279833,0.0007999759,-0.003696176,-0.04402454,-0.037647728,0.023897722,0.007223734,-0.0066757267,0.0056793494,0.024112327,0.012753627,0.0040966426,-0.004380227,0.021383787,0.022916673,0.029109541,0.0022629257,0.040529557,0.023039306,-0.008553514,-0.005832638,-0.061959326,-0.035869576,0.010914162,-0.014945657,0.0016631833,0.02746935,0.032221302,-0.011220739,-0.015620127,-0.038046278,-0.007292714,-0.0014974398,0.006978472,0.02800586,-0.0075418083,0.003297625,-0.035563,0.0028358425,-0.015405523,0.015689107,0.0152905565,0.009986765,0.005637195,0.055183962,0.03105631,0.025491925,-0.015926706,0.015696771,-0.016217954,-0.002337654,-0.02130714,0.011121102,-0.011787908,0.016861767,-0.04469901,-0.021767007,0.010837518,-0.021675035,0.041878495,0.00656076,0.02009616,0.024434233,-0.01018604,-0.013987602,0.041909155,0.0041426294,0.017520908,-0.0021211335,-0.025185348,-0.03430603,-0.027377378,-0.07284283,-0.0027802754,0.0015760004,-0.039027326,-0.003224813,-0.013826649,-0.055919748,-0.030887691,0.023177264,-0.012086821,0.014677402,0.028802963,0.026917512,-0.0087451255,-0.039579164,-0.015213912,0.010193705,0.005215651,-0.028235795,0.047672812,-0.03173078,0.03104098,0.03783167,0.051167797,-0.018241366,0.015321215,-0.0021862814,-0.015896047,-0.0062886723,-0.005549054,0.022610096,-0.004341905,0.014271186,0.024802126,0.024296273,-0.010661235,-0.0061507127,-0.03525642,-0.020433396,0.00042537638,0.013681024,0.0010222446,-0.048623204,-0.0008081193,-0.017490251,0.012347411,0.017520908,0.017168345,0.012768956,0.0038149748,-0.035716288,-0.038536802,0.016325256,0.015528155,-0.009450254,0.0050853556,-0.029952629,0.006246518,-0.0007434506,-0.05834171,-0.0007228524,0.01899248,-0.023039306,0.000575791,-0.022441478,0.017965445,0.003173078,-0.045066904,-0.041081395,0.020985235,0.009319958,0.0054340875,0.00457567,0.009833476,0.021215169,0.02296266,-0.02543061,-0.004173287,0.023959037,0.0016708478,-0.009595878,-0.03826088,-0.011297383,0.022487465,0.019774254,-0.047519524,0.0019170679,0.026917512,0.037494436,-0.015298221,-0.034367345,0.01025502,-0.017199002,0.0070627807,-0.0025005233,-0.0049818857,0.014539441,0.009879462,-0.1315831,0.039027326,0.042031784,0.017030384,0.00792503,-0.010285677,0.018547943,0.069961004,-0.017827487,-0.012362741,-0.010630578,0.022119572,0.001062483,-0.053497788,0.049450964,0.03525642,0.024357589,-0.006963143,-0.028343096,-0.03675865,-0.0064457934,-0.017275646,0.04617058,-0...', '2025-03-25 05:15:03.970296+00');